const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-B8sNCr4q.js","./index.dom-C3-224fz.js"])))=>i.map(i=>d[i]);
function ob(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var I7={exports:{}},ag={},F7={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function sb(){if(jy)return Qt;jy=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function T(U,xe,Ie){this.props=U,this.context=xe,this.refs=E,this.updater=Ie||y}T.prototype.isReactComponent={},T.prototype.setState=function(U,xe){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,xe,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function D(){}D.prototype=T.prototype;function S(U,xe,Ie){this.props=U,this.context=xe,this.refs=E,this.updater=Ie||y}var R=S.prototype=new D;R.constructor=S,x(R,T.prototype),R.isPureReactComponent=!0;var L=Array.isArray,k=Object.prototype.hasOwnProperty,W={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function Y(U,xe,Ie){var Le,$e={},Fe=null,Ze=null;if(xe!=null)for(Le in xe.ref!==void 0&&(Ze=xe.ref),xe.key!==void 0&&(Fe=""+xe.key),xe)k.call(xe,Le)&&!z.hasOwnProperty(Le)&&($e[Le]=xe[Le]);var et=arguments.length-2;if(et===1)$e.children=Ie;else if(1<et){for(var Q=Array(et),Se=0;Se<et;Se++)Q[Se]=arguments[Se+2];$e.children=Q}if(U&&U.defaultProps)for(Le in et=U.defaultProps,et)$e[Le]===void 0&&($e[Le]=et[Le]);return{$$typeof:e,type:U,key:Fe,ref:Ze,props:$e,_owner:W.current}}function te(U,xe){return{$$typeof:e,type:U.type,key:xe,ref:U.ref,props:U.props,_owner:U._owner}}function se(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function me(U){var xe={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Ie){return xe[Ie]})}var ne=/\/+/g;function oe(U,xe){return typeof U=="object"&&U!==null&&U.key!=null?me(""+U.key):xe.toString(36)}function ve(U,xe,Ie,Le,$e){var Fe=typeof U;(Fe==="undefined"||Fe==="boolean")&&(U=null);var Ze=!1;if(U===null)Ze=!0;else switch(Fe){case"string":case"number":Ze=!0;break;case"object":switch(U.$$typeof){case e:case t:Ze=!0}}if(Ze)return Ze=U,$e=$e(Ze),U=Le===""?"."+oe(Ze,0):Le,L($e)?(Ie="",U!=null&&(Ie=U.replace(ne,"$&/")+"/"),ve($e,xe,Ie,"",function(Se){return Se})):$e!=null&&(se($e)&&($e=te($e,Ie+(!$e.key||Ze&&Ze.key===$e.key?"":(""+$e.key).replace(ne,"$&/")+"/")+U)),xe.push($e)),1;if(Ze=0,Le=Le===""?".":Le+":",L(U))for(var et=0;et<U.length;et++){Fe=U[et];var Q=Le+oe(Fe,et);Ze+=ve(Fe,xe,Ie,Q,$e)}else if(Q=v(U),typeof Q=="function")for(U=Q.call(U),et=0;!(Fe=U.next()).done;)Fe=Fe.value,Q=Le+oe(Fe,et++),Ze+=ve(Fe,xe,Ie,Q,$e);else if(Fe==="object")throw xe=String(U),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.");return Ze}function ge(U,xe,Ie){if(U==null)return U;var Le=[],$e=0;return ve(U,Le,"","",function(Fe){return xe.call(Ie,Fe,$e++)}),Le}function Be(U){if(U._status===-1){var xe=U._result;xe=xe(),xe.then(function(Ie){(U._status===0||U._status===-1)&&(U._status=1,U._result=Ie)},function(Ie){(U._status===0||U._status===-1)&&(U._status=2,U._result=Ie)}),U._status===-1&&(U._status=0,U._result=xe)}if(U._status===1)return U._result.default;throw U._result}var Pe={current:null},he={transition:null},ue={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:he,ReactCurrentOwner:W};function we(){throw Error("act(...) is not supported in production builds of React.")}return Qt.Children={map:ge,forEach:function(U,xe,Ie){ge(U,function(){xe.apply(this,arguments)},Ie)},count:function(U){var xe=0;return ge(U,function(){xe++}),xe},toArray:function(U){return ge(U,function(xe){return xe})||[]},only:function(U){if(!se(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Qt.Component=T,Qt.Fragment=n,Qt.Profiler=i,Qt.PureComponent=S,Qt.StrictMode=r,Qt.Suspense=c,Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Qt.act=we,Qt.cloneElement=function(U,xe,Ie){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Le=x({},U.props),$e=U.key,Fe=U.ref,Ze=U._owner;if(xe!=null){if(xe.ref!==void 0&&(Fe=xe.ref,Ze=W.current),xe.key!==void 0&&($e=""+xe.key),U.type&&U.type.defaultProps)var et=U.type.defaultProps;for(Q in xe)k.call(xe,Q)&&!z.hasOwnProperty(Q)&&(Le[Q]=xe[Q]===void 0&&et!==void 0?et[Q]:xe[Q])}var Q=arguments.length-2;if(Q===1)Le.children=Ie;else if(1<Q){et=Array(Q);for(var Se=0;Se<Q;Se++)et[Se]=arguments[Se+2];Le.children=et}return{$$typeof:e,type:U.type,key:$e,ref:Fe,props:Le,_owner:Ze}},Qt.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},Qt.createElement=Y,Qt.createFactory=function(U){var xe=Y.bind(null,U);return xe.type=U,xe},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(U){return{$$typeof:u,render:U}},Qt.isValidElement=se,Qt.lazy=function(U){return{$$typeof:d,_payload:{_status:-1,_result:U},_init:Be}},Qt.memo=function(U,xe){return{$$typeof:h,type:U,compare:xe===void 0?null:xe}},Qt.startTransition=function(U){var xe=he.transition;he.transition={};try{U()}finally{he.transition=xe}},Qt.unstable_act=we,Qt.useCallback=function(U,xe){return Pe.current.useCallback(U,xe)},Qt.useContext=function(U){return Pe.current.useContext(U)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(U){return Pe.current.useDeferredValue(U)},Qt.useEffect=function(U,xe){return Pe.current.useEffect(U,xe)},Qt.useId=function(){return Pe.current.useId()},Qt.useImperativeHandle=function(U,xe,Ie){return Pe.current.useImperativeHandle(U,xe,Ie)},Qt.useInsertionEffect=function(U,xe){return Pe.current.useInsertionEffect(U,xe)},Qt.useLayoutEffect=function(U,xe){return Pe.current.useLayoutEffect(U,xe)},Qt.useMemo=function(U,xe){return Pe.current.useMemo(U,xe)},Qt.useReducer=function(U,xe,Ie){return Pe.current.useReducer(U,xe,Ie)},Qt.useRef=function(U){return Pe.current.useRef(U)},Qt.useState=function(U){return Pe.current.useState(U)},Qt.useSyncExternalStore=function(U,xe,Ie){return Pe.current.useSyncExternalStore(U,xe,Ie)},Qt.useTransition=function(){return Pe.current.useTransition()},Qt.version="18.3.1",Qt}var $y;function y4(){return $y||($y=1,F7.exports=sb()),F7.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function ab(){if(Wy)return ag;Wy=1;var e=y4(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(u,c,h){var d,g={},v=null,y=null;h!==void 0&&(v=""+h),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(d in c)r.call(c,d)&&!o.hasOwnProperty(d)&&(g[d]=c[d]);if(u&&u.defaultProps)for(d in c=u.defaultProps,c)g[d]===void 0&&(g[d]=c[d]);return{$$typeof:t,type:u,key:v,ref:y,props:g,_owner:i.current}}return ag.Fragment=n,ag.jsx=s,ag.jsxs=s,ag}var zy;function ub(){return zy||(zy=1,I7.exports=ab()),I7.exports}var b=ub(),j=y4();const xt=vc(j),lb=ob({__proto__:null,default:xt},[j]);var em={},L7={exports:{}},lo={},_7={exports:{}},N7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function cb(){return Vy||(Vy=1,function(e){function t(he,ue){var we=he.length;he.push(ue);e:for(;0<we;){var U=we-1>>>1,xe=he[U];if(0<i(xe,ue))he[U]=ue,he[we]=xe,we=U;else break e}}function n(he){return he.length===0?null:he[0]}function r(he){if(he.length===0)return null;var ue=he[0],we=he.pop();if(we!==ue){he[0]=we;e:for(var U=0,xe=he.length,Ie=xe>>>1;U<Ie;){var Le=2*(U+1)-1,$e=he[Le],Fe=Le+1,Ze=he[Fe];if(0>i($e,we))Fe<xe&&0>i(Ze,$e)?(he[U]=Ze,he[Fe]=we,U=Fe):(he[U]=$e,he[Le]=we,U=Le);else if(Fe<xe&&0>i(Ze,we))he[U]=Ze,he[Fe]=we,U=Fe;else break e}}return ue}function i(he,ue){var we=he.sortIndex-ue.sortIndex;return we!==0?we:he.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],h=[],d=1,g=null,v=3,y=!1,x=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(he){for(var ue=n(h);ue!==null;){if(ue.callback===null)r(h);else if(ue.startTime<=he)r(h),ue.sortIndex=ue.expirationTime,t(c,ue);else break;ue=n(h)}}function L(he){if(E=!1,R(he),!x)if(n(c)!==null)x=!0,Be(k);else{var ue=n(h);ue!==null&&Pe(L,ue.startTime-he)}}function k(he,ue){x=!1,E&&(E=!1,D(Y),Y=-1),y=!0;var we=v;try{for(R(ue),g=n(c);g!==null&&(!(g.expirationTime>ue)||he&&!me());){var U=g.callback;if(typeof U=="function"){g.callback=null,v=g.priorityLevel;var xe=U(g.expirationTime<=ue);ue=e.unstable_now(),typeof xe=="function"?g.callback=xe:g===n(c)&&r(c),R(ue)}else r(c);g=n(c)}if(g!==null)var Ie=!0;else{var Le=n(h);Le!==null&&Pe(L,Le.startTime-ue),Ie=!1}return Ie}finally{g=null,v=we,y=!1}}var W=!1,z=null,Y=-1,te=5,se=-1;function me(){return!(e.unstable_now()-se<te)}function ne(){if(z!==null){var he=e.unstable_now();se=he;var ue=!0;try{ue=z(!0,he)}finally{ue?oe():(W=!1,z=null)}}else W=!1}var oe;if(typeof S=="function")oe=function(){S(ne)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ge=ve.port2;ve.port1.onmessage=ne,oe=function(){ge.postMessage(null)}}else oe=function(){T(ne,0)};function Be(he){z=he,W||(W=!0,oe())}function Pe(he,ue){Y=T(function(){he(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(he){he.callback=null},e.unstable_continueExecution=function(){x||y||(x=!0,Be(k))},e.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<he?Math.floor(1e3/he):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(he){switch(v){case 1:case 2:case 3:var ue=3;break;default:ue=v}var we=v;v=ue;try{return he()}finally{v=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(he,ue){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var we=v;v=he;try{return ue()}finally{v=we}},e.unstable_scheduleCallback=function(he,ue,we){var U=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?U+we:U):we=U,he){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=we+xe,he={id:d++,callback:ue,priorityLevel:he,startTime:we,expirationTime:xe,sortIndex:-1},we>U?(he.sortIndex=we,t(h,he),n(c)===null&&he===n(h)&&(E?(D(Y),Y=-1):E=!0,Pe(L,we-U))):(he.sortIndex=xe,t(c,he),x||y||(x=!0,Be(k))),he},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(he){var ue=v;return function(){var we=v;v=ue;try{return he.apply(this,arguments)}finally{v=we}}}}(N7)),N7}var Uy;function fb(){return Uy||(Uy=1,_7.exports=cb()),_7.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function hb(){if(Xy)return lo;Xy=1;var e=y4(),t=fb();function n(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)l+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,l){s(a,l),s(a+"Capture",l)}function s(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},g={};function v(a){return c.call(g,a)?!0:c.call(d,a)?!1:h.test(a)?g[a]=!0:(d[a]=!0,!1)}function y(a,l,m,w){if(m!==null&&m.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function x(a,l,m,w){if(l===null||typeof l>"u"||y(a,l,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function E(a,l,m,w,P,A,_){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=w,this.attributeNamespace=P,this.mustUseProperty=m,this.propertyName=a,this.type=l,this.sanitizeURL=A,this.removeEmptyString=_}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){T[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];T[l]=new E(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){T[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){T[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){T[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){T[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){T[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){T[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){T[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function S(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(D,S);T[l]=new E(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(D,S);T[l]=new E(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(D,S);T[l]=new E(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){T[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),T.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){T[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function R(a,l,m,w){var P=T.hasOwnProperty(l)?T[l]:null;(P!==null?P.type!==0:w||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(x(l,m,P,w)&&(m=null),w||P===null?v(l)&&(m===null?a.removeAttribute(l):a.setAttribute(l,""+m)):P.mustUseProperty?a[P.propertyName]=m===null?P.type===3?!1:"":m:(l=P.attributeName,w=P.attributeNamespace,m===null?a.removeAttribute(l):(P=P.type,m=P===3||P===4&&m===!0?"":""+m,w?a.setAttributeNS(w,l,m):a.setAttribute(l,m))))}var L=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),W=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),me=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),he=Symbol.iterator;function ue(a){return a===null||typeof a!="object"?null:(a=he&&a[he]||a["@@iterator"],typeof a=="function"?a:null)}var we=Object.assign,U;function xe(a){if(U===void 0)try{throw Error()}catch(m){var l=m.stack.trim().match(/\n( *(at )?)/);U=l&&l[1]||""}return`
`+U+a}var Ie=!1;function Le(a,l){if(!a||Ie)return"";Ie=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Ce){var w=Ce}Reflect.construct(a,[],l)}else{try{l.call()}catch(Ce){w=Ce}a.call(l.prototype)}else{try{throw Error()}catch(Ce){w=Ce}a()}}catch(Ce){if(Ce&&w&&typeof Ce.stack=="string"){for(var P=Ce.stack.split(`
`),A=w.stack.split(`
`),_=P.length-1,V=A.length-1;1<=_&&0<=V&&P[_]!==A[V];)V--;for(;1<=_&&0<=V;_--,V--)if(P[_]!==A[V]){if(_!==1||V!==1)do if(_--,V--,0>V||P[_]!==A[V]){var Z=`
`+P[_].replace(" at new "," at ");return a.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",a.displayName)),Z}while(1<=_&&0<=V);break}}}finally{Ie=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?xe(a):""}function $e(a){switch(a.tag){case 5:return xe(a.type);case 16:return xe("Lazy");case 13:return xe("Suspense");case 19:return xe("SuspenseList");case 0:case 2:case 15:return a=Le(a.type,!1),a;case 11:return a=Le(a.type.render,!1),a;case 1:return a=Le(a.type,!0),a;default:return""}}function Fe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case W:return"Portal";case te:return"Profiler";case Y:return"StrictMode";case oe:return"Suspense";case ve:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case me:return(a.displayName||"Context")+".Consumer";case se:return(a._context.displayName||"Context")+".Provider";case ne:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ge:return l=a.displayName||null,l!==null?l:Fe(a.type)||"Memo";case Be:l=a._payload,a=a._init;try{return Fe(a(l))}catch{}}return null}function Ze(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(l);case 8:return l===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function et(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Q(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Se(a){var l=Q(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),w=""+a[l];if(!a.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var P=m.get,A=m.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return P.call(this)},set:function(_){w=""+_,A.call(this,_)}}),Object.defineProperty(a,l,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(_){w=""+_},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Te(a){a._valueTracker||(a._valueTracker=Se(a))}function ke(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var m=l.getValue(),w="";return a&&(w=Q(a)?a.checked?"true":"false":a.value),a=w,a!==m?(l.setValue(a),!0):!1}function vt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ye(a,l){var m=l.checked;return we({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function Dt(a,l){var m=l.defaultValue==null?"":l.defaultValue,w=l.checked!=null?l.checked:l.defaultChecked;m=et(l.value!=null?l.value:m),a._wrapperState={initialChecked:w,initialValue:m,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function cn(a,l){l=l.checked,l!=null&&R(a,"checked",l,!1)}function Bt(a,l){cn(a,l);var m=et(l.value),w=l.type;if(m!=null)w==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?wn(a,l.type,m):l.hasOwnProperty("defaultValue")&&wn(a,l.type,et(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Mn(a,l,m){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var w=l.type;if(!(w!=="submit"&&w!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,m||l===a.value||(a.value=l),a.defaultValue=l}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function wn(a,l,m){(l!=="number"||vt(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var fn=Array.isArray;function _t(a,l,m,w){if(a=a.options,l){l={};for(var P=0;P<m.length;P++)l["$"+m[P]]=!0;for(m=0;m<a.length;m++)P=l.hasOwnProperty("$"+a[m].value),a[m].selected!==P&&(a[m].selected=P),P&&w&&(a[m].defaultSelected=!0)}else{for(m=""+et(m),l=null,P=0;P<a.length;P++){if(a[P].value===m){a[P].selected=!0,w&&(a[P].defaultSelected=!0);return}l!==null||a[P].disabled||(l=a[P])}l!==null&&(l.selected=!0)}}function sn(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return we({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function gr(a,l){var m=l.value;if(m==null){if(m=l.children,l=l.defaultValue,m!=null){if(l!=null)throw Error(n(92));if(fn(m)){if(1<m.length)throw Error(n(93));m=m[0]}l=m}l==null&&(l=""),m=l}a._wrapperState={initialValue:et(m)}}function zi(a,l){var m=et(l.value),w=et(l.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),l.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),w!=null&&(a.defaultValue=""+w)}function jn(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Vi(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pr(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Vi(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mn,bn=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,m,w,P){MSApp.execUnsafeLocalFunction(function(){return a(l,m,w,P)})}:a}(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(mn=mn||document.createElement("div"),mn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=mn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Ir(a,l){if(l){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=l;return}}a.textContent=l}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bs=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(a){bs.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Bi[l]=Bi[a]})});function qo(a,l,m){return l==null||typeof l=="boolean"||l===""?"":m||typeof l!="number"||l===0||Bi.hasOwnProperty(a)&&Bi[a]?(""+l).trim():l+"px"}function Po(a,l){a=a.style;for(var m in l)if(l.hasOwnProperty(m)){var w=m.indexOf("--")===0,P=qo(m,l[m],w);m==="float"&&(m="cssFloat"),w?a.setProperty(m,P):a[m]=P}}var ru=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function So(a,l){if(l){if(ru[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Ui(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sl=null;function Ac(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Xi=null,ks=null,Os=null;function Bc(a){if(a=Nr(a)){if(typeof Xi!="function")throw Error(n(280));var l=a.stateNode;l&&(l=zh(l),Xi(a.stateNode,a.type,l))}}function ch(a){ks?Os?Os.push(a):Os=[a]:ks=a}function fh(){if(ks){var a=ks,l=Os;if(Os=ks=null,Bc(a),l)for(a=0;a<l.length;a++)Bc(l[a])}}function hh(a,l){return a(l)}function Rc(){}var Mc=!1;function dh(a,l,m){if(Mc)return a(l,m);Mc=!0;try{return hh(a,l,m)}finally{Mc=!1,(ks!==null||Os!==null)&&(Rc(),fh())}}function iu(a,l){var m=a.stateNode;if(m===null)return null;var w=zh(m);if(w===null)return null;m=w[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,l,typeof m));return m}var ou=!1;if(u)try{var su={};Object.defineProperty(su,"passive",{get:function(){ou=!0}}),window.addEventListener("test",su,su),window.removeEventListener("test",su,su)}catch{ou=!1}function bc(a,l,m,w,P,A,_,V,Z){var Ce=Array.prototype.slice.call(arguments,3);try{l.apply(m,Ce)}catch(Ne){this.onError(Ne)}}var la=!1,al=null,ul=!1,kc=null,$0={onError:function(a){la=!0,al=a}};function W0(a,l,m,w,P,A,_,V,Z){la=!1,al=null,bc.apply($0,arguments)}function z0(a,l,m,w,P,A,_,V,Z){if(W0.apply(this,arguments),la){if(la){var Ce=al;la=!1,al=null}else throw Error(n(198));ul||(ul=!0,kc=Ce)}}function Is(a){var l=a,m=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(m=l.return),a=l.return;while(a)}return l.tag===3?m:null}function Oc(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function gh(a){if(Is(a)!==a)throw Error(n(188))}function V0(a){var l=a.alternate;if(!l){if(l=Is(a),l===null)throw Error(n(188));return l!==a?null:a}for(var m=a,w=l;;){var P=m.return;if(P===null)break;var A=P.alternate;if(A===null){if(w=P.return,w!==null){m=w;continue}break}if(P.child===A.child){for(A=P.child;A;){if(A===m)return gh(P),a;if(A===w)return gh(P),l;A=A.sibling}throw Error(n(188))}if(m.return!==w.return)m=P,w=A;else{for(var _=!1,V=P.child;V;){if(V===m){_=!0,m=P,w=A;break}if(V===w){_=!0,w=P,m=A;break}V=V.sibling}if(!_){for(V=A.child;V;){if(V===m){_=!0,m=A,w=P;break}if(V===w){_=!0,w=A,m=P;break}V=V.sibling}if(!_)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:l}function ph(a){return a=V0(a),a!==null?mh(a):null}function mh(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=mh(a);if(l!==null)return l;a=a.sibling}return null}var vh=t.unstable_scheduleCallback,yh=t.unstable_cancelCallback,ll=t.unstable_shouldYield,wh=t.unstable_requestPaint,Cn=t.unstable_now,Ch=t.unstable_getCurrentPriorityLevel,Zo=t.unstable_ImmediatePriority,xh=t.unstable_UserBlockingPriority,Qo=t.unstable_NormalPriority,cl=t.unstable_LowPriority,Ic=t.unstable_IdlePriority,fl=null,mi=null;function U0(a){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(fl,a,void 0,(a.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:$,H=Math.log,q=Math.LN2;function $(a){return a>>>=0,a===0?32:31-(H(a)/q|0)|0}var ie=64,le=4194304;function ee(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function De(a,l){var m=a.pendingLanes;if(m===0)return 0;var w=0,P=a.suspendedLanes,A=a.pingedLanes,_=m&268435455;if(_!==0){var V=_&~P;V!==0?w=ee(V):(A&=_,A!==0&&(w=ee(A)))}else _=m&~P,_!==0?w=ee(_):A!==0&&(w=ee(A));if(w===0)return 0;if(l!==0&&l!==w&&(l&P)===0&&(P=w&-w,A=l&-l,P>=A||P===16&&(A&4194240)!==0))return l;if((w&4)!==0&&(w|=m&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=w;0<l;)m=31-Ri(l),P=1<<m,w|=a[m],l&=~P;return w}function He(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(a,l){for(var m=a.suspendedLanes,w=a.pingedLanes,P=a.expirationTimes,A=a.pendingLanes;0<A;){var _=31-Ri(A),V=1<<_,Z=P[_];Z===-1?((V&m)===0||(V&w)!==0)&&(P[_]=He(V,l)):Z<=l&&(a.expiredLanes|=V),A&=~V}}function We(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function qe(){var a=ie;return ie<<=1,(ie&4194240)===0&&(ie=64),a}function st(a){for(var l=[],m=0;31>m;m++)l.push(a);return l}function Nt(a,l,m){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-Ri(l),a[l]=m}function an(a,l){var m=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<m;){var P=31-Ri(m),A=1<<P;l[P]=0,w[P]=-1,a[P]=-1,m&=~A}}function Jt(a,l){var m=a.entangledLanes|=l;for(a=a.entanglements;m;){var w=31-Ri(m),P=1<<w;P&l|a[w]&l&&(a[w]|=l),m&=~P}}var Et=0;function Pn(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Fr,Jo,hl,Fc,au,Lc=!1,uu=[],es=null,To=null,ca=null,dl=new Map,_c=new Map,fa=[],Nv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hp(a,l){switch(a){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":To=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":dl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(l.pointerId)}}function lu(a,l,m,w,P,A){return a===null||a.nativeEvent!==A?(a={blockedOn:l,domEventName:m,eventSystemFlags:w,nativeEvent:A,targetContainers:[P]},l!==null&&(l=Nr(l),l!==null&&Jo(l)),a):(a.eventSystemFlags|=w,l=a.targetContainers,P!==null&&l.indexOf(P)===-1&&l.push(P),a)}function Hv(a,l,m,w,P){switch(l){case"focusin":return es=lu(es,a,l,m,w,P),!0;case"dragenter":return To=lu(To,a,l,m,w,P),!0;case"mouseover":return ca=lu(ca,a,l,m,w,P),!0;case"pointerover":var A=P.pointerId;return dl.set(A,lu(dl.get(A)||null,a,l,m,w,P)),!0;case"gotpointercapture":return A=P.pointerId,_c.set(A,lu(_c.get(A)||null,a,l,m,w,P)),!0}return!1}function Gp(a){var l=is(a.target);if(l!==null){var m=Is(l);if(m!==null){if(l=m.tag,l===13){if(l=Oc(m),l!==null){a.blockedOn=l,au(a.priority,function(){hl(m)});return}}else if(l===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Eh(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var m=Th(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var w=new m.constructor(m.type,m);sl=w,m.target.dispatchEvent(w),sl=null}else return l=Nr(m),l!==null&&Jo(l),a.blockedOn=m,!1;l.shift()}return!0}function jp(a,l,m){Eh(a)&&m.delete(l)}function Gv(){Lc=!1,es!==null&&Eh(es)&&(es=null),To!==null&&Eh(To)&&(To=null),ca!==null&&Eh(ca)&&(ca=null),dl.forEach(jp),_c.forEach(jp)}function Sn(a,l){a.blockedOn===l&&(a.blockedOn=null,Lc||(Lc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gv)))}function xn(a){function l(P){return Sn(P,a)}if(0<uu.length){Sn(uu[0],a);for(var m=1;m<uu.length;m++){var w=uu[m];w.blockedOn===a&&(w.blockedOn=null)}}for(es!==null&&Sn(es,a),To!==null&&Sn(To,a),ca!==null&&Sn(ca,a),dl.forEach(l),_c.forEach(l),m=0;m<fa.length;m++)w=fa[m],w.blockedOn===a&&(w.blockedOn=null);for(;0<fa.length&&(m=fa[0],m.blockedOn===null);)Gp(m),m.blockedOn===null&&fa.shift()}var gl=L.ReactCurrentBatchConfig,Ph=!0;function jv(a,l,m,w){var P=Et,A=gl.transition;gl.transition=null;try{Et=1,X0(a,l,m,w)}finally{Et=P,gl.transition=A}}function $v(a,l,m,w){var P=Et,A=gl.transition;gl.transition=null;try{Et=4,X0(a,l,m,w)}finally{Et=P,gl.transition=A}}function X0(a,l,m,w){if(Ph){var P=Th(a,l,m,w);if(P===null)c1(a,l,w,Sh,m),Hp(a,w);else if(Hv(P,a,l,m,w))w.stopPropagation();else if(Hp(a,w),l&4&&-1<Nv.indexOf(a)){for(;P!==null;){var A=Nr(P);if(A!==null&&Fr(A),A=Th(a,l,m,w),A===null&&c1(a,l,w,Sh,m),A===P)break;P=A}P!==null&&w.stopPropagation()}else c1(a,l,w,null,m)}}var Sh=null;function Th(a,l,m,w){if(Sh=null,a=Ac(w),a=is(a),a!==null)if(l=Is(a),l===null)a=null;else if(m=l.tag,m===13){if(a=Oc(l),a!==null)return a;a=null}else if(m===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Sh=a,null}function $p(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ch()){case Zo:return 1;case xh:return 4;case Qo:case cl:return 16;case Ic:return 536870912;default:return 16}default:return 16}}var $n=null,Nc=null,ts=null;function K0(){if(ts)return ts;var a,l=Nc,m=l.length,w,P="value"in $n?$n.value:$n.textContent,A=P.length;for(a=0;a<m&&l[a]===P[a];a++);var _=m-a;for(w=1;w<=_&&l[m-w]===P[A-w];w++);return ts=P.slice(a,1<w?1-w:void 0)}function pl(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Jr(){return!0}function Y0(){return!1}function vi(a){function l(m,w,P,A,_){this._reactName=m,this._targetInst=P,this.type=w,this.nativeEvent=A,this.target=_,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(m=a[V],this[V]=m?m(A):A[V]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Jr:Y0,this.isPropagationStopped=Y0,this}return we(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),l}var cu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dh=vi(cu),ml=we({},cu,{view:0,detail:0}),Wp=vi(ml),ei,q0,Lr,Ah=we({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Lr&&(Lr&&a.type==="mousemove"?(ei=a.screenX-Lr.screenX,q0=a.screenY-Lr.screenY):q0=ei=0,Lr=a),ei)},movementY:function(a){return"movementY"in a?a.movementY:q0}}),Z0=vi(Ah),ha=we({},Ah,{dataTransfer:0}),Bh=vi(ha),Q0=we({},ml,{relatedTarget:0}),On=vi(Q0),da=we({},cu,{animationName:0,elapsedTime:0,pseudoElement:0}),J0=vi(da),Wv=we({},cu,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),e1=vi(Wv),zv=we({},cu,{data:0}),zp=vi(zv),Vv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vl(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Rh[a])?!!l[a]:!1}function t1(){return vl}var Up=we({},ml,{key:function(a){if(a.key){var l=Vv[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=pl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Vp[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t1,charCode:function(a){return a.type==="keypress"?pl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?pl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Xp=vi(Up),n1=we({},Ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=vi(n1),Kp=we({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t1}),Uv=vi(Kp),r1=we({},cu,{propertyName:0,elapsedTime:0,pseudoElement:0}),i1=vi(r1),Xv=we({},Ah,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Yp=vi(Xv),Mi=[9,13,27,32],Hc=u&&"CompositionEvent"in window,Fs=null;u&&"documentMode"in document&&(Fs=document.documentMode);var qp=u&&"TextEvent"in window&&!Fs,o1=u&&(!Hc||Fs&&8<Fs&&11>=Fs),Zp=" ",Qp=!1;function Jp(a,l){switch(a){case"keyup":return Mi.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var yl=!1;function wl(a,l){switch(a){case"compositionend":return e2(l);case"keypress":return l.which!==32?null:(Qp=!0,Zp);case"textInput":return a=l.data,a===Zp&&Qp?null:a;default:return null}}function Kv(a,l){if(yl)return a==="compositionend"||!Hc&&Jp(a,l)?(a=K0(),ts=Nc=$n=null,yl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return o1&&l.locale!=="ko"?null:l.data;default:return null}}var Yv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Yv[a.type]:l==="textarea"}function s1(a,l,m,w){ch(w),l=Gh(l,"onChange"),0<l.length&&(m=new Dh("onChange","change",null,m,w),a.push({event:m,listeners:l}))}var Ki=null,ga=null;function qv(a){a2(a,0)}function kh(a){var l=jt(a);if(ke(l))return a}function Zv(a,l){if(a==="change")return l}var fu=!1;if(u){var bi;if(u){var Oh="oninput"in document;if(!Oh){var t2=document.createElement("div");t2.setAttribute("oninput","return;"),Oh=typeof t2.oninput=="function"}bi=Oh}else bi=!1;fu=bi&&(!document.documentMode||9<document.documentMode)}function n2(){Ki&&(Ki.detachEvent("onpropertychange",r2),ga=Ki=null)}function r2(a){if(a.propertyName==="value"&&kh(ga)){var l=[];s1(l,ga,a,Ac(a)),dh(qv,l)}}function Qv(a,l,m){a==="focusin"?(n2(),Ki=l,ga=m,Ki.attachEvent("onpropertychange",r2)):a==="focusout"&&n2()}function Jv(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return kh(ga)}function Cl(a,l){if(a==="click")return kh(l)}function ae(a,l){if(a==="input"||a==="change")return kh(l)}function Ae(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ye=typeof Object.is=="function"?Object.is:Ae;function nt(a,l){if(ye(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var m=Object.keys(a),w=Object.keys(l);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var P=m[w];if(!c.call(l,P)||!ye(a[P],l[P]))return!1}return!0}function Ft(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function hn(a,l){var m=Ft(a);a=0;for(var w;m;){if(m.nodeType===3){if(w=a+m.textContent.length,a<=l&&w>=l)return{node:m,offset:l-a};a=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ft(m)}}function ar(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?ar(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function An(){for(var a=window,l=vt();l instanceof a.HTMLIFrameElement;){try{var m=typeof l.contentWindow.location.href=="string"}catch{m=!1}if(m)a=l.contentWindow;else break;l=vt(a.document)}return l}function Gc(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function e7(a){var l=An(),m=a.focusedElem,w=a.selectionRange;if(l!==m&&m&&m.ownerDocument&&ar(m.ownerDocument.documentElement,m)){if(w!==null&&Gc(m)){if(l=w.start,a=w.end,a===void 0&&(a=l),"selectionStart"in m)m.selectionStart=l,m.selectionEnd=Math.min(a,m.value.length);else if(a=(l=m.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var P=m.textContent.length,A=Math.min(w.start,P);w=w.end===void 0?A:Math.min(w.end,P),!a.extend&&A>w&&(P=w,w=A,A=P),P=hn(m,A);var _=hn(m,w);P&&_&&(a.rangeCount!==1||a.anchorNode!==P.node||a.anchorOffset!==P.offset||a.focusNode!==_.node||a.focusOffset!==_.offset)&&(l=l.createRange(),l.setStart(P.node,P.offset),a.removeAllRanges(),A>w?(a.addRange(l),a.extend(_.node,_.offset)):(l.setEnd(_.node,_.offset),a.addRange(l)))}}for(l=[],a=m;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<l.length;m++)a=l[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Yi=u&&"documentMode"in document&&11>=document.documentMode,Ls=null,a1=null,ns=null,xl=!1;function jc(a,l,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;xl||Ls==null||Ls!==vt(w)||(w=Ls,"selectionStart"in w&&Gc(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),ns&&nt(ns,w)||(ns=w,w=Gh(a1,"onSelect"),0<w.length&&(l=new Dh("onSelect","select",null,l,m),a.push({event:l,listeners:w}),l.target=Ls)))}function dn(a,l){var m={};return m[a.toLowerCase()]=l.toLowerCase(),m["Webkit"+a]="webkit"+l,m["Moz"+a]="moz"+l,m}var El={animationend:dn("Animation","AnimationEnd"),animationiteration:dn("Animation","AnimationIteration"),animationstart:dn("Animation","AnimationStart"),transitionend:dn("Transition","TransitionEnd")},Ih={},$c={};u&&($c=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Fh(a){if(Ih[a])return Ih[a];if(!El[a])return a;var l=El[a],m;for(m in l)if(l.hasOwnProperty(m)&&m in $c)return Ih[a]=l[m];return a}var i2=Fh("animationend"),o2=Fh("animationiteration"),Wc=Fh("animationstart"),_s=Fh("transitionend"),zc=new Map,u1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(a,l){zc.set(a,l),o(l,[a])}for(var Lh=0;Lh<u1.length;Lh++){var _h=u1[Lh],Nh=_h.toLowerCase(),s2=_h[0].toUpperCase()+_h.slice(1);Do(Nh,"on"+s2)}Do(i2,"onAnimationEnd"),Do(o2,"onAnimationIteration"),Do(Wc,"onAnimationStart"),Do("dblclick","onDoubleClick"),Do("focusin","onFocus"),Do("focusout","onBlur"),Do(_s,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ns));function Vc(a,l,m){var w=a.type||"unknown-event";a.currentTarget=m,z0(w,l,void 0,a),a.currentTarget=null}function a2(a,l){l=(l&4)!==0;for(var m=0;m<a.length;m++){var w=a[m],P=w.event;w=w.listeners;e:{var A=void 0;if(l)for(var _=w.length-1;0<=_;_--){var V=w[_],Z=V.instance,Ce=V.currentTarget;if(V=V.listener,Z!==A&&P.isPropagationStopped())break e;Vc(P,V,Ce),A=Z}else for(_=0;_<w.length;_++){if(V=w[_],Z=V.instance,Ce=V.currentTarget,V=V.listener,Z!==A&&P.isPropagationStopped())break e;Vc(P,V,Ce),A=Z}}}if(ul)throw a=kc,ul=!1,kc=null,a}function _n(a,l){var m=l[Wh];m===void 0&&(m=l[Wh]=new Set);var w=a+"__bubble";m.has(w)||(Hh(l,a,2,!1),m.add(w))}function l1(a,l,m){var w=0;l&&(w|=4),Hh(m,a,w,l)}var du="_reactListening"+Math.random().toString(36).slice(2);function pa(a){if(!a[du]){a[du]=!0,r.forEach(function(m){m!=="selectionchange"&&(hu.has(m)||l1(m,!1,a),l1(m,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[du]||(l[du]=!0,l1("selectionchange",!1,l))}}function Hh(a,l,m,w){switch($p(l)){case 1:var P=jv;break;case 4:P=$v;break;default:P=X0}m=P.bind(null,l,m,a),P=void 0,!ou||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(P=!0),w?P!==void 0?a.addEventListener(l,m,{capture:!0,passive:P}):a.addEventListener(l,m,!0):P!==void 0?a.addEventListener(l,m,{passive:P}):a.addEventListener(l,m,!1)}function c1(a,l,m,w,P){var A=w;if((l&1)===0&&(l&2)===0&&w!==null)e:for(;;){if(w===null)return;var _=w.tag;if(_===3||_===4){var V=w.stateNode.containerInfo;if(V===P||V.nodeType===8&&V.parentNode===P)break;if(_===4)for(_=w.return;_!==null;){var Z=_.tag;if((Z===3||Z===4)&&(Z=_.stateNode.containerInfo,Z===P||Z.nodeType===8&&Z.parentNode===P))return;_=_.return}for(;V!==null;){if(_=is(V),_===null)return;if(Z=_.tag,Z===5||Z===6){w=A=_;continue e}V=V.parentNode}}w=w.return}dh(function(){var Ce=A,Ne=Ac(m),je=[];e:{var _e=zc.get(a);if(_e!==void 0){var rt=Dh,at=a;switch(a){case"keypress":if(pl(m)===0)break e;case"keydown":case"keyup":rt=Xp;break;case"focusin":at="focus",rt=On;break;case"focusout":at="blur",rt=On;break;case"beforeblur":case"afterblur":rt=On;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=Z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Bh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Uv;break;case i2:case o2:case Wc:rt=J0;break;case _s:rt=i1;break;case"scroll":rt=Wp;break;case"wheel":rt=Yp;break;case"copy":case"cut":case"paste":rt=e1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=Mh}var ct=(l&4)!==0,ir=!ct&&a==="scroll",de=ct?_e!==null?_e+"Capture":null:_e;ct=[];for(var re=Ce,pe;re!==null;){pe=re;var Ue=pe.stateNode;if(pe.tag===5&&Ue!==null&&(pe=Ue,de!==null&&(Ue=iu(re,de),Ue!=null&&ct.push(Pl(re,Ue,pe)))),ir)break;re=re.return}0<ct.length&&(_e=new rt(_e,at,null,m,Ne),je.push({event:_e,listeners:ct}))}}if((l&7)===0){e:{if(_e=a==="mouseover"||a==="pointerover",rt=a==="mouseout"||a==="pointerout",_e&&m!==sl&&(at=m.relatedTarget||m.fromElement)&&(is(at)||at[ki]))break e;if((rt||_e)&&(_e=Ne.window===Ne?Ne:(_e=Ne.ownerDocument)?_e.defaultView||_e.parentWindow:window,rt?(at=m.relatedTarget||m.toElement,rt=Ce,at=at?is(at):null,at!==null&&(ir=Is(at),at!==ir||at.tag!==5&&at.tag!==6)&&(at=null)):(rt=null,at=Ce),rt!==at)){if(ct=Z0,Ue="onMouseLeave",de="onMouseEnter",re="mouse",(a==="pointerout"||a==="pointerover")&&(ct=Mh,Ue="onPointerLeave",de="onPointerEnter",re="pointer"),ir=rt==null?_e:jt(rt),pe=at==null?_e:jt(at),_e=new ct(Ue,re+"leave",rt,m,Ne),_e.target=ir,_e.relatedTarget=pe,Ue=null,is(Ne)===Ce&&(ct=new ct(de,re+"enter",at,m,Ne),ct.target=pe,ct.relatedTarget=ir,Ue=ct),ir=Ue,rt&&at)t:{for(ct=rt,de=at,re=0,pe=ct;pe;pe=Sl(pe))re++;for(pe=0,Ue=de;Ue;Ue=Sl(Ue))pe++;for(;0<re-pe;)ct=Sl(ct),re--;for(;0<pe-re;)de=Sl(de),pe--;for(;re--;){if(ct===de||de!==null&&ct===de.alternate)break t;ct=Sl(ct),de=Sl(de)}ct=null}else ct=null;rt!==null&&ur(je,_e,rt,ct,!1),at!==null&&ir!==null&&ur(je,ir,at,ct,!0)}}e:{if(_e=Ce?jt(Ce):window,rt=_e.nodeName&&_e.nodeName.toLowerCase(),rt==="select"||rt==="input"&&_e.type==="file")var ht=Zv;else if(bh(_e))if(fu)ht=ae;else{ht=Jv;var Pt=Qv}else(rt=_e.nodeName)&&rt.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(ht=Cl);if(ht&&(ht=ht(a,Ce))){s1(je,ht,m,Ne);break e}Pt&&Pt(a,_e,Ce),a==="focusout"&&(Pt=_e._wrapperState)&&Pt.controlled&&_e.type==="number"&&wn(_e,"number",_e.value)}switch(Pt=Ce?jt(Ce):window,a){case"focusin":(bh(Pt)||Pt.contentEditable==="true")&&(Ls=Pt,a1=Ce,ns=null);break;case"focusout":ns=a1=Ls=null;break;case"mousedown":xl=!0;break;case"contextmenu":case"mouseup":case"dragend":xl=!1,jc(je,m,Ne);break;case"selectionchange":if(Yi)break;case"keydown":case"keyup":jc(je,m,Ne)}var Ct;if(Hc)e:{switch(a){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else yl?Jp(a,m)&&(Rt="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(Rt="onCompositionStart");Rt&&(o1&&m.locale!=="ko"&&(yl||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&yl&&(Ct=K0()):($n=Ne,Nc="value"in $n?$n.value:$n.textContent,yl=!0)),Pt=Gh(Ce,Rt),0<Pt.length&&(Rt=new zp(Rt,a,null,m,Ne),je.push({event:Rt,listeners:Pt}),Ct?Rt.data=Ct:(Ct=e2(m),Ct!==null&&(Rt.data=Ct)))),(Ct=qp?wl(a,m):Kv(a,m))&&(Ce=Gh(Ce,"onBeforeInput"),0<Ce.length&&(Ne=new zp("onBeforeInput","beforeinput",null,m,Ne),je.push({event:Ne,listeners:Ce}),Ne.data=Ct))}a2(je,l)})}function Pl(a,l,m){return{instance:a,listener:l,currentTarget:m}}function Gh(a,l){for(var m=l+"Capture",w=[];a!==null;){var P=a,A=P.stateNode;P.tag===5&&A!==null&&(P=A,A=iu(a,m),A!=null&&w.unshift(Pl(a,A,P)),A=iu(a,l),A!=null&&w.push(Pl(a,A,P))),a=a.return}return w}function Sl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function ur(a,l,m,w,P){for(var A=l._reactName,_=[];m!==null&&m!==w;){var V=m,Z=V.alternate,Ce=V.stateNode;if(Z!==null&&Z===w)break;V.tag===5&&Ce!==null&&(V=Ce,P?(Z=iu(m,A),Z!=null&&_.unshift(Pl(m,Z,V))):P||(Z=iu(m,A),Z!=null&&_.push(Pl(m,Z,V)))),m=m.return}_.length!==0&&a.push({event:l,listeners:_})}var _r=/\r\n?/g,t7=/\u0000|\uFFFD/g;function u2(a){return(typeof a=="string"?a:""+a).replace(_r,`
`).replace(t7,"")}function Uc(a,l,m){if(l=u2(l),u2(a)!==l&&m)throw Error(n(425))}function jh(){}var Xc=null,gu=null;function Kc(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ma=typeof setTimeout=="function"?setTimeout:void 0,Yc=typeof clearTimeout=="function"?clearTimeout:void 0,Tl=typeof Promise=="function"?Promise:void 0,$h=typeof queueMicrotask=="function"?queueMicrotask:typeof Tl<"u"?function(a){return Tl.resolve(null).then(a).catch(Dl)}:ma;function Dl(a){setTimeout(function(){throw a})}function f1(a,l){var m=l,w=0;do{var P=m.nextSibling;if(a.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(w===0){a.removeChild(P),xn(l);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=P}while(m);xn(l)}function va(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function l2(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(l===0)return a;l--}else m==="/$"&&l++}a=a.previousSibling}return null}var Al=Math.random().toString(36).slice(2),rs="__reactFiber$"+Al,ya="__reactProps$"+Al,ki="__reactContainer$"+Al,Wh="__reactEvents$"+Al,N="__reactListeners$"+Al,Bl="__reactHandles$"+Al;function is(a){var l=a[rs];if(l)return l;for(var m=a.parentNode;m;){if(l=m[ki]||m[rs]){if(m=l.alternate,l.child!==null||m!==null&&m.child!==null)for(a=l2(a);a!==null;){if(m=a[rs])return m;a=l2(a)}return l}a=m,m=a.parentNode}return null}function Nr(a){return a=a[rs]||a[ki],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function jt(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function zh(a){return a[ya]||null}var h1=[],Rl=-1;function yi(a){return{current:a}}function Nn(a){0>Rl||(a.current=h1[Rl],h1[Rl]=null,Rl--)}function In(a,l){Rl++,h1[Rl]=a.current,a.current=l}var wa={},Hr=yi(wa),wi=yi(!1),ti=wa;function Ml(a,l){var m=a.type.contextTypes;if(!m)return wa;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===l)return w.__reactInternalMemoizedMaskedChildContext;var P={},A;for(A in m)P[A]=l[A];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=P),P}function Ci(a){return a=a.childContextTypes,a!=null}function Vh(){Nn(wi),Nn(Hr)}function c2(a,l,m){if(Hr.current!==wa)throw Error(n(168));In(Hr,l),In(wi,m)}function f2(a,l,m){var w=a.stateNode;if(l=l.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var P in w)if(!(P in l))throw Error(n(108,Ze(a)||"Unknown",P));return we({},m,w)}function qi(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||wa,ti=Hr.current,In(Hr,a),In(wi,wi.current),!0}function h2(a,l,m){var w=a.stateNode;if(!w)throw Error(n(169));m?(a=f2(a,l,ti),w.__reactInternalMemoizedMergedChildContext=a,Nn(wi),Nn(Hr),In(Hr,a)):Nn(wi),In(wi,m)}var Hs=null,Uh=!1,d1=!1;function d2(a){Hs===null?Hs=[a]:Hs.push(a)}function pu(a){Uh=!0,d2(a)}function Ca(){if(!d1&&Hs!==null){d1=!0;var a=0,l=Et;try{var m=Hs;for(Et=1;a<m.length;a++){var w=m[a];do w=w(!0);while(w!==null)}Hs=null,Uh=!1}catch(P){throw Hs!==null&&(Hs=Hs.slice(a+1)),vh(Zo,Ca),P}finally{Et=l,d1=!1}}return null}var bl=[],Gr=0,Xh=null,Kh=0,Zi=[],Qi=0,mu=null,os=1,ss="";function vu(a,l){bl[Gr++]=Kh,bl[Gr++]=Xh,Xh=a,Kh=l}function g2(a,l,m){Zi[Qi++]=os,Zi[Qi++]=ss,Zi[Qi++]=mu,mu=a;var w=os;a=ss;var P=32-Ri(w)-1;w&=~(1<<P),m+=1;var A=32-Ri(l)+P;if(30<A){var _=P-P%5;A=(w&(1<<_)-1).toString(32),w>>=_,P-=_,os=1<<32-Ri(l)+P|m<<P|w,ss=A+a}else os=1<<A|m<<P|w,ss=a}function qc(a){a.return!==null&&(vu(a,1),g2(a,1,0))}function yu(a){for(;a===Xh;)Xh=bl[--Gr],bl[Gr]=null,Kh=bl[--Gr],bl[Gr]=null;for(;a===mu;)mu=Zi[--Qi],Zi[Qi]=null,ss=Zi[--Qi],Zi[Qi]=null,os=Zi[--Qi],Zi[Qi]=null}var jr=null,Oi=null,Hn=!1,Ao=null;function as(a,l){var m=oo(5,null,null,0);m.elementType="DELETED",m.stateNode=l,m.return=a,l=a.deletions,l===null?(a.deletions=[m],a.flags|=16):l.push(m)}function Yh(a,l){switch(a.tag){case 5:var m=a.type;return l=l.nodeType!==1||m.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,jr=a,Oi=va(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,jr=a,Oi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(m=mu!==null?{id:os,overflow:ss}:null,a.memoizedState={dehydrated:l,treeContext:m,retryLane:1073741824},m=oo(18,null,null,0),m.stateNode=l,m.return=a,a.child=m,jr=a,Oi=null,!0):!1;default:return!1}}function Gs(a){return(a.mode&1)!==0&&(a.flags&128)===0}function xi(a){if(Hn){var l=Oi;if(l){var m=l;if(!Yh(a,l)){if(Gs(a))throw Error(n(418));l=va(m.nextSibling);var w=jr;l&&Yh(a,l)?as(w,m):(a.flags=a.flags&-4097|2,Hn=!1,jr=a)}}else{if(Gs(a))throw Error(n(418));a.flags=a.flags&-4097|2,Hn=!1,jr=a}}}function p2(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;jr=a}function Zc(a){if(a!==jr)return!1;if(!Hn)return p2(a),Hn=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Kc(a.type,a.memoizedProps)),l&&(l=Oi)){if(Gs(a))throw g1(),Error(n(418));for(;l;)as(a,l),l=va(l.nextSibling)}if(p2(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(l===0){Oi=va(a.nextSibling);break e}l--}else m!=="$"&&m!=="$!"&&m!=="$?"||l++}a=a.nextSibling}Oi=null}}else Oi=jr?va(a.stateNode.nextSibling):null;return!0}function g1(){for(var a=Oi;a;)a=va(a.nextSibling)}function us(){Oi=jr=null,Hn=!1}function ls(a){Ao===null?Ao=[a]:Ao.push(a)}var m2=L.ReactCurrentBatchConfig;function Qc(a,l,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,a));var P=w,A=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===A?l.ref:(l=function(_){var V=P.refs;_===null?delete V[A]:V[A]=_},l._stringRef=A,l)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function wu(a,l){throw a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function v2(a){var l=a._init;return l(a._payload)}function p1(a){function l(de,re){if(a){var pe=de.deletions;pe===null?(de.deletions=[re],de.flags|=16):pe.push(re)}}function m(de,re){if(!a)return null;for(;re!==null;)l(de,re),re=re.sibling;return null}function w(de,re){for(de=new Map;re!==null;)re.key!==null?de.set(re.key,re):de.set(re.index,re),re=re.sibling;return de}function P(de,re){return de=Io(de,re),de.index=0,de.sibling=null,de}function A(de,re,pe){return de.index=pe,a?(pe=de.alternate,pe!==null?(pe=pe.index,pe<re?(de.flags|=2,re):pe):(de.flags|=2,re)):(de.flags|=1048576,re)}function _(de){return a&&de.alternate===null&&(de.flags|=2),de}function V(de,re,pe,Ue){return re===null||re.tag!==6?(re=tg(pe,de.mode,Ue),re.return=de,re):(re=P(re,pe),re.return=de,re)}function Z(de,re,pe,Ue){var ht=pe.type;return ht===z?Ne(de,re,pe.props.children,Ue,pe.key):re!==null&&(re.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Be&&v2(ht)===re.type)?(Ue=P(re,pe.props),Ue.ref=Qc(de,re,pe),Ue.return=de,Ue):(Ue=Md(pe.type,pe.key,pe.props,null,de.mode,Ue),Ue.ref=Qc(de,re,pe),Ue.return=de,Ue)}function Ce(de,re,pe,Ue){return re===null||re.tag!==4||re.stateNode.containerInfo!==pe.containerInfo||re.stateNode.implementation!==pe.implementation?(re=ng(pe,de.mode,Ue),re.return=de,re):(re=P(re,pe.children||[]),re.return=de,re)}function Ne(de,re,pe,Ue,ht){return re===null||re.tag!==7?(re=Mu(pe,de.mode,Ue,ht),re.return=de,re):(re=P(re,pe),re.return=de,re)}function je(de,re,pe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=tg(""+re,de.mode,pe),re.return=de,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case k:return pe=Md(re.type,re.key,re.props,null,de.mode,pe),pe.ref=Qc(de,null,re),pe.return=de,pe;case W:return re=ng(re,de.mode,pe),re.return=de,re;case Be:var Ue=re._init;return je(de,Ue(re._payload),pe)}if(fn(re)||ue(re))return re=Mu(re,de.mode,pe,null),re.return=de,re;wu(de,re)}return null}function _e(de,re,pe,Ue){var ht=re!==null?re.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return ht!==null?null:V(de,re,""+pe,Ue);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case k:return pe.key===ht?Z(de,re,pe,Ue):null;case W:return pe.key===ht?Ce(de,re,pe,Ue):null;case Be:return ht=pe._init,_e(de,re,ht(pe._payload),Ue)}if(fn(pe)||ue(pe))return ht!==null?null:Ne(de,re,pe,Ue,null);wu(de,pe)}return null}function rt(de,re,pe,Ue,ht){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return de=de.get(pe)||null,V(re,de,""+Ue,ht);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case k:return de=de.get(Ue.key===null?pe:Ue.key)||null,Z(re,de,Ue,ht);case W:return de=de.get(Ue.key===null?pe:Ue.key)||null,Ce(re,de,Ue,ht);case Be:var Pt=Ue._init;return rt(de,re,pe,Pt(Ue._payload),ht)}if(fn(Ue)||ue(Ue))return de=de.get(pe)||null,Ne(re,de,Ue,ht,null);wu(re,Ue)}return null}function at(de,re,pe,Ue){for(var ht=null,Pt=null,Ct=re,Rt=re=0,Er=null;Ct!==null&&Rt<pe.length;Rt++){Ct.index>Rt?(Er=Ct,Ct=null):Er=Ct.sibling;var gn=_e(de,Ct,pe[Rt],Ue);if(gn===null){Ct===null&&(Ct=Er);break}a&&Ct&&gn.alternate===null&&l(de,Ct),re=A(gn,re,Rt),Pt===null?ht=gn:Pt.sibling=gn,Pt=gn,Ct=Er}if(Rt===pe.length)return m(de,Ct),Hn&&vu(de,Rt),ht;if(Ct===null){for(;Rt<pe.length;Rt++)Ct=je(de,pe[Rt],Ue),Ct!==null&&(re=A(Ct,re,Rt),Pt===null?ht=Ct:Pt.sibling=Ct,Pt=Ct);return Hn&&vu(de,Rt),ht}for(Ct=w(de,Ct);Rt<pe.length;Rt++)Er=rt(Ct,de,Rt,pe[Rt],Ue),Er!==null&&(a&&Er.alternate!==null&&Ct.delete(Er.key===null?Rt:Er.key),re=A(Er,re,Rt),Pt===null?ht=Er:Pt.sibling=Er,Pt=Er);return a&&Ct.forEach(function(ka){return l(de,ka)}),Hn&&vu(de,Rt),ht}function ct(de,re,pe,Ue){var ht=ue(pe);if(typeof ht!="function")throw Error(n(150));if(pe=ht.call(pe),pe==null)throw Error(n(151));for(var Pt=ht=null,Ct=re,Rt=re=0,Er=null,gn=pe.next();Ct!==null&&!gn.done;Rt++,gn=pe.next()){Ct.index>Rt?(Er=Ct,Ct=null):Er=Ct.sibling;var ka=_e(de,Ct,gn.value,Ue);if(ka===null){Ct===null&&(Ct=Er);break}a&&Ct&&ka.alternate===null&&l(de,Ct),re=A(ka,re,Rt),Pt===null?ht=ka:Pt.sibling=ka,Pt=ka,Ct=Er}if(gn.done)return m(de,Ct),Hn&&vu(de,Rt),ht;if(Ct===null){for(;!gn.done;Rt++,gn=pe.next())gn=je(de,gn.value,Ue),gn!==null&&(re=A(gn,re,Rt),Pt===null?ht=gn:Pt.sibling=gn,Pt=gn);return Hn&&vu(de,Rt),ht}for(Ct=w(de,Ct);!gn.done;Rt++,gn=pe.next())gn=rt(Ct,de,Rt,gn.value,Ue),gn!==null&&(a&&gn.alternate!==null&&Ct.delete(gn.key===null?Rt:gn.key),re=A(gn,re,Rt),Pt===null?ht=gn:Pt.sibling=gn,Pt=gn);return a&&Ct.forEach(function(E7){return l(de,E7)}),Hn&&vu(de,Rt),ht}function ir(de,re,pe,Ue){if(typeof pe=="object"&&pe!==null&&pe.type===z&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case k:e:{for(var ht=pe.key,Pt=re;Pt!==null;){if(Pt.key===ht){if(ht=pe.type,ht===z){if(Pt.tag===7){m(de,Pt.sibling),re=P(Pt,pe.props.children),re.return=de,de=re;break e}}else if(Pt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Be&&v2(ht)===Pt.type){m(de,Pt.sibling),re=P(Pt,pe.props),re.ref=Qc(de,Pt,pe),re.return=de,de=re;break e}m(de,Pt);break}else l(de,Pt);Pt=Pt.sibling}pe.type===z?(re=Mu(pe.props.children,de.mode,Ue,pe.key),re.return=de,de=re):(Ue=Md(pe.type,pe.key,pe.props,null,de.mode,Ue),Ue.ref=Qc(de,re,pe),Ue.return=de,de=Ue)}return _(de);case W:e:{for(Pt=pe.key;re!==null;){if(re.key===Pt)if(re.tag===4&&re.stateNode.containerInfo===pe.containerInfo&&re.stateNode.implementation===pe.implementation){m(de,re.sibling),re=P(re,pe.children||[]),re.return=de,de=re;break e}else{m(de,re);break}else l(de,re);re=re.sibling}re=ng(pe,de.mode,Ue),re.return=de,de=re}return _(de);case Be:return Pt=pe._init,ir(de,re,Pt(pe._payload),Ue)}if(fn(pe))return at(de,re,pe,Ue);if(ue(pe))return ct(de,re,pe,Ue);wu(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,re!==null&&re.tag===6?(m(de,re.sibling),re=P(re,pe),re.return=de,de=re):(m(de,re),re=tg(pe,de.mode,Ue),re.return=de,de=re),_(de)):m(de,re)}return ir}var Zn=p1(!0),qh=p1(!1),Jc=yi(null),Ii=null,xa=null,kl=null;function js(){kl=xa=Ii=null}function Zh(a){var l=Jc.current;Nn(Jc),a._currentValue=l}function Dr(a,l,m){for(;a!==null;){var w=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,w!==null&&(w.childLanes|=l)):w!==null&&(w.childLanes&l)!==l&&(w.childLanes|=l),a===m)break;a=a.return}}function Ea(a,l){Ii=a,kl=xa=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(ri=!0),a.firstContext=null)}function Ji(a){var l=a._currentValue;if(kl!==a)if(a={context:a,memoizedValue:l,next:null},xa===null){if(Ii===null)throw Error(n(308));xa=a,Ii.dependencies={lanes:0,firstContext:a}}else xa=xa.next=a;return l}var Cu=null;function m1(a){Cu===null?Cu=[a]:Cu.push(a)}function Qh(a,l,m,w){var P=l.interleaved;return P===null?(m.next=m,m1(l)):(m.next=P.next,P.next=m),l.interleaved=m,$s(a,w)}function $s(a,l){a.lanes|=l;var m=a.alternate;for(m!==null&&(m.lanes|=l),m=a,a=a.return;a!==null;)a.childLanes|=l,m=a.alternate,m!==null&&(m.childLanes|=l),m=a,a=a.return;return m.tag===3?m.stateNode:null}var eo=!1;function Jh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y2(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Ws(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function to(a,l,m){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,(un&2)!==0){var P=w.pending;return P===null?l.next=l:(l.next=P.next,P.next=l),w.pending=l,$s(a,m)}return P=w.interleaved,P===null?(l.next=l,m1(w)):(l.next=P.next,P.next=l),w.interleaved=l,$s(a,m)}function ed(a,l,m){if(l=l.updateQueue,l!==null&&(l=l.shared,(m&4194240)!==0)){var w=l.lanes;w&=a.pendingLanes,m|=w,l.lanes=m,Jt(a,m)}}function w2(a,l){var m=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var P=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var _={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?P=A=_:A=A.next=_,m=m.next}while(m!==null);A===null?P=A=l:A=A.next=l}else P=A=l;m={baseState:w.baseState,firstBaseUpdate:P,lastBaseUpdate:A,shared:w.shared,effects:w.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=l:a.next=l,m.lastBaseUpdate=l}function Ol(a,l,m,w){var P=a.updateQueue;eo=!1;var A=P.firstBaseUpdate,_=P.lastBaseUpdate,V=P.shared.pending;if(V!==null){P.shared.pending=null;var Z=V,Ce=Z.next;Z.next=null,_===null?A=Ce:_.next=Ce,_=Z;var Ne=a.alternate;Ne!==null&&(Ne=Ne.updateQueue,V=Ne.lastBaseUpdate,V!==_&&(V===null?Ne.firstBaseUpdate=Ce:V.next=Ce,Ne.lastBaseUpdate=Z))}if(A!==null){var je=P.baseState;_=0,Ne=Ce=Z=null,V=A;do{var _e=V.lane,rt=V.eventTime;if((w&_e)===_e){Ne!==null&&(Ne=Ne.next={eventTime:rt,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var at=a,ct=V;switch(_e=l,rt=m,ct.tag){case 1:if(at=ct.payload,typeof at=="function"){je=at.call(rt,je,_e);break e}je=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ct.payload,_e=typeof at=="function"?at.call(rt,je,_e):at,_e==null)break e;je=we({},je,_e);break e;case 2:eo=!0}}V.callback!==null&&V.lane!==0&&(a.flags|=64,_e=P.effects,_e===null?P.effects=[V]:_e.push(V))}else rt={eventTime:rt,lane:_e,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ne===null?(Ce=Ne=rt,Z=je):Ne=Ne.next=rt,_|=_e;if(V=V.next,V===null){if(V=P.shared.pending,V===null)break;_e=V,V=_e.next,_e.next=null,P.lastBaseUpdate=_e,P.shared.pending=null}}while(!0);if(Ne===null&&(Z=je),P.baseState=Z,P.firstBaseUpdate=Ce,P.lastBaseUpdate=Ne,l=P.shared.interleaved,l!==null){P=l;do _|=P.lane,P=P.next;while(P!==l)}else A===null&&(P.shared.lanes=0);Aa|=_,a.lanes=_,a.memoizedState=je}}function v1(a,l,m){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var w=a[l],P=w.callback;if(P!==null){if(w.callback=null,w=m,typeof P!="function")throw Error(n(191,P));P.call(w)}}}var ef={},cs=yi(ef),tf=yi(ef),Il=yi(ef);function zs(a){if(a===ef)throw Error(n(174));return a}function y1(a,l){switch(In(Il,l),In(tf,a),In(cs,ef),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:pr(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=pr(l,a)}Nn(cs),In(cs,l)}function Pa(){Nn(cs),Nn(tf),Nn(Il)}function w1(a){zs(Il.current);var l=zs(cs.current),m=pr(l,a.type);l!==m&&(In(tf,a),In(cs,m))}function td(a){tf.current===a&&(Nn(cs),Nn(tf))}var Wn=yi(0);function xu(a){for(var l=a;l!==null;){if(l.tag===13){var m=l.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var C1=[];function nd(){for(var a=0;a<C1.length;a++)C1[a]._workInProgressVersionPrimary=null;C1.length=0}var nf=L.ReactCurrentDispatcher,x1=L.ReactCurrentBatchConfig,Sa=0,Vn=null,rr=null,mr=null,Fl=!1,rf=!1,Eu=0,Vt=0;function $r(){throw Error(n(321))}function E1(a,l){if(l===null)return!1;for(var m=0;m<l.length&&m<a.length;m++)if(!ye(a[m],l[m]))return!1;return!0}function Pu(a,l,m,w,P,A){if(Sa=A,Vn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,nf.current=a===null||a.memoizedState===null?r7:ld,a=m(w,P),rf){A=0;do{if(rf=!1,Eu=0,25<=A)throw Error(n(301));A+=1,mr=rr=null,l.updateQueue=null,nf.current=Hl,a=m(w,P)}while(rf)}if(nf.current=ud,l=rr!==null&&rr.next!==null,Sa=0,mr=rr=Vn=null,Fl=!1,l)throw Error(n(300));return a}function rd(){var a=Eu!==0;return Eu=0,a}function fs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Vn.memoizedState=mr=a:mr=mr.next=a,mr}function no(){if(rr===null){var a=Vn.alternate;a=a!==null?a.memoizedState:null}else a=rr.next;var l=mr===null?Vn.memoizedState:mr.next;if(l!==null)mr=l,rr=a;else{if(a===null)throw Error(n(310));rr=a,a={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},mr===null?Vn.memoizedState=mr=a:mr=mr.next=a}return mr}function Wr(a,l){return typeof l=="function"?l(a):l}function P1(a){var l=no(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=rr,P=w.baseQueue,A=m.pending;if(A!==null){if(P!==null){var _=P.next;P.next=A.next,A.next=_}w.baseQueue=P=A,m.pending=null}if(P!==null){A=P.next,w=w.baseState;var V=_=null,Z=null,Ce=A;do{var Ne=Ce.lane;if((Sa&Ne)===Ne)Z!==null&&(Z=Z.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),w=Ce.hasEagerState?Ce.eagerState:a(w,Ce.action);else{var je={lane:Ne,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};Z===null?(V=Z=je,_=w):Z=Z.next=je,Vn.lanes|=Ne,Aa|=Ne}Ce=Ce.next}while(Ce!==null&&Ce!==A);Z===null?_=w:Z.next=V,ye(w,l.memoizedState)||(ri=!0),l.memoizedState=w,l.baseState=_,l.baseQueue=Z,m.lastRenderedState=w}if(a=m.interleaved,a!==null){P=a;do A=P.lane,Vn.lanes|=A,Aa|=A,P=P.next;while(P!==a)}else P===null&&(m.lanes=0);return[l.memoizedState,m.dispatch]}function Ll(a){var l=no(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=m.dispatch,P=m.pending,A=l.memoizedState;if(P!==null){m.pending=null;var _=P=P.next;do A=a(A,_.action),_=_.next;while(_!==P);ye(A,l.memoizedState)||(ri=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),m.lastRenderedState=A}return[A,w]}function id(){}function S1(a,l){var m=Vn,w=no(),P=l(),A=!ye(w.memoizedState,P);if(A&&(w.memoizedState=P,ri=!0),w=w.queue,hs(Vs.bind(null,m,w,a),[a]),w.getSnapshot!==l||A||mr!==null&&mr.memoizedState.tag&1){if(m.flags|=2048,_l(9,Ei.bind(null,m,w,P,l),void 0,null),xr===null)throw Error(n(349));(Sa&30)!==0||T1(m,l,P)}return P}function T1(a,l,m){a.flags|=16384,a={getSnapshot:l,value:m},l=Vn.updateQueue,l===null?(l={lastEffect:null,stores:null},Vn.updateQueue=l,l.stores=[a]):(m=l.stores,m===null?l.stores=[a]:m.push(a))}function Ei(a,l,m,w){l.value=m,l.getSnapshot=w,od(l)&&D1(a)}function Vs(a,l,m){return m(function(){od(l)&&D1(a)})}function od(a){var l=a.getSnapshot;a=a.value;try{var m=l();return!ye(a,m)}catch{return!0}}function D1(a){var l=$s(a,1);l!==null&&Oo(l,a,1,-1)}function of(a){var l=fs();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:a},l.queue=a,a=a.dispatch=T2.bind(null,Vn,a),[l.memoizedState,a]}function _l(a,l,m,w){return a={tag:a,create:l,destroy:m,deps:w,next:null},l=Vn.updateQueue,l===null?(l={lastEffect:null,stores:null},Vn.updateQueue=l,l.lastEffect=a.next=a):(m=l.lastEffect,m===null?l.lastEffect=a.next=a:(w=m.next,m.next=a,a.next=w,l.lastEffect=a)),a}function sd(){return no().memoizedState}function sf(a,l,m,w){var P=fs();Vn.flags|=a,P.memoizedState=_l(1|l,m,void 0,w===void 0?null:w)}function Nl(a,l,m,w){var P=no();w=w===void 0?null:w;var A=void 0;if(rr!==null){var _=rr.memoizedState;if(A=_.destroy,w!==null&&E1(w,_.deps)){P.memoizedState=_l(l,m,A,w);return}}Vn.flags|=a,P.memoizedState=_l(1|l,m,A,w)}function ad(a,l){return sf(8390656,8,a,l)}function hs(a,l){return Nl(2048,8,a,l)}function C2(a,l){return Nl(4,2,a,l)}function Us(a,l){return Nl(4,4,a,l)}function A1(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function B1(a,l,m){return m=m!=null?m.concat([a]):null,Nl(4,4,A1.bind(null,l,a),m)}function af(){}function x2(a,l){var m=no();l=l===void 0?null:l;var w=m.memoizedState;return w!==null&&l!==null&&E1(l,w[1])?w[0]:(m.memoizedState=[a,l],a)}function E2(a,l){var m=no();l=l===void 0?null:l;var w=m.memoizedState;return w!==null&&l!==null&&E1(l,w[1])?w[0]:(a=a(),m.memoizedState=[a,l],a)}function P2(a,l,m){return(Sa&21)===0?(a.baseState&&(a.baseState=!1,ri=!0),a.memoizedState=m):(ye(m,l)||(m=qe(),Vn.lanes|=m,Aa|=m,a.baseState=!0),l)}function S2(a,l){var m=Et;Et=m!==0&&4>m?m:4,a(!0);var w=x1.transition;x1.transition={};try{a(!1),l()}finally{Et=m,x1.transition=w}}function R1(){return no().memoizedState}function n7(a,l,m){var w=Ma(a);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},M1(a))ni(l,m);else if(m=Qh(a,l,m,w),m!==null){var P=si();Oo(m,a,w,P),Bo(m,l,w)}}function T2(a,l,m){var w=Ma(a),P={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(M1(a))ni(l,P);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var _=l.lastRenderedState,V=A(_,m);if(P.hasEagerState=!0,P.eagerState=V,ye(V,_)){var Z=l.interleaved;Z===null?(P.next=P,m1(l)):(P.next=Z.next,Z.next=P),l.interleaved=P;return}}catch{}finally{}m=Qh(a,l,P,w),m!==null&&(P=si(),Oo(m,a,w,P),Bo(m,l,w))}}function M1(a){var l=a.alternate;return a===Vn||l!==null&&l===Vn}function ni(a,l){rf=Fl=!0;var m=a.pending;m===null?l.next=l:(l.next=m.next,m.next=l),a.pending=l}function Bo(a,l,m){if((m&4194240)!==0){var w=l.lanes;w&=a.pendingLanes,m|=w,l.lanes=m,Jt(a,m)}}var ud={readContext:Ji,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useInsertionEffect:$r,useLayoutEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useMutableSource:$r,useSyncExternalStore:$r,useId:$r,unstable_isNewReconciler:!1},r7={readContext:Ji,useCallback:function(a,l){return fs().memoizedState=[a,l===void 0?null:l],a},useContext:Ji,useEffect:ad,useImperativeHandle:function(a,l,m){return m=m!=null?m.concat([a]):null,sf(4194308,4,A1.bind(null,l,a),m)},useLayoutEffect:function(a,l){return sf(4194308,4,a,l)},useInsertionEffect:function(a,l){return sf(4,2,a,l)},useMemo:function(a,l){var m=fs();return l=l===void 0?null:l,a=a(),m.memoizedState=[a,l],a},useReducer:function(a,l,m){var w=fs();return l=m!==void 0?m(l):l,w.memoizedState=w.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},w.queue=a,a=a.dispatch=n7.bind(null,Vn,a),[w.memoizedState,a]},useRef:function(a){var l=fs();return a={current:a},l.memoizedState=a},useState:of,useDebugValue:af,useDeferredValue:function(a){return fs().memoizedState=a},useTransition:function(){var a=of(!1),l=a[0];return a=S2.bind(null,a[1]),fs().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,m){var w=Vn,P=fs();if(Hn){if(m===void 0)throw Error(n(407));m=m()}else{if(m=l(),xr===null)throw Error(n(349));(Sa&30)!==0||T1(w,l,m)}P.memoizedState=m;var A={value:m,getSnapshot:l};return P.queue=A,ad(Vs.bind(null,w,A,a),[a]),w.flags|=2048,_l(9,Ei.bind(null,w,A,m,l),void 0,null),m},useId:function(){var a=fs(),l=xr.identifierPrefix;if(Hn){var m=ss,w=os;m=(w&~(1<<32-Ri(w)-1)).toString(32)+m,l=":"+l+"R"+m,m=Eu++,0<m&&(l+="H"+m.toString(32)),l+=":"}else m=Vt++,l=":"+l+"r"+m.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},ld={readContext:Ji,useCallback:x2,useContext:Ji,useEffect:hs,useImperativeHandle:B1,useInsertionEffect:C2,useLayoutEffect:Us,useMemo:E2,useReducer:P1,useRef:sd,useState:function(){return P1(Wr)},useDebugValue:af,useDeferredValue:function(a){var l=no();return P2(l,rr.memoizedState,a)},useTransition:function(){var a=P1(Wr)[0],l=no().memoizedState;return[a,l]},useMutableSource:id,useSyncExternalStore:S1,useId:R1,unstable_isNewReconciler:!1},Hl={readContext:Ji,useCallback:x2,useContext:Ji,useEffect:hs,useImperativeHandle:B1,useInsertionEffect:C2,useLayoutEffect:Us,useMemo:E2,useReducer:Ll,useRef:sd,useState:function(){return Ll(Wr)},useDebugValue:af,useDeferredValue:function(a){var l=no();return rr===null?l.memoizedState=a:P2(l,rr.memoizedState,a)},useTransition:function(){var a=Ll(Wr)[0],l=no().memoizedState;return[a,l]},useMutableSource:id,useSyncExternalStore:S1,useId:R1,unstable_isNewReconciler:!1};function ro(a,l){if(a&&a.defaultProps){l=we({},l),a=a.defaultProps;for(var m in a)l[m]===void 0&&(l[m]=a[m]);return l}return l}function cd(a,l,m,w){l=a.memoizedState,m=m(w,l),m=m==null?l:we({},l,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var fd={isMounted:function(a){return(a=a._reactInternals)?Is(a)===a:!1},enqueueSetState:function(a,l,m){a=a._reactInternals;var w=si(),P=Ma(a),A=Ws(w,P);A.payload=l,m!=null&&(A.callback=m),l=to(a,A,P),l!==null&&(Oo(l,a,P,w),ed(l,a,P))},enqueueReplaceState:function(a,l,m){a=a._reactInternals;var w=si(),P=Ma(a),A=Ws(w,P);A.tag=1,A.payload=l,m!=null&&(A.callback=m),l=to(a,A,P),l!==null&&(Oo(l,a,P,w),ed(l,a,P))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var m=si(),w=Ma(a),P=Ws(m,w);P.tag=2,l!=null&&(P.callback=l),l=to(a,P,w),l!==null&&(Oo(l,a,w,m),ed(l,a,w))}};function b1(a,l,m,w,P,A,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,A,_):l.prototype&&l.prototype.isPureReactComponent?!nt(m,w)||!nt(P,A):!0}function Su(a,l,m){var w=!1,P=wa,A=l.contextType;return typeof A=="object"&&A!==null?A=Ji(A):(P=Ci(l)?ti:Hr.current,w=l.contextTypes,A=(w=w!=null)?Ml(a,P):wa),l=new l(m,A),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=fd,a.stateNode=l,l._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=P,a.__reactInternalMemoizedMaskedChildContext=A),l}function Gl(a,l,m,w){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(m,w),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(m,w),l.state!==a&&fd.enqueueReplaceState(l,l.state,null)}function k1(a,l,m,w){var P=a.stateNode;P.props=m,P.state=a.memoizedState,P.refs={},Jh(a);var A=l.contextType;typeof A=="object"&&A!==null?P.context=Ji(A):(A=Ci(l)?ti:Hr.current,P.context=Ml(a,A)),P.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(cd(a,l,A,m),P.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(l=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),l!==P.state&&fd.enqueueReplaceState(P,P.state,null),Ol(a,m,P,w),P.state=a.memoizedState),typeof P.componentDidMount=="function"&&(a.flags|=4194308)}function Tu(a,l){try{var m="",w=l;do m+=$e(w),w=w.return;while(w);var P=m}catch(A){P=`
Error generating stack: `+A.message+`
`+A.stack}return{value:a,source:l,stack:P,digest:null}}function hd(a,l,m){return{value:a,source:null,stack:m??null,digest:l??null}}function jl(a,l){try{console.error(l.value)}catch(m){setTimeout(function(){throw m})}}var D2=typeof WeakMap=="function"?WeakMap:Map;function uf(a,l,m){m=Ws(-1,m),m.tag=3,m.payload={element:null};var w=l.value;return m.callback=function(){Pd||(Pd=!0,K1=w),jl(a,l)},m}function dd(a,l,m){m=Ws(-1,m),m.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var P=l.value;m.payload=function(){return w(P)},m.callback=function(){jl(a,l)}}var A=a.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){jl(a,l),typeof w!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})}),m}function lf(a,l,m){var w=a.pingCache;if(w===null){w=a.pingCache=new D2;var P=new Set;w.set(l,P)}else P=w.get(l),P===void 0&&(P=new Set,w.set(l,P));P.has(m)||(P.add(m),a=f7.bind(null,a,l,m),l.then(a,a))}function A2(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function O1(a,l,m,w,P){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(l=Ws(-1,1),l.tag=2,to(m,l,1))),m.lanes|=1),a):(a.flags|=65536,a.lanes=P,a)}var gd=L.ReactCurrentOwner,ri=!1;function Ar(a,l,m,w){l.child=a===null?qh(l,null,m,w):Zn(l,a.child,m,w)}function B2(a,l,m,w,P){m=m.render;var A=l.ref;return Ea(l,P),w=Pu(a,l,m,w,A,P),m=rd(),a!==null&&!ri?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~P,Ro(a,l,P)):(Hn&&m&&qc(l),l.flags|=1,Ar(a,l,w,P),l.child)}function I1(a,l,m,w,P){if(a===null){var A=m.type;return typeof A=="function"&&!Rd(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(l.tag=15,l.type=A,ds(a,l,A,w,P)):(a=Md(m.type,null,w,l,l.mode,P),a.ref=l.ref,a.return=l,l.child=a)}if(A=a.child,(a.lanes&P)===0){var _=A.memoizedProps;if(m=m.compare,m=m!==null?m:nt,m(_,w)&&a.ref===l.ref)return Ro(a,l,P)}return l.flags|=1,a=Io(A,w),a.ref=l.ref,a.return=l,l.child=a}function ds(a,l,m,w,P){if(a!==null){var A=a.memoizedProps;if(nt(A,w)&&a.ref===l.ref)if(ri=!1,l.pendingProps=w=A,(a.lanes&P)!==0)(a.flags&131072)!==0&&(ri=!0);else return l.lanes=a.lanes,Ro(a,l,P)}return _1(a,l,m,w,P)}function F1(a,l,m){var w=l.pendingProps,P=w.children,A=a!==null?a.memoizedState:null;if(w.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},In(Vl,Li),Li|=m;else{if((m&1073741824)===0)return a=A!==null?A.baseLanes|m:m,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,In(Vl,Li),Li|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=A!==null?A.baseLanes:m,In(Vl,Li),Li|=w}else A!==null?(w=A.baseLanes|m,l.memoizedState=null):w=m,In(Vl,Li),Li|=w;return Ar(a,l,P,m),l.child}function L1(a,l){var m=l.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(l.flags|=512,l.flags|=2097152)}function _1(a,l,m,w,P){var A=Ci(m)?ti:Hr.current;return A=Ml(l,A),Ea(l,P),m=Pu(a,l,m,w,A,P),w=rd(),a!==null&&!ri?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~P,Ro(a,l,P)):(Hn&&w&&qc(l),l.flags|=1,Ar(a,l,m,P),l.child)}function N1(a,l,m,w,P){if(Ci(m)){var A=!0;qi(l)}else A=!1;if(Ea(l,P),l.stateNode===null)md(a,l),Su(l,m,w),k1(l,m,w,P),w=!0;else if(a===null){var _=l.stateNode,V=l.memoizedProps;_.props=V;var Z=_.context,Ce=m.contextType;typeof Ce=="object"&&Ce!==null?Ce=Ji(Ce):(Ce=Ci(m)?ti:Hr.current,Ce=Ml(l,Ce));var Ne=m.getDerivedStateFromProps,je=typeof Ne=="function"||typeof _.getSnapshotBeforeUpdate=="function";je||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(V!==w||Z!==Ce)&&Gl(l,_,w,Ce),eo=!1;var _e=l.memoizedState;_.state=_e,Ol(l,w,_,P),Z=l.memoizedState,V!==w||_e!==Z||wi.current||eo?(typeof Ne=="function"&&(cd(l,m,Ne,w),Z=l.memoizedState),(V=eo||b1(l,m,V,w,_e,Z,Ce))?(je||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=w,l.memoizedState=Z),_.props=w,_.state=Z,_.context=Ce,w=V):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),w=!1)}else{_=l.stateNode,y2(a,l),V=l.memoizedProps,Ce=l.type===l.elementType?V:ro(l.type,V),_.props=Ce,je=l.pendingProps,_e=_.context,Z=m.contextType,typeof Z=="object"&&Z!==null?Z=Ji(Z):(Z=Ci(m)?ti:Hr.current,Z=Ml(l,Z));var rt=m.getDerivedStateFromProps;(Ne=typeof rt=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(V!==je||_e!==Z)&&Gl(l,_,w,Z),eo=!1,_e=l.memoizedState,_.state=_e,Ol(l,w,_,P);var at=l.memoizedState;V!==je||_e!==at||wi.current||eo?(typeof rt=="function"&&(cd(l,m,rt,w),at=l.memoizedState),(Ce=eo||b1(l,m,Ce,w,_e,at,Z)||!1)?(Ne||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(w,at,Z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(w,at,Z)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||V===a.memoizedProps&&_e===a.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&_e===a.memoizedState||(l.flags|=1024),l.memoizedProps=w,l.memoizedState=at),_.props=w,_.state=at,_.context=Z,w=Ce):(typeof _.componentDidUpdate!="function"||V===a.memoizedProps&&_e===a.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&_e===a.memoizedState||(l.flags|=1024),w=!1)}return H1(a,l,m,w,A,P)}function H1(a,l,m,w,P,A){L1(a,l);var _=(l.flags&128)!==0;if(!w&&!_)return P&&h2(l,m,!1),Ro(a,l,A);w=l.stateNode,gd.current=l;var V=_&&typeof m.getDerivedStateFromError!="function"?null:w.render();return l.flags|=1,a!==null&&_?(l.child=Zn(l,a.child,null,A),l.child=Zn(l,null,V,A)):Ar(a,l,V,A),l.memoizedState=w.state,P&&h2(l,m,!0),l.child}function R2(a){var l=a.stateNode;l.pendingContext?c2(a,l.pendingContext,l.pendingContext!==l.context):l.context&&c2(a,l.context,!1),y1(a,l.containerInfo)}function gs(a,l,m,w,P){return us(),ls(P),l.flags|=256,Ar(a,l,m,w),l.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function ff(a){return{baseLanes:a,cachePool:null,transitions:null}}function pd(a,l,m){var w=l.pendingProps,P=Wn.current,A=!1,_=(l.flags&128)!==0,V;if((V=_)||(V=a!==null&&a.memoizedState===null?!1:(P&2)!==0),V?(A=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(P|=1),In(Wn,P&1),a===null)return xi(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(_=w.children,a=w.fallback,A?(w=l.mode,A=l.child,_={mode:"hidden",children:_},(w&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=_):A=bd(_,w,0,null),a=Mu(a,w,m,null),A.return=l,a.return=l,A.sibling=a,l.child=A,l.child.memoizedState=ff(m),l.memoizedState=cf,a):$l(l,_));if(P=a.memoizedState,P!==null&&(V=P.dehydrated,V!==null))return St(a,l,_,w,V,P,m);if(A){A=w.fallback,_=l.mode,P=a.child,V=P.sibling;var Z={mode:"hidden",children:w.children};return(_&1)===0&&l.child!==P?(w=l.child,w.childLanes=0,w.pendingProps=Z,l.deletions=null):(w=Io(P,Z),w.subtreeFlags=P.subtreeFlags&14680064),V!==null?A=Io(V,A):(A=Mu(A,_,m,null),A.flags|=2),A.return=l,w.return=l,w.sibling=A,l.child=w,w=A,A=l.child,_=a.child.memoizedState,_=_===null?ff(m):{baseLanes:_.baseLanes|m,cachePool:null,transitions:_.transitions},A.memoizedState=_,A.childLanes=a.childLanes&~m,l.memoizedState=cf,w}return A=a.child,a=A.sibling,w=Io(A,{mode:"visible",children:w.children}),(l.mode&1)===0&&(w.lanes=m),w.return=l,w.sibling=null,a!==null&&(m=l.deletions,m===null?(l.deletions=[a],l.flags|=16):m.push(a)),l.child=w,l.memoizedState=null,w}function $l(a,l){return l=bd({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Xs(a,l,m,w){return w!==null&&ls(w),Zn(l,a.child,null,m),a=$l(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function St(a,l,m,w,P,A,_){if(m)return l.flags&256?(l.flags&=-257,w=hd(Error(n(422))),Xs(a,l,_,w)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(A=w.fallback,P=l.mode,w=bd({mode:"visible",children:w.children},P,0,null),A=Mu(A,P,_,null),A.flags|=2,w.return=l,A.return=l,w.sibling=A,l.child=w,(l.mode&1)!==0&&Zn(l,a.child,null,_),l.child.memoizedState=ff(_),l.memoizedState=cf,A);if((l.mode&1)===0)return Xs(a,l,_,null);if(P.data==="$!"){if(w=P.nextSibling&&P.nextSibling.dataset,w)var V=w.dgst;return w=V,A=Error(n(419)),w=hd(A,w,void 0),Xs(a,l,_,w)}if(V=(_&a.childLanes)!==0,ri||V){if(w=xr,w!==null){switch(_&-_){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(w.suspendedLanes|_))!==0?0:P,P!==0&&P!==A.retryLane&&(A.retryLane=P,$s(a,P),Oo(w,a,P,-1))}return eg(),w=hd(Error(n(421))),Xs(a,l,_,w)}return P.data==="$?"?(l.flags|=128,l.child=a.child,l=h7.bind(null,a),P._reactRetry=l,null):(a=A.treeContext,Oi=va(P.nextSibling),jr=l,Hn=!0,Ao=null,a!==null&&(Zi[Qi++]=os,Zi[Qi++]=ss,Zi[Qi++]=mu,os=a.id,ss=a.overflow,mu=l),l=$l(l,w.children),l.flags|=4096,l)}function hf(a,l,m){a.lanes|=l;var w=a.alternate;w!==null&&(w.lanes|=l),Dr(a.return,l,m)}function df(a,l,m,w,P){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:P}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=w,A.tail=m,A.tailMode=P)}function Ta(a,l,m){var w=l.pendingProps,P=w.revealOrder,A=w.tail;if(Ar(a,l,w.children,m),w=Wn.current,(w&2)!==0)w=w&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&hf(a,m,l);else if(a.tag===19)hf(a,m,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(In(Wn,w),(l.mode&1)===0)l.memoizedState=null;else switch(P){case"forwards":for(m=l.child,P=null;m!==null;)a=m.alternate,a!==null&&xu(a)===null&&(P=m),m=m.sibling;m=P,m===null?(P=l.child,l.child=null):(P=m.sibling,m.sibling=null),df(l,!1,P,m,A);break;case"backwards":for(m=null,P=l.child,l.child=null;P!==null;){if(a=P.alternate,a!==null&&xu(a)===null){l.child=P;break}a=P.sibling,P.sibling=m,m=P,P=a}df(l,!0,m,null,A);break;case"together":df(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function md(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Ro(a,l,m){if(a!==null&&(l.dependencies=a.dependencies),Aa|=l.lanes,(m&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,m=Io(a,a.pendingProps),l.child=m,m.return=l;a.sibling!==null;)a=a.sibling,m=m.sibling=Io(a,a.pendingProps),m.return=l;m.sibling=null}return l.child}function M2(a,l,m){switch(l.tag){case 3:R2(l),us();break;case 5:w1(l);break;case 1:Ci(l.type)&&qi(l);break;case 4:y1(l,l.stateNode.containerInfo);break;case 10:var w=l.type._context,P=l.memoizedProps.value;In(Jc,w._currentValue),w._currentValue=P;break;case 13:if(w=l.memoizedState,w!==null)return w.dehydrated!==null?(In(Wn,Wn.current&1),l.flags|=128,null):(m&l.child.childLanes)!==0?pd(a,l,m):(In(Wn,Wn.current&1),a=Ro(a,l,m),a!==null?a.sibling:null);In(Wn,Wn.current&1);break;case 19:if(w=(m&l.childLanes)!==0,(a.flags&128)!==0){if(w)return Ta(a,l,m);l.flags|=128}if(P=l.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),In(Wn,Wn.current),w)break;return null;case 22:case 23:return l.lanes=0,F1(a,l,m)}return Ro(a,l,m)}var Br,G1,b2,j1;Br=function(a,l){for(var m=l.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===l)break;for(;m.sibling===null;){if(m.return===null||m.return===l)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},G1=function(){},b2=function(a,l,m,w){var P=a.memoizedProps;if(P!==w){a=l.stateNode,zs(cs.current);var A=null;switch(m){case"input":P=Ye(a,P),w=Ye(a,w),A=[];break;case"select":P=we({},P,{value:void 0}),w=we({},w,{value:void 0}),A=[];break;case"textarea":P=sn(a,P),w=sn(a,w),A=[];break;default:typeof P.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=jh)}So(m,w);var _;m=null;for(Ce in P)if(!w.hasOwnProperty(Ce)&&P.hasOwnProperty(Ce)&&P[Ce]!=null)if(Ce==="style"){var V=P[Ce];for(_ in V)V.hasOwnProperty(_)&&(m||(m={}),m[_]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(i.hasOwnProperty(Ce)?A||(A=[]):(A=A||[]).push(Ce,null));for(Ce in w){var Z=w[Ce];if(V=P!=null?P[Ce]:void 0,w.hasOwnProperty(Ce)&&Z!==V&&(Z!=null||V!=null))if(Ce==="style")if(V){for(_ in V)!V.hasOwnProperty(_)||Z&&Z.hasOwnProperty(_)||(m||(m={}),m[_]="");for(_ in Z)Z.hasOwnProperty(_)&&V[_]!==Z[_]&&(m||(m={}),m[_]=Z[_])}else m||(A||(A=[]),A.push(Ce,m)),m=Z;else Ce==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,V=V?V.__html:void 0,Z!=null&&V!==Z&&(A=A||[]).push(Ce,Z)):Ce==="children"?typeof Z!="string"&&typeof Z!="number"||(A=A||[]).push(Ce,""+Z):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ce)?(Z!=null&&Ce==="onScroll"&&_n("scroll",a),A||V===Z||(A=[])):(A=A||[]).push(Ce,Z))}m&&(A=A||[]).push("style",m);var Ce=A;(l.updateQueue=Ce)&&(l.flags|=4)}},j1=function(a,l,m,w){m!==w&&(l.flags|=4)};function gf(a,l){if(!Hn)switch(a.tailMode){case"hidden":l=a.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function Rr(a){var l=a.alternate!==null&&a.alternate.child===a.child,m=0,w=0;if(l)for(var P=a.child;P!==null;)m|=P.lanes|P.childLanes,w|=P.subtreeFlags&14680064,w|=P.flags&14680064,P.return=a,P=P.sibling;else for(P=a.child;P!==null;)m|=P.lanes|P.childLanes,w|=P.subtreeFlags,w|=P.flags,P.return=a,P=P.sibling;return a.subtreeFlags|=w,a.childLanes=m,l}function i7(a,l,m){var w=l.pendingProps;switch(yu(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(l),null;case 1:return Ci(l.type)&&Vh(),Rr(l),null;case 3:return w=l.stateNode,Pa(),Nn(wi),Nn(Hr),nd(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Zc(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ao!==null&&(Z1(Ao),Ao=null))),G1(a,l),Rr(l),null;case 5:td(l);var P=zs(Il.current);if(m=l.type,a!==null&&l.stateNode!=null)b2(a,l,m,w,P),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!w){if(l.stateNode===null)throw Error(n(166));return Rr(l),null}if(a=zs(cs.current),Zc(l)){w=l.stateNode,m=l.type;var A=l.memoizedProps;switch(w[rs]=l,w[ya]=A,a=(l.mode&1)!==0,m){case"dialog":_n("cancel",w),_n("close",w);break;case"iframe":case"object":case"embed":_n("load",w);break;case"video":case"audio":for(P=0;P<Ns.length;P++)_n(Ns[P],w);break;case"source":_n("error",w);break;case"img":case"image":case"link":_n("error",w),_n("load",w);break;case"details":_n("toggle",w);break;case"input":Dt(w,A),_n("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!A.multiple},_n("invalid",w);break;case"textarea":gr(w,A),_n("invalid",w)}So(m,A),P=null;for(var _ in A)if(A.hasOwnProperty(_)){var V=A[_];_==="children"?typeof V=="string"?w.textContent!==V&&(A.suppressHydrationWarning!==!0&&Uc(w.textContent,V,a),P=["children",V]):typeof V=="number"&&w.textContent!==""+V&&(A.suppressHydrationWarning!==!0&&Uc(w.textContent,V,a),P=["children",""+V]):i.hasOwnProperty(_)&&V!=null&&_==="onScroll"&&_n("scroll",w)}switch(m){case"input":Te(w),Mn(w,A,!0);break;case"textarea":Te(w),jn(w);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(w.onclick=jh)}w=P,l.updateQueue=w,w!==null&&(l.flags|=4)}else{_=P.nodeType===9?P:P.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Vi(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=_.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=_.createElement(m,{is:w.is}):(a=_.createElement(m),m==="select"&&(_=a,w.multiple?_.multiple=!0:w.size&&(_.size=w.size))):a=_.createElementNS(a,m),a[rs]=l,a[ya]=w,Br(a,l,!1,!1),l.stateNode=a;e:{switch(_=Ui(m,w),m){case"dialog":_n("cancel",a),_n("close",a),P=w;break;case"iframe":case"object":case"embed":_n("load",a),P=w;break;case"video":case"audio":for(P=0;P<Ns.length;P++)_n(Ns[P],a);P=w;break;case"source":_n("error",a),P=w;break;case"img":case"image":case"link":_n("error",a),_n("load",a),P=w;break;case"details":_n("toggle",a),P=w;break;case"input":Dt(a,w),P=Ye(a,w),_n("invalid",a);break;case"option":P=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},P=we({},w,{value:void 0}),_n("invalid",a);break;case"textarea":gr(a,w),P=sn(a,w),_n("invalid",a);break;default:P=w}So(m,P),V=P;for(A in V)if(V.hasOwnProperty(A)){var Z=V[A];A==="style"?Po(a,Z):A==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&bn(a,Z)):A==="children"?typeof Z=="string"?(m!=="textarea"||Z!=="")&&Ir(a,Z):typeof Z=="number"&&Ir(a,""+Z):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?Z!=null&&A==="onScroll"&&_n("scroll",a):Z!=null&&R(a,A,Z,_))}switch(m){case"input":Te(a),Mn(a,w,!1);break;case"textarea":Te(a),jn(a);break;case"option":w.value!=null&&a.setAttribute("value",""+et(w.value));break;case"select":a.multiple=!!w.multiple,A=w.value,A!=null?_t(a,!!w.multiple,A,!1):w.defaultValue!=null&&_t(a,!!w.multiple,w.defaultValue,!0);break;default:typeof P.onClick=="function"&&(a.onclick=jh)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Rr(l),null;case 6:if(a&&l.stateNode!=null)j1(a,l,a.memoizedProps,w);else{if(typeof w!="string"&&l.stateNode===null)throw Error(n(166));if(m=zs(Il.current),zs(cs.current),Zc(l)){if(w=l.stateNode,m=l.memoizedProps,w[rs]=l,(A=w.nodeValue!==m)&&(a=jr,a!==null))switch(a.tag){case 3:Uc(w.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Uc(w.nodeValue,m,(a.mode&1)!==0)}A&&(l.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[rs]=l,l.stateNode=w}return Rr(l),null;case 13:if(Nn(Wn),w=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Hn&&Oi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)g1(),us(),l.flags|=98560,A=!1;else if(A=Zc(l),w!==null&&w.dehydrated!==null){if(a===null){if(!A)throw Error(n(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[rs]=l}else us(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Rr(l),A=!1}else Ao!==null&&(Z1(Ao),Ao=null),A=!0;if(!A)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=m,l):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Wn.current&1)!==0?vr===0&&(vr=3):eg())),l.updateQueue!==null&&(l.flags|=4),Rr(l),null);case 4:return Pa(),G1(a,l),a===null&&pa(l.stateNode.containerInfo),Rr(l),null;case 10:return Zh(l.type._context),Rr(l),null;case 17:return Ci(l.type)&&Vh(),Rr(l),null;case 19:if(Nn(Wn),A=l.memoizedState,A===null)return Rr(l),null;if(w=(l.flags&128)!==0,_=A.rendering,_===null)if(w)gf(A,!1);else{if(vr!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(_=xu(a),_!==null){for(l.flags|=128,gf(A,!1),w=_.updateQueue,w!==null&&(l.updateQueue=w,l.flags|=4),l.subtreeFlags=0,w=m,m=l.child;m!==null;)A=m,a=w,A.flags&=14680066,_=A.alternate,_===null?(A.childLanes=0,A.lanes=a,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=_.childLanes,A.lanes=_.lanes,A.child=_.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=_.memoizedProps,A.memoizedState=_.memoizedState,A.updateQueue=_.updateQueue,A.type=_.type,a=_.dependencies,A.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return In(Wn,Wn.current&1|2),l.child}a=a.sibling}A.tail!==null&&Cn()>Du&&(l.flags|=128,w=!0,gf(A,!1),l.lanes=4194304)}else{if(!w)if(a=xu(_),a!==null){if(l.flags|=128,w=!0,m=a.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),gf(A,!0),A.tail===null&&A.tailMode==="hidden"&&!_.alternate&&!Hn)return Rr(l),null}else 2*Cn()-A.renderingStartTime>Du&&m!==1073741824&&(l.flags|=128,w=!0,gf(A,!1),l.lanes=4194304);A.isBackwards?(_.sibling=l.child,l.child=_):(m=A.last,m!==null?m.sibling=_:l.child=_,A.last=_)}return A.tail!==null?(l=A.tail,A.rendering=l,A.tail=l.sibling,A.renderingStartTime=Cn(),l.sibling=null,m=Wn.current,In(Wn,w?m&1|2:m&1),l):(Rr(l),null);case 22:case 23:return J1(),w=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(l.flags|=8192),w&&(l.mode&1)!==0?(Li&1073741824)!==0&&(Rr(l),l.subtreeFlags&6&&(l.flags|=8192)):Rr(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function o7(a,l){switch(yu(l),l.tag){case 1:return Ci(l.type)&&Vh(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Pa(),Nn(wi),Nn(Hr),nd(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return td(l),null;case 13:if(Nn(Wn),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));us()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Nn(Wn),null;case 4:return Pa(),null;case 10:return Zh(l.type._context),null;case 22:case 23:return J1(),null;case 24:return null;default:return null}}var vd=!1,zn=!1,ii=typeof WeakSet=="function"?WeakSet:Set,it=null;function Wl(a,l){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Un(a,l,w)}else m.current=null}function pf(a,l,m){try{m()}catch(w){Un(a,l,w)}}var k2=!1;function s7(a,l){if(Xc=Ph,a=An(),Gc(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var P=w.anchorOffset,A=w.focusNode;w=w.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var _=0,V=-1,Z=-1,Ce=0,Ne=0,je=a,_e=null;t:for(;;){for(var rt;je!==m||P!==0&&je.nodeType!==3||(V=_+P),je!==A||w!==0&&je.nodeType!==3||(Z=_+w),je.nodeType===3&&(_+=je.nodeValue.length),(rt=je.firstChild)!==null;)_e=je,je=rt;for(;;){if(je===a)break t;if(_e===m&&++Ce===P&&(V=_),_e===A&&++Ne===w&&(Z=_),(rt=je.nextSibling)!==null)break;je=_e,_e=je.parentNode}je=rt}m=V===-1||Z===-1?null:{start:V,end:Z}}else m=null}m=m||{start:0,end:0}}else m=null;for(gu={focusedElem:a,selectionRange:m},Ph=!1,it=l;it!==null;)if(l=it,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,it=a;else for(;it!==null;){l=it;try{var at=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ct=at.memoizedProps,ir=at.memoizedState,de=l.stateNode,re=de.getSnapshotBeforeUpdate(l.elementType===l.type?ct:ro(l.type,ct),ir);de.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var pe=l.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ue){Un(l,l.return,Ue)}if(a=l.sibling,a!==null){a.return=l.return,it=a;break}it=l.return}return at=k2,k2=!1,at}function Ks(a,l,m){var w=l.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var P=w=w.next;do{if((P.tag&a)===a){var A=P.destroy;P.destroy=void 0,A!==void 0&&pf(l,m,A)}P=P.next}while(P!==w)}}function mf(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var m=l=l.next;do{if((m.tag&a)===a){var w=m.create;m.destroy=w()}m=m.next}while(m!==l)}}function yd(a){var l=a.ref;if(l!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof l=="function"?l(a):l.current=a}}function O2(a){var l=a.alternate;l!==null&&(a.alternate=null,O2(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[rs],delete l[ya],delete l[Wh],delete l[N],delete l[Bl])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function I2(a){return a.tag===5||a.tag===3||a.tag===4}function F2(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||I2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function $1(a,l,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,l?m.nodeType===8?m.parentNode.insertBefore(a,l):m.insertBefore(a,l):(m.nodeType===8?(l=m.parentNode,l.insertBefore(a,m)):(l=m,l.appendChild(a)),m=m._reactRootContainer,m!=null||l.onclick!==null||(l.onclick=jh));else if(w!==4&&(a=a.child,a!==null))for($1(a,l,m),a=a.sibling;a!==null;)$1(a,l,m),a=a.sibling}function wd(a,l,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,l?m.insertBefore(a,l):m.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(wd(a,l,m),a=a.sibling;a!==null;)wd(a,l,m),a=a.sibling}var Cr=null,Mo=!1;function ps(a,l,m){for(m=m.child;m!==null;)W1(a,l,m),m=m.sibling}function W1(a,l,m){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(fl,m)}catch{}switch(m.tag){case 5:zn||Wl(m,l);case 6:var w=Cr,P=Mo;Cr=null,ps(a,l,m),Cr=w,Mo=P,Cr!==null&&(Mo?(a=Cr,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):Cr.removeChild(m.stateNode));break;case 18:Cr!==null&&(Mo?(a=Cr,m=m.stateNode,a.nodeType===8?f1(a.parentNode,m):a.nodeType===1&&f1(a,m),xn(a)):f1(Cr,m.stateNode));break;case 4:w=Cr,P=Mo,Cr=m.stateNode.containerInfo,Mo=!0,ps(a,l,m),Cr=w,Mo=P;break;case 0:case 11:case 14:case 15:if(!zn&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){P=w=w.next;do{var A=P,_=A.destroy;A=A.tag,_!==void 0&&((A&2)!==0||(A&4)!==0)&&pf(m,l,_),P=P.next}while(P!==w)}ps(a,l,m);break;case 1:if(!zn&&(Wl(m,l),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(V){Un(m,l,V)}ps(a,l,m);break;case 21:ps(a,l,m);break;case 22:m.mode&1?(zn=(w=zn)||m.memoizedState!==null,ps(a,l,m),zn=w):ps(a,l,m);break;default:ps(a,l,m)}}function zl(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new ii),l.forEach(function(w){var P=d7.bind(null,a,w);m.has(w)||(m.add(w),w.then(P,P))})}}function Fi(a,l){var m=l.deletions;if(m!==null)for(var w=0;w<m.length;w++){var P=m[w];try{var A=a,_=l,V=_;e:for(;V!==null;){switch(V.tag){case 5:Cr=V.stateNode,Mo=!1;break e;case 3:Cr=V.stateNode.containerInfo,Mo=!0;break e;case 4:Cr=V.stateNode.containerInfo,Mo=!0;break e}V=V.return}if(Cr===null)throw Error(n(160));W1(A,_,P),Cr=null,Mo=!1;var Z=P.alternate;Z!==null&&(Z.return=null),P.return=null}catch(Ce){Un(P,l,Ce)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)z1(l,a),l=l.sibling}function z1(a,l){var m=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Fi(l,a),bo(a),w&4){try{Ks(3,a,a.return),mf(3,a)}catch(ct){Un(a,a.return,ct)}try{Ks(5,a,a.return)}catch(ct){Un(a,a.return,ct)}}break;case 1:Fi(l,a),bo(a),w&512&&m!==null&&Wl(m,m.return);break;case 5:if(Fi(l,a),bo(a),w&512&&m!==null&&Wl(m,m.return),a.flags&32){var P=a.stateNode;try{Ir(P,"")}catch(ct){Un(a,a.return,ct)}}if(w&4&&(P=a.stateNode,P!=null)){var A=a.memoizedProps,_=m!==null?m.memoizedProps:A,V=a.type,Z=a.updateQueue;if(a.updateQueue=null,Z!==null)try{V==="input"&&A.type==="radio"&&A.name!=null&&cn(P,A),Ui(V,_);var Ce=Ui(V,A);for(_=0;_<Z.length;_+=2){var Ne=Z[_],je=Z[_+1];Ne==="style"?Po(P,je):Ne==="dangerouslySetInnerHTML"?bn(P,je):Ne==="children"?Ir(P,je):R(P,Ne,je,Ce)}switch(V){case"input":Bt(P,A);break;case"textarea":zi(P,A);break;case"select":var _e=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!A.multiple;var rt=A.value;rt!=null?_t(P,!!A.multiple,rt,!1):_e!==!!A.multiple&&(A.defaultValue!=null?_t(P,!!A.multiple,A.defaultValue,!0):_t(P,!!A.multiple,A.multiple?[]:"",!1))}P[ya]=A}catch(ct){Un(a,a.return,ct)}}break;case 6:if(Fi(l,a),bo(a),w&4){if(a.stateNode===null)throw Error(n(162));P=a.stateNode,A=a.memoizedProps;try{P.nodeValue=A}catch(ct){Un(a,a.return,ct)}}break;case 3:if(Fi(l,a),bo(a),w&4&&m!==null&&m.memoizedState.isDehydrated)try{xn(l.containerInfo)}catch(ct){Un(a,a.return,ct)}break;case 4:Fi(l,a),bo(a);break;case 13:Fi(l,a),bo(a),P=a.child,P.flags&8192&&(A=P.memoizedState!==null,P.stateNode.isHidden=A,!A||P.alternate!==null&&P.alternate.memoizedState!==null||(X1=Cn())),w&4&&zl(a);break;case 22:if(Ne=m!==null&&m.memoizedState!==null,a.mode&1?(zn=(Ce=zn)||Ne,Fi(l,a),zn=Ce):Fi(l,a),bo(a),w&8192){if(Ce=a.memoizedState!==null,(a.stateNode.isHidden=Ce)&&!Ne&&(a.mode&1)!==0)for(it=a,Ne=a.child;Ne!==null;){for(je=it=Ne;it!==null;){switch(_e=it,rt=_e.child,_e.tag){case 0:case 11:case 14:case 15:Ks(4,_e,_e.return);break;case 1:Wl(_e,_e.return);var at=_e.stateNode;if(typeof at.componentWillUnmount=="function"){w=_e,m=_e.return;try{l=w,at.props=l.memoizedProps,at.state=l.memoizedState,at.componentWillUnmount()}catch(ct){Un(w,m,ct)}}break;case 5:Wl(_e,_e.return);break;case 22:if(_e.memoizedState!==null){Da(je);continue}}rt!==null?(rt.return=_e,it=rt):Da(je)}Ne=Ne.sibling}e:for(Ne=null,je=a;;){if(je.tag===5){if(Ne===null){Ne=je;try{P=je.stateNode,Ce?(A=P.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(V=je.stateNode,Z=je.memoizedProps.style,_=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,V.style.display=qo("display",_))}catch(ct){Un(a,a.return,ct)}}}else if(je.tag===6){if(Ne===null)try{je.stateNode.nodeValue=Ce?"":je.memoizedProps}catch(ct){Un(a,a.return,ct)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===a)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===a)break e;for(;je.sibling===null;){if(je.return===null||je.return===a)break e;Ne===je&&(Ne=null),je=je.return}Ne===je&&(Ne=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:Fi(l,a),bo(a),w&4&&zl(a);break;case 21:break;default:Fi(l,a),bo(a)}}function bo(a){var l=a.flags;if(l&2){try{e:{for(var m=a.return;m!==null;){if(I2(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var P=w.stateNode;w.flags&32&&(Ir(P,""),w.flags&=-33);var A=F2(a);wd(a,A,P);break;case 3:case 4:var _=w.stateNode.containerInfo,V=F2(a);$1(a,V,_);break;default:throw Error(n(161))}}catch(Z){Un(a,a.return,Z)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function Cd(a,l,m){it=a,V1(a)}function V1(a,l,m){for(var w=(a.mode&1)!==0;it!==null;){var P=it,A=P.child;if(P.tag===22&&w){var _=P.memoizedState!==null||vd;if(!_){var V=P.alternate,Z=V!==null&&V.memoizedState!==null||zn;V=vd;var Ce=zn;if(vd=_,(zn=Z)&&!Ce)for(it=P;it!==null;)_=it,Z=_.child,_.tag===22&&_.memoizedState!==null?L2(P):Z!==null?(Z.return=_,it=Z):L2(P);for(;A!==null;)it=A,V1(A),A=A.sibling;it=P,vd=V,zn=Ce}ko(a)}else(P.subtreeFlags&8772)!==0&&A!==null?(A.return=P,it=A):ko(a)}}function ko(a){for(;it!==null;){var l=it;if((l.flags&8772)!==0){var m=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:zn||mf(5,l);break;case 1:var w=l.stateNode;if(l.flags&4&&!zn)if(m===null)w.componentDidMount();else{var P=l.elementType===l.type?m.memoizedProps:ro(l.type,m.memoizedProps);w.componentDidUpdate(P,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var A=l.updateQueue;A!==null&&v1(l,A,w);break;case 3:var _=l.updateQueue;if(_!==null){if(m=null,l.child!==null)switch(l.child.tag){case 5:m=l.child.stateNode;break;case 1:m=l.child.stateNode}v1(l,_,m)}break;case 5:var V=l.stateNode;if(m===null&&l.flags&4){m=V;var Z=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&m.focus();break;case"img":Z.src&&(m.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Ce=l.alternate;if(Ce!==null){var Ne=Ce.memoizedState;if(Ne!==null){var je=Ne.dehydrated;je!==null&&xn(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}zn||l.flags&512&&yd(l)}catch(_e){Un(l,l.return,_e)}}if(l===a){it=null;break}if(m=l.sibling,m!==null){m.return=l.return,it=m;break}it=l.return}}function Da(a){for(;it!==null;){var l=it;if(l===a){it=null;break}var m=l.sibling;if(m!==null){m.return=l.return,it=m;break}it=l.return}}function L2(a){for(;it!==null;){var l=it;try{switch(l.tag){case 0:case 11:case 15:var m=l.return;try{mf(4,l)}catch(Z){Un(l,m,Z)}break;case 1:var w=l.stateNode;if(typeof w.componentDidMount=="function"){var P=l.return;try{w.componentDidMount()}catch(Z){Un(l,P,Z)}}var A=l.return;try{yd(l)}catch(Z){Un(l,A,Z)}break;case 5:var _=l.return;try{yd(l)}catch(Z){Un(l,_,Z)}}}catch(Z){Un(l,l.return,Z)}if(l===a){it=null;break}var V=l.sibling;if(V!==null){V.return=l.return,it=V;break}it=l.return}}var _2=Math.ceil,xd=L.ReactCurrentDispatcher,U1=L.ReactCurrentOwner,io=L.ReactCurrentBatchConfig,un=0,xr=null,lr=null,Mr=0,Li=0,Vl=yi(0),vr=0,vf=null,Aa=0,yf=0,Ed=0,wf=null,Pi=null,X1=0,Du=1/0,Ys=null,Pd=!1,K1=null,Ba=null,Sd=!1,Ra=null,oi=0,Cf=0,Y1=null,Td=-1,xf=0;function si(){return(un&6)!==0?Cn():Td!==-1?Td:Td=Cn()}function Ma(a){return(a.mode&1)===0?1:(un&2)!==0&&Mr!==0?Mr&-Mr:m2.transition!==null?(xf===0&&(xf=qe()),xf):(a=Et,a!==0||(a=window.event,a=a===void 0?16:$p(a.type)),a)}function Oo(a,l,m,w){if(50<Cf)throw Cf=0,Y1=null,Error(n(185));Nt(a,m,w),((un&2)===0||a!==xr)&&(a===xr&&((un&2)===0&&(yf|=m),vr===4&&ba(a,Mr)),Si(a,w),m===1&&un===0&&(l.mode&1)===0&&(Du=Cn()+500,Uh&&Ca()))}function Si(a,l){var m=a.callbackNode;Ve(a,l);var w=De(a,a===xr?Mr:0);if(w===0)m!==null&&yh(m),a.callbackNode=null,a.callbackPriority=0;else if(l=w&-w,a.callbackPriority!==l){if(m!=null&&yh(m),l===1)a.tag===0?pu(N2.bind(null,a)):d2(N2.bind(null,a)),$h(function(){(un&6)===0&&Ca()}),m=null;else{switch(Pn(w)){case 1:m=Zo;break;case 4:m=xh;break;case 16:m=Qo;break;case 536870912:m=Ic;break;default:m=Qo}m=V2(m,Dd.bind(null,a))}a.callbackPriority=l,a.callbackNode=m}}function Dd(a,l){if(Td=-1,xf=0,(un&6)!==0)throw Error(n(327));var m=a.callbackNode;if(Ul()&&a.callbackNode!==m)return null;var w=De(a,a===xr?Mr:0);if(w===0)return null;if((w&30)!==0||(w&a.expiredLanes)!==0||l)l=Ad(a,w);else{l=w;var P=un;un|=2;var A=G2();(xr!==a||Mr!==l)&&(Ys=null,Du=Cn()+500,Bu(a,l));do try{l7();break}catch(V){H2(a,V)}while(!0);js(),xd.current=A,un=P,lr!==null?l=0:(xr=null,Mr=0,l=vr)}if(l!==0){if(l===2&&(P=We(a),P!==0&&(w=P,l=q1(a,P))),l===1)throw m=vf,Bu(a,0),ba(a,w),Si(a,Cn()),m;if(l===6)ba(a,w);else{if(P=a.current.alternate,(w&30)===0&&!a7(P)&&(l=Ad(a,w),l===2&&(A=We(a),A!==0&&(w=A,l=q1(a,A))),l===1))throw m=vf,Bu(a,0),ba(a,w),Si(a,Cn()),m;switch(a.finishedWork=P,a.finishedLanes=w,l){case 0:case 1:throw Error(n(345));case 2:Ru(a,Pi,Ys);break;case 3:if(ba(a,w),(w&130023424)===w&&(l=X1+500-Cn(),10<l)){if(De(a,0)!==0)break;if(P=a.suspendedLanes,(P&w)!==w){si(),a.pingedLanes|=a.suspendedLanes&P;break}a.timeoutHandle=ma(Ru.bind(null,a,Pi,Ys),l);break}Ru(a,Pi,Ys);break;case 4:if(ba(a,w),(w&4194240)===w)break;for(l=a.eventTimes,P=-1;0<w;){var _=31-Ri(w);A=1<<_,_=l[_],_>P&&(P=_),w&=~A}if(w=P,w=Cn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*_2(w/1960))-w,10<w){a.timeoutHandle=ma(Ru.bind(null,a,Pi,Ys),w);break}Ru(a,Pi,Ys);break;case 5:Ru(a,Pi,Ys);break;default:throw Error(n(329))}}}return Si(a,Cn()),a.callbackNode===m?Dd.bind(null,a):null}function q1(a,l){var m=wf;return a.current.memoizedState.isDehydrated&&(Bu(a,l).flags|=256),a=Ad(a,l),a!==2&&(l=Pi,Pi=m,l!==null&&Z1(l)),a}function Z1(a){Pi===null?Pi=a:Pi.push.apply(Pi,a)}function a7(a){for(var l=a;;){if(l.flags&16384){var m=l.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var P=m[w],A=P.getSnapshot;P=P.value;try{if(!ye(A(),P))return!1}catch{return!1}}}if(m=l.child,l.subtreeFlags&16384&&m!==null)m.return=l,l=m;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ba(a,l){for(l&=~Ed,l&=~yf,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var m=31-Ri(l),w=1<<m;a[m]=-1,l&=~w}}function N2(a){if((un&6)!==0)throw Error(n(327));Ul();var l=De(a,0);if((l&1)===0)return Si(a,Cn()),null;var m=Ad(a,l);if(a.tag!==0&&m===2){var w=We(a);w!==0&&(l=w,m=q1(a,w))}if(m===1)throw m=vf,Bu(a,0),ba(a,l),Si(a,Cn()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Ru(a,Pi,Ys),Si(a,Cn()),null}function Q1(a,l){var m=un;un|=1;try{return a(l)}finally{un=m,un===0&&(Du=Cn()+500,Uh&&Ca())}}function Au(a){Ra!==null&&Ra.tag===0&&(un&6)===0&&Ul();var l=un;un|=1;var m=io.transition,w=Et;try{if(io.transition=null,Et=1,a)return a()}finally{Et=w,io.transition=m,un=l,(un&6)===0&&Ca()}}function J1(){Li=Vl.current,Nn(Vl)}function Bu(a,l){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,Yc(m)),lr!==null)for(m=lr.return;m!==null;){var w=m;switch(yu(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Vh();break;case 3:Pa(),Nn(wi),Nn(Hr),nd();break;case 5:td(w);break;case 4:Pa();break;case 13:Nn(Wn);break;case 19:Nn(Wn);break;case 10:Zh(w.type._context);break;case 22:case 23:J1()}m=m.return}if(xr=a,lr=a=Io(a.current,null),Mr=Li=l,vr=0,vf=null,Ed=yf=Aa=0,Pi=wf=null,Cu!==null){for(l=0;l<Cu.length;l++)if(m=Cu[l],w=m.interleaved,w!==null){m.interleaved=null;var P=w.next,A=m.pending;if(A!==null){var _=A.next;A.next=P,w.next=_}m.pending=w}Cu=null}return a}function H2(a,l){do{var m=lr;try{if(js(),nf.current=ud,Fl){for(var w=Vn.memoizedState;w!==null;){var P=w.queue;P!==null&&(P.pending=null),w=w.next}Fl=!1}if(Sa=0,mr=rr=Vn=null,rf=!1,Eu=0,U1.current=null,m===null||m.return===null){vr=1,vf=l,lr=null;break}e:{var A=a,_=m.return,V=m,Z=l;if(l=Mr,V.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ce=Z,Ne=V,je=Ne.tag;if((Ne.mode&1)===0&&(je===0||je===11||je===15)){var _e=Ne.alternate;_e?(Ne.updateQueue=_e.updateQueue,Ne.memoizedState=_e.memoizedState,Ne.lanes=_e.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var rt=A2(_);if(rt!==null){rt.flags&=-257,O1(rt,_,V,A,l),rt.mode&1&&lf(A,Ce,l),l=rt,Z=Ce;var at=l.updateQueue;if(at===null){var ct=new Set;ct.add(Z),l.updateQueue=ct}else at.add(Z);break e}else{if((l&1)===0){lf(A,Ce,l),eg();break e}Z=Error(n(426))}}else if(Hn&&V.mode&1){var ir=A2(_);if(ir!==null){(ir.flags&65536)===0&&(ir.flags|=256),O1(ir,_,V,A,l),ls(Tu(Z,V));break e}}A=Z=Tu(Z,V),vr!==4&&(vr=2),wf===null?wf=[A]:wf.push(A),A=_;do{switch(A.tag){case 3:A.flags|=65536,l&=-l,A.lanes|=l;var de=uf(A,Z,l);w2(A,de);break e;case 1:V=Z;var re=A.type,pe=A.stateNode;if((A.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Ba===null||!Ba.has(pe)))){A.flags|=65536,l&=-l,A.lanes|=l;var Ue=dd(A,V,l);w2(A,Ue);break e}}A=A.return}while(A!==null)}$2(m)}catch(ht){l=ht,lr===m&&m!==null&&(lr=m=m.return);continue}break}while(!0)}function G2(){var a=xd.current;return xd.current=ud,a===null?ud:a}function eg(){(vr===0||vr===3||vr===2)&&(vr=4),xr===null||(Aa&268435455)===0&&(yf&268435455)===0||ba(xr,Mr)}function Ad(a,l){var m=un;un|=2;var w=G2();(xr!==a||Mr!==l)&&(Ys=null,Bu(a,l));do try{u7();break}catch(P){H2(a,P)}while(!0);if(js(),un=m,xd.current=w,lr!==null)throw Error(n(261));return xr=null,Mr=0,vr}function u7(){for(;lr!==null;)j2(lr)}function l7(){for(;lr!==null&&!ll();)j2(lr)}function j2(a){var l=z2(a.alternate,a,Li);a.memoizedProps=a.pendingProps,l===null?$2(a):lr=l,U1.current=null}function $2(a){var l=a;do{var m=l.alternate;if(a=l.return,(l.flags&32768)===0){if(m=i7(m,l,Li),m!==null){lr=m;return}}else{if(m=o7(m,l),m!==null){m.flags&=32767,lr=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{vr=6,lr=null;return}}if(l=l.sibling,l!==null){lr=l;return}lr=l=a}while(l!==null);vr===0&&(vr=5)}function Ru(a,l,m){var w=Et,P=io.transition;try{io.transition=null,Et=1,c7(a,l,m,w)}finally{io.transition=P,Et=w}return null}function c7(a,l,m,w){do Ul();while(Ra!==null);if((un&6)!==0)throw Error(n(327));m=a.finishedWork;var P=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var A=m.lanes|m.childLanes;if(an(a,A),a===xr&&(lr=xr=null,Mr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Sd||(Sd=!0,V2(Qo,function(){return Ul(),null})),A=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||A){A=io.transition,io.transition=null;var _=Et;Et=1;var V=un;un|=4,U1.current=null,s7(a,m),z1(m,a),e7(gu),Ph=!!Xc,gu=Xc=null,a.current=m,Cd(m),wh(),un=V,Et=_,io.transition=A}else a.current=m;if(Sd&&(Sd=!1,Ra=a,oi=P),A=a.pendingLanes,A===0&&(Ba=null),U0(m.stateNode),Si(a,Cn()),l!==null)for(w=a.onRecoverableError,m=0;m<l.length;m++)P=l[m],w(P.value,{componentStack:P.stack,digest:P.digest});if(Pd)throw Pd=!1,a=K1,K1=null,a;return(oi&1)!==0&&a.tag!==0&&Ul(),A=a.pendingLanes,(A&1)!==0?a===Y1?Cf++:(Cf=0,Y1=a):Cf=0,Ca(),null}function Ul(){if(Ra!==null){var a=Pn(oi),l=io.transition,m=Et;try{if(io.transition=null,Et=16>a?16:a,Ra===null)var w=!1;else{if(a=Ra,Ra=null,oi=0,(un&6)!==0)throw Error(n(331));var P=un;for(un|=4,it=a.current;it!==null;){var A=it,_=A.child;if((it.flags&16)!==0){var V=A.deletions;if(V!==null){for(var Z=0;Z<V.length;Z++){var Ce=V[Z];for(it=Ce;it!==null;){var Ne=it;switch(Ne.tag){case 0:case 11:case 15:Ks(8,Ne,A)}var je=Ne.child;if(je!==null)je.return=Ne,it=je;else for(;it!==null;){Ne=it;var _e=Ne.sibling,rt=Ne.return;if(O2(Ne),Ne===Ce){it=null;break}if(_e!==null){_e.return=rt,it=_e;break}it=rt}}}var at=A.alternate;if(at!==null){var ct=at.child;if(ct!==null){at.child=null;do{var ir=ct.sibling;ct.sibling=null,ct=ir}while(ct!==null)}}it=A}}if((A.subtreeFlags&2064)!==0&&_!==null)_.return=A,it=_;else e:for(;it!==null;){if(A=it,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Ks(9,A,A.return)}var de=A.sibling;if(de!==null){de.return=A.return,it=de;break e}it=A.return}}var re=a.current;for(it=re;it!==null;){_=it;var pe=_.child;if((_.subtreeFlags&2064)!==0&&pe!==null)pe.return=_,it=pe;else e:for(_=re;it!==null;){if(V=it,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:mf(9,V)}}catch(ht){Un(V,V.return,ht)}if(V===_){it=null;break e}var Ue=V.sibling;if(Ue!==null){Ue.return=V.return,it=Ue;break e}it=V.return}}if(un=P,Ca(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(fl,a)}catch{}w=!0}return w}finally{Et=m,io.transition=l}}return!1}function Bd(a,l,m){l=Tu(m,l),l=uf(a,l,1),a=to(a,l,1),l=si(),a!==null&&(Nt(a,1,l),Si(a,l))}function Un(a,l,m){if(a.tag===3)Bd(a,a,m);else for(;l!==null;){if(l.tag===3){Bd(l,a,m);break}else if(l.tag===1){var w=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Ba===null||!Ba.has(w))){a=Tu(m,a),a=dd(l,a,1),l=to(l,a,1),a=si(),l!==null&&(Nt(l,1,a),Si(l,a));break}}l=l.return}}function f7(a,l,m){var w=a.pingCache;w!==null&&w.delete(l),l=si(),a.pingedLanes|=a.suspendedLanes&m,xr===a&&(Mr&m)===m&&(vr===4||vr===3&&(Mr&130023424)===Mr&&500>Cn()-X1?Bu(a,0):Ed|=m),Si(a,l)}function W2(a,l){l===0&&((a.mode&1)===0?l=1:(l=le,le<<=1,(le&130023424)===0&&(le=4194304)));var m=si();a=$s(a,l),a!==null&&(Nt(a,l,m),Si(a,m))}function h7(a){var l=a.memoizedState,m=0;l!==null&&(m=l.retryLane),W2(a,m)}function d7(a,l){var m=0;switch(a.tag){case 13:var w=a.stateNode,P=a.memoizedState;P!==null&&(m=P.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(l),W2(a,m)}var z2;z2=function(a,l,m){if(a!==null)if(a.memoizedProps!==l.pendingProps||wi.current)ri=!0;else{if((a.lanes&m)===0&&(l.flags&128)===0)return ri=!1,M2(a,l,m);ri=(a.flags&131072)!==0}else ri=!1,Hn&&(l.flags&1048576)!==0&&g2(l,Kh,l.index);switch(l.lanes=0,l.tag){case 2:var w=l.type;md(a,l),a=l.pendingProps;var P=Ml(l,Hr.current);Ea(l,m),P=Pu(null,l,w,a,P,m);var A=rd();return l.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Ci(w)?(A=!0,qi(l)):A=!1,l.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Jh(l),P.updater=fd,l.stateNode=P,P._reactInternals=l,k1(l,w,a,m),l=H1(null,l,w,!0,A,m)):(l.tag=0,Hn&&A&&qc(l),Ar(null,l,P,m),l=l.child),l;case 16:w=l.elementType;e:{switch(md(a,l),a=l.pendingProps,P=w._init,w=P(w._payload),l.type=w,P=l.tag=p7(w),a=ro(w,a),P){case 0:l=_1(null,l,w,a,m);break e;case 1:l=N1(null,l,w,a,m);break e;case 11:l=B2(null,l,w,a,m);break e;case 14:l=I1(null,l,w,ro(w.type,a),m);break e}throw Error(n(306,w,""))}return l;case 0:return w=l.type,P=l.pendingProps,P=l.elementType===w?P:ro(w,P),_1(a,l,w,P,m);case 1:return w=l.type,P=l.pendingProps,P=l.elementType===w?P:ro(w,P),N1(a,l,w,P,m);case 3:e:{if(R2(l),a===null)throw Error(n(387));w=l.pendingProps,A=l.memoizedState,P=A.element,y2(a,l),Ol(l,w,null,m);var _=l.memoizedState;if(w=_.element,A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){P=Tu(Error(n(423)),l),l=gs(a,l,w,m,P);break e}else if(w!==P){P=Tu(Error(n(424)),l),l=gs(a,l,w,m,P);break e}else for(Oi=va(l.stateNode.containerInfo.firstChild),jr=l,Hn=!0,Ao=null,m=qh(l,null,w,m),l.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(us(),w===P){l=Ro(a,l,m);break e}Ar(a,l,w,m)}l=l.child}return l;case 5:return w1(l),a===null&&xi(l),w=l.type,P=l.pendingProps,A=a!==null?a.memoizedProps:null,_=P.children,Kc(w,P)?_=null:A!==null&&Kc(w,A)&&(l.flags|=32),L1(a,l),Ar(a,l,_,m),l.child;case 6:return a===null&&xi(l),null;case 13:return pd(a,l,m);case 4:return y1(l,l.stateNode.containerInfo),w=l.pendingProps,a===null?l.child=Zn(l,null,w,m):Ar(a,l,w,m),l.child;case 11:return w=l.type,P=l.pendingProps,P=l.elementType===w?P:ro(w,P),B2(a,l,w,P,m);case 7:return Ar(a,l,l.pendingProps,m),l.child;case 8:return Ar(a,l,l.pendingProps.children,m),l.child;case 12:return Ar(a,l,l.pendingProps.children,m),l.child;case 10:e:{if(w=l.type._context,P=l.pendingProps,A=l.memoizedProps,_=P.value,In(Jc,w._currentValue),w._currentValue=_,A!==null)if(ye(A.value,_)){if(A.children===P.children&&!wi.current){l=Ro(a,l,m);break e}}else for(A=l.child,A!==null&&(A.return=l);A!==null;){var V=A.dependencies;if(V!==null){_=A.child;for(var Z=V.firstContext;Z!==null;){if(Z.context===w){if(A.tag===1){Z=Ws(-1,m&-m),Z.tag=2;var Ce=A.updateQueue;if(Ce!==null){Ce=Ce.shared;var Ne=Ce.pending;Ne===null?Z.next=Z:(Z.next=Ne.next,Ne.next=Z),Ce.pending=Z}}A.lanes|=m,Z=A.alternate,Z!==null&&(Z.lanes|=m),Dr(A.return,m,l),V.lanes|=m;break}Z=Z.next}}else if(A.tag===10)_=A.type===l.type?null:A.child;else if(A.tag===18){if(_=A.return,_===null)throw Error(n(341));_.lanes|=m,V=_.alternate,V!==null&&(V.lanes|=m),Dr(_,m,l),_=A.sibling}else _=A.child;if(_!==null)_.return=A;else for(_=A;_!==null;){if(_===l){_=null;break}if(A=_.sibling,A!==null){A.return=_.return,_=A;break}_=_.return}A=_}Ar(a,l,P.children,m),l=l.child}return l;case 9:return P=l.type,w=l.pendingProps.children,Ea(l,m),P=Ji(P),w=w(P),l.flags|=1,Ar(a,l,w,m),l.child;case 14:return w=l.type,P=ro(w,l.pendingProps),P=ro(w.type,P),I1(a,l,w,P,m);case 15:return ds(a,l,l.type,l.pendingProps,m);case 17:return w=l.type,P=l.pendingProps,P=l.elementType===w?P:ro(w,P),md(a,l),l.tag=1,Ci(w)?(a=!0,qi(l)):a=!1,Ea(l,m),Su(l,w,P),k1(l,w,P,m),H1(null,l,w,!0,a,m);case 19:return Ta(a,l,m);case 22:return F1(a,l,m)}throw Error(n(156,l.tag))};function V2(a,l){return vh(a,l)}function g7(a,l,m,w){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oo(a,l,m,w){return new g7(a,l,m,w)}function Rd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function p7(a){if(typeof a=="function")return Rd(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ne)return 11;if(a===ge)return 14}return 2}function Io(a,l){var m=a.alternate;return m===null?(m=oo(a.tag,l,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=l,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&14680064,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,l=a.dependencies,m.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function Md(a,l,m,w,P,A){var _=2;if(w=a,typeof a=="function")Rd(a)&&(_=1);else if(typeof a=="string")_=5;else e:switch(a){case z:return Mu(m.children,P,A,l);case Y:_=8,P|=8;break;case te:return a=oo(12,m,l,P|2),a.elementType=te,a.lanes=A,a;case oe:return a=oo(13,m,l,P),a.elementType=oe,a.lanes=A,a;case ve:return a=oo(19,m,l,P),a.elementType=ve,a.lanes=A,a;case Pe:return bd(m,P,A,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case se:_=10;break e;case me:_=9;break e;case ne:_=11;break e;case ge:_=14;break e;case Be:_=16,w=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return l=oo(_,m,l,P),l.elementType=a,l.type=w,l.lanes=A,l}function Mu(a,l,m,w){return a=oo(7,a,w,l),a.lanes=m,a}function bd(a,l,m,w){return a=oo(22,a,w,l),a.elementType=Pe,a.lanes=m,a.stateNode={isHidden:!1},a}function tg(a,l,m){return a=oo(6,a,null,l),a.lanes=m,a}function ng(a,l,m){return l=oo(4,a.children!==null?a.children:[],a.key,l),l.lanes=m,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function m7(a,l,m,w,P){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=st(0),this.expirationTimes=st(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.identifierPrefix=w,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function rg(a,l,m,w,P,A,_,V,Z){return a=new m7(a,l,m,V,Z),l===1?(l=1,A===!0&&(l|=8)):l=0,A=oo(3,null,null,l),a.current=A,A.stateNode=a,A.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jh(A),a}function v7(a,l,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:w==null?null:""+w,children:a,containerInfo:l,implementation:m}}function U2(a){if(!a)return wa;a=a._reactInternals;e:{if(Is(a)!==a||a.tag!==1)throw Error(n(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ci(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(Ci(m))return f2(a,m,l)}return l}function X2(a,l,m,w,P,A,_,V,Z){return a=rg(m,w,!0,a,P,A,_,V,Z),a.context=U2(null),m=a.current,w=si(),P=Ma(m),A=Ws(w,P),A.callback=l??null,to(m,A,P),a.current.lanes=P,Nt(a,P,w),Si(a,w),a}function kd(a,l,m,w){var P=l.current,A=si(),_=Ma(P);return m=U2(m),l.context===null?l.context=m:l.pendingContext=m,l=Ws(A,_),l.payload={element:a},w=w===void 0?null:w,w!==null&&(l.callback=w),a=to(P,l,_),a!==null&&(Oo(a,P,_,A),ed(a,P,_)),_}function Od(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function K2(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<l?m:l}}function ig(a,l){K2(a,l),(a=a.alternate)&&K2(a,l)}function y7(){return null}var Y2=typeof reportError=="function"?reportError:function(a){console.error(a)};function Id(a){this._internalRoot=a}Ef.prototype.render=Id.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));kd(a,l,null,null)},Ef.prototype.unmount=Id.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Au(function(){kd(null,a,null,null)}),l[ki]=null}};function Ef(a){this._internalRoot=a}Ef.prototype.unstable_scheduleHydration=function(a){if(a){var l=Fc();a={blockedOn:null,target:a,priority:l};for(var m=0;m<fa.length&&l!==0&&l<fa[m].priority;m++);fa.splice(m,0,a),m===0&&Gp(a)}};function og(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Fd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function q2(){}function w7(a,l,m,w,P){if(P){if(typeof w=="function"){var A=w;w=function(){var Ce=Od(_);A.call(Ce)}}var _=X2(l,w,a,0,null,!1,!1,"",q2);return a._reactRootContainer=_,a[ki]=_.current,pa(a.nodeType===8?a.parentNode:a),Au(),_}for(;P=a.lastChild;)a.removeChild(P);if(typeof w=="function"){var V=w;w=function(){var Ce=Od(Z);V.call(Ce)}}var Z=rg(a,0,!1,null,null,!1,!1,"",q2);return a._reactRootContainer=Z,a[ki]=Z.current,pa(a.nodeType===8?a.parentNode:a),Au(function(){kd(l,Z,m,w)}),Z}function bu(a,l,m,w,P){var A=m._reactRootContainer;if(A){var _=A;if(typeof P=="function"){var V=P;P=function(){var Z=Od(_);V.call(Z)}}kd(l,_,a,P)}else _=w7(m,l,a,P,w);return Od(_)}Fr=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var m=ee(l.pendingLanes);m!==0&&(Jt(l,m|1),Si(l,Cn()),(un&6)===0&&(Du=Cn()+500,Ca()))}break;case 13:Au(function(){var w=$s(a,1);if(w!==null){var P=si();Oo(w,a,1,P)}}),ig(a,1)}},Jo=function(a){if(a.tag===13){var l=$s(a,134217728);if(l!==null){var m=si();Oo(l,a,134217728,m)}ig(a,134217728)}},hl=function(a){if(a.tag===13){var l=Ma(a),m=$s(a,l);if(m!==null){var w=si();Oo(m,a,l,w)}ig(a,l)}},Fc=function(){return Et},au=function(a,l){var m=Et;try{return Et=a,l()}finally{Et=m}},Xi=function(a,l,m){switch(l){case"input":if(Bt(a,m),l=m.name,m.type==="radio"&&l!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<m.length;l++){var w=m[l];if(w!==a&&w.form===a.form){var P=zh(w);if(!P)throw Error(n(90));ke(w),Bt(w,P)}}}break;case"textarea":zi(a,m);break;case"select":l=m.value,l!=null&&_t(a,!!m.multiple,l,!1)}},hh=Q1,Rc=Au;var C7={usingClientEntryPoint:!1,Events:[Nr,jt,zh,ch,fh,Q1]},Pf={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x7={bundleType:Pf.bundleType,version:Pf.version,rendererPackageName:Pf.rendererPackageName,rendererConfig:Pf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ph(a),a===null?null:a.stateNode},findFiberByHostInstance:Pf.findFiberByHostInstance||y7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{fl=Ld.inject(x7),mi=Ld}catch{}}return lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C7,lo.createPortal=function(a,l){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!og(l))throw Error(n(200));return v7(a,l,null,m)},lo.createRoot=function(a,l){if(!og(a))throw Error(n(299));var m=!1,w="",P=Y2;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(P=l.onRecoverableError)),l=rg(a,1,!1,null,null,m,!1,w,P),a[ki]=l.current,pa(a.nodeType===8?a.parentNode:a),new Id(l)},lo.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=ph(l),a=a===null?null:a.stateNode,a},lo.flushSync=function(a){return Au(a)},lo.hydrate=function(a,l,m){if(!Fd(l))throw Error(n(200));return bu(null,a,l,!0,m)},lo.hydrateRoot=function(a,l,m){if(!og(a))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,P=!1,A="",_=Y2;if(m!=null&&(m.unstable_strictMode===!0&&(P=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(_=m.onRecoverableError)),l=X2(l,null,a,1,m??null,P,!1,A,_),a[ki]=l.current,pa(a),w)for(a=0;a<w.length;a++)m=w[a],P=m._getVersion,P=P(m._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[m,P]:l.mutableSourceEagerHydrationData.push(m,P);return new Ef(l)},lo.render=function(a,l,m){if(!Fd(l))throw Error(n(200));return bu(null,a,l,!1,m)},lo.unmountComponentAtNode=function(a){if(!Fd(a))throw Error(n(40));return a._reactRootContainer?(Au(function(){bu(null,null,a,!1,function(){a._reactRootContainer=null,a[ki]=null})}),!0):!1},lo.unstable_batchedUpdates=Q1,lo.unstable_renderSubtreeIntoContainer=function(a,l,m,w){if(!Fd(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return bu(a,l,m,!1,w)},lo.version="18.3.1-next-f1338f8080-20240426",lo}var Ky;function EE(){if(Ky)return L7.exports;Ky=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),L7.exports=hb(),L7.exports}var Yy;function db(){if(Yy)return em;Yy=1;var e=EE();return em.createRoot=e.createRoot,em.hydrateRoot=e.hydrateRoot,em}var z3=db();const gb=[{id:"Sfftf",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:"结束"}],align:"center"},points:[[-276.50609579402317,624.50390625],[-156.50609579402317,684.50390625]],strokeWidth:2},{id:"aMJWD",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:"过程"}],align:"center"},points:[[-71.50609579402317,464.50390625],[48.49390420597683,524.50390625]],strokeWidth:2},{id:"FHSxH",type:"geometry",shape:"decision",angle:0,opacity:1,textHeight:20,text:{children:[{text:"判断"}],align:"center"},points:[[-286.50609579402317,459.50390625],[-146.50609579402317,529.50390625]],strokeWidth:2},{id:"xnnhM",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:"过程"}],align:"center"},points:[[-276.50609579402317,344.50390625],[-156.50609579402317,404.50390625]],strokeWidth:2},{id:"FAkXk",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:"开始"}],align:"center"},points:[[-276.50609579402317,229.50390625],[-156.50609579402317,289.50390625]],strokeWidth:2},{id:"mrdfi",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"aMJWD"},texts:[],target:{marker:"arrow",connection:[1,.5],boundId:"Sfftf"},opacity:1,points:[[-11.506095794023167,524.50390625],[-156.50609579402317,654.50390625]],strokeWidth:2},{id:"bjjcw",type:"line",shape:"elbow",source:{marker:"none",connection:[1,.5],boundId:"FHSxH"},texts:[{text:{children:[{text:"否"}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[0,.5],boundId:"aMJWD"},opacity:1,points:[[-146.50609579402317,494.50390625],[-71.50609579402317,494.50390625]],strokeWidth:2},{id:"mnzKm",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FHSxH"},texts:[{text:{children:[{text:"是"}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[.5,0],boundId:"Sfftf"},opacity:1,points:[[-216.50609579402317,529.50390625],[-216.50609579402317,624.50390625]],strokeWidth:2},{id:"bJmWK",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"xnnhM"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"FHSxH"},opacity:1,points:[[-216.50609579402317,404.50390625],[-216.50609579402317,459.50390625]],strokeWidth:2},{id:"zZtTs",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FAkXk"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"xnnhM"},opacity:1,points:[[-216.50609579402317,289.50390625],[-216.50609579402317,344.50390625]],strokeWidth:2},{type:"mindmap",id:"rzdDJ",rightNodeCount:4,data:{topic:{children:[{text:"思维导图"}]}},children:[{id:"WKQyj",data:{topic:{children:[{text:"观点一"}]}},children:[{id:"RYSRd",data:{topic:{children:[{text:""}]}},children:[{id:"nDBRj",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"PWzAD",data:{topic:{children:[{text:"观点二"}]}},children:[{id:"bTRmh",data:{topic:{children:[{text:""}]}},children:[{id:"bnZEJ",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"nJTYp",data:{topic:{children:[{text:"观点三"}]}},children:[{id:"GtyaH",data:{topic:{children:[{text:""}]}},children:[{id:"JsPEN",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"aCpyY",data:{topic:{children:[{text:"观点四"}]}},children:[{id:"iHynm",data:{topic:{children:[{text:""}]}},children:[{id:"TiZGR",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20}],width:72,height:25,isRoot:!0,points:[[248.24308817248368,470.83369157012714]]},{id:"KXysP",type:"freehand",shape:"feltTipPen",points:[[42.91255547331053,302.4106436724954],[42.91255547331053,302.4106436724954],[42.91255547331053,302.94303472562143],[42.91255547331053,303.6494630350447],[43.30577852049311,305.2479999310129],[43.56933178275932,307.7310582325393],[43.739438069128084,311.12389489834214],[43.855740766990095,315.8164264100736],[43.96492597868843,322.6297134163672],[44.04510428695181,331.4298388256405],[43.800067978237905,341.65545526338],[43.57330869752974,352.71036640029735],[43.07346103637457,363.90530146670363],[42.36826123801535,373.77911119731317],[41.80176985242798,382.6007917969476],[41.050101023702894,390.22783046821706],[40.13474095313774,396.15692679809973],[39.39258212224382,400.6820450814642],[38.54748622256426,403.7768437354819],[37.6139535260923,405.2185182175875],[36.92333546175661,405.2964726869589],[36.131425080979454,404.20079465502687],[35.50071089523186,401.899151188188],[34.73785580109626,398.6839479717576]],strokeWidth:2},{id:"ieFQi",type:"freehand",shape:"feltTipPen",points:[[25.61158363876399,370.9967488504811],[24.916797897797608,369.6071773685483],[24.67749697208211,368.6131714048036],[24.568808312533577,367.69766584799555],[24.885076423453768,366.7492749338374],[25.814401426806455,365.80719346179495],[27.472139546659776,364.8344983351174],[29.643691195005033,363.49568318743997],[32.693254384731574,361.9420582621281],[36.67141481223808,360.52686710208155],[41.460509155073225,358.7994936728549],[46.363154873429096,357.5239529722815],[51.357258169067165,356.2862923784672],[56.080029524996746,355.0491584530558],[60.609899785114806,353.4775345173878],[64.56194534795014,352.02103573276264],[68.11000361516409,350.60845154555255],[71.0432829003974,348.88126019241946]],strokeWidth:2},{id:"ZjTpX",type:"freehand",shape:"feltTipPen",points:[[68.86401322513058,312.91491483450346],[68.1735521778042,310.84353169252546],[67.41961422156675,309.6087095594078],[67.00428402343306,309.3536935515943],[66.81450089413721,310.0550514771515],[66.34038086399784,311.9321737730109],[65.99930516212868,314.9252733774777],[65.76493120773563,319.0075757836469],[65.50698001538291,324.8454447611596],[65.02776614620694,332.64203520547954],[64.67902100438306,341.6264849819357],[64.11463195585026,351.0762550531984],[63.657958293810964,360.48902188913536],[63.04473447686752,368.75232276852813],[62.55449492935492,375.95277981063674],[62.18436301867911,381.56388568202357],[61.893086608457736,386.0039779745096],[62.00383585376545,389.32395830976594],[62.44846840613474,390.88398031753724],[63.15060860052046,391.07489696871954],[64.34449034644518,390.5884944484836],[65.64211346916642,389.4261418477857],[67.25944277236914,387.782242059898],[69.23165633563673,385.76120575866327],[71.71743027002805,383.19494124915974],[74.20940897208703,380.6129718614996],[76.77953783638219,377.6509795241994],[79.34979535526082,374.4745011719527],[81.89429223163853,370.7737675988022],[84.10618191487475,367.04968089075675],[86.03563505299923,363.63088507493677],[87.46080352054906,360.399521388795],[88.1056750656117,357.6989220306362],[88.16828991777567,355.7236120330629],[87.48244052706974,355.00434990648984],[86.2333550765257,355.27069617696844],[84.51910378471422,356.9340997592056],[82.51573374887522,359.32984726594015],[80.27308198379643,362.24551851202096],[78.21667296709421,365.22803860275263],[76.35201341247313,368.5401097166253],[74.99308933654112,371.6932036120464],[74.35212759703364,374.70821482483126],[74.60967360095816,377.26474387207355],[75.8849959549687,379.3530494492573],[77.94172322119522,380.842715697145],[80.57299755293872,381.8430887164298],[83.95715202891785,382.2149938287469],[87.7255628157082,381.7306166114225],[91.40530995863634,380.2991663616734],[95.13913472270957,378.13128514703686],[98.92708765115646,375.7552142431162],[102.0579850561092,372.9253456761065],[104.97507141472926,369.44997213897597]],strokeWidth:2},{id:"BcwPw",type:"freehand",shape:"feltTipPen",points:[[107.17330800162682,315.3864822394383],[107.17330800162682,314.68788165725556],[107.68605557639017,312.90885394396474],[107.96149974513816,313.2362923673821],[108.10703733793963,315.0497318130668],[107.8487479673318,318.03523127197906],[107.32153980175809,322.12789466339774],[106.61305306052401,327.6496629440474],[105.74690506062763,335.00159663015376],[104.73739866196371,343.78755873208894],[103.94267964865736,352.97766303651343],[103.35592288485196,361.47102300039325],[102.91428825429313,368.76097715745465],[102.6058707992234,374.9056149852507],[102.71664913860292,379.9377566430242],[103.17859970557953,383.6504834901055],[103.92926148783505,386.2850629415473],[105.18518596763676,387.2232908455765],[106.47876774090406,386.58627383548384],[108.42878794523818,384.57530357161824],[110.29842036408337,381.5909146492971],[112.34070966123869,377.28716626469696]],strokeWidth:2},{id:"yMmdM",type:"freehand",shape:"feltTipPen",points:[[128.1816309435763,331.4516703715174],[129.51989239862593,327.43688600636807],[131.005085696143,323.4655010709533],[132.17321403650323,320.22803619761754],[133.24924577177063,317.90628029633746],[134.02975227964959,316.5798884844974],[134.14783424896297,316.54041718292166],[133.8926984321866,317.4977479623561],[133.22287144213902,318.7988827390612],[132.27887681412,321.3442647147925],[130.829808383076,324.8231649206603],[129.27178361773264,329.3964588424354],[127.78393542349028,334.4312208988461],[126.31888454196638,340.2327386833279],[125.22792882378127,346.5727097657512],[124.13664240037093,353.24911989309595],[123.36064559305925,359.88700063912194],[122.81705197935372,366.0875872230375],[122.79462123094964,371.3624312339792],[123.15298153689861,375.5286555827964],[123.81108128708121,378.64043637310743],[124.6839217725904,380.3996198544631],[125.97026539321524,380.7890049944302],[127.99056067292241,380.19213831837743],[130.21153900142696,378.88476388393275],[132.56469019269213,377.07184390433423],[134.71141990522602,374.91101506003025],[136.96790159302333,372.5508270030653],[138.9351434822873,370.14526674676773],[140.72162313101268,367.6906625775785],[142.03572860518085,365.5229081393748],[142.89232465753918,363.3325348487063],[143.47467228900274,361.3929185298751],[143.84497915370986,359.6507432215033],[144.08901675659746,358.05932667710414],[143.8855064656289,356.820346202075],[143.34705522373548,356.3725972874557],[142.5808927595545,356.7898143492387],[141.9800274132959,357.49246689183866],[141.20573421822047,358.75234451256193],[140.60413838294454,360.40611171229585],[140.11465596613886,362.41982095785744],[139.76488822540597,364.9797643765863],[139.54737858625236,367.56314059669813],[139.74002812916643,370.2232473322459],[140.26313308226082,372.78694339848727],[141.0063724813411,375.06357617497207],[142.27660832589373,376.7366991982256],[143.90287253970297,377.2456393097712],[145.77666987749132,376.86319717881844],[147.58367859613742,375.4638233638746],[149.25082847105915,373.33115185586604],[150.50962222932145,370.61436904767044],[151.43056032976693,367.46666561075864],[151.44918900033605,364.2979858863094],[150.68786139509513,361.64371212257294],[148.71372979842073,359.9930422568298],[146.43462336140402,359.1790375455451]],strokeWidth:2},{id:"mGnrA",type:"freehand",shape:"feltTipPen",points:[[177.499248662022,358.6389118258051],[178.19838756103655,357.240634027776],[178.44740448759654,357.73951734758367],[178.55074397484105,359.33715074880394],[178.61014442712673,361.4559598986337],[178.64812496426435,364.2721952687746],[178.67290254524488,367.2007471343571],[179.01405705257372,370.25629081582184],[179.32285897543971,373.5847859160079],[179.84516425618978,376.4537648810213],[180.89634486087044,378.84118449524004],[182.04776635223294,380.5504960546162],[183.59627761223265,381.1254591487498],[185.41297733632092,380.38858883018776],[187.4644196745192,378.70642262542907],[190.0164112387286,376.2831107782752],[192.61780039149068,373.0528249699667],[195.21903098900867,369.54518732001935],[197.46178243734954,366.1757458818859],[199.45547340950435,363.28229190347093],[201.02062392742647,361.29363533703264],[201.6806297994729,360.75294306951065],[201.77853184386782,361.7431025372819],[201.72497431135622,363.63138804040074],[201.29432857716762,366.2245554151353],[200.87616025463996,369.3207624083346],[200.50422730959127,372.52586028824345],[200.5296583169607,375.60774436001003],[200.89620266978778,378.2107264732288],[201.87814701245662,380.18178744391145],[203.3237210060252,381.1444162192723],[205.0952749780102,381.0964166703482],[207.12816635710493,380.2710789162705],[209.69166653409167,378.53143858393224],[212.3259393904696,376.11874256230595],[214.96944377406982,373.1964359099332],[217.6021329743906,369.60896619783244],[220.1777634274652,365.88642929980443],[222.37298449208703,362.7935994579123],[223.6327261608729,360.8606551033893],[224.5684389548988,359.7015188824592],[224.848266046967,358.9966931873808],[224.61214610266467,358.909744955666],[224.33578711229762,359.2864283518914],[224.33158681173774,359.7816923132753],[224.33524221214162,359.9371871220031],[224.5894090448324,360.01990397554465]],strokeWidth:2},{id:"zZrtc",type:"freehand",shape:"feltTipPen",points:[[235.5810826780001,358.6389118258051],[234.87964309260298,358.6389118258051],[234.61889445335038,358.1611628971107],[234.12449763453247,357.8656015196187],[233.46096624185958,357.7287023810416],[232.64446222875682,357.96746526656835],[231.76248040139313,358.80157625025123],[231.11962755143333,360.3701824969706],[230.17840909863168,362.6051131656107],[229.4605095880559,365.37953360092007],[228.64780049405414,368.46029452436534],[228.04048779767805,371.5130428011137],[227.9466860371993,374.48234753046864],[228.57108726883013,376.7707524845849],[229.75509474791085,378.03104531888886],[231.33021885632598,378.2125552146311],[233.2322381762786,377.24153734271596],[235.350270710728,375.3812154051514],[237.66842033402082,372.8432426035336],[239.49839693217888,369.784392518722],[241.1186238910853,366.75311790215375],[241.97995651143202,363.75648976309395],[242.20144532604337,361.4990092726251],[241.62986112851473,359.9686264420855],[240.7453803173824,359.4909918772258],[239.70060619713928,359.61493973409625],[238.46628906983943,359.86025588147396],[237.4495263714012,360.48134818521913],[237.32546352205378,361.03727631242265],[237.67287740498483,361.4655667580785],[238.6168285626605,361.8240157781095],[240.09541291123065,361.7730616971306],[241.94515372652637,361.6449551519184],[244.0967417348616,361.5205918740306],[246.47485211045438,361.7366995224559],[248.5281031434509,362.2144873500386],[250.0551312107114,363.24407262563483],[251.141761027491,365.0075690683382],[251.57281377925102,367.3754897553393],[251.47296243247825,369.8655611461757],[250.9934349814344,372.4362369970025],[250.53594587826825,374.7619348242309],[249.76259042304292,376.65352381560507],[249.13345875134888,377.59033921163],[249.01758827576901,377.5135455035091],[249.2624580703403,376.38359800758855],[250.12886115846942,374.1032174977402],[251.49417534682476,370.9500521532448],[253.27634649718476,367.34397132727764],[255.34885490762855,363.50176547657185],[257.57968519334173,360.0180973881018],[259.93922766570523,357.0787636938888],[262.0338021629971,354.5988338504333]],strokeWidth:2},{id:"yrTcA",type:"freehand",shape:"feltTipPen",points:[[278.8335122643667,328.9801029665826],[278.8335122643667,327.58830961444465],[278.8335122643667,326.5959858143718],[278.8335122643667,325.2256164828744],[279.2202967000033,324.008793202733],[279.4897740257475,322.8820472857736],[279.64959309551983,322.8548143681749],[279.76489652259744,323.81932610205087],[279.55136734276704,325.7282939759892],[279.0469836389587,328.9265161868364],[278.32282063931353,333.4341849751875],[277.10897753909836,338.967797349744],[275.80804316619884,345.12771157867274],[274.17889365103616,352.1356790585608],[272.6178913237164,358.64921406843797],[271.41762031628906,364.19170052087367],[270.54105291047614,368.60978897979686],[270.4934399784657,372.05877484991225],[271.21196242857883,373.64407770722056],[272.48962823800144,373.91799434599244],[274.1945640050822,372.91718788023474],[276.56099368131737,370.8606177518944],[279.05255793107864,368.16885395093806],[281.6954588460365,365.6147549907885],[284.3210051820004,363.0317168239456],[286.5745619365569,361.06681357824556],[287.8386683035131,359.701713408231],[288.41766561788614,358.71257258676934],[288.46219133030223,357.71887731353246],[288.3509886237719,356.74788405508053],[288.21574014326217,355.81649124761344],[287.6921519926746,355.04123324765834],[287.20458811748864,354.28059387569857],[286.5366712370856,353.67469994964114],[286.0639823531331,353.26353898266126],[285.4028205618868,353.2472010262457],[284.89198925774696,353.6075500359978],[284.1754186117499,354.5654800797532],[283.6143451968117,356.3366877408201],[282.89526099457754,358.744193285432],[282.0497432745652,361.5342572721623],[281.42469080018606,364.6708777838733],[280.94234835119533,368.111457274031],[280.6220914499307,370.98002970199497],[280.6919263435569,373.5788838303336],[281.13260414606276,375.42029417245186],[282.1178378200148,376.3341376652573],[283.570040972345,376.2527794576102],[285.391336049941,374.76440288736677],[287.75696108880953,372.1776960561668],[290.2704700021132,368.7432288511066],[292.8572238825105,364.40833820819563],[295.76403028033593,359.0734292865994],[298.614612813743,352.7127720393922],[301.33369432594924,345.64741876713407],[304.31571852994176,338.29865298186206],[306.85002528026104,331.5874947865453],[308.98008917265,325.9873090464628],[310.87505010500837,321.17110936169894],[312.64995449177974,317.471917041323],[313.94677557613323,314.55913036891735],[314.7208301206402,312.5081990010961],[315.2561778603836,310.8273470804464],[315.26904792981105,309.6496526322556],[315.17033200858265,309.2719821681497],[314.7824604408059,309.7235194802009],[314.10816358766994,310.78949256064817],[313.2312029081143,312.61697650816615],[312.22582977048097,315.36794383162606],[310.7534439208212,319.281782296823],[308.9489254373196,324.35597900703516],[306.9755744939469,330.12329863704446],[304.493667287492,337.11131793098076],[302.31011773607935,344.5789287650153],[300.3790682428367,351.50855019317197],[299.22926948805804,357.7435772931197],[298.740627570031,362.97524129361165],[299.09200346723725,367.2079571723273],[300.11060198752654,370.19497449338206],[301.95944004060544,371.9472792300979],[304.48750888277056,372.2649938952066],[307.4720288779993,371.2380847471798],[310.4153822205861,369.94518305581397]],strokeWidth:2},{id:"HbPrm",type:"freehand",shape:"feltTipPen",points:[[109.79648768166226,133.37994384765625],[109.79648768166226,133.37994384765625],[109.79648768166226,133.9123349007832],[109.35614145739532,135.0590592685703],[107.92467957992176,136.9081105477071],[105.54602400589988,139.89632636757142],[102.22437505814241,143.97527653826364],[98.2323240448261,148.82873858727453],[93.03957175123014,154.77254023719797],[87.82217952377141,160.22274567033946],[82.87207777257095,164.97604470290207],[78.43988043643094,168.89361830389134],[74.92514185628988,171.65364666951973],[73.16273355102089,172.8008668319053],[72.72678674637518,172.75799013834512],[73.56446149572434,171.5057982144417],[75.46011315061105,169.30611943401436],[78.06326495751387,166.83023687563946],[80.89177496218963,164.1492169154344],[83.74302232315267,161.77609084008327],[86.52786623520956,159.72121594618693],[88.92919005742374,157.88893596626713],[90.83737637182617,156.76316868521644],[91.96824066614568,156.499483152842],[92.74501288515603,157.05151147170636],[93.23631882298469,158.54590251763057],[93.21063268077478,161.10313759670316],[93.09991735976064,164.7555844442213],[92.61551771865675,170.06007640283133],[92.19777453728466,176.64557341439468],[91.57947742445594,184.88165725068666],[91.08734598566502,193.733023773686],[90.4100087041877,203.39437308513607],[89.56907229557487,212.84067133937333],[88.94170137486913,221.55993804135778],[88.46988974647365,228.69696750760158],[88.1386715665974,234.6720730365687],[88.18530703949568,238.60818260499582],[88.60912347798967,240.26579825107638],[89.27882089095988,239.9505076331161],[90.1680066995807,237.32672133212418],[91.21010746975185,233.36227246339604],[92.31854092168419,229.1926961149211]],strokeWidth:2},{id:"kMZAM",type:"freehand",shape:"feltTipPen",points:[[109.79648768166226,176.01455212283236],[110.47730304077572,173.97210604549218],[113.60359420488385,168.88895139502438],[116.55805167600397,165.32083242489352],[119.07015329460933,162.48903314530617],[121.08808758329019,160.60806238385976],[122.59399319206136,159.5449683533252],[123.4383540132701,159.63081944625537],[124.47644899613306,160.5056192368811],[124.68081080472007,162.58220980128863],[123.87039770098863,166.21483986701696],[122.14649040750373,170.43777706596939],[120.04625823383185,174.81654420157338],[117.44861914941498,179.3449239145848],[114.48392604556079,183.74285710743152],[111.55243060776866,187.37306490617084],[108.96531256464687,190.00587273526708],[106.89756953989877,191.67963897436857],[105.63239245311524,191.61777196173716],[105.69073445652862,190.41486647040438],[106.50334253691972,188.411643983638],[108.22396503161735,185.72552327618723],[110.65678013453339,182.88013718326783],[114.00310168570081,179.88153451767266],[117.81528899610657,177.09553020166823],[122.10298304415164,174.6241675184092],[126.67412525685359,172.54312507943268],[131.03259880876362,171.07496677106155],[135.63274730673675,169.740897555861],[139.6485547432594,168.84001753127814],[143.3010582388713,168.54362376587596],[146.24445645689957,168.73770189413426],[148.38372205561677,169.62494926835734],[149.48357508174172,171.32170048543685],[149.4985441387903,173.66066774159754],[148.40464690482418,176.45576577130305],[146.08596713506427,179.94211424173682],[142.90077150256775,183.28842837446882],[139.0435370732214,186.79938392325766],[134.78688485788848,189.73916435197953],[131.24274161566223,191.86461980618424]],strokeWidth:2},{id:"zRYyC",type:"freehand",shape:"feltTipPen",points:[[125.86167581374139,185.9008217425735],[125.86167581374139,185.20137187537875],[126.33634777264842,184.93865978775648],[127.01205571525793,184.8452152910486],[127.48372706680584,184.42526521858872],[128.0781427591328,184.10418497309274],[128.80083983394275,184.53177880910607],[129.32182407505888,185.19062012362065],[129.8404950950137,186.62539903127526],[130.20600353478062,188.74760676485766],[130.4730519524419,191.44528758157685],[130.64704728480933,194.91556697310352],[130.75964075113166,198.89369789348075],[130.48040536152484,203.2462307066753],[130.2145160211844,208.09953094585308],[129.6979902316143,213.06423902224196],[129.2881101043597,218.06172587877245],[128.6616968845758,222.41483867346687],[128.16900154264022,225.9684511247442],[127.45729599567244,228.72681328942326],[126.89238376667026,230.21359041232336],[126.55329688370807,230.4423000068282],[126.28838884215929,229.79279292528554],[126.11511349518992,228.49183102940333],[125.66272929726551,226.32730342068862],[124.9996570541291,223.86850546535698],[124.15557193372524,220.9112663852875],[122.89575666454198,218.08398566082815],[121.26827359280583,214.99563295945427],[120.02019183115067,212.38609744841233]],strokeWidth:2},{id:"iixpb",type:"freehand",shape:"feltTipPen",points:[[115.97540619400024,201.96600987465172],[115.97540619400024,201.96600987465172],[115.97540619400024,203.02985937583708],[115.54032758907783,204.0070671514286],[114.88800913723844,205.33321060054277],[113.74972834251412,206.90973225832658],[112.62888170390261,208.65340637972622],[111.52872781486985,210.5177311502839],[110.58280353034593,212.47644418757773]],strokeWidth:2},{id:"xaJii",type:"freehand",shape:"feltTipPen",points:[[139.455296540885,200.7302261721843],[140.15474640807975,200.7302261721843],[141.43569668226633,200.7302261721843],[142.95263655931922,200.7302261721843],[144.2463899393897,201.112900216227],[145.42172017496,201.3817113071973],[146.54306293509512,201.88117725575376],[147.9361619503029,202.55635001542396],[149.52934565224496,203.43187635623053],[151.03365414805467,204.425541391327],[152.53195236756756,205.2591203687398],[153.91735055263598,206.18576475125337],[155.25118970327185,206.87342478932715]],strokeWidth:2},{id:"nHaGM",type:"freehand",shape:"feltTipPen",points:[[195.06556315192802,184.66503804010517],[194.36577270567545,183.96524759385284],[194.11966243371353,183.2156912285518],[194.42839689931543,182.413391420685],[195.38255817085064,181.93059307953172],[196.71015574468674,181.64745291630243],[198.9836776168852,181.45047424326094],[202.24180015166553,181.31342301711902],[206.5531121045251,181.4341227980467],[211.55474336330417,181.5866082480352],[217.4207978979657,181.74723474440088],[223.32020948372315,181.8912387717337],[229.06086802732807,181.99931874442427],[234.37513761124728,182.08183961140458],[238.96182670526377,182.1454340663986],[242.6114125480285,182.19347063517034],[245.45635766125383,182.50532452339849]],strokeWidth:2},{id:"EDFJM",type:"freehand",shape:"feltTipPen",points:[[224.72437201115076,169.83563361049437],[224.72437201115076,169.13455663361037],[225.2079955920576,169.36076453227815],[225.89008018478512,170.3583013813186],[226.31165432393618,172.1067967876479],[226.57572496593116,174.66616349979358],[226.7538355421318,178.12330470745565],[226.87645078870196,182.52686844185246],[226.41127251909484,188.3322416368237],[225.0348371284283,194.60819591541895],[222.95133088796047,200.9662623094182],[220.33316719163213,207.03685764458442],[217.34622210823318,212.23298829259875],[214.0825521121924,216.69038015615297],[210.87450113748218,219.98009561713116],[208.14025566872465,222.2130275818863],[205.77022936942967,223.71135888882418],[203.9556967168569,224.0171503529582],[202.82487976095376,223.02012038579687]],strokeWidth:2},{id:"tPPjW",type:"freehand",shape:"feltTipPen",points:[[214.83810239140985,174.77876842036403],[215.53557379662493,174.77876842036403],[215.31310253187962,175.26021256012427],[215.14029082245952,176.34950917375045],[214.67482574322503,178.13835448118243],[214.01172808707815,180.72119891576767],[212.8818987570528,184.53974762699363],[211.42967488231852,188.87145114071245],[209.55013469246683,193.93392264882277],[207.4512400567005,198.69907022289226],[205.23306515042214,202.9184009216524],[203.1813185653882,206.10501297465999],[201.54427258160263,208.21386687290487],[200.50406876930015,208.82949491306226],[200.07467236854131,208.42414579901924],[200.48235915331747,207.2563553075879],[201.53793171604798,205.87624633142332],[203.41501919103302,204.36880053149162],[205.651966890802,202.75698331904277],[208.35284358660806,201.59237753626167],[211.10942180954476,201.38335532602196],[214.4799684297409,201.99610116851727],[217.70672589360743,203.85157615492972],[221.0369614966396,206.68130269487938],[224.486754623965,210.19983154970123],[227.3261063084026,213.56297067303785],[229.79142906059064,216.55482508601926],[231.84971094453863,219.10534193545482],[233.75743845898182,221.09207119329403],[235.06137802772287,221.85164764448928],[235.89807799547953,221.54480701567536],[236.4394236685862,220.17265552988738]],strokeWidth:2},{id:"XDkHb",type:"freehand",shape:"feltTipPen",points:[[243.26112754816495,179.7219032302346],[243.9553454502302,179.02768532816935],[245.73672549383127,177.75999517274977],[247.5136816472534,176.680809019128],[249.3223450780731,176.05208500486788],[251.19330404012317,176.0175285502355],[252.79138229464093,176.35245384896552],[254.2541983529636,177.5682024874468],[255.6123567509444,179.0794366765167],[256.6125158297839,181.2610535734575],[257.2758319461491,184.02050198639336],[257.3698832334496,186.84793701923445],[256.69694657784544,189.6541390298471],[255.43939762442483,192.38743898242137],[253.76668343730717,194.7846885095114],[252.12347143357056,196.798490382801],[250.56091296426553,198.57701124288815],[249.58067663030442,200.2417691450164],[249.5877017085238,201.33624500092628],[250.3188877290031,202.38617334846367],[251.93125810250763,203.4512825550837],[253.92814674970646,204.84919151460053],[256.1573646351769,206.53192054550072],[258.6631790176077,208.8338036803816],[260.5723064903159,211.21133565093805],[261.9397068152184,213.61976578067242],[262.89862021824933,216.1173477296261],[262.93442953438625,218.41333535572358],[262.147722023112,220.33481639801903],[260.79266282845697,221.7653773917973],[258.7018707536306,222.76865069811447],[256.0384345196378,223.4011301710807],[252.9966311789076,223.48582088860076],[249.62805325619365,222.81743646421182],[246.1436457459588,221.55825801419724],[243.16471868710937,219.55471773904628],[240.72762713587053,217.34651813267374],[238.9182240135217,215.30389314654803],[237.67665323034134,213.45473674811092],[236.83616348649457,211.70325416805554],[236.59105858497264,210.27018170077918],[237.20109361257528,209.07679116086365],[238.44405265699902,208.23692119782845],[240.42238456774317,207.3806517592593],[242.93733507957313,206.47994488699896],[246.19814135098704,205.48644301196146],[250.16646687275124,204.7140316132709],[255.08717034644496,203.8670772531559],[260.4572753294242,202.8944418535366],[266.1195053352783,202.1766410687669],[271.6412270226606,201.3269350051969],[276.726360314849,200.7030789180326],[281.4963040134933,200.26471123997908],[285.973613519139,199.64451363184253],[289.62570919265227,199.15668653786543]],strokeWidth:2},{id:"NicwR",type:"freehand",shape:"feltTipPen",points:[[342.01009336531547,146.35574326360893],[342.01009336531547,145.65399656252248],[342.01009336531547,144.8934740953964],[342.01009336531547,144.0775657119675],[342.01009336531547,144.41155598738715],[342.01009336531547,145.73307910776293],[341.66807622233637,148.37242924565817],[341.0859877072487,152.55639928089658],[339.98185339807173,158.4461032419722],[338.46454493618194,165.95401097693048],[336.34585554829846,174.63198105936408],[334.42287007583946,182.6932632759399],[332.29504882543915,190.20648056754817],[330.63104357555653,196.8598463814169],[329.07316436873043,202.48321008783387],[327.8980925404353,207.20483149622396],[327.08638402232964,210.8244265314197]],strokeWidth:2},{id:"sRRNe",type:"freehand",shape:"feltTipPen",points:[[325.94490523323634,229.1532513289394],[325.94490523323634,229.1532513289394],[324.3864443272455,230.1922252662671],[323.15511529456035,231.59301219439112]],strokeWidth:2},{id:"fDPmi",type:"freehand",shape:"feltTipPen",points:[[374.1194388638175,314.3101386264214],[374.1194388638175,312.90885394396474],[374.1194388638175,312.97706458911836],[373.68949949337656,313.44495624835037],[373.41768138077686,314.4947913296067],[372.55584973202275,315.89797343314586],[371.60093397098916,318.51904651078513],[370.2979754680743,322.01260799246376],[368.25803353264854,326.76344141777537],[365.65514993901587,332.8658419135343],[363.0286503468671,339.0943755060028],[360.41589638485283,345.10017410159327],[357.7660572894553,350.60803775120013],[355.4783138672312,355.3928104359887],[353.73843928786,359.24461585987393],[352.145855053867,362.38485242157304]],strokeWidth:2},{id:"PFTyp",type:"freehand",shape:"feltTipPen",points:[[344.2248463021271,379.692944476946],[343.5242524666848,378.9923506415037],[343.2941655804586,378.7622637552775]],strokeWidth:2},{id:"EeWSd",type:"freehand",shape:"feltTipPen",points:[[75.57564342783854,644.5415974683578],[75.57564342783854,643.8385579392179],[75.57564342783854,643.0796575063282],[75.57564342783854,642.2677210400775],[75.57564342783854,641.4019218420626],[75.92187667473496,640.7739867948403],[76.16339270042232,640.4548279256232],[76.33722823708473,640.5516967715471],[76.48720382086464,641.1756645455907],[76.60183769043493,642.3574088920172],[76.68840733065946,644.6293706552124],[76.766042817646,648.165255983994],[76.48957632156095,653.1765765295272],[75.9012288867703,660.2662940903779],[75.12093540804568,668.6402020184591],[74.20349433032817,677.5470422456829],[73.50007616539352,686.1183469659713],[72.97053661515503,693.9103119511383],[72.56140253640598,701.1168091231693],[72.24827008271842,707.1174623470365],[72.0410612067165,711.8584176597974],[72.23942893241093,715.5925951784202],[72.44120753341241,717.90124325235],[72.30939807170836,719.0310647714455],[72.19444383556475,719.0083390676632],[71.78945398767411,718.1506887918395],[71.46365766852142,716.3521167298923],[71.22265759186513,713.9049694119617],[71.0432829003974,711.0279308067707],[71.19726333307113,707.7876489654013],[71.3311867843816,703.9432269024292],[71.78736079772085,699.7587142406205],[72.79812225504458,695.3069314006079],[73.95450257060162,690.3670344007573],[75.48078749024995,685.3830771352232],[77.30436958766069,680.7187710430962],[79.36020088762149,676.2825370064916],[81.56615586488243,672.6448661018771],[83.89141064196298,669.7372465962353],[86.33203490054308,667.6169228234412],[88.40979459794318,666.2005641581095],[90.6710824253808,665.6091077763322],[92.61731004875134,665.6707495795363],[94.37219744736382,666.4917002862089],[95.93641683306015,668.2250799204767],[97.07897963098691,670.9282819438145],[98.17249855409005,674.3511361857209],[98.95099797590052,678.2994353770432],[99.49355174953467,682.6081693638394],[99.51166443935796,687.2097681583327],[98.82464199803604,691.9825938529038],[97.59319390291972,696.8526046861857],[95.94344326661104,701.795611232038],[94.02128205500986,706.4127425773727],[91.52891831023527,711.0984064742734],[88.62897918819255,715.2030995703008],[85.76861230191258,718.4784638926353],[82.93096546138514,720.8615223716733],[80.22692780560038,722.4751272502353],[77.89256512259777,723.5655931920651],[75.77664198546137,723.9401303227578],[74.26976340281664,723.7562186077826],[73.30918441983619,723.145838922595]],strokeWidth:2},{id:"Zhdzy",type:"freehand",shape:"feltTipPen",points:[[100.29131747719094,695.2087292695301],[100.29131747719094,694.5055751793593],[100.76966360387274,694.2453382857807],[101.44995130332501,694.5516872371127],[101.88006659063313,695.1294102296083],[102.48049533703085,696.5371374217834],[102.90193726861031,698.1937387632697],[103.19557285768593,700.3340639329072],[103.52708017741867,703.4869171366563],[103.75641186405397,706.9112632097472],[103.56373869815167,710.2191386566988],[103.03962837531691,712.9735101830584],[102.30819490270375,715.3400081560421],[101.65347929452747,716.5028074684824],[101.22139409427956,716.1848621701693],[101.20565884396257,714.8319811703609],[101.85324497798439,712.3179577173973],[103.0235506191487,709.2942712077629],[104.62955050710258,705.5929151359351],[106.9193778730417,701.6009741078246],[108.96267065634021,698.3970410314837]],strokeWidth:2},{id:"eiKfZ",type:"freehand",shape:"feltTipPen",points:[[123.7712078240757,706.3307825917386],[123.7712078240757,706.3307825917386],[123.7712078240757,705.2761926782796],[123.7712078240757,704.3145223805373],[123.7712078240757,703.361119801777],[123.7712078240757,702.3922299898618],[123.7712078240757,701.4002262617037],[123.7712078240757,700.3740223295949],[123.45256473406636,699.3645323308979],[122.87729243630889,698.7251925043042],[122.08142705286224,698.6052768440809],[121.18200880254454,698.9003467090674],[120.14043722958701,699.8221815883121],[119.02228785489962,700.9032457092344],[117.77059684842021,702.4695240391661],[116.87486624587615,703.9928042188853],[115.87562064722471,705.8621946948738],[115.17665876841585,707.8834494653688],[114.6905124299729,710.0338522647708],[114.35198111899768,712.3167261862536],[114.13209368364124,714.319799078909],[114.31833288032959,716.2337395784234],[114.8441827110376,717.5772521582967],[115.56389468362732,718.5009060395896],[116.51417361303749,718.825561403723],[117.85101736632947,718.3212065714847],[119.22681798206014,717.193379976316],[120.62346613025335,715.5916787188812],[122.02726211111218,713.6467621375518],[123.37268928277064,711.8002811976144],[124.42097911640127,709.6694634373398],[125.44228335184181,707.7763729324697],[126.20990054952819,706.0325815234605],[126.6777732997769,704.8590743700711],[126.68107075519134,704.0126922013733],[126.62382346323199,703.6891669665497],[126.56920378082356,703.9004700285918],[126.49179692669992,704.7609961278854],[126.42626489748619,706.1716801772659],[126.34705521319535,707.9482609896295],[126.28780600179522,709.9991347104256],[126.24277522901076,711.9867825757856],[126.24277522901076,713.749379837252],[126.55861886728991,715.1886852703674],[127.13054080643411,716.0617838414232],[128.23942704652205,716.0533200671603],[129.41415150286986,715.2888733173613],[130.96459251497714,713.6448630245213],[132.48552656240287,711.3250076702561],[134.38553768932167,708.4179884935511],[136.09588482548207,705.2591490379841],[137.70733913403757,702.4781889135452],[139.20678791887764,700.0808673095498],[140.38844815103613,698.4736917075488],[141.12685659108575,698.4806535436633],[141.61822218414665,699.2734454319093],[141.964634872114,700.9859742054023],[141.83606540321108,703.4316994171609],[141.68160482542618,706.0440142346438],[141.5248487535676,708.8581312435103],[141.3803651589638,711.2272921503754],[141.5713918019713,713.2027507927687],[142.06337546734704,714.3485894414634],[142.77393478656046,715.1845347937187],[143.69072449068204,715.10178087023],[144.7124835254918,714.5525525267899],[145.83016490294705,713.4074158119874],[147.3946291202613,711.7530728256056],[148.87311307890246,709.8298922747331],[150.32152114158504,708.297920693788],[151.68515346665305,707.1903964815419],[153.01652545307394,706.3640384710961],[154.08314721596145,706.4080548049992],[154.76694404962592,707.5081769011699],[155.25250359013245,709.0986836759794],[155.56409486911917,710.7432590701142],[155.74990229361634,712.7183970414626],[156.1770496959296,714.3318000114018],[156.8124886974611,715.2214242140808],[157.58198231593957,715.1341022023071],[158.82137270226605,714.0070550872638],[160.4359008269842,711.7139538964789],[162.3249274886462,708.8869239636847],[164.48413593667334,705.6287517110131],[166.4510487282194,702.4219371951322],[168.22662032946693,699.670893638618]],strokeWidth:2},{id:"cNdFJ",type:"freehand",shape:"feltTipPen",points:[[175.67412332771556,698.9160803769328],[175.67412332771556,698.2124853192436],[175.67412332771556,697.45203132511],[175.67412332771556,697.0864144078773],[175.67412332771556,697.2784546087973],[175.67412332771556,697.7723820321603],[175.67412332771556,698.4536754865471],[175.67412332771556,699.602972334973],[175.67412332771556,701.1357568406443],[175.67412332771556,703.0019128042481],[175.67412332771556,705.1179848171382],[175.34696232119455,707.105690608535],[175.07753086065082,709.2010686957301],[174.89158432702044,710.3622730380744],[174.7456465345793,710.5808576651134],[174.95867806103826,709.9992394342198],[175.13781713213558,709.1340835505812],[175.59582547094766,707.7372604208927],[176.28543820854298,706.2659507757471],[177.17850474939388,704.4651633095427],[178.18207167431416,702.705312341066],[179.3116231948041,701.3328972824474],[180.49591090668906,700.0747106136655],[181.67539354011234,699.191145705408],[182.861229449811,698.5925689170481],[184.07120417375592,698.2003113688393],[185.30882081421447,697.9321223728275],[186.5709324861744,697.796244635043],[187.60812035820192,698.0403123877936],[188.22663587018957,698.5724507716759],[188.64661417248823,699.6723755708531],[188.93302768940504,700.8492772485415],[189.1169743771489,702.4170480730345],[189.22245781712655,703.9406610800229],[189.2677440548594,705.8640488128972],[188.93956387798477,707.6280214296535],[188.68686388226303,708.8495533540672]],strokeWidth:2},{id:"hmmjc",type:"freehand",shape:"feltTipPen",points:[[200.38979737706796,697.6802966744654],[200.38979737706796,697.6802966744654],[200.38979737706796,698.2127217049133],[200.38979737706796,698.9191749464858],[200.38979737706796,700.126494837863],[200.38979737706796,701.2530669607504],[200.38979737706796,702.7082833439104],[200.38979737706796,704.7287249537499],[200.0611720047212,706.7655088549905],[199.7908527592445,708.9542978686154],[199.60495599109464,710.8302703945869],[199.46160557782497,711.9174850129948]],strokeWidth:2},{id:"DwBED",type:"freehand",shape:"feltTipPen",points:[[200.38979737706796,687.7940270547242],[200.38979737706796,687.7940270547242],[200.38979737706796,687.7940270547242]],strokeWidth:2},{id:"fESHQ",type:"freehand",shape:"feltTipPen",points:[[211.51185069927652,696.4445129719975],[211.51185069927652,695.7408492696472],[211.51185069927652,696.0430111300902],[211.94356769423808,696.631248017894],[212.59242452326345,697.3596160980187],[213.36955171369783,698.186128465637],[214.25164589492357,699.4427407832541],[215.19098614128785,700.6536521457447],[216.31312322507375,702.3124849862361],[217.51837500538323,703.9751224459233],[218.73086971323875,705.4870107873367],[219.97377706426988,707.2898758447864],[221.2361662320414,708.6833743007328],[222.4411979102013,709.6237118211743],[223.4345273460263,710.6394762180062],[224.02886743579262,710.9955408421006]],strokeWidth:2},{id:"NRyaM",type:"freehand",shape:"feltTipPen",points:[[225.10547142642037,695.2087292695301],[225.10547142642037,695.2087292695301],[224.57601989136793,695.2087292695301],[224.31960697719302,695.2087292695301],[223.77109816870126,695.2087292695301],[223.04278886415506,695.569422926334],[222.23224821092032,696.1614573792913],[221.32022611042754,697.2461158440669],[219.8956423877542,698.7672849938258],[218.47528716045014,700.5826083915404],[216.7761435770022,702.6313082677298],[215.1119546892881,704.8885346502848],[213.59173390328357,706.8939530772636],[212.13929261359345,708.7119430607377],[210.9525657393845,709.8861957043268]],strokeWidth:2},{id:"rExRd",type:"freehand",shape:"feltTipPen",points:[[233.75595734369364,711.2739174016092],[233.75595734369364,711.2739174016092]],strokeWidth:2},{id:"DkEDR",type:"freehand",shape:"feltTipPen",points:[[257.2358476905784,697.6802966744654],[257.2358476905784,696.9765692186488],[256.75181966316296,696.7196201950646],[256.4585099754036,696.2196345087668],[255.9580752004436,695.8734114456884],[255.3013204417967,695.6930926266905],[254.50570153748714,695.5646101490129],[253.60874299833432,695.4718188617626],[252.68670632137292,695.632365188028],[251.77532857777584,696.4514989393547],[250.77362453005145,697.7670939463092],[250.0300584423092,699.4752293716929],[249.1851690853162,701.4397319006457],[248.56305062982784,703.9122799425118],[248.10589353799202,706.5542782011194],[247.8133385114341,708.8282604387946],[248.22020914220462,710.6476112964392],[249.24745261635968,711.818773306853],[250.7665336376336,712.0245498827912],[252.88876486685314,711.0907082736644],[255.22413632198396,709.2895446194834],[257.9829703285532,707.1268850078486],[260.84875463165855,704.3683989684359],[263.2457364083787,701.973143937762],[265.11582754869943,699.7068603754838],[266.75836385329154,697.9521498657923],[267.62928373671986,697.0733963084485],[267.7666450311934,697.2282207827843],[267.16919894094195,698.1055403973269],[266.27296963279883,699.1785208012161],[265.14566085794655,700.8033174222292],[263.89597102610725,702.7927137523502],[262.8834622051125,704.748618602518],[262.16337466714987,706.453081513147],[261.9507255131235,708.1133896960473],[262.19072681814197,709.2759461532896],[263.09730044858253,710.3682679183585],[264.16817689879286,711.164317884557],[265.6881335797182,711.3945772234038],[267.5077078606267,711.1445370371953],[269.3128781726501,710.26103554677],[270.9874167183621,708.8797952501845],[272.5528789303708,707.4365481864288],[273.7433710608514,705.6502709152605],[274.517100190574,703.9787557954728],[274.7663367732969,702.3110958285952],[274.5312129826521,700.8110321573786],[273.6073319203272,699.6629161389606],[272.5499333524711,698.9061048116141],[271.0208945519476,698.3819383748905],[269.4511841788238,698.3530943371661],[267.90241153525886,698.425392058592],[266.7007660302514,698.8367032310325],[266.17286141487403,699.2278455650203],[266.21969376101043,699.501302464203],[266.6440558461441,699.7166495277602],[267.655805806131,699.8951017809977],[268.8913360686109,699.7135757645292],[270.55652301070046,699.5169653679104],[272.1769512292106,699.3653866410045],[273.7424130686164,698.8940396084972],[275.1965881429542,698.5150460502296],[276.5369897715644,698.2511837773582],[277.6807403458045,697.7111667430195],[278.7084177008831,697.2665550776564],[279.69573658754604,697.0160268534032],[280.7795642277677,697.107634521517],[281.5979574314097,697.5251634013739],[282.13408413205894,698.5114150478958],[282.5489242517745,699.9535098080969],[282.84098599868395,701.7743724611605],[283.02843058220066,703.824551042736],[282.81477093169957,706.1243719532199],[282.5932251731436,708.5354121674004],[282.40443780365973,709.9057029739824],[282.57959049244283,710.3036280965493],[283.0561392050798,709.8255664165581],[284.08719079904273,708.3820517353352],[285.2144216770599,706.538897036512],[286.74667183779053,704.370445668344],[288.5995133568345,702.3415936070719],[290.6747708704809,700.4052369256219],[292.60660986895465,698.9584806416424],[294.33204007114097,697.9635298042067],[295.7275892125079,697.8674370064332],[296.59204402039296,698.6214451825181],[297.22621987416784,700.2698855649223],[297.30632265946275,702.2917701375259],[297.2821331071837,704.5431543082382],[296.86734136627894,706.6349140197981],[296.48247909275693,708.6250717523121],[296.19332364402413,709.661928773693],[295.9687135065938,710.0674402872232],[296.43070848674466,709.6661556728818],[297.14617165450073,708.5721617999639],[298.3907899502945,706.9800446569302],[300.0154056144643,705.027825143301],[301.9425628813079,702.8602329312348],[304.07903225726096,700.8345918122459],[306.07538837299836,699.2960896957225],[308.2106723128043,698.2045825756773],[310.09784657780943,697.4534789743966],[311.89374000200274,697.2655471634303],[313.15064319795266,697.8736786678724],[314.32468855052895,699.0788096540709],[315.16125243832954,700.7403544566105],[316.02807712281884,702.700337825207],[316.6688935414484,704.8533911973636],[317.0877937625526,707.1699493962483],[317.3669109899077,709.2712320131618],[317.54367468099264,711.1655915202477]],strokeWidth:2}];function X5(e,t,n){if(e&&e.length){const[r,i]=t,o=Math.PI/180*n,s=Math.cos(o),u=Math.sin(o);for(const c of e){const[h,d]=c;c[0]=(h-r)*s-(d-i)*u+r,c[1]=(h-r)*u+(d-i)*s+i}}}function pb(e,t,n){const r=[];e.forEach(i=>r.push(...i)),X5(r,t,n)}function mb(e,t){return e[0]===t[0]&&e[1]===t[1]}function vb(e,t,n,r=1){const i=n,o=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,u=[0,0];if(i)for(const h of s)X5(h,u,i);const c=yb(s,o,r);if(i){for(const h of s)X5(h,u,-i);pb(c,u,-i)}return c}function yb(e,t,n){const r=[];for(const h of e){const d=[...h];mb(d[0],d[d.length-1])||d.push([d[0][0],d[0][1]]),d.length>2&&r.push(d)}const i=[];t=Math.max(t,.1);const o=[];for(const h of r)for(let d=0;d<h.length-1;d++){const g=h[d],v=h[d+1];if(g[1]!==v[1]){const y=Math.min(g[1],v[1]);o.push({ymin:y,ymax:Math.max(g[1],v[1]),x:y===g[1]?g[0]:v[0],islope:(v[0]-g[0])/(v[1]-g[1])})}}if(o.sort((h,d)=>h.ymin<d.ymin?-1:h.ymin>d.ymin?1:h.x<d.x?-1:h.x>d.x?1:h.ymax===d.ymax?0:(h.ymax-d.ymax)/Math.abs(h.ymax-d.ymax)),!o.length)return i;let s=[],u=o[0].ymin,c=0;for(;s.length||o.length;){if(o.length){let h=-1;for(let g=0;g<o.length&&!(o[g].ymin>u);g++)h=g;o.splice(0,h+1).forEach(g=>{s.push({s:u,edge:g})})}if(s=s.filter(h=>!(h.edge.ymax<=u)),s.sort((h,d)=>h.edge.x===d.edge.x?0:(h.edge.x-d.edge.x)/Math.abs(h.edge.x-d.edge.x)),(n!==1||c%t===0)&&s.length>1)for(let h=0;h<s.length;h=h+2){const d=h+1;if(d>=s.length)break;const g=s[h].edge,v=s[d].edge;i.push([[Math.round(g.x),u],[Math.round(v.x),u]])}u+=n,s.forEach(h=>{h.edge.x=h.edge.x+n*h.edge.islope}),c++}return i}function pp(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.round(Math.max(i,.1));let o=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(o=i),vb(e,i,r,o||1)}class w4{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=pp(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function V3(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class wb extends w4{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),o=pp(t,i),s=Math.PI/180*n.hachureAngle,u=[],c=r*.5*Math.cos(s),h=r*.5*Math.sin(s);for(const[g,v]of o)V3([g,v])&&u.push([[g[0]-c,g[1]+h],[...v]],[[g[0]+c,g[1]-h],[...v]]);return{type:"fillSketch",ops:this.renderLines(u,n)}}}class Cb extends w4{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),o=this._fillPolygons(t,i);return r.ops=r.ops.concat(o.ops),r}}class xb{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=pp(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let o=n.fillWeight;o<0&&(o=n.strokeWidth/2);const s=i/4;for(const u of t){const c=V3(u),h=c/i,d=Math.ceil(h)-1,g=c-d*i,v=(u[0][0]+u[1][0])/2-i/4,y=Math.min(u[0][1],u[1][1]);for(let x=0;x<d;x++){const E=y+g+x*i,T=v-s+Math.random()*2*s,D=E-s+Math.random()*2*s,S=this.helper.ellipse(T,D,o,o,n);r.push(...S.ops)}}return{type:"fillSketch",ops:r}}}class Eb{constructor(t){this.helper=t}fillPolygons(t,n){const r=pp(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,o=[];return t.forEach(s=>{const u=V3(s),c=Math.floor(u/(r+i)),h=(u+i-c*(r+i))/2;let d=s[0],g=s[1];d[0]>g[0]&&(d=s[1],g=s[0]);const v=Math.atan((g[1]-d[1])/(g[0]-d[0]));for(let y=0;y<c;y++){const x=y*(r+i),E=x+r,T=[d[0]+x*Math.cos(v)+h*Math.cos(v),d[1]+x*Math.sin(v)+h*Math.sin(v)],D=[d[0]+E*Math.cos(v)+h*Math.cos(v),d[1]+E*Math.sin(v)+h*Math.sin(v)];o.push(...this.helper.doubleLineOps(T[0],T[1],D[0],D[1],n))}}),o}}class Pb{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const o=pp(t,n);return{type:"fillSketch",ops:this.zigzagLines(o,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(o=>{const s=V3(o),u=Math.round(s/(2*n));let c=o[0],h=o[1];c[0]>h[0]&&(c=o[1],h=o[0]);const d=Math.atan((h[1]-c[1])/(h[0]-c[0]));for(let g=0;g<u;g++){const v=g*2*n,y=(g+1)*2*n,x=Math.sqrt(2*Math.pow(n,2)),E=[c[0]+v*Math.cos(d),c[1]+v*Math.sin(d)],T=[c[0]+y*Math.cos(d),c[1]+y*Math.sin(d)],D=[E[0]+x*Math.cos(d+Math.PI/4),E[1]+x*Math.sin(d+Math.PI/4)];i.push(...this.helper.doubleLineOps(E[0],E[1],D[0],D[1],r),...this.helper.doubleLineOps(D[0],D[1],T[0],T[1],r))}}),i}}const co={};function Sb(e,t){let n=e.fillStyle||"hachure";if(!co[n])switch(n){case"zigzag":co[n]||(co[n]=new wb(t));break;case"cross-hatch":co[n]||(co[n]=new Cb(t));break;case"dots":co[n]||(co[n]=new xb(t));break;case"dashed":co[n]||(co[n]=new Eb(t));break;case"zigzag-line":co[n]||(co[n]=new Pb(t));break;case"hachure":default:n="hachure",co[n]||(co[n]=new w4(t));break}return co[n]}function Tb(){return Math.floor(Math.random()*2**31)}class Db{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Ab=0,K5=1,PE=2,tm={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Bb(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:Ab,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:K5,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:PE,text:""},t}function H7(e,t){return e.type===t}function C4(e){const t=[],n=Bb(e);let r="BOD",i=0,o=n[i];for(;!H7(o,PE);){let s=0;const u=[];if(r==="BOD")if(o.text==="M"||o.text==="m")i++,s=tm[o.text],r=o.text;else return C4("M0,0"+e);else H7(o,K5)?s=tm[r]:(i++,s=tm[o.text],r=o.text);if(i+s<n.length){for(let c=i;c<i+s;c++){const h=n[c];if(H7(h,K5))u[u.length]=+h.text;else throw new Error("Param not a number: "+r+","+h.text)}if(typeof tm[r]=="number"){const c={key:r,data:u};t.push(c),i+=s,o=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function SE(e){let t=0,n=0,r=0,i=0;const o=[];for(const{key:s,data:u}of e)switch(s){case"M":o.push({key:"M",data:[...u]}),[t,n]=u,[r,i]=u;break;case"m":t+=u[0],n+=u[1],o.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":o.push({key:"L",data:[...u]}),[t,n]=u;break;case"l":t+=u[0],n+=u[1],o.push({key:"L",data:[t,n]});break;case"C":o.push({key:"C",data:[...u]}),t=u[4],n=u[5];break;case"c":{const c=u.map((h,d)=>d%2?h+n:h+t);o.push({key:"C",data:c}),t=c[4],n=c[5];break}case"Q":o.push({key:"Q",data:[...u]}),t=u[2],n=u[3];break;case"q":{const c=u.map((h,d)=>d%2?h+n:h+t);o.push({key:"Q",data:c}),t=c[2],n=c[3];break}case"A":o.push({key:"A",data:[...u]}),t=u[5],n=u[6];break;case"a":t+=u[5],n+=u[6],o.push({key:"A",data:[u[0],u[1],u[2],u[3],u[4],t,n]});break;case"H":o.push({key:"H",data:[...u]}),t=u[0];break;case"h":t+=u[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...u]}),n=u[0];break;case"v":n+=u[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...u]}),t=u[2],n=u[3];break;case"s":{const c=u.map((h,d)=>d%2?h+n:h+t);o.push({key:"S",data:c}),t=c[2],n=c[3];break}case"T":o.push({key:"T",data:[...u]}),t=u[0],n=u[1];break;case"t":t+=u[0],n+=u[1],o.push({key:"T",data:[t,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=r,n=i;break}return o}function TE(e){const t=[];let n="",r=0,i=0,o=0,s=0,u=0,c=0;for(const{key:h,data:d}of e){switch(h){case"M":t.push({key:"M",data:[...d]}),[r,i]=d,[o,s]=d;break;case"C":t.push({key:"C",data:[...d]}),r=d[4],i=d[5],u=d[2],c=d[3];break;case"L":t.push({key:"L",data:[...d]}),[r,i]=d;break;case"H":r=d[0],t.push({key:"L",data:[r,i]});break;case"V":i=d[0],t.push({key:"L",data:[r,i]});break;case"S":{let g=0,v=0;n==="C"||n==="S"?(g=r+(r-u),v=i+(i-c)):(g=r,v=i),t.push({key:"C",data:[g,v,...d]}),u=d[0],c=d[1],r=d[2],i=d[3];break}case"T":{const[g,v]=d;let y=0,x=0;n==="Q"||n==="T"?(y=r+(r-u),x=i+(i-c)):(y=r,x=i);const E=r+2*(y-r)/3,T=i+2*(x-i)/3,D=g+2*(y-g)/3,S=v+2*(x-v)/3;t.push({key:"C",data:[E,T,D,S,g,v]}),u=y,c=x,r=g,i=v;break}case"Q":{const[g,v,y,x]=d,E=r+2*(g-r)/3,T=i+2*(v-i)/3,D=y+2*(g-y)/3,S=x+2*(v-x)/3;t.push({key:"C",data:[E,T,D,S,y,x]}),u=g,c=v,r=y,i=x;break}case"A":{const g=Math.abs(d[0]),v=Math.abs(d[1]),y=d[2],x=d[3],E=d[4],T=d[5],D=d[6];g===0||v===0?(t.push({key:"C",data:[r,i,T,D,T,D]}),r=T,i=D):(r!==T||i!==D)&&(DE(r,i,T,D,g,v,y,x,E).forEach(function(R){t.push({key:"C",data:R})}),r=T,i=D);break}case"Z":t.push({key:"Z",data:[]}),r=o,i=s;break}n=h}return t}function Rb(e){return Math.PI*e/180}function ug(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function DE(e,t,n,r,i,o,s,u,c,h){const d=Rb(s);let g=[],v=0,y=0,x=0,E=0;if(h)[v,y,x,E]=h;else{[e,t]=ug(e,t,-d),[n,r]=ug(n,r,-d);const ne=(e-n)/2,oe=(t-r)/2;let ve=ne*ne/(i*i)+oe*oe/(o*o);ve>1&&(ve=Math.sqrt(ve),i=ve*i,o=ve*o);const ge=u===c?-1:1,Be=i*i,Pe=o*o,he=Be*Pe-Be*oe*oe-Pe*ne*ne,ue=Be*oe*oe+Pe*ne*ne,we=ge*Math.sqrt(Math.abs(he/ue));x=we*i*oe/o+(e+n)/2,E=we*-o*ne/i+(t+r)/2,v=Math.asin(parseFloat(((t-E)/o).toFixed(9))),y=Math.asin(parseFloat(((r-E)/o).toFixed(9))),e<x&&(v=Math.PI-v),n<x&&(y=Math.PI-y),v<0&&(v=Math.PI*2+v),y<0&&(y=Math.PI*2+y),c&&v>y&&(v=v-Math.PI*2),!c&&y>v&&(y=y-Math.PI*2)}let T=y-v;if(Math.abs(T)>Math.PI*120/180){const ne=y,oe=n,ve=r;c&&y>v?y=v+Math.PI*120/180*1:y=v+Math.PI*120/180*-1,n=x+i*Math.cos(y),r=E+o*Math.sin(y),g=DE(n,r,oe,ve,i,o,s,0,c,[y,ne,x,E])}T=y-v;const D=Math.cos(v),S=Math.sin(v),R=Math.cos(y),L=Math.sin(y),k=Math.tan(T/4),W=4/3*i*k,z=4/3*o*k,Y=[e,t],te=[e+W*S,t-z*D],se=[n+W*L,r-z*R],me=[n,r];if(te[0]=2*Y[0]-te[0],te[1]=2*Y[1]-te[1],h)return[te,se,me].concat(g);{g=[te,se,me].concat(g);const ne=[];for(let oe=0;oe<g.length;oe+=3){const ve=ug(g[oe][0],g[oe][1],d),ge=ug(g[oe+1][0],g[oe+1][1],d),Be=ug(g[oe+2][0],g[oe+2][1],d);ne.push([ve[0],ve[1],ge[0],ge[1],Be[0],Be[1]])}return ne}}const Mb={randOffset:Fb,randOffsetWithRange:Lb,ellipse:Ob,doubleLineOps:_b};function AE(e,t,n,r,i){return{type:"path",ops:uc(e,t,n,r,i)}}function bm(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let o=0;o<r-1;o++)i.push(...uc(e[o][0],e[o][1],e[o+1][0],e[o+1][1],n));return t&&i.push(...uc(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return AE(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function bb(e,t){return bm(e,!0,t)}function kb(e,t,n,r,i){const o=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return bb(o,i)}function qy(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,i=nm(r[0],1*(1+t.roughness*.2),t),o=t.disableMultiStroke?[]:nm(r[0],1.5*(1+t.roughness*.22),Jy(t));for(let s=1;s<r.length;s++){const u=r[s];if(u.length){const c=nm(u,1*(1+t.roughness*.2),t),h=t.disableMultiStroke?[]:nm(u,1.5*(1+t.roughness*.22),Jy(t));for(const d of c)d.op!=="move"&&i.push(d);for(const d of h)d.op!=="move"&&o.push(d)}}return{type:"path",ops:i.concat(o)}}return{type:"path",ops:[]}}function Ob(e,t,n,r,i){const o=BE(n,r,i);return Y5(e,t,i,o).opset}function BE(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=Math.PI*2/i;let s=Math.abs(e/2),u=Math.abs(t/2);const c=1-n.curveFitting;return s+=It(s*c,n),u+=It(u*c,n),{increment:o,rx:s,ry:u}}function Y5(e,t,n,r){const[i,o]=e9(r.increment,e,t,r.rx,r.ry,1,r.increment*Ym(.1,Ym(.4,1,n),n),n);let s=qm(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[u]=e9(r.increment,e,t,r.rx,r.ry,1.5,0,n),c=qm(u,null,n);s=s.concat(c)}return{estimatedPoints:o,opset:{type:"path",ops:s}}}function Zy(e,t,n,r,i,o,s,u,c){const h=e,d=t;let g=Math.abs(n/2),v=Math.abs(r/2);g+=It(g*.01,c),v+=It(v*.01,c);let y=i,x=o;for(;y<0;)y+=Math.PI*2,x+=Math.PI*2;x-y>Math.PI*2&&(y=0,x=Math.PI*2);const E=Math.PI*2/c.curveStepCount,T=Math.min(E/2,(x-y)/2),D=t9(T,h,d,g,v,y,x,1,c);if(!c.disableMultiStroke){const S=t9(T,h,d,g,v,y,x,1.5,c);D.push(...S)}return s&&(u?D.push(...uc(h,d,h+g*Math.cos(y),d+v*Math.sin(y),c),...uc(h,d,h+g*Math.cos(x),d+v*Math.sin(x),c)):D.push({op:"lineTo",data:[h,d]},{op:"lineTo",data:[h+g*Math.cos(y),d+v*Math.sin(y)]})),{type:"path",ops:D}}function Qy(e,t){const n=TE(SE(C4(e))),r=[];let i=[0,0],o=[0,0];for(const{key:s,data:u}of n)switch(s){case"M":{o=[u[0],u[1]],i=[u[0],u[1]];break}case"L":r.push(...uc(o[0],o[1],u[0],u[1],t)),o=[u[0],u[1]];break;case"C":{const[c,h,d,g,v,y]=u;r.push(...Nb(c,h,d,g,v,y,o,t)),o=[v,y];break}case"Z":r.push(...uc(o[0],o[1],i[0],i[1],t)),o=[i[0],i[1]];break}return{type:"path",ops:r}}function G7(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,o=r.length;if(o>2){n.push({op:"move",data:[r[0][0]+It(i,t),r[0][1]+It(i,t)]});for(let s=1;s<o;s++)n.push({op:"lineTo",data:[r[s][0]+It(i,t),r[s][1]+It(i,t)]})}}return{type:"fillPath",ops:n}}function Xd(e,t){return Sb(t,Mb).fillPolygons(e,t)}function Ib(e,t,n,r,i,o,s){const u=e,c=t;let h=Math.abs(n/2),d=Math.abs(r/2);h+=It(h*.01,s),d+=It(d*.01,s);let g=i,v=o;for(;g<0;)g+=Math.PI*2,v+=Math.PI*2;v-g>Math.PI*2&&(g=0,v=Math.PI*2);const y=(v-g)/s.curveStepCount,x=[];for(let E=g;E<=v;E=E+y)x.push([u+h*Math.cos(E),c+d*Math.sin(E)]);return x.push([u+h*Math.cos(v),c+d*Math.sin(v)]),x.push([u,c]),Xd([x],s)}function Fb(e,t){return It(e,t)}function Lb(e,t,n){return Ym(e,t,n)}function _b(e,t,n,r,i){return uc(e,t,n,r,i,!0)}function Jy(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function RE(e){return e.randomizer||(e.randomizer=new Db(e.seed||0)),e.randomizer.next()}function Ym(e,t,n,r=1){return n.roughness*r*(RE(n)*(t-e)+e)}function It(e,t,n=1){return Ym(-e,e,t,n)}function uc(e,t,n,r,i,o=!1){const s=o?i.disableMultiStrokeFill:i.disableMultiStroke,u=q5(e,t,n,r,i,!0,!1);if(s)return u;const c=q5(e,t,n,r,i,!0,!0);return u.concat(c)}function q5(e,t,n,r,i,o,s){const u=Math.pow(e-n,2)+Math.pow(t-r,2),c=Math.sqrt(u);let h=1;c<200?h=1:c>500?h=.4:h=-.0016668*c+1.233334;let d=i.maxRandomnessOffset||0;d*d*100>u&&(d=c/10);const g=d/2,v=.2+RE(i)*.2;let y=i.bowing*i.maxRandomnessOffset*(r-t)/200,x=i.bowing*i.maxRandomnessOffset*(e-n)/200;y=It(y,i,h),x=It(x,i,h);const E=[],T=()=>It(g,i,h),D=()=>It(d,i,h),S=i.preserveVertices;return s?E.push({op:"move",data:[e+(S?0:T()),t+(S?0:T())]}):E.push({op:"move",data:[e+(S?0:It(d,i,h)),t+(S?0:It(d,i,h))]}),s?E.push({op:"bcurveTo",data:[y+e+(n-e)*v+T(),x+t+(r-t)*v+T(),y+e+2*(n-e)*v+T(),x+t+2*(r-t)*v+T(),n+(S?0:T()),r+(S?0:T())]}):E.push({op:"bcurveTo",data:[y+e+(n-e)*v+D(),x+t+(r-t)*v+D(),y+e+2*(n-e)*v+D(),x+t+2*(r-t)*v+D(),n+(S?0:D()),r+(S?0:D())]}),E}function nm(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+It(t,n),e[0][1]+It(t,n)]),r.push([e[0][0]+It(t,n),e[0][1]+It(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+It(t,n),e[i][1]+It(t,n)]),i===e.length-1&&r.push([e[i][0]+It(t,n),e[i][1]+It(t,n)]);return qm(r,null,n)}function qm(e,t,n){const r=e.length,i=[];if(r>3){const o=[],s=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let u=1;u+2<r;u++){const c=e[u];o[0]=[c[0],c[1]],o[1]=[c[0]+(s*e[u+1][0]-s*e[u-1][0])/6,c[1]+(s*e[u+1][1]-s*e[u-1][1])/6],o[2]=[e[u+1][0]+(s*e[u][0]-s*e[u+2][0])/6,e[u+1][1]+(s*e[u][1]-s*e[u+2][1])/6],o[3]=[e[u+1][0],e[u+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...q5(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return i}function e9(e,t,n,r,i,o,s,u){const c=u.roughness===0,h=[],d=[];if(c){e=e/4,d.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let g=0;g<=Math.PI*2;g=g+e){const v=[t+r*Math.cos(g),n+i*Math.sin(g)];h.push(v),d.push(v)}d.push([t+r*Math.cos(0),n+i*Math.sin(0)]),d.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const g=It(.5,u)-Math.PI/2;d.push([It(o,u)+t+.9*r*Math.cos(g-e),It(o,u)+n+.9*i*Math.sin(g-e)]);const v=Math.PI*2+g-.01;for(let y=g;y<v;y=y+e){const x=[It(o,u)+t+r*Math.cos(y),It(o,u)+n+i*Math.sin(y)];h.push(x),d.push(x)}d.push([It(o,u)+t+r*Math.cos(g+Math.PI*2+s*.5),It(o,u)+n+i*Math.sin(g+Math.PI*2+s*.5)]),d.push([It(o,u)+t+.98*r*Math.cos(g+s),It(o,u)+n+.98*i*Math.sin(g+s)]),d.push([It(o,u)+t+.9*r*Math.cos(g+s*.5),It(o,u)+n+.9*i*Math.sin(g+s*.5)])}return[d,h]}function t9(e,t,n,r,i,o,s,u,c){const h=o+It(.1,c),d=[];d.push([It(u,c)+t+.9*r*Math.cos(h-e),It(u,c)+n+.9*i*Math.sin(h-e)]);for(let g=h;g<=s;g=g+e)d.push([It(u,c)+t+r*Math.cos(g),It(u,c)+n+i*Math.sin(g)]);return d.push([t+r*Math.cos(s),n+i*Math.sin(s)]),d.push([t+r*Math.cos(s),n+i*Math.sin(s)]),qm(d,null,c)}function Nb(e,t,n,r,i,o,s,u){const c=[],h=[u.maxRandomnessOffset||1,(u.maxRandomnessOffset||1)+.3];let d=[0,0];const g=u.disableMultiStroke?1:2,v=u.preserveVertices;for(let y=0;y<g;y++)y===0?c.push({op:"move",data:[s[0],s[1]]}):c.push({op:"move",data:[s[0]+(v?0:It(h[0],u)),s[1]+(v?0:It(h[0],u))]}),d=v?[i,o]:[i+It(h[y],u),o+It(h[y],u)],c.push({op:"bcurveTo",data:[e+It(h[y],u),t+It(h[y],u),n+It(h[y],u),r+It(h[y],u),d[0],d[1]]});return c}function lg(e){return[...e]}function n9(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(lg(e[0]),lg(e[1]),lg(e[2]),lg(e[2]));else{const i=[];i.push(e[0],e[0]);for(let u=1;u<e.length;u++)i.push(e[u]),u===e.length-1&&i.push(e[u]);const o=[],s=1-t;r.push(lg(i[0]));for(let u=1;u+2<i.length;u++){const c=i[u];o[0]=[c[0],c[1]],o[1]=[c[0]+(s*i[u+1][0]-s*i[u-1][0])/6,c[1]+(s*i[u+1][1]-s*i[u-1][1])/6],o[2]=[i[u+1][0]+(s*i[u][0]-s*i[u+2][0])/6,i[u+1][1]+(s*i[u][1]-s*i[u+2][1])/6],o[3]=[i[u+1][0],i[u+1][1]],r.push(o[1],o[2],o[3])}}return r}function Hb(e,t){return Math.sqrt(km(e,t))}function km(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Gb(e,t,n){const r=km(t,n);if(r===0)return km(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),km(e,Bf(t,n,i))}function Bf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function jb(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let u=3*r[1]-2*n[1]-o[1];u*=u;let c=3*i[0]-2*o[0]-n[0];c*=c;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<c&&(s=c),u<h&&(u=h),s+u}function Z5(e,t,n,r){const i=r||[];if(jb(e,t)<n){const o=e[t+0];i.length?Hb(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],u=e[t+1],c=e[t+2],h=e[t+3],d=Bf(s,u,.5),g=Bf(u,c,.5),v=Bf(c,h,.5),y=Bf(d,g,.5),x=Bf(g,v,.5),E=Bf(y,x,.5);Z5([s,d,y,E],0,n,i),Z5([E,x,v,h],0,n,i)}return i}function Q5(e,t,n,r,i){const o=i||[],s=e[t],u=e[n-1];let c=0,h=1;for(let d=t+1;d<n-1;++d){const g=Gb(e[d],s,u);g>c&&(c=g,h=d)}return Math.sqrt(c)>r?(Q5(e,t,h+1,r,o),Q5(e,h,n,r,o)):(o.length||o.push(s),o.push(u)),o}function r9(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;Z5(e,s,t,r)}return n&&n>0?Q5(r,0,r.length,n):r}function $b(e,t){return Math.sqrt(Om(e,t))}function Om(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Wb(e,t,n){const r=Om(t,n);if(r===0)return Om(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Om(e,Rf(t,n,i))}function Rf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function zb(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let u=3*r[1]-2*n[1]-o[1];u*=u;let c=3*i[0]-2*o[0]-n[0];c*=c;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<c&&(s=c),u<h&&(u=h),s+u}function J5(e,t,n,r){const i=r||[];if(zb(e,t)<n){const o=e[t+0];i.length?$b(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],u=e[t+1],c=e[t+2],h=e[t+3],d=Rf(s,u,.5),g=Rf(u,c,.5),v=Rf(c,h,.5),y=Rf(d,g,.5),x=Rf(g,v,.5),E=Rf(y,x,.5);J5([s,d,y,E],0,n,i),J5([E,x,v,h],0,n,i)}return i}function Vb(e,t){return e6(e,0,e.length,t)}function e6(e,t,n,r,i){const o=i||[],s=e[t],u=e[n-1];let c=0,h=1;for(let d=t+1;d<n-1;++d){const g=Wb(e[d],s,u);g>c&&(c=g,h=d)}return Math.sqrt(c)>r?(e6(e,t,h+1,r,o),e6(e,h,n,r,o)):(o.length||o.push(s),o.push(u)),o}function Ub(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;J5(e,s,t,r)}return r}function Xb(e,t,n){const r=C4(e),i=TE(SE(r)),o=[];let s=[],u=[0,0],c=[];const h=()=>{c.length>=4&&s.push(...Ub(c,t)),c=[]},d=()=>{h(),s.length&&(o.push(s),s=[])};for(const{key:v,data:y}of i)switch(v){case"M":d(),u=[y[0],y[1]],s.push(u);break;case"L":h(),s.push([y[0],y[1]]);break;case"C":if(!c.length){const x=s.length?s[s.length-1]:u;c.push([x[0],x[1]])}c.push([y[0],y[1]]),c.push([y[2],y[3]]),c.push([y[4],y[5]]);break;case"Z":h(),s.push([u[0],u[1]]);break}if(d(),!n)return o;const g=[];for(const v of o){const y=Vb(v,n);y.length&&g.push(y)}return g}const No="none";class Zm{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Tb()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,o){const s=this._o(o);return this._d("line",[AE(t,n,r,i,s)],s)}rectangle(t,n,r,i,o){const s=this._o(o),u=[],c=kb(t,n,r,i,s);if(s.fill){const h=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];s.fillStyle==="solid"?u.push(G7([h],s)):u.push(Xd([h],s))}return s.stroke!==No&&u.push(c),this._d("rectangle",u,s)}ellipse(t,n,r,i,o){const s=this._o(o),u=[],c=BE(r,i,s),h=Y5(t,n,s,c);if(s.fill)if(s.fillStyle==="solid"){const d=Y5(t,n,s,c).opset;d.type="fillPath",u.push(d)}else u.push(Xd([h.estimatedPoints],s));return s.stroke!==No&&u.push(h.opset),this._d("ellipse",u,s)}circle(t,n,r,i){const o=this.ellipse(t,n,r,r,i);return o.shape="circle",o}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[bm(t,!1,r)],r)}arc(t,n,r,i,o,s,u=!1,c){const h=this._o(c),d=[],g=Zy(t,n,r,i,o,s,u,!0,h);if(u&&h.fill)if(h.fillStyle==="solid"){const v=Object.assign({},h);v.disableMultiStroke=!0;const y=Zy(t,n,r,i,o,s,!0,!1,v);y.type="fillPath",d.push(y)}else d.push(Ib(t,n,r,i,o,s,h));return h.stroke!==No&&d.push(g),this._d("arc",d,h)}curve(t,n){const r=this._o(n),i=[],o=qy(t,r);if(r.fill&&r.fill!==No)if(r.fillStyle==="solid"){const s=qy(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],u=t;if(u.length){const h=typeof u[0][0]=="number"?[u]:u;for(const d of h)d.length<3?s.push(...d):d.length===3?s.push(...r9(n9([d[0],d[0],d[1],d[2]]),10,(1+r.roughness)/2)):s.push(...r9(n9(d),10,(1+r.roughness)/2))}s.length&&i.push(Xd([s],r))}return r.stroke!==No&&i.push(o),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],o=bm(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(G7([t],r)):i.push(Xd([t],r))),r.stroke!==No&&i.push(o),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=r.fill&&r.fill!=="transparent"&&r.fill!==No,s=r.stroke!==No,u=!!(r.simplification&&r.simplification<1),c=u?4-4*(r.simplification||1):(1+r.roughness)/2,h=Xb(t,1,c),d=Qy(t,r);if(o)if(r.fillStyle==="solid")if(h.length===1){const g=Qy(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(g.ops)})}else i.push(G7(h,r));else i.push(Xd(h,r));return s&&(u?h.forEach(g=>{i.push(bm(g,!1,r))}):i.push(d)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const o=typeof n=="number"&&n>=0?i.data.map(s=>+s.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":r+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":r+=`L${o[0]} ${o[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const o of n){let s=null;switch(o.type){case"path":s={d:this.opsToPath(o),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:No};break;case"fillPath":s={d:this.opsToPath(o),stroke:No,strokeWidth:0,fill:r.fill||No};break;case"fillSketch":s=this.fillSketch(o,r);break}s&&i.push(s)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||No,strokeWidth:r,fill:No}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class Kb{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Zm(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const s of n)switch(s.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,s,o),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const u=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,o,u),i.restore();break}case"fillSketch":this.fillSketch(i,s,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map(u=>+u.toFixed(r)):o.data;switch(o.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s),s}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s),s}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s),s}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o),o}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,o,s,u=!1,c){const h=this.gen.arc(t,n,r,i,o,s,u,c);return this.draw(h),h}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const rm="http://www.w3.org/2000/svg";class Yb{constructor(t,n){this.svg=t,this.gen=new Zm(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,o=i.createElementNS(rm,"g"),s=t.options.fixedDecimalPlaceDigits;for(const u of n){let c=null;switch(u.type){case"path":{c=i.createElementNS(rm,"path"),c.setAttribute("d",this.opsToPath(u,s)),c.setAttribute("stroke",r.stroke),c.setAttribute("stroke-width",r.strokeWidth+""),c.setAttribute("fill","none"),r.strokeLineDash&&c.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&c.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{c=i.createElementNS(rm,"path"),c.setAttribute("d",this.opsToPath(u,s)),c.setAttribute("stroke","none"),c.setAttribute("stroke-width","0"),c.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&c.setAttribute("fill-rule","evenodd");break}case"fillSketch":{c=this.fillSketch(i,u,r);break}}c&&o.appendChild(c)}return o}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const o=t.createElementNS(rm,"path");return o.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),o.setAttribute("stroke",r.fill||""),o.setAttribute("stroke-width",i+""),o.setAttribute("fill","none"),r.fillLineDash&&o.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s)}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s)}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s)}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,o,s,u=!1,c){const h=this.gen.arc(t,n,r,i,o,s,u,c);return this.draw(h)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const qb={canvas(e,t){return new Kb(e,t)},svg(e,t){return new Yb(e,t)},generator(e){return new Zm(e)},newSeed(){return Zm.newSeed()}};var ME=Symbol.for("immer-nothing"),i9=Symbol.for("immer-draftable"),Vo=Symbol.for("immer-state");function ta(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var d0=Object.getPrototypeOf;function Wu(e){return!!e&&!!e[Vo]}function Vf(e){var t;return e?bE(e)||Array.isArray(e)||!!e[i9]||!!((t=e.constructor)!=null&&t[i9])||X3(e)||K3(e):!1}var Zb=Object.prototype.constructor.toString();function bE(e){if(!e||typeof e!="object")return!1;const t=d0(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Zb}function Qm(e,t){U3(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function U3(e){const t=e[Vo];return t?t.type_:Array.isArray(e)?1:X3(e)?2:K3(e)?3:0}function t6(e,t){return U3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kE(e,t,n){const r=U3(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Qb(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function X3(e){return e instanceof Map}function K3(e){return e instanceof Set}function Mf(e){return e.copy_||e.base_}function n6(e,t){if(X3(e))return new Map(e);if(K3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=bE(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Vo];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],u=r[s];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[s]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[s]})}return Object.create(d0(e),r)}else{const r=d0(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function x4(e,t=!1){return Y3(e)||Wu(e)||!Vf(e)||(U3(e)>1&&(e.set=e.add=e.clear=e.delete=Jb),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>x4(r,!0))),e}function Jb(){ta(2)}function Y3(e){return Object.isFrozen(e)}var ek={};function Uf(e){const t=ek[e];return t||ta(0,e),t}var Lg;function OE(){return Lg}function tk(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function o9(e,t){t&&(Uf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function r6(e){i6(e),e.drafts_.forEach(nk),e.drafts_=null}function i6(e){e===Lg&&(Lg=e.parent_)}function s9(e){return Lg=tk(Lg,e)}function nk(e){const t=e[Vo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function a9(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Vo].modified_&&(r6(t),ta(4)),Vf(e)&&(e=Jm(t,e),t.parent_||e3(t,e)),t.patches_&&Uf("Patches").generateReplacementPatches_(n[Vo].base_,e,t.patches_,t.inversePatches_)):e=Jm(t,n,[]),r6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ME?e:void 0}function Jm(e,t,n){if(Y3(t))return t;const r=t[Vo];if(!r)return Qm(t,(i,o)=>u9(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return e3(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),Qm(o,(u,c)=>u9(e,r,i,u,c,n,s)),e3(e,i,!1),n&&e.patches_&&Uf("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function u9(e,t,n,r,i,o,s){if(Wu(i)){const u=o&&t&&t.type_!==3&&!t6(t.assigned_,r)?o.concat(r):void 0,c=Jm(e,i,u);if(kE(n,r,c),Wu(c))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Vf(i)&&!Y3(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jm(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&e3(e,i)}}function e3(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&x4(t,n)}function rk(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:OE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=E4;n&&(i=[r],o=_g);const{revoke:s,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=s,u}var E4={get(e,t){if(t===Vo)return e;const n=Mf(e);if(!t6(n,t))return ik(e,n,t);const r=n[t];return e.finalized_||!Vf(r)?r:r===j7(e.base_,t)?($7(e),e.copy_[t]=s6(r,e)):r},has(e,t){return t in Mf(e)},ownKeys(e){return Reflect.ownKeys(Mf(e))},set(e,t,n){const r=IE(Mf(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=j7(Mf(e),t),o=i==null?void 0:i[Vo];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Qb(n,i)&&(n!==void 0||t6(e.base_,t)))return!0;$7(e),o6(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return j7(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,$7(e),o6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Mf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ta(11)},getPrototypeOf(e){return d0(e.base_)},setPrototypeOf(){ta(12)}},_g={};Qm(E4,(e,t)=>{_g[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});_g.deleteProperty=function(e,t){return _g.set.call(this,e,t,void 0)};_g.set=function(e,t,n){return E4.set.call(this,e[0],t,n,e[0])};function j7(e,t){const n=e[Vo];return(n?Mf(n):e)[t]}function ik(e,t,n){var i;const r=IE(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function IE(e,t){if(!(t in e))return;let n=d0(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=d0(n)}}function o6(e){e.modified_||(e.modified_=!0,e.parent_&&o6(e.parent_))}function $7(e){e.copy_||(e.copy_=n6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ok=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(c=o,...h){return s.produce(c,d=>n.call(this,d,...h))}}typeof n!="function"&&ta(6),r!==void 0&&typeof r!="function"&&ta(7);let i;if(Vf(t)){const o=s9(this),s=s6(t,void 0);let u=!0;try{i=n(s),u=!1}finally{u?r6(o):i6(o)}return o9(o,r),a9(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===ME&&(i=void 0),this.autoFreeze_&&x4(i,!0),r){const o=[],s=[];Uf("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else ta(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...u)=>this.produceWithPatches(s,c=>t(c,...u));let r,i;return[this.produce(t,n,(s,u)=>{r=s,i=u}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Vf(e)||ta(8),Wu(e)&&(e=sk(e));const t=s9(this),n=s6(e,void 0);return n[Vo].isManual_=!0,i6(t),n}finishDraft(e,t){const n=e&&e[Vo];(!n||!n.isManual_)&&ta(9);const{scope_:r}=n;return o9(r,t),a9(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Uf("Patches").applyPatches_;return Wu(e)?r(e,t):this.produce(e,i=>r(i,t))}};function s6(e,t){const n=X3(e)?Uf("MapSet").proxyMap_(e,t):K3(e)?Uf("MapSet").proxySet_(e,t):rk(e,t);return(t?t.scope_:OE()).drafts_.push(n),n}function sk(e){return Wu(e)||ta(10,e),FE(e)}function FE(e){if(!Vf(e)||Y3(e))return e;const t=e[Vo];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=n6(e,t.scope_.immer_.useStrictShallowCopy_)}else n=n6(e,!0);return Qm(n,(r,i)=>{kE(n,r,FE(i))}),t&&(t.finalized_=!1),n}var Uo=new ok,ak=Uo.produce;Uo.produceWithPatches.bind(Uo);Uo.setAutoFreeze.bind(Uo);Uo.setUseStrictShallowCopy.bind(Uo);Uo.applyPatches.bind(Uo);var im=Uo.createDraft.bind(Uo),om=Uo.finishDraft.bind(Uo),Qs={},l9;function uk(){if(l9)return Qs;l9=1,Object.defineProperty(Qs,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),t={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)r["f"+i]=111+i;function o(v,y,x){y&&!("byKey"in y)&&(x=y,y=null),Array.isArray(v)||(v=[v]);var E=v.map(function(S){return c(S,y)}),T=function(R){return E.some(function(L){return h(L,R)})},D=x==null?T:T(x);return D}function s(v,y){return o(v,y)}function u(v,y){return o(v,{byKey:!0},y)}function c(v,y){var x=y&&y.byKey,E={};v=v.replace("++","+add");var T=v.split("+"),D=T.length;for(var S in t)E[t[S]]=!1;var R=!0,L=!1,k=void 0;try{for(var W=T[Symbol.iterator](),z;!(R=(z=W.next()).done);R=!0){var Y=z.value,te=Y.endsWith("?")&&Y.length>1;te&&(Y=Y.slice(0,-1));var se=g(Y),me=t[se];if(Y.length>1&&!me&&!n[Y]&&!r[se])throw new TypeError('Unknown modifier: "'+Y+'"');(D===1||!me)&&(x?E.key=se:E.which=d(Y)),me&&(E[me]=te?null:!0)}}catch(ne){L=!0,k=ne}finally{try{!R&&W.return&&W.return()}finally{if(L)throw k}}return E}function h(v,y){for(var x in v){var E=v[x],T=void 0;if(E!=null&&(x==="key"&&y.key!=null?T=y.key.toLowerCase():x==="which"?T=E===91&&y.which===93?91:y.which:T=y[x],!(T==null&&E===!1)&&T!==E))return!1}return!0}function d(v){v=g(v);var y=r[v]||v.toUpperCase().charCodeAt(0);return y}function g(v){return v=v.toLowerCase(),v=n[v]||v,v}return Qs.default=o,Qs.isHotkey=o,Qs.isCodeHotkey=s,Qs.isKeyHotkey=u,Qs.parseHotkey=c,Qs.compareHotkey=h,Qs.toKeyCode=d,Qs.toKeyName=g,Qs}var nn=uk(),a6=function(e,t){return a6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},a6(e,t)};function yc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a6(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function lk(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(d){try{h(r.next(d))}catch(g){s(g)}}function c(d){try{h(r.throw(d))}catch(g){s(g)}}function h(d){d.done?o(d.value):i(d.value).then(u,c)}h((r=r.apply(e,t||[])).next())})}function LE(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(d){return c([h,d])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function g0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p0(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Ng(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function r0(e){return this instanceof r0?(this.v=e,this):new r0(e)}function ck(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(x){return Promise.resolve(x).then(y,g)}}function u(y,x){r[y]&&(i[y]=function(E){return new Promise(function(T,D){o.push([y,E,T,D])>1||c(y,E)})},x&&(i[y]=x(i[y])))}function c(y,x){try{h(r[y](x))}catch(E){v(o[0][3],E)}}function h(y){y.value instanceof r0?Promise.resolve(y.value.v).then(d,g):v(o[0][2],y)}function d(y){c("next",y)}function g(y){c("throw",y)}function v(y,x){y(x),o.shift(),o.length&&c(o[0][0],o[0][1])}}function fk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof g0=="function"?g0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(u,c){s=e[o](s),i(u,c,s.done,s.value)})}}function i(o,s,u,c){Promise.resolve(c).then(function(h){o({value:h,done:u})},s)}}function nr(e){return typeof e=="function"}function _E(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var W7=_E(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function t3(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var mp=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var u=g0(s),c=u.next();!c.done;c=u.next()){var h=c.value;h.remove(this)}}catch(E){t={error:E}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}else s.remove(this);var d=this.initialTeardown;if(nr(d))try{d()}catch(E){o=E instanceof W7?E.errors:[E]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var v=g0(g),y=v.next();!y.done;y=v.next()){var x=y.value;try{c9(x)}catch(E){o=o??[],E instanceof W7?o=Ng(Ng([],p0(o)),p0(E.errors)):o.push(E)}}}catch(E){r={error:E}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}}if(o)throw new W7(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)c9(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&t3(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&t3(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),NE=mp.EMPTY;function HE(e){return e instanceof mp||e&&"closed"in e&&nr(e.remove)&&nr(e.add)&&nr(e.unsubscribe)}function c9(e){nr(e)?e():e.unsubscribe()}var hk={Promise:void 0},dk={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Ng([e,t],p0(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function GE(e){dk.setTimeout(function(){throw e})}function f9(){}function Im(e){e()}var P4=function(e){yc(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,HE(n)&&n.add(r)):r.destination=mk,r}return t.create=function(n,r,i){return new u6(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(mp),gk=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){sm(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){sm(r)}else sm(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){sm(n)}},e}(),u6=function(e){yc(t,e);function t(n,r,i){var o=e.call(this)||this,s;return nr(n)||!n?s={next:n??void 0,error:r??void 0,complete:i??void 0}:s=n,o.destination=new gk(s),o}return t}(P4);function sm(e){GE(e)}function pk(e){throw e}var mk={closed:!0,next:f9,error:pk,complete:f9},S4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function vk(e){return e}function yk(e){return e.length===0?vk:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var za=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=Ck(t)?t:new u6(t,n,r);return Im(function(){var s=i,u=s.operator,c=s.source;o.add(u?u.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=h9(n),new n(function(i,o){var s=new u6({next:function(u){try{t(u)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[S4]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return yk(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=h9(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function h9(e){var t;return(t=e??hk.Promise)!==null&&t!==void 0?t:Promise}function wk(e){return e&&nr(e.next)&&nr(e.error)&&nr(e.complete)}function Ck(e){return e&&e instanceof P4||wk(e)&&HE(e)}function xk(e){return nr(e==null?void 0:e.lift)}function jE(e){return function(t){if(xk(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function l6(e,t,n,r,i){return new Ek(e,t,n,r,i)}var Ek=function(e){yc(t,e);function t(n,r,i,o,s,u){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=u,c._next=r?function(h){try{r(h)}catch(d){n.error(d)}}:e.prototype._next,c._error=o?function(h){try{o(h)}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(P4),Pk=_E(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),$E=function(e){yc(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new d9(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Pk},t.prototype.next=function(n){var r=this;Im(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=g0(r.currentObservers),u=s.next();!u.done;u=s.next()){var c=u.value;c.next(n)}}catch(h){i={error:h}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Im(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Im(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,u=i.observers;return o||s?NE:(this.currentObservers=null,u.push(n),new mp(function(){r.currentObservers=null,t3(u,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new za;return n.source=this,n},t.create=function(n,r){return new d9(n,r)},t}(za),d9=function(e){yc(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:NE},t}($E),Sk={now:function(){return Date.now()}},Tk=function(e){yc(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(mp),g9={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Ng([e,t],p0(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Dk=function(e){yc(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),g9.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&g9.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,t3(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Tk),p9=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=Sk.now,e}(),Ak=function(e){yc(t,e);function t(n,r){r===void 0&&(r=p9.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(p9),Bk=new Ak(Dk),Rk=Bk,WE=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Mk(e){return nr(e==null?void 0:e.then)}function bk(e){return nr(e[S4])}function kk(e){return Symbol.asyncIterator&&nr(e==null?void 0:e[Symbol.asyncIterator])}function Ok(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ik(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fk=Ik();function Lk(e){return nr(e==null?void 0:e[Fk])}function _k(e){return ck(this,arguments,function(){var n,r,i,o;return LE(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,r0(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,r0(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,r0(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Nk(e){return nr(e==null?void 0:e.getReader)}function T4(e){if(e instanceof za)return e;if(e!=null){if(bk(e))return Hk(e);if(WE(e))return Gk(e);if(Mk(e))return jk(e);if(kk(e))return zE(e);if(Lk(e))return $k(e);if(Nk(e))return Wk(e)}throw Ok(e)}function Hk(e){return new za(function(t){var n=e[S4]();if(nr(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gk(e){return new za(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function jk(e){return new za(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,GE)})}function $k(e){return new za(function(t){var n,r;try{for(var i=g0(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function zE(e){return new za(function(t){zk(e,t).catch(function(n){return t.error(n)})})}function Wk(e){return zE(_k(e))}function zk(e,t){var n,r,i,o;return lk(this,void 0,void 0,function(){var s,u;return LE(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=fk(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=c.sent(),i={error:u},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Vk(e){return e instanceof Date&&!isNaN(e)}function VE(e,t){return jE(function(n,r){var i=0;n.subscribe(l6(r,function(o){r.next(e.call(t,o,i++))}))})}var Uk=Array.isArray;function Xk(e,t){return Uk(t)?e.apply(void 0,Ng([],p0(t))):e(t)}function Kk(e){return VE(function(t){return Xk(e,t)})}function Yk(e,t,n,r,i,o,s,u){var c=[],h=0,d=0,g=!1,v=function(){g&&!c.length&&!h&&t.complete()},y=function(E){return h<r?x(E):c.push(E)},x=function(E){h++;var T=!1;T4(n(E,d++)).subscribe(l6(t,function(D){t.next(D)},function(){T=!0},void 0,function(){if(T)try{h--;for(var D=function(){var S=c.shift();s||x(S)};c.length&&h<r;)D();v()}catch(S){t.error(S)}}))};return e.subscribe(l6(t,y,function(){g=!0,v()})),function(){}}function UE(e,t,n){return n===void 0&&(n=1/0),nr(t)?UE(function(r,i){return VE(function(o,s){return t(r,o,i,s)})(T4(e(r,i)))},n):(typeof t=="number"&&(n=t),jE(function(r,i){return Yk(r,i,e,n)}))}var qk=["addListener","removeListener"],Zk=["addEventListener","removeEventListener"],Qk=["on","off"];function n3(e,t,n,r){if(nr(n)&&(r=n,n=void 0),r)return n3(e,t,n).pipe(Kk(r));var i=p0(tO(e)?Zk.map(function(u){return function(c){return e[u](t,c,n)}}):Jk(e)?qk.map(m9(e,t)):eO(e)?Qk.map(m9(e,t)):[],2),o=i[0],s=i[1];if(!o&&WE(e))return UE(function(u){return n3(u,t,n)})(T4(e));if(!o)throw new TypeError("Invalid event target");return new za(function(u){var c=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];return u.next(1<h.length?h:h[0])};return o(c),function(){return s(c)}})}function m9(e,t){return function(n){return function(r){return e[n](t,r)}}}function Jk(e){return nr(e.addListener)&&nr(e.removeListener)}function eO(e){return nr(e.on)&&nr(e.off)}function tO(e){return nr(e.addEventListener)&&nr(e.removeEventListener)}function nO(e,t,n){return n===void 0&&(n=Rk),new za(function(r){var i=Vk(e)?0-n.now():e;i<0&&(i=0);var o=0;return n.schedule(function(){r.closed||(r.next(o++),r.complete())},i)})}var ra;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(ra||(ra={}));var Eg;(function(e){e.crosshair="crosshair"})(Eg||(Eg={}));const z7=[ra.ns,ra.nesw,ra.ew,ra.nwse],il="plait-board-attached",dr=1,c6=2,vp="selection-rectangle",rO="selection-rectangle-bounding",iO=.1,XE=.1,KE=4,oO="plait-board-container",YE="active-with-moving",v9="rotate-handle",sO="resize-handle",aO=20,qE={MAIN:0,WHEEL:1},D4=3,ZE=10,A4=5;function uO(e){return!!e.beforeContextChange}function lO(e){return!!e.onContextChanged}const y9=new WeakMap,Fm=new WeakMap,i0=new WeakMap,Nf=new WeakMap,f6=new WeakMap,mg=new WeakMap,vg=new WeakMap,h6=new WeakMap,r3=new WeakMap,i3=new WeakMap,d6=new WeakMap,g6=new WeakMap,p6=new WeakMap,m6=new WeakMap,Lu=new WeakMap,QE=new WeakMap,v6=new WeakMap,JE=new WeakMap,B4=new WeakMap,R4=new WeakMap,q3=new WeakMap,Z3=new WeakMap,w9=new WeakMap,yg=new WeakMap;function Xo(e){return e==null}const Hg=(e,t)=>e+Math.floor(t*255).toString(16);function cO(e){return e.button===2}function M4(e){const t=new Map;return e.forEach(n=>{t.has(n.id)||t.set(n.id,n)}),Array.from(t.values())}const fO=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},hO=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},dO=e=>{e.sort((t,n)=>t-n);for(let t=1;t<e.length;t++)if(e[t]!==e[t-1]+1)return!1;return!0},gO={isViewport:e=>!Xo(e.zoom)&&!Xo(e.viewBackgroundColor)},wt={ancestors(e,t={}){const{reverse:n=!1}=t;let r=wt.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},levels(e,t={}){const{reverse:n=!1}=t,r=[];for(let i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const t=e[e.length-1];return e.slice(0,-1).concat(t+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const t=e[e.length-1];if(t<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(t-1)},isAncestor(e,t){return e.length<t.length&&wt.compare(e,t)===0},compare(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},endsBefore(e,t){const n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return wt.equals(r,i)&&o<s},isSibling(e,t){if(e.length!==t.length)return!1;const n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&wt.equals(n,r)},transform(e,t){if(!e)return null;const n=[...e];if(e.length===0)return n;switch(t.type){case"insert_node":{const{path:r}=t;(wt.equals(r,n)||wt.endsBefore(r,n)||wt.isAncestor(r,n))&&(n[r.length-1]+=1);break}case"remove_node":{const{path:r}=t;if(wt.equals(r,n)||wt.isAncestor(r,n))return null;wt.endsBefore(r,n)&&(n[r.length-1]-=1);break}case"move_node":{const{path:r,newPath:i}=t;if(wt.equals(r,i))return n;if(wt.isAncestor(r,n)||wt.equals(r,n)){const o=i.slice();return wt.endsBefore(r,i)&&r.length<i.length&&(o[r.length-1]-=1),o.concat(n.slice(r.length))}else wt.isSibling(r,i)&&(wt.isAncestor(i,n)||wt.equals(i,n))?wt.endsBefore(r,n)?n[r.length-1]-=1:n[r.length-1]+=1:wt.endsBefore(i,n)||wt.equals(i,n)||wt.isAncestor(i,n)?(wt.endsBefore(r,n)&&(n[r.length-1]-=1),n[i.length-1]+=1):wt.endsBefore(r,n)&&(wt.equals(i,n)&&(n[i.length-1]+=1),n[r.length-1]-=1);break}}return n}},Xt={parent:(e,t)=>{const n=wt.parent(t);return Xt.get(e,n)},*parents(e,t,n={}){for(const r of wt.ancestors(t,n))yield Xt.get(e,r)},get(e,t){let n=e;for(let r=0;r<t.length;r++){const i=t[r];if(!n||!n.children||!n.children[i])throw new Error(`Cannot find a descendant at path [${t}]`);n=n.children[i]}return n},last(e,t){let n=Xt.get(e,t);for(;n&&n.children&&n.children.length>0;){const r=n.children.length-1;n=n.children[r]}return n},first(e,t){const n=t.slice();let r=Xt.get(e,n);if(!r.children||!e.isExpanded(r))return r;for(;r&&r.children&&r.children.length>0&&e.isExpanded(r)&&r.children.length!==0;)r=r.children[0],n.push(0);return r}},pO=(e,t,n,r,i)=>{var o,s;switch(i.type){case"insert_node":{const{path:u,node:c}=i,h=Xt.parent(e,u),d=u[u.length-1];if(!h.children||d>h.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${u}] because the destination is past the end of the node.`);h.children.splice(d,0,c);break}case"remove_node":{const{path:u}=i,c=Xt.parent(e,u),h=u[u.length-1];if(!c.children||h>c.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${u}] because the destination is past the end of the node.`);c.children.splice(h,1);break}case"move_node":{const{path:u,newPath:c}=i;if(wt.isAncestor(u,c))throw new Error(`Cannot move a path [${u}] to new path [${c}] because the destination is inside itself.`);const h=Xt.get(e,u),d=Xt.parent(e,u),g=u[u.length-1];(o=d.children)==null||o.splice(g,1);const v=wt.transform(u,i),y=Xt.get(e,wt.parent(v)),x=v[v.length-1];(s=y.children)==null||s.splice(x,0,h);break}case"set_node":{const{path:u,properties:c,newProperties:h}=i;if(u.length===0)throw new Error("Cannot set properties on the root node!");const d=Xt.get(e,u);for(const g in h){const v=h[g];v==null?delete d[g]:d[g]=v}for(const g in c)h.hasOwnProperty(g)||delete d[g];break}case"set_viewport":{const{newProperties:u}=i;if(u==null)n=u;else{if(n==null){if(!gO.isViewport(u))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(u)} when there is no current viewport.`);n={...u}}for(const c in u){const h=u[c];h==null?delete n[c]:n[c]=h}}break}case"set_selection":{const{newProperties:u}=i;u==null?t=u:t===null?t=i.newProperties:t=u;break}case"set_theme":{const{newProperties:u}=i;r=u;break}}return{selection:t,viewport:n,theme:r}},mO={transform(e,t){e.children=im(e.children);let n=e.viewport&&im(e.viewport),r=e.selection&&im(e.selection),i=e.theme&&im(e.theme);try{const o=pO(e,r,n,i,t);n=o.viewport,r=o.selection,i=o.theme}finally{e.children=om(e.children),r?e.selection=Wu(r)?om(r):r:e.selection=null,e.viewport=Wu(n)?om(n):n,e.theme=Wu(i)?om(i):i}}},M={isHit:(e,t)=>M.isHitX(e,t)&&M.isHitY(e,t),isHitX:(e,t)=>{const n=e.x<t.x?e.x:t.x,r=e.x+e.width>t.x+t.width?e.x+e.width:t.x+t.width;return Math.floor(r-n-e.width-t.width)<=0},isHitY:(e,t)=>{const n=e.y<t.y?e.y:t.y,r=e.y+e.height>t.y+t.height?e.y+e.height:t.y+t.height;return Math.floor(r-n-e.height-t.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,t,n){return M.getRectangleByPoint([e[0]-t/2,e[1]-n/2],t,n)},getRectangleByPoint(e,t,n){return{x:e[0],y:e[1],width:t,height:n}},getRectangleByPoints(e){vO(e)&&(e=[e]);let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const s of e){const u=s.map(h=>h[0]),c=s.map(h=>h[1]);t=Math.min(t,...u),n=Math.min(n,...c),r=Math.max(r,...u),n=Math.min(n,...c),i=Math.max(i,...c)}return{x:t,y:n,width:r-t,height:i-n}},getCornerPointsByPoints(e){const t=e.map(u=>u[0]),n=e.map(u=>u[1]),r=Math.min(...t),i=Math.max(...t),o=Math.min(...n),s=Math.max(...n);return[[r,o],[i,o],[i,s],[r,s]]},getOutlineRectangle:(e,t)=>({x:e.x+t,y:e.y+t,width:e.width-t*2,height:e.height-t*2}),inflate:(e,t)=>{const n=t/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}},isEqual:(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>M.getCenterPoint(M.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,t)=>[e.x+e.width*t[0],e.y+e.height*t[1]],expand(e,t,n=t,r=t,i=n){return{x:e.x-t,y:e.y-n,width:e.width+t+r,height:e.height+n+i}},getGapCenter(e,t,n){const r=n?"x":"y",i=n?"width":"height",s=[e[r],e[r]+e[i],t[r],t[r]+t[i]].sort((u,c)=>u-c);return(s[1]+s[2])/2},isPointInRectangle(e,t){const n=t[0],r=t[1];return n>e.x&&n<e.x+e.width&&r>e.y&&r<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.forEach(o=>{t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x+o.width),i=Math.max(i,o.y+o.height)}),{x:t,y:n,width:r-t,height:i-n}}};function vO(e){return Array.isArray(e)&&e.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")}function eP(e,t,n,r,i,o){const s=e-n,u=t-r,c=i-n,h=o-r,d=s*c+u*h,g=c*c+h*h;let v=-1;g!==0&&(v=d/g);let y,x;v<0?(y=n,x=r):v>1?(y=i,x=o):(y=n+v*c,x=r+v*h);const E=e-y,T=t-x;return Math.hypot(E,T)}function Q3(e,t){const n=e[0],r=e[1],i=t[0][0],o=t[0][1],s=t[1][0],u=t[1][1],c=n-i,h=r-o,d=s-i,g=u-o,v=c*d+h*g,y=d*d+g*g;let x=-1;y!==0&&(x=v/y);let E,T;return x<0?(E=i,T=o):x>1?(E=s,T=u):(E=i+x*d,T=o+x*g),[E,T]}function tP(e,t){const n=t.length;let r=1/0;if(t.length===1)return Tt(...t[0],...e);for(let i=0;i<n-1;i++){const o=t[i],s=t[i+1],u=eP(e[0],e[1],o[0],o[1],s[0],s[1]);u<r&&(r=u)}return r}function Ln(e,t,n=!0){const r=t.length;let i=1/0,o=e;for(let s=0;s<r;s++){const u=t[s];if(s===r-1&&!n)continue;const c=s===r-1?t[0]:t[s+1],h=eP(e[0],e[1],u[0],u[1],c[0],c[1]);h<i&&(i=h,o=Q3(e,[u,c]))}return o}function b4(e,t){let n=1/0,r=e;for(const i of t){const o=Q3(e,i),s=Tt(e[0],e[1],o[0],o[1]);s<n&&(n=s,r=o)}return r}function Ai(e,t,n,r){const i={x:t[0]-n,y:t[1]-r,height:r*2,width:n*2},o=Math.abs(e[0]-i.x-i.width/2),s=Math.abs(e[1]-i.y-i.height/2);let u=.707,c=.707;const h=Math.abs(i.width)/2,d=Math.abs(i.height)/2;[0,1,2,3].forEach(y=>{const x=h*u,E=d*c,T=(h*h-d*d)*u**3/h,D=(d*d-h*h)*c**3/d,S=x-T,R=E-D,L=o-T,k=s-D,W=Math.hypot(R,S),z=Math.hypot(k,L);u=Math.min(1,Math.max(0,(L*W/z+T)/h)),c=Math.min(1,Math.max(0,(k*W/z+D)/d));const Y=Math.hypot(c,u);u/=Y,c/=Y});const g=e[0]>t[0]?1:-1,v=e[1]>t[1]?1:-1;return[t[0]+h*u*g,t[1]+d*c*v]}function m0(e,t,n,r,i){return[(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r]}function Tt(e,t,n,r){const i=e-n,o=t-r;return Math.hypot(i,o)}function yp(e,t,n){var r=Math.max(n.x-e,0,e-(n.x+n.width)),i=Math.max(n.y-t,0,t-(n.y+n.height));return Math.sqrt(r*r+i*i)}const am=(e,t,n,r)=>{if(mt.isEquals(e,t)&&mt.isEquals(n,r)&&!mt.isEquals(e,n))return!1;const i=(g,v)=>g[0]*v[1]-g[1]*v[0],o=[t[0]-e[0],t[1]-e[1]],s=[n[0]-e[0],n[1]-e[1]],u=[r[0]-e[0],r[1]-e[1]],c=[e[0]-n[0],e[1]-n[1]],h=[t[0]-n[0],t[1]-n[1]],d=[r[0]-n[0],r[1]-n[1]];return i(o,s)*i(o,u)<=0&&i(d,c)*i(d,h)<=0},o3=(e,t)=>{if(e.length===1)return M.isPointInRectangle(t,e[0]);const n=M.getCornerPoints(t),r=e.length;for(let i=0;i<r;i++){const o=e[i],s=e[(i+1)%r];if(i===r-1&&mt.isEquals(o,s))continue;if(yO(o,s,t)||lc(o,n)||lc(s,n))return!0}return!1},yO=(e,t,n)=>{const r=M.getCornerPoints(n);return am(e,t,r[0],r[1])||am(e,t,r[1],r[2])||am(e,t,r[2],r[3])||am(e,t,r[3],r[0])},lc=(e,t)=>{const n=e[0],r=e[1];let i=!1;for(var o=0,s=t.length-1;o<t.length;s=o++){let u=t[o][0],c=t[o][1],h=t[s][0],d=t[s][1];c>r!=d>r&&n<(h-u)*(r-c)/(d-c)+u&&(i=!i)}return i},Uu=(e,t,n,r,i=0)=>{const o=Math.cos(i),s=Math.sin(i),u=(e[0]-t[0])*o+(e[1]-t[1])*s,c=(e[1]-t[1])*o-(e[0]-t[0])*s;return u*u/(n*n)+c*c/(r*r)<=1},k4=(e,t,n,r=0)=>{const{x:i,y:o,width:s,height:u}=t,c=e[0]>=i&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+u,h=e[0]>=i&&e[0]<=i+n&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+n),e[1]-(o+n))>n,d=e[0]>=i&&e[0]<=i+n&&e[1]>=o+u&&e[1]<=o+u-n&&Math.hypot(e[0]-(i+n),e[1]-(o+u-n))>n,g=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+s-n),e[1]-(o+n))>n,v=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o+u-n&&e[1]<=o+u&&Math.hypot(e[0]-(i+s-n),e[1]-(o+u-n))>n;return c&&!(h||d||g||v)},wp=function(e){let n,r,i,o,s,u,c,h,d,g,v,y,x;var E,T,D,S,R,L;const k=[];k.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var W=e.length,z=0;z<W-1;z++)n=z==0?e[0]:e[z-1],r=e[z],i=e[z+1],o=z+2<W?e[z+2]:i,c=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)),h=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)),d=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),E=Math.pow(d,.5),D=Math.pow(d,2*.5),T=Math.pow(h,.5),S=Math.pow(h,2*.5),L=Math.pow(c,.5),R=Math.pow(c,2*.5),g=2*R+3*L*T+S,v=2*D+3*E*T+S,y=3*L*(L+T),y>0&&(y=1/y),x=3*E*(E+T),x>0&&(x=1/x),s=[(-S*n[0]+g*r[0]+R*i[0])*y,(-S*n[1]+g*r[1]+R*i[1])*y],u=[(D*r[0]+v*i[0]-S*o[0])*x,(D*r[1]+v*i[1]-S*o[1])*x],s[0]==0&&s[1]==0&&(s=r),u[0]==0&&u[1]==0&&(u=i),k.push(s,u,i);return k};function qa(e,t,n,r){return Math.abs(t)===0?e>0?-1/0:1/0:-r*r*e/(n*n*t)}function Za(e,t,n){if(n===1/0)return[0,-1];if(n===-1/0)return[0,1];let r=[1,-n];return t<0&&(r=[-r[0],-r[1]]),r}function wO(e){return+e.toFixed(2)}function O4(e,t){const n=Math.pow(10,t);return Math.ceil(e*n)/n}function y6(e,t,n=1e-6){return Math.abs(e-t)<=n}function C9(e,t,n,r,i,o,s=!0){if(i===0||o===0||e[0]===t[0]&&e[1]===t[1])return[];i=i<0?i:-i,o=o<0?o:-o,e[0]-=n,e[1]-=r,t[0]-=n,t[1]-=r;var u=(t[0]-e[0])*(t[0]-e[0])/i/i+(t[1]-e[1])*(t[1]-e[1])/o/o,c=2*e[0]*(t[0]-e[0])/i/i+2*e[1]*(t[1]-e[1])/o/o,h=e[0]*e[0]/i/i+e[1]*e[1]/o/o-1,d=[],g=c*c-4*u*h;return g===0?d.push(-c/2/u):g>0&&(d.push((-c+Math.sqrt(g))/2/u),d.push((-c-Math.sqrt(g))/2/u)),d.filter(v=>!s||v>=0&&v<=1).map(v=>[e[0]+(t[0]-e[0])*v+n,e[1]+(t[1]-e[1])*v+r])}function x9(e,t,n,r,i=.5){return[e+(n-e)*i,t+(r-t)*i]}function nP(e,t){const n=(t.endX-e[0])/2,r=(t.endY-e[1])/2,i=Math.cos(t.xAxisRotation),o=Math.sin(t.xAxisRotation),s=i*n+o*r,u=-o*n+i*r,c=Math.abs(t.rx),h=Math.abs(t.ry),d=s*s/(c*c)+u*u/(h*h),g=d>1?Math.sqrt(d):1,v=c*g,y=h*g,x=t.largeArcFlag===t.sweepFlag?-1:1,E=(v*v*y*y-v*v*u*u-y*y*s*s)/(v*v*u*u+y*y*s*s),T=x*Math.sqrt(Math.max(0,E)),D=T*(v*u/y),S=T*(-(y*s)/v),R=i*D-o*S+(e[0]+t.endX)/2,L=o*D+i*S+(e[1]+t.endY)/2;return{center:[R,L],rx:v,ry:y}}function J3(e,t,n){const{center:r,rx:i,ry:o}=nP(t,n),s=Ai(e,r,i,o),u=Math.atan2(t[1]-r[1],t[0]-r[0]),c=Math.atan2(n.endY-r[1],n.endX-r[0]),h=Math.atan2(s[1]-r[1],s[0]-r[0]);if(CO(h,u,c,n.sweepFlag===1))return s;const g=Tt(e[0],e[1],t[0],t[1]),v=Tt(e[0],e[1],n.endX,n.endY);return g<v?t:[n.endX,n.endY]}function CO(e,t,n,r){const i=c=>(c%(2*Math.PI)+2*Math.PI)%(2*Math.PI),o=i(e),s=i(t),u=i(n);return r?s<=u?o>=s&&o<=u:o>=s||o<=u:s>=u?o<=s&&o>=u:o<=s||o>=u}function xO(e,t,n){const i=I.getBoardContainer(e).getBoundingClientRect();return yp(t,n,i)===0}function I4(e){const{hideScrollbar:t}=e.options;let n=0;if(!t){const r=I.getViewportContainer(e);n=r.offsetWidth-r.clientWidth}return n}const D0="http://www.w3.org/2000/svg";function Lt(){return document.createElementNS(D0,"g")}function F4(){return document.createElementNS(D0,"path")}function V7(e,t){const n=document.createElementNS(D0,"rect");n.setAttribute("x",`${e.x}`),n.setAttribute("y",`${e.y}`),n.setAttribute("width",`${e.width}`),n.setAttribute("height",`${e.height}`);for(let r in t){const i=r;n.setAttribute(r,`${t[i]}`)}return n}const Wt=(e,t)=>{e.setAttribute("stroke-linecap",t)},EO=(e,t)=>{e.querySelectorAll("path").forEach(n=>{n.setAttribute("stroke-linecap",t)})};function PO(){return document.createElementNS(D0,"mask")}function SO(e,t,n,r){var i=document.createElementNS(D0,"text");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("fill",n),i.textContent=r,i}const TO=e=>DO(e)&&e.nodeType===1,DO=e=>e instanceof window.Node,AO=e=>!!(TO(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),Va=e=>e.button===qE.MAIN,BO=e=>e.button===qE.WHEEL;function L4(e,t,n,r){var i=document.createElementNS(D0,"foreignObject");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("width",`${O4(n,0)}`),i.setAttribute("height",`${r}`),i}function Pg(e,t,n,r,i){const o=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");o&&(o.setAttribute("width",`${O4(t,0)}`),o.setAttribute("height",`${n}`),o.setAttribute("x",`${r}`),o.setAttribute("y",`${i}`))}function RO(e,t){const n=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");n&&n.setAttribute("width",`${O4(t,0)}`)}const MO=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),bO=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s3=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),kO=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),OO=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),IO=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),FO=(e,t)=>e.type==="set_viewport"&&e.type===(t==null?void 0:t.type),LO=(e,t)=>!(e.type==="set_selection"||e.type==="set_viewport"),_O=e=>e.type!=="set_selection",vs={isSaving(e){return U7.get(e)},isMerging(e){return br.get(e)},isSplittingOnce(e){return lm.get(e)},setSplittingOnce(e,t){lm.set(e,t)},withMerging(e,t){const n=vs.isMerging(e);br.set(e,!0),t(),br.set(e,n)},withNewBatch(e,t){const n=vs.isMerging(e);br.set(e,!0),lm.set(e,!0),t(),br.set(e,n),lm.delete(e)},withoutMerging(e,t){const n=vs.isMerging(e);br.set(e,!1),t(),br.set(e,n)},withoutSaving(e,t){const n=vs.isSaving(e);U7.set(e,!1),t(),U7.set(e,n)}},NO={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},HO={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},GO={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Rn=e=>{const t=NO[e],n=HO[e],r=GO[e],i=t&&nn.isKeyHotkey(t),o=n&&nn.isKeyHotkey(n),s=r&&nn.isKeyHotkey(r);return u=>!!(i&&i(u)||s3&&o&&o(u)||!s3&&s&&s(u))},Ti={isBold:Rn("bold"),isCompose:Rn("compose"),isArrow:Rn("arrow"),isMoveBackward:Rn("moveBackward"),isMoveForward:Rn("moveForward"),isMoveUp:Rn("moveUp"),isMoveDown:Rn("moveDown"),isDeleteBackward:Rn("deleteBackward"),isDeleteForward:Rn("deleteForward"),isDeleteLineBackward:Rn("deleteLineBackward"),isDeleteLineForward:Rn("deleteLineForward"),isDeleteWordBackward:Rn("deleteWordBackward"),isDeleteWordForward:Rn("deleteWordForward"),isExtendBackward:Rn("extendBackward"),isExtendForward:Rn("extendForward"),isExtendUp:Rn("extendUp"),isExtendDown:Rn("extendDown"),isExtendArrow:Rn("extendArrow"),isExtendLineBackward:Rn("extendLineBackward"),isExtendLineForward:Rn("extendLineForward"),isItalic:Rn("italic"),isMoveLineBackward:Rn("moveLineBackward"),isMoveLineForward:Rn("moveLineForward"),isMoveWordBackward:Rn("moveWordBackward"),isMoveWordForward:Rn("moveWordForward"),isRedo:Rn("redo"),isSplitBlock:Rn("splitBlock"),isTransposeCharacter:Rn("transposeCharacter"),isUndo:Rn("undo"),isShift:Rn("shift")};function En(e=5){const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",n=t.length;let r="";for(let i=0;i<e;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}function di(e,t,n,r){if(e.children&&(!n||n(e))){let i=[...e.children];i=r?i.reverse():i,i.forEach(o=>{di(o,t,n)})}t(e)}const nh=e=>t=>!!(I.isBoard(t)||e.isRecursion(t)),yo="#6698FF",_4="#6698FF25",v0={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},yn={isRootElement(e){const t=Nf.get(e);return!!(t&&I.isBoard(t))},getElementRef(e){return yg.get(e)},getElementG(e){const t=mg.get(e);if(!t)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return t},hasMounted(e){return!!yn.getContainerG(e,{suppressThrow:!0})},getContainerG(e,t){const n=vg.get(e)||null;if(!n){if(t.suppressThrow)return null;throw new Error("can not resolve container g")}return n}},ev=(e,t,n=!0)=>[...t].sort((r,i)=>{const o=I.findPath(e,r),s=I.findPath(e,i);return n?o[0]-s[0]:s[0]-o[0]}),rP=new Map,cg=e=>rP.get(e)||[],fg=(e,t)=>{rP.set(e,t)};class jO{constructor(t){this.debugKey=t}isDebug(){return Jl(this.debugKey)}clear(){if(!this.isDebug())return;const t=cg(this.debugKey);fg(this.debugKey,[]),t.forEach(n=>n.remove())}drawPolygon(t,n,r){if(!Jl(this.debugKey))return;const i=I.getRoughSVG(t).polygon(n,r||{stroke:"red"});i.classList.add(this.debugKey),I.getElementTopHost(t).append(i);const o=cg(this.debugKey);return o.push(i),fg(this.debugKey,o),i}drawLine(t,n,r){if(!Jl(this.debugKey))return;const i=I.getRoughSVG(t).linearPath(n,r||{stroke:"red"});i.classList.add(this.debugKey),I.getElementTopHost(t).append(i);const o=cg(this.debugKey);return o.push(i),fg(this.debugKey,o),i}drawRectangle(t,n,r){if(!Jl(this.debugKey))return;let i;n instanceof Array?i=M.getRectangleByPoints(n):i=n;const o=I.getRoughSVG(t).rectangle(i.x,i.y,i.width,i.height,r||{stroke:"red"});o.classList.add(this.debugKey),I.getElementTopHost(t).append(o);const s=cg(this.debugKey);return s.push(o),fg(this.debugKey,s),o}drawCircles(t,n,r=0,i=!1,o){if(!Jl(this.debugKey))return;const s=[];return n.forEach((u,c)=>{const h=I.getRoughSVG(t).circle(u[0],u[1],i?r*(c+1):r,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},o||{}));h.classList.add(this.debugKey),I.getElementTopHost(t).append(h);const d=cg(this.debugKey);d.push(h),s.push(h),fg(this.debugKey,d)}),s}}const A0=e=>new jO(e),Jl=e=>localStorage.getItem(e||"debug:plait")==="true";var Ga;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(Ga||(Ga={}));const iP=(e,t,n=()=>!0)=>{const r=t||e.selection,i=[];if(!r)return[];if(v0.isCollapsed(r)){const s=oP(e,r.anchor,n);return s!=null&&s.length?s:[]}return di(e,s=>{if(!I.isBoard(s)&&n(s)){let u=!1;try{u=e.isRectangleHit(s,r)}catch(c){Jl()&&console.error("isRectangleHit",c,"node",s)}u&&i.push(s)}},nh(e),!0),i},oP=(e,t,n=()=>!0,r=!0)=>{let i=[];return di(e,o=>{if(I.isBoard(o)||!n(o)||!yn.hasMounted(o))return;let s=!1;try{s=e.isHit(o,t,r)}catch(u){Jl()&&console.error("isHit",u,"node",o)}if(s){i.push(o);return}},nh(e),!0),i},Qa=(e,t,n=()=>!0,r=!0)=>{const i=oP(e,t,n,r);return e.getOneHitElement(i)},$O=(e,t)=>{const n=Qe(e),r=n.length>0&&on(e,n,!1);return r&&M.isPointInRectangle(r,t)?n:[]},Na=(e,t)=>{const n=ev(e,t);QE.set(e,n)},Qe=e=>QE.get(e)||[],rh=(e,t)=>{let n=[];Array.isArray(t)?n.push(...t):n.push(t);const r=Qe(e);Na(e,[...r,...n])},tv=(e,t,n=!1)=>{const r=Qe(e);if(r.includes(t)){const i=[];e.isRecursion(t)&&n?di(t,s=>{i.push(s)},s=>e.isRecursion(s)):i.push(t);const o=r.filter(s=>!i.includes(s));Na(e,o)}},WO=(e,t,n)=>{const r=Qe(e);r.splice(r.indexOf(t),1,n)},B0=e=>{Na(e,[])},Hf=(e,t)=>!!Qe(e).find(r=>r===t),w6=e=>{const t=e.getPluginOptions(Ga.withSelection);e.setPluginOptions(Ga.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Ga.withSelection,{...t})},0)},zO=(e,t)=>$O(e,t).length>0,sP=(e,t)=>!!Qa(e,t)||zO(e,t);function R0(e,t,n,r,i,o,s=!1,u){let c=u||0;const h=[t+c,n],d=[r-c,n],g=[r,n+c],v=[r,i-c],y=[r-c,i],x=[t+c,i],E=[t,i-c],T=[t,n+c],D=e.path(`M${d[0]} ${d[1]} A ${c} ${c}, 0, 0, 1, ${g[0]} ${g[1]} L ${v[0]} ${v[1]} A ${c} ${c}, 0, 0, 1, ${y[0]} ${y[1]} L ${x[0]} ${x[1]} A ${c} ${c}, 0, 0, 1, ${E[0]} ${E[1]} L ${T[0]} ${T[1]} A ${c} ${c}, 0, 0, 1, ${h[0]} ${h[1]} Z`,o);return Wt(D,"round"),D}const ua=(e,t,n)=>{const i=I.getRoughSVG(e).rectangle(t.x,t.y,t.width,t.height,n);return Wt(i,"round"),i};function M0(e,t,n=40){const r=Math.abs(e[0]-t[0]),i=Math.abs(e[1]-t[1]);let o=Math.hypot(r,i);const s=o/2,u=s/o*r,c=s/o*i,h=[t[0]>e[0]?t[0]-u:t[0]+u,t[1]>e[1]?t[1]-c:t[1]+c],d=m0(h[0],h[1],t[0],t[1],n*Math.PI/180);return{pointLeft:m0(h[0],h[1],t[0],t[1],-n*Math.PI/180),pointRight:d}}function ih(e,t,n,r){return e.circle(t[0],t[1],n,r)}function um(e,t,n,r){return e.linearPath([t,n],r)}function Ds(e,t,n){const r=Lt(),i=F4();let o="";return e.forEach((s,u)=>{u===0?o+=`M ${s[0]} ${s[1]} `:o+=`L ${s[0]} ${s[1]} `}),n&&(o+="Z"),i.setAttribute("d",o),i.setAttribute("stroke",`${t==null?void 0:t.stroke}`),i.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),i.setAttribute("fill",`${(t==null?void 0:t.fill)||"none"}`),t!=null&&t.strokeLineDash&&i.setAttribute("stroke-dasharray",`${t.strokeLineDash}`),r.appendChild(i),r}function VO(e,t){const n=Lt(),r=F4();let i="";for(let o=0;o<e.length-3;o+=3)o===0?i+=`M ${e[0][0]} ${e[0][1]} `:i+=`C ${e[o+1][0]} ${e[o+1][1]}, ${e[o+2][0]} ${e[o+2][1]}, ${e[o+3][0]} ${e[o+3][1]}`;return r.setAttribute("d",i),r.setAttribute("stroke",`${t==null?void 0:t.stroke}`),r.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),r.setAttribute("fill","none"),n.appendChild(r),n}function N4(e,t){const n={type:"set_viewport",properties:e.viewport,newProperties:t};e.apply(n)}const UO={setViewport:N4};function XO(e,t){const n={type:"set_theme",properties:e.theme,newProperties:t};e.apply(n)}function nv(e,t,n){n=n??e.viewport.zoom,N4(e,{...e.viewport,zoom:n,origination:t}),mP(e)}function KO(e,t,n){t=rI(t);const i=I.getBoardContainer(e).getBoundingClientRect(),o=I.getBoardContainer(e).getBoundingClientRect();let s=[o.width/2,o.height/2];n&&yp(n[0],n[1],i)===0&&(s=[n[0]-i.x,n[1]-i.y]);const u=e.viewport.zoom,c=b0(e),h=c[0]+s[0]/u,d=c[1]+s[1]/u,g=[h-s[0]/t,d-s[1]/t];nv(e,g,t)}function YO(e){let t=I4(e);const n=I.getBoardContainer(e).getBoundingClientRect(),r=on(e,e.children,!0),i=e.viewport.zoom,o=16,s=n.width-2*o,u=n.height-2*o;let c=i;s<r.width||u<r.height?c=Math.min(s/r.width,u/r.height):c=1;const h=hP(e),d=[h[0]-n.width/2/c+t/2/i,h[1]-n.height/2/c+t/2/i];nv(e,d,c)}function qO(e,t){let n=I4(e);const r=I.getBoardContainer(e),i=r.getBoundingClientRect();let o=0;t.maxWidth?o=t.maxWidth:o=i.width;const s=on(e,e.children,!0),u=o-2*t.autoFitPadding;let c=0;u<s.width?c=Math.min(u/s.width):c=1;let h=s.height*c+2*t.autoFitPadding;if(h>t.limitHeight){const y=r.closest(`.${t.containerClass}`);y.style.height=`${h}px`,G4(e)}else h=t.limitHeight;const d=s.x+s.width/2,g=s.y+s.height/2,v=[d-o/2/c+n/2/c,g-h/2/c+n/2/c];nv(e,v,c)}function ZO(e,t){t=t??e.theme.themeColorMode,XO(e,{themeColorMode:t}),di(e,n=>{e.applyTheme(n)})}const QO=(e,t)=>{e.pointer!==t&&(e.pointer=t)};function JO(e,t){var r;if((r=Qe(e))==null?void 0:r[0]){const i=I.getBoardContainer(e).getBoundingClientRect(),o=I4(e),s=hP(e),u=t[0]-s[0],c=t[1]-s[1],h=e.viewport.zoom,d=[u-i.width/2/h+o/2/h,c-i.height/2/h+o/2/h];N4(e,{...e.viewport,origination:d}),mP(e)}}const vn={updatePointerType:QO,updateViewport:nv,fitViewport:YO,updateZoom:KO,updateThemeColor:ZO,fitViewportWidth:qO,moveToCenter:JO},H4=e=>I.getHost(e).viewBox.baseVal;function Ot(e,t,n){const i=I.getHost(e).getBoundingClientRect();return[t-i.x,n-i.y]}function Di(e,t){const n=[t.x,t.y],r=[t.x+t.width,t.y+t.height],i=Gg(e,n),o=Gg(e,r);return M.getRectangleByPoints([i,o])}function Gg(e,t){const n=C6(e,a3(e,t));return Xf(e,n[0],n[1])}function Xf(e,t,n){const i=I.getBoardContainer(e).getBoundingClientRect();return[t-i.x,n-i.y]}function eI(e,t){const r=I.getBoardContainer(e).getBoundingClientRect();return[r.x+t[0],r.y+t[1]]}function At(e,t){const n=H4(e),{zoom:r}=e.viewport,i=t[0]/r+n.x,o=t[1]/r+n.y;return[i,o]}function C6(e,t){const r=I.getHost(e).getBoundingClientRect();return[t[0]+r.x,t[1]+r.y]}function a3(e,t){const{zoom:n}=e.viewport,r=H4(e),i=(t[0]-r.x)*n,o=(t[1]-r.y)*n;return[i,o]}const aP=.75,uP=new WeakMap,lP=new WeakMap;function tI(e){const{hideScrollbar:t}=e.options,n=t?aO:0,r=I.getBoardContainer(e).getBoundingClientRect();return{width:r.width+n,height:r.height+n}}function nI(e,t){const n=on(e,e.children,!0);let r,i,o,s;return r=n.x,i=n.x+n.width,o=n.y,s=n.y+n.height,{left:r,right:i,top:o,bottom:s}}function rI(e,t=XE,n=KE){return e<t?t:e>n?n:e}function cP(e,t){const n=I.getBoardContainer(e).getBoundingClientRect(),r=nI(e),i=n.width,o=n.height;let s=r.right-r.left,u=r.bottom-r.top;const c=i/2,h=o/2;if(s<c/t){const d=r.left+s/2;r.left=d-c/2/t,r.right=d+c/2/t,s=c/t}if(u<h/t){const d=r.top+u/2;r.top=d-h/2/t,r.bottom=d+h/2/t,u=h/t}return{elementHostBBox:r,containerWidth:i,containerHeight:o,width:s,height:u}}function x6(e,t,n,r,i,o,s=aP){const u=t*s/o,c=n*s/o;return[e.left-u,e.top-c,r+u*2,i+c*2]}function fP(e,t){const{elementHostBBox:n,containerWidth:r,containerHeight:i,width:o,height:s}=cP(e,t);return x6(n,r,i,o,s,t)}function hP(e){const t=on(e,e.children,!0);return[t.x+t.width/2,t.y+t.height/2]}function dP(e,t){const n=e.viewport.zoom,r=I.getHost(e);r.style.display="block",r.style.width=`${t[2]*n}px`,r.style.height=`${t[3]*n}px`,t&&t[2]>0&&t[3]>0&&r.setAttribute("viewBox",t.join(" "))}function u3(e){const t=b0(e);if(!t)return;const[n,r]=a3(e,t);gP(e,n,r)}function gP(e,t,n,r=!0){const i=I.getViewportContainer(e),o=i.scrollLeft,s=i.scrollTop;if(!y6(i.scrollLeft,t,1)||!y6(i.scrollTop,n,1)){i.scrollLeft=t,i.scrollTop=n;const u=i.offsetWidth,c=i.offsetHeight;if(o===i.scrollLeft&&s===i.scrollTop)pP(e,o,s);else{const h=t>0&&n>0&&t<i.scrollWidth-u&&n<i.scrollHeight-c;r&&h&&yP(e,!0)}}}function pP(e,t,n){const r=At(e,[t,n]);mt.isEquals(r,b0(e))||(vn.updateViewport(e,r),vP(e,!0))}function G4(e){const{width:t,height:n}=tI(e),r=I.getViewportContainer(e);r.style.width=`${t}px`,r.style.height=`${n}px`}function j4(e){const t=e.viewport.zoom,n=fP(e,t);dP(e,n)}function iI(e){const t=e.viewport.zoom,{elementHostBBox:n,containerWidth:r,containerHeight:i,width:o,height:s}=cP(e,t),u=x6(n,r,i,o,s,t,.5),c=H4(e);if(u[0]<c.x||u[1]<c.y||u[0]+u[2]>c.x+c.width||u[1]+u[3]>c.y+c.height){const h=x6(n,r,i,o,s,t,aP);dP(e,h)}}function oI(e){var t;if(!((t=e.viewport)!=null&&t.origination)){const n=e.viewport.zoom,r=I.getBoardContainer(e).getBoundingClientRect(),i=fP(e,n),o=i[0]+i[2]/2,s=i[1]+i[3]/2,u=[o-r.width/2/n,s-r.height/2/n];sI(e,u),u3(e);return}u3(e)}const sI=(e,t)=>{B4.set(e,t)},mP=e=>{B4.delete(e)},b0=e=>{const t=B4.get(e);return t||e.viewport.origination},aI=e=>!!uP.get(e),vP=(e,t)=>{uP.set(e,t)},uI=e=>!!lP.get(e),yP=(e,t)=>{lP.set(e,t)};function lI(e,t,n){const r={type:"insert_node",node:t,path:n};e.apply(r)}function cI(e,t,n){const r={},i={},o=Xt.get(e,n);for(const u in t)o[u]!==t[u]&&(o.hasOwnProperty(u)&&(r[u]=o[u]),t[u]!=null&&(i[u]=t[u]));const s={type:"set_node",properties:r,newProperties:i,path:n};e.apply(s)}function wP(e,t){const n=Xt.get(e,t),r={type:"remove_node",path:t,node:n};e.apply(r)}function fI(e,t,n){const r={type:"move_node",path:t,newPath:n};e.apply(r)}const Gf={insertNode:lI,setNode:cI,removeNode:wP,moveNode:fI},Lm=new WeakMap,hI=(e,t)=>CP(e)[t]||null,CP=e=>Lm.get(e)||{},Ua=(e,t,n)=>{const r=()=>{let o=requestAnimationFrame(()=>{const u=Lm.get(e)||{};u[t]=null,Lm.set(e,u),I.isAlive(e)&&n()});const s=CP(e);s[t]=o,Lm.set(e,s)};let i=hI(e,t);i!==null&&cancelAnimationFrame(i),r()},rv=(e,t)=>(ev(e,t),t.map(n=>e.children.map(r=>r.id).indexOf(n.id)).filter(n=>n>=0)),dI=(e,t)=>{const n=rv(e,t);return n[n.length-1]},Cp=(e,t)=>{t.map(n=>{const r=I.findPath(e,n.element),i=e.pathRef(r);return()=>{i.current&&Gf.moveNode(e,i.current,n.newPath),i.unref()}}).forEach(n=>{n()})},xP=new WeakMap,cc=e=>!!xP.get(e),ol=(e,t)=>{xP.set(e,t)},gI=e=>Z3.get(e)||[],fc=e=>(Z3.get(e)||[]).length>0,pI=e=>{Z3.delete(e),ol(e,!1)},E9=(e,t)=>{Z3.set(e,t),ol(e,!0)},E6="foreignObject[class^='foreign-object']";function P9(e){return e.nodeType===Node.ELEMENT_NODE}function mI(e){return new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>t(r),r.onerror=()=>n(new Error("Failed to load image")),r.src=e})}function vI(e,t,n="transparent"){const r=document.createElement("canvas"),i=r.getContext("2d");return r.width=e,r.height=t,r.style.width=`${e}px`,r.style.height=`${t}px`,i.strokeStyle="#ffffff",i.fillStyle=n,i.fillRect(0,0,e,t),{canvas:r,ctx:i}}async function yI(e){const n=await(await fetch(e)).blob();return new Promise((r,i)=>{const o=new FileReader;o.onloadend=()=>r(o.result),o.onerror=i,o.readAsDataURL(n)})}function wI(e,t){const n=t==null?void 0:t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Array.from(r).forEach(i=>{let o=r.getPropertyValue(i);n.setProperty(i,o,r.getPropertyPriority(i))})}function CI(e,t,n){if(n){const r=n+`, ${E6}`,i=Array.from(e.querySelectorAll(r)),o=Array.from(t.querySelectorAll(r));i.forEach((s,u)=>{const c=Array.from(s.querySelectorAll("*")).filter(P9),h=Array.from(o[u].querySelectorAll("*")).filter(P9);i.push(...c),o.push(...h)}),i.map((s,u)=>{wI(s,o[u])})}}async function xI(e,t){const n=Array.from(e.querySelectorAll(`${E6}`)),r=Array.from(t.querySelectorAll(`${E6}`));await Promise.all(n.map((i,o)=>new Promise(s=>{const c=r[o].querySelector("img"),h=c==null?void 0:c.getAttribute("src");if(!h)return s(!0);yI(h).then(d=>{c==null||c.setAttribute("src",d),s(!0)})})))}async function EI(e,t,n,r){const{width:i,height:o,x:s,y:u}=n,{padding:c=4,inlineStyleClassNames:h}=r,d=I.getHost(e),g=t.map(E=>yn.getElementG(E)),v=d.cloneNode(),y=I.getElementHost(e).cloneNode();v.style.width=`${i}px`,v.style.height=`${o}px`,v.style.backgroundColor="",v.setAttribute("width",`${i}`),v.setAttribute("height",`${o}`),v.setAttribute("viewBox",[s-c,u-c,i+2*c,o+2*c].join(","));const x=new Array(g.length);return await Promise.all(g.map(async(E,T)=>{const D=E.cloneNode(!0);CI(E,D,h),await xI(E,D),x[T]=D})),y.append(...x),v.appendChild(y),v}async function PI(e,t){if(!e)return;const n=t.elements||k0(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=on(e,n,!1),{ratio:i=2,fillStyle:o="transparent"}=t,{width:s,height:u}=r,c=s*i,h=u*i,d=await EI(e,n,r,t),{canvas:g,ctx:v}=vI(c,h,o),y=new XMLSerializer().serializeToString(d),x=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(y)}`;try{const E=await mI(x);return v.drawImage(E,0,0,c,h),g.toDataURL("image/png")}catch(E){console.error("Error converting SVG to image:",E);return}}var Xu;(function(e){e.medias="medias",e.elements="elements"})(Xu||(Xu={}));var aa;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(aa||(aa={}));const $4=(e,t)=>`<plait>${AI(JSON.stringify({type:e,data:t}))}</plait>`,W4=e=>{var n;let t=(n=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:n[1];if(t){t=BI(t);try{const r=JSON.parse(t);if(r){if(r.type===Xu.elements)return{elements:r.data};if(r.type===Xu.medias)return{medias:r.data}}}catch(r){return console.error(r),null}}return null},S9=e=>{const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""},EP=()=>"clipboard"in navigator&&"write"in navigator.clipboard,SI=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,PP=()=>"clipboard"in navigator&&"read"in navigator.clipboard,TI=(e,t,n)=>({type:e,elements:t,text:n}),DI=(e,t)=>{const{type:n,elements:r,text:i}=e;return n===t.type?{type:n,elements:r.concat(t.elements),text:i+" "+t.text}:e},iv=(e,t)=>e?DI(e,t):t,AI=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),BI=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),RI=(e,t,n)=>{e==null||e.setData("text/html",$4(t,n))},MI=(e,t)=>{e==null||e.setData("text/plain",t)},bI=e=>{const t=e==null?void 0:e.getData("text/html");if(t){const n=W4(t);if(n)return n}return{}},kI=e=>{if(!e)return{};const t=e==null?void 0:e.getData("text/plain");if(t){const n=W4(t);if(n)return n}return{text:t}},OI=async(e,t,n="")=>{let r=n;EP()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([$4(e,t)],{type:"text/html"}),"text/plain":new Blob([r??JSON.stringify(t)],{type:"text/plain"})})])},II=async()=>{if(!PP())return{};const e=await navigator.clipboard.read();let t={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const n of e){if(FI(n)){const r=n.types.filter(u=>u.match(/^image\//)),o=(await Promise.all(r.map(u=>n.getType(u)))).filter(Boolean).map(u=>URL.createObjectURL(u));return{files:await Promise.all(o.map(async u=>{const c=await(await fetch(u)).blob();return new File([c],"plait-file",{type:c.type})}))}}if(n.types.includes("text/html")){const r=await T9(await n.getType("text/html")),i=W4(r);if(i)return i;r&&r.trim()&&(t={text:S9(r)})}if(n.types.includes("text/plain")){const r=await T9(await n.getType("text/plain"));t={text:S9(r)}}}return t},FI=e=>e.types.find(t=>t.match(/^image\//)),T9=e=>new Promise((t,n)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const i=r.result;t(i)}),r.addEventListener("error",()=>{n(r.error)}),r.readAsText(e)}),LI=async e=>{let t={};return e?e.files.length?{files:Array.from(e.files)}:(t=bI(e),Object.keys(t).length===0&&(t=kI(e)),t):PP()?await II():t},_I=async(e,t)=>{if(!t)return;const{type:n,elements:r,text:i}=t;if(EP())return await OI(n,r,i);if(e){RI(e,n,r),MI(e,i);return}if(SI())return await navigator.clipboard.writeText($4(n,r))};function gi(e){return!!R4.get(e)}function NI(e){I.getBoardContainer(e).classList.add("selection-moving"),R4.set(e,!0),ol(e,!0)}function HI(e){I.getBoardContainer(e).classList.remove("selection-moving"),R4.delete(e),ol(e,!1)}function D9(e){const t=_m(e);return e.pointer!==Zt.hand&&!t.isDisabledSelection&&!I.isReadonly(e)}function A9(e){return!!e.operations.find(t=>ql.isSetSelectionOperation(t))}function GI(e){const t=q3.get(e);if(t)return t.elements}function jI(e){return q3.get(e)}function $I(e){q3.delete(e)}function WI(e){const t=Qe(e),n=on(e,t,!1),r=Di(e,n);if(r.width>0&&r.height>0&&t.length>1){const i=ua(e,M.inflate(r,dr),{stroke:yo,strokeWidth:dr,fillStyle:"solid"});i.classList.add(vp,rO);const o=po(t);return o&&Ps(i,M.getCenterPoint(r),o),i}return null}function zI(e,t,n){if(!e.selection)return;const r=Qe(e);if(!v0.isCollapsed(e.selection)){let i=[...r];t.forEach(o=>{o.groupId?i.push(...V4(e,o)):i.push(o)}),Na(e,M4(i));return}if(v0.isCollapsed(e.selection)){const i=t[0],o=wc(e,i,!0);if(o.length>0){const s=Bs(e,o[o.length-1],!0)||[],u=r.some(c=>s.map(h=>h.id).includes(c.id));n?VI(e,t,u,s):UI(e,t,u,o)}}}function VI(e,t,n,r){const i=Qe(e);let o=[...i];const s=t[0];let u=[];if(!n)u=r;else{const c=i.some(d=>d.id===s.id),h=r.filter(d=>i.includes(d));c?u=h.filter(d=>d.id!==s.id):u.push(...h,...t)}r.forEach(c=>{o.includes(c)&&o.splice(o.indexOf(c),1)}),u.length&&o.push(...u),Na(e,M4(o))}function UI(e,t,n,r){let i=[...t];const o=SP(e,r);if(o.length>0)if(o.length>1)i=l3(e,o[o.length-2],!0);else{const s=e.getOneHitElement(t);s&&(i=[s])}else{const s=l3(e,r[r.length-1],!0);if(!n)i=s;else{const u=e.getOneHitElement(t);u&&(i=[u])}}Na(e,M4(i))}const _m=e=>e.getPluginOptions(Ga.withSelection),P6=(e,t)=>{e.setPluginOptions(Ga.withSelection,t)},Bs=(e,t,n,r)=>{let i=[];const o=e.children.filter(s=>s.groupId===t.id);return n?o.forEach(s=>{wo.isGroup(s)?(r&&i.push(s),i.push(...Bs(e,s,n,r))):i.push(s)}):i=r?o:o.filter(s=>!wo.isGroup(s)),i},l3=(e,t,n,r)=>{const i=Bs(e,t,n,r),o=[];return i.forEach(s=>{di(s,u=>{o.push(u)},()=>!0)}),o},z4=(e,t,n)=>{const r=l3(e,t,n);return on(e,r,!1)},wc=(e,t,n,r)=>{const i=(r||e.children).find(o=>o.id===(t==null?void 0:t.groupId));if(!i)return[];{const o=[i],s=wc(e,i,n,r);return s.length&&o.push(...s),o}},S6=(e,t)=>{const n=wc(e,t,!0);return n.length?n[n.length-1]:null},V4=(e,t)=>{const n=S6(e,t);return n?l3(e,n,!0):[t]},T6=(e,t,n)=>{const r=n!=null&&n.length?n:Qe(e);return wo.isGroup(t)?c3(e,t,n):r.map(i=>i.id).includes(t.id)},c3=(e,t,n)=>{const r=n!=null&&n.length?n:Qe(e);return Bs(e,t,!0).every(o=>r.map(s=>s.id).includes(o.id))},SP=(e,t,n)=>{const r=[];return t.forEach(i=>{T6(e,i,n)&&r.push(i)}),r},XI=(e,t,n)=>{const r=Cc(e,t,n),i=[];return r.forEach(o=>{i.push(o);const s=Bs(e,o,!0,!0);i.push(...s.filter(u=>wo.isGroup(u)))}),i},TP=(e,t,n,r)=>{const i=wc(e,t,!0,r),o=SP(e,i,n);return o.length?o[o.length-1]:null},Cc=(e,t,n)=>{let r=[];return(t!=null&&t.length?t:Qe(e)).forEach(o=>{if(o.groupId){const s=TP(e,o,t,n);s&&!r.includes(s)&&r.push(s)}}),r},U4=(e,t)=>{let n=[];return(t!=null&&t.length?t:Qe(e)).filter(i=>!wo.isGroup(i)).forEach(i=>{i.groupId&&TP(e,i,t)||n.push(i)}),n},X4=(e,t)=>U4(e,t).filter(r=>e.canAddToGroup(r)),KI=(e,t)=>[...Cc(e,t),...U4(e,t)],YI=(e,t)=>{const n=Qe(e).map(o=>o.id);let r=null;const i=gi(e);return t.forEach(o=>{const s=!n.includes(o.id)&&!i||i;if(o.groupId&&s){r||(r=Lt());const u=V4(e,o),c=on(e,u,!1),h=ua(e,c,{stroke:yo,strokeWidth:dr,strokeLineDash:[5]}),d=po(u);d&&Ps(h,M.getCenterPoint(c),d),r.append(h)}}),r},qI=e=>({id:En(),type:"group"}),ZI=e=>e.every(t=>!t.groupId),DP=e=>e.every(t=>t.groupId&&t.groupId===e[0].groupId),QI=(e,t)=>{const r=KI(e,t).filter(i=>e.canAddToGroup(i));return r.length>1?ZI(r)||DP(r):!1},JI=(e,t,n)=>{const r=Cc(e,t,n);return Qe(e).length>0&&r.length>0},AP=(e,t)=>{const n=wc(e,t,!0);let r=null;if(n!=null&&n.length){for(let i=0;i<(n==null?void 0:n.length);i++)if(!c3(e,n[i])){r=n[i];break}}return r},eF=(e,t,n)=>{const r=[...t];ev(e,r),r.pop(),Cp(e,r.map(i=>({element:i,newPath:n})))},K4=e=>{const t=e.getDeletedFragment([]);e.deleteFragment(t)},B9=(e,t,n)=>{const r=Qe(e),i=on(e,r,!1),o=e.buildFragment(null,i,t);o&&_I(n,o)},Y4=(e,t,n)=>{const r=t!=null&&t.length?t:Qe(e),i=on(e,r,!1),o=e.buildFragment(null,i,aa.duplicate,r),s=o&&JSON.stringify(o),u=s&&JSON.parse(s);u&&e.insertFragment({...u,text:void 0},n||[i.x+i.width/2,i.y+i.height/2],aa.duplicate)},zu=2,tF=24;function BP(e,t){return k0(e,{match:r=>e.isAlign(r)&&!t.some(i=>i.id===r.id),recursion:()=>!0,isReverse:!1}).map(r=>{const i=e.getRectangle(r);return xp(i,r.angle||0)})}function nF(e,t){return t?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function Sg(e,t,n){let r=zu;return e.forEach(i=>{const o=rF(t,i,n);Math.abs(o)<Math.abs(r)&&(r=o)}),r}const rF=(e,t,n)=>{const i=Kf(t,n).map(u=>u-e),o=i.map(u=>Math.abs(u)),s=o.indexOf(Math.min(...o));return i[s]},Kf=(e,t)=>{const n=t?"x":"y",r=t?"width":"height";return[e[n],e[n]+e[r]/2,e[n]+e[r]]};function Hd(e,t){let n=1/0,r=e[0];return e.forEach(i=>{const o=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));o<n&&(n=o,r=i)}),r}const Gd=(e,t,n)=>Kf(t,n).includes(e);function RP(e,t,n,r=!0,i=!0,o=!1){let s=[];const u=Kf(t,!0),c=Kf(t,!1),h=[{axis:u[0],isHorizontal:!0,pointRectangles:[]},{axis:u[1],isHorizontal:!0,pointRectangles:[]},{axis:u[2],isHorizontal:!0,pointRectangles:[]},{axis:c[0],isHorizontal:!1,pointRectangles:[]},{axis:c[1],isHorizontal:!1,pointRectangles:[]},{axis:c[2],isHorizontal:!1,pointRectangles:[]}];for(let g=0;g<n.length;g++){const v=n[g];Gd(h[0].axis,v,h[0].isHorizontal)&&h[0].pointRectangles.push(v),Gd(h[1].axis,v,h[1].isHorizontal)&&h[1].pointRectangles.push(v),Gd(h[2].axis,v,h[2].isHorizontal)&&h[2].pointRectangles.push(v),Gd(h[3].axis,v,h[3].isHorizontal)&&h[3].pointRectangles.push(v),Gd(h[4].axis,v,h[4].isHorizontal)&&h[4].pointRectangles.push(v),Gd(h[5].axis,v,h[5].isHorizontal)&&h[5].pointRectangles.push(v)}const d=(g,v,y)=>{const x=M.inflate(M.getBoundingRectangle([t,v]),tF);if(y){const E=[g,x.y],T=[g,x.y+x.height];s.push([E,T])}else{const E=[x.x,g],T=[x.x+x.width,g];s.push([E,T])}};if(r&&h[0].pointRectangles.length){const g=h[0].pointRectangles.length===1?h[0].pointRectangles[0]:Hd(h[0].pointRectangles,t);d(h[0].axis,g,h[0].isHorizontal)}if(r&&o&&h[1].pointRectangles.length){const g=h[1].pointRectangles.length===1?h[1].pointRectangles[0]:Hd(h[1].pointRectangles,t);d(h[1].axis,g,h[1].isHorizontal)}if(r&&h[2].pointRectangles.length){const g=h[2].pointRectangles.length===1?h[2].pointRectangles[0]:Hd(h[2].pointRectangles,t);d(h[2].axis,g,h[2].isHorizontal)}if(i&&h[3].pointRectangles.length){const g=h[3].pointRectangles.length===1?h[3].pointRectangles[0]:Hd(h[3].pointRectangles,t);d(h[3].axis,g,h[3].isHorizontal)}if(i&&o&&h[4].pointRectangles.length){const g=h[4].pointRectangles.length===1?h[4].pointRectangles[0]:Hd(h[4].pointRectangles,t);d(h[4].axis,g,h[4].isHorizontal)}if(i&&h[5].pointRectangles.length){const g=h[5].pointRectangles.length===1?h[5].pointRectangles[0]:Hd(h[5].pointRectangles,t);d(h[5].axis,g,h[5].isHorizontal)}return iF(e,s)}function iF(e,t){const n=Lt();return t.forEach(r=>{if(!r.length)return;const i=I.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:yo,strokeWidth:1,strokeLineDash:[4,4]});n.appendChild(i)}),n}function MP(e,t){const n=Lt();return t.forEach(r=>{if(!r.length)return;let i=r[0][1]===r[1][1];const o=I.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:yo,strokeWidth:1});n.appendChild(o),r.forEach(s=>{const u=nF(s,i),c=I.getRoughSVG(e).line(u[0][0],u[0][1],u[1][0],u[1][1],{stroke:yo,strokeWidth:1});n.appendChild(c)})}),n}const bP=(e,t)=>{const n=rv(e,Qe(e));let r=OP(e,n);t==="up"&&(r=r.reverse());let i=[];return r.forEach((o,s)=>{const u=o[0],c=o[o.length-1],h=t==="down"?u:c,d=oF(e,h,t);d===-1||h===d||(t==="down"&&(o=o.reverse()),i.push(...o.map(g=>({element:e.children[g],newPath:[d]}))))}),i},kP=(e,t)=>{const n=rv(e,Qe(e));let r=OP(e,n),i=[];return t==="down"&&(r=r.reverse()),r.forEach(o=>{const s=o[0],u=o[o.length-1],c=t==="down"?s:u,h=e.children[c],d=AP(e,h);let g=t==="down"?0:e.children.length-1;if(d){const v=ev(e,Bs(e,d,!0,!0));g=t==="down"?e.children.indexOf(v[0]):e.children.indexOf(v[v.length-1])}t==="down"&&(o=o.reverse()),i.push(...o.map(v=>({element:e.children[v],newPath:[g]})))}),i},OP=(e,t)=>{let n=0;return t.reduce((r,i,o)=>{if(o>0){const s=e.children[i],u=e.children[t[o-1]],c=i-1===t[o-1]?!0:e.children.every((d,g)=>g>t[o-1]&&g<=i-1?wo.isGroup(d):!0);let h=!1;if(u!=null&&u.groupId||s!=null&&s.groupId&&(u==null?void 0:u.groupId)!==(s==null?void 0:s.groupId)){let d=!1,g=!1;if(u.groupId){const v=S6(e,u);d=!c3(e,v)}if(s.groupId){const v=S6(e,s);g=!c3(e,v)}h=d||g}(!c||h)&&(n=++n)}return(r[n]||(r[n]=[])).push(i),r},[])},oF=(e,t,n)=>{if(t===0&&n==="down"||t===e.children.length-1&&n==="up")return-1;const r=g=>!(g.isDeleted||wo.isGroup(g)),i=n==="down"?fO(e.children,g=>r(g),Math.max(0,t-1)):hO(e.children,g=>r(g),t+1),o=e.children[i];if(!o)return-1;const s=[...e.children],u=s[t],c=AP(e,u),h=wc(e,o,!0)||[];if(c&&(u==null?void 0:u.groupId)!==(o==null?void 0:o.groupId)&&!h.find(g=>g.id===c.id))return-1;if(!o.groupId)return i;let d;if(c?d=h[h.indexOf(c)-1]:d=h[h.length-1],d){let g=Bs(e,d,!0,!1);if(g.length)return g.sort((v,y)=>{const x=e.children.findIndex(T=>T.id===v.id),E=e.children.findIndex(T=>T.id===y.id);return x-E}),n==="down"?s.indexOf(g[0]):s.indexOf(g[g.length-1])}return i},IP=e=>D6(e)||sF(e),D6=e=>e.pointerType==="pen",sF=e=>e.pointerType==="touch",aF=(e,t)=>{const n=Cc(e,t),r=X4(e),i=[...n,...r],o=qI();if(QI(e)){i.forEach(d=>{const g=I.findPath(e,d);Gf.setNode(e,{groupId:o.id},g)});const s=Qe(e),u=dI(e,s),c=rv(e,i);if(dO(c)||eF(e,s,[u-1]),DP(i)){const d=r[0].groupId;Gf.insertNode(e,{...o,groupId:d},[e.children.length])}else Gf.insertNode(e,o,[e.children.length])}},uF=(e,t)=>{const n=Cc(e,t);JI(e)&&(n.forEach(r=>{k0(e,{match:o=>o.groupId===r.id,recursion:()=>!1}).forEach(o=>{const s=I.findPath(e,o);Gf.setNode(e,{groupId:r.groupId||void 0},s)})}),n.map(r=>{const i=I.findPath(e,r),o=e.pathRef(i);return()=>{o.current&&Gf.removeNode(e,o.current),o.unref()}}).forEach(r=>{r()}))},lF={addGroup:aF,removeGroup:uF};function FP(e,t){const n={type:"set_selection",properties:e.selection,newProperties:t};e.apply(n)}const cF={setSelection:FP,addSelectionWithTemporaryElements:LP};function LP(e,t){const n=setTimeout(()=>{FP(e,{anchor:[0,0],focus:[0,0]})},0);let r=jI(e);if(r){clearTimeout(r.timeoutId);const i=r.elements;r.elements.push(...t.filter(o=>!i.includes(o))),r.timeoutId=n}else q3.set(e,{timeoutId:n,elements:t})}const fF=e=>{const t=kP(e,"up");Cp(e,t)},hF=e=>{const t=kP(e,"down");Cp(e,t)},dF=e=>{const t=bP(e,"up");Cp(e,t)},gF=e=>{const t=bP(e,"down");Cp(e,t)},pF={moveUp:dF,moveDown:gF,moveToTop:fF,moveToBottom:hF},mF=(e,t)=>{t.map(n=>{const r=I.findPath(e,n),i=e.pathRef(r);return()=>{i.current&&wP(e,i.current),i.unref(),tv(e,n,!0)}}).forEach(n=>{n()})},_P={removeElements:mF},Xe={...mO,...UO,...cF,...Gf,...lF,...pF},kr=(e,t,n)=>(n||(n=0),Array.isArray(e)&&typeof e[0]=="number"?m0(e[0],e[1],t[0],t[1],n):e.map(r=>m0(r[0],r[1],t[0],t[1],n||0))),po=e=>{var n;let t=((n=e[0])==null?void 0:n.angle)||0;return e.forEach(r=>{r.angle!==t&&!y6((r.angle||0)%(Math.PI/2)-t%(Math.PI/2),0)&&(t=0)}),t},vF=e=>{if(!e.length)return!1;const t=e[0].angle;return t===void 0?!1:!e.some(n=>n.angle!==t)},yF=(e,t)=>{let n=[];for(let u=0;u<e.length;u++){const c=e[u],h=kr(c,[0,0],-t);n.push(M.getRectangleByPoints(h))}const r=M.getBoundingRectangle(n),i=M.getCornerPoints(r),o=kr(i,[0,0],t),s=M.getCenterPoint(M.getRectangleByPoints(o));return M.getRectangleByPoints(kr(o,s,-t))},wF=(e,t,n)=>{const r=M.getCenterPoint(e),[i]=kr([r],t,n),o=i[0]-r[0],s=i[1]-r[1];return{offsetX:o,offsetY:s}},A6=(e,t,n)=>{const{offsetX:r,offsetY:i}=wF(M.getRectangleByPoints(e),t,n);return e.map(o=>[o[0]+r,o[1]+i])},Xa=e=>NP(e.angle),NP=e=>e&&e!==0,Ka=(e,t)=>{if(Xa(t)){let n=M.getRectangleByPoints(t.points);const r=M.getCenterPoint(n);return kr(e,r,t.angle)}else return null},CF=(e,t)=>{if(NP(t)){let n=M.getRectangleByPoints(e);const r=M.getCenterPoint(n);return kr(e,r,t)}else return null},hc=(e,t,n,r=!1)=>{if(Xa(n)){let i=M.getRectangleByPoints(n.points);const o=r?Di(e,i):i,s=M.getCenterPoint(o);return kr(t,s,n.angle?-n.angle:0)}else return null},xp=(e,t)=>{if(t){const n=M.getCornerPoints(e),r=M.getCenterPoint(e);return M.getRectangleByPoints(kr(n,r,t))}return e},xF=e=>{const t=Math.abs(e)%Math.PI;return t>=1/4*Math.PI&&t<=3/4*Math.PI};function B6(e){return e/180*Math.PI}function EF(e,t,n){const r=on(e,t,!1),i=M.getCenterPoint(r);t.forEach(o=>{const s=o.angle,u=A6(o.points,i,jg(n)),c=I.findPath(e,o);Xe.setNode(e,{points:u,angle:jg((s||0)+n)},c)})}const jg=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,PF=(e,t,n)=>{const r=5*Math.PI/2+Math.atan2(e[1]-n[1],e[0]-n[0]),i=5*Math.PI/2+Math.atan2(t[1]-n[1],t[0]-n[0]);return jg(i-r)},SF=e=>e==null?void 0:e.angle,Ps=(e,t,n)=>{if(n===0){e.removeAttribute("transform");return}var r=t[0],i=t[1];let o=Math.cos(n),s=Math.sin(n),c="matrix("+[o,s,-s,o,r*(1-o)+i*s,i*(1-o)-r*s].join(",")+")";e.setAttribute("transform",`${c}`)};function on(e,t,n){const r=[],i=o=>{const s=e.getRectangle(o);if(s){const u=M.getCornerPoints(s),c=Ka(u,o)||u;r.push(c)}else console.error("can not get rectangle of element:",o)};if(t.forEach(o=>{n?di(o,s=>i(s),s=>e.isRecursion(s)):i(o)}),r.length>0)if(vF(t)){const o=po(t);return yF(r,o)}else{const o=r.reduce((s,u)=>s.concat(u),[]);return M.getRectangleByPoints(o)}else return{x:0,y:0,width:0,height:0}}function xs(e,t,n){const r=!n&&Nm(e).get(t);return r||(n||(n=k0(e,{match:o=>!0,recursion:o=>!0})),n.find(o=>o.id===t))}function Nm(e){const t=f6.get(e);if(!t)throw new Error("can not resolve element map");return t}function k0(e,t){let n=[];const r=t.isReverse??!0;return di(e,i=>{!I.isBoard(i)&&t.match(i)&&n.push(i)},i=>I.isBoard(i)?!0:nh(e)(i)&&t.recursion(i),r),n}var fr;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(fr||(fr={}));const qr="#333333",HP={mode:fr.default,boardBackground:"#ffffff",textColor:qr},GP={mode:fr.colorful,boardBackground:"#ffffff",textColor:qr},jP={mode:fr.soft,boardBackground:"#f5f5f5",textColor:qr},$P={mode:fr.retro,boardBackground:"#f9f8ed",textColor:qr},WP={mode:fr.dark,boardBackground:"#141414",textColor:"#FFFFFF"},zP={mode:fr.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},TF=[HP,GP,jP,$P,WP,zP],I={isBoard(e){const t=y9.get(e);if(t!==void 0)return t;const n=typeof e.onChange=="function"&&typeof e.apply=="function";return y9.set(e,n),n},isAlive(e){return!!m6.get(e)},findPath(e,t){const n=[];let r=t;for(;;){const i=Nf.get(r);if(i==null){if(I.isBoard(r))return n;break}const o=i0.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(t)}`)},getHost(e){return g6.get(e)},getElementLowerHost(e){var t;return(t=Lu.get(e))==null?void 0:t.lowerHost},getElementHost(e){var t;return(t=Lu.get(e))==null?void 0:t.host},getElementUpperHost(e){var t;return(t=Lu.get(e))==null?void 0:t.upperHost},getElementTopHost(e){var t;return(t=Lu.get(e))==null?void 0:t.topHost},getActiveHost(e){var t;return(t=Lu.get(e))==null?void 0:t.activeHost},getRoughSVG(e){return d6.get(e)},getBoardContainer(e){var t;return(t=Lu.get(e))==null?void 0:t.container},getBoardContext(e){return p6.get(e)},getRectangle(e){return on(e,e.children,!0)},getViewportContainer(e){var t;return(t=Lu.get(e))==null?void 0:t.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!h6.get(e)},getPointer(e){return e.pointer},isPointer(e,t){return e.pointer===t},isInPointer(e,t){const n=e.pointer;return t.includes(n)},getMovingPointInBoard(e){return v6.get(e)},isMovingPointInBoard(e){const t=JE.get(e),n=I.getBoardContainer(e).getBoundingClientRect();return!!(t&&yp(t[0],t[1],n)===0)},getThemeColors(e){return e.options.themeColors||TF}};var Zt;(function(e){e.hand="hand",e.selection="selection"})(Zt||(Zt={}));const DF=e=>e.type==="set_viewport",AF=e=>e.type==="set_selection",BF=e=>e.type==="set_theme",RF=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:t,path:n}=e;if(wt.equals(t,n))return e;const r=wt.transform(n,e),i=wt.transform(wt.next(n),e);return{...e,path:r,newPath:i}}case"set_node":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}case"set_selection":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:null}:n==null?{...e,properties:null,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_viewport":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:n}:n==null?{...e,properties:t,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_theme":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}}},ql={isSetViewportOperation:DF,isSetSelectionOperation:AF,isSetThemeOperation:BF,inverse:RF},mt={isEquals(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]},isHorizontal(e,t,n=0){return e&&t&&mt.isOverHorizontal([e,t],n)},isOverHorizontal(e,t=0){return e.every(n=>Math.abs(n[1]-e[0][1])<=t)},isVertical(e,t,n=0){return e&&t&&mt.isOverVertical([e,t],n)},isOverVertical(e,t=0){return e.every(n=>Math.abs(n[0]-e[0][0])<=t)},isAlign(e,t=0){return mt.isOverHorizontal(e,t)||mt.isOverVertical(e,t)},getOffsetX(e,t){return t[0]-e[0]},getOffsetY(e,t){return t[1]-e[1]}},U7=new WeakMap,br=new WeakMap,lm=new WeakMap;var kt;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(kt||(kt={}));const MF=e=>e===kt.left||e===kt.right,wo={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function bF(e){return kF(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function kF(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function OF(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const IF=(e,t)=>t;class FF{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||IF}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<M9(r,i,o)?n:r,u=M9(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);const h=u-i,d=c-i;if(h!=d){for(let v=0;v<h;v++){const y=v<o.length?o[v]:o[v]=0,x=y+v;d<=x&&x<h&&(o[v]=y+1)}const g=s.previousIndex;o[g]=d-h}}u!==c&&t(s,u,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!bF(t))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)o=t[u],s=this._trackByFn(u,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,u),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,u)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,OF(t,u=>{s=this._trackByFn(i,u),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,u,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,u,s,i)),Object.is(n.item,u)||this._addIdentityChange(n,u)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new LF(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new R9),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new R9),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}}class LF{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _F{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}}class R9{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new _F,this.map.set(n,r)),r.add(t)}get(t,n){const r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function M9(e,t,n){const r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class VP{constructor(t){this.board=t,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(t,n){this.initialized=!0,this.children=t,t.forEach((r,i)=>{i0.set(r,i),Nf.set(r,n.parent);const o=X7(this.board,r,i,n.parent),s=k9(this.board,o),u=b9(this.board,s,o,n);this.instances.push(u),this.contexts.push(o)}),this.differ=new FF(NF),this.differ.diff(t)}update(t,n){if(!this.initialized){this.initialize(t,n);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:r,parent:i}=n,o=this.differ.diff(t);if(o){const s=[],u=[];let c=null;o.forEachItem(h=>{var v;i0.set(h.item,h.currentIndex),Nf.set(h.item,n.parent);const d=h.previousIndex===null?void 0:this.contexts[h.previousIndex],g=X7(r,h.item,h.currentIndex,i,d);if(h.previousIndex===null){const y=k9(r,g),x=b9(r,y,g,n);s.push(g),u.push(x)}else{const y=this.instances[h.previousIndex];y.context=g,u.push(y),s.push(g)}(h.item===this.children[0]||h.item.id===((v=this.children[0])==null?void 0:v.id))&&(c=h.currentIndex)}),o.forEachOperation(h=>{if(h.currentIndex===null){const d=this.instances[h.previousIndex];d==null||d.destroy()}h.previousIndex!==null&&h.currentIndex!==null&&XP(h.item,h.currentIndex,n,c)}),this.instances=u,this.contexts=s,this.children=t}else{const s=[];this.children.forEach((u,c)=>{i0.set(u,c),Nf.set(u,n.parent);const h=this.contexts[c],d=this.instances[c],g=X7(r,u,c,i,h);d.context=g,s.push(g)}),this.contexts=s}}destroy(){this.children.forEach((t,n)=>{this.instances[n]&&this.instances[n].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const NF=(e,t)=>t.id,b9=(e,t,n,r)=>{const i=new t;i.context=n,e.normalizeElement(n);try{i.initialize()}catch(s){Jl()&&console.error("list-render-initialize",s,"context",n)}const o=i.getContainerG();return UP(n.index,o,r),i.initializeListRender(),i},k9=(e,t)=>e.drawElement(t),X7=(e,t,n,r,i)=>{var c;let o=Hf(e,t);const s=i&&i.element;return s&&s!==t&&Hf(e,s)&&(o=!0,WO(e,s,t)),{element:t,parent:r,board:e,selected:o,index:n,hasThemeChanged:!!((c=e.operations)!=null&&c.find(h=>h.type==="set_theme"))}},UP=(e,t,n,r=null)=>{const{parent:i,parentG:o}=n;if(I.isBoard(i))if(e>0){const s=i.children[e-1];yn.getContainerG(s,{suppressThrow:!1}).insertAdjacentElement("afterend",t)}else if(r!==null){const s=i.children[r],u=s&&yn.getContainerG(s,{suppressThrow:!0});if(s&&u)o.insertBefore(t,u);else throw new Error("fail to mount container on moving")}else o.append(t);else if(e>0){const s=i.children[e-1];yn.getElementG(s).insertAdjacentElement("afterend",t)}else if(r){const s=i.children[r],u=s&&I.findPath(n.board,s),c=u&&Xt.first(n.board,u),h=c&&yn.getContainerG(c,{suppressThrow:!1});if(h)o.insertBefore(t,h);else throw new Error("fail to mount container on moving")}else{let s=yn.getElementG(i);o.insertBefore(t,s)}},XP=(e,t,n,r)=>{const i=yn.getContainerG(e,{suppressThrow:!1});UP(t,i,n,r),e.children&&!yn.isRootElement(e)&&n.board.isExpanded(e)&&e.children.forEach((o,s)=>{XP(o,s,{...n,parent:e},null)})};class HF{get hasChildren(){return!!this.element.children}set context(t){uO(this)&&this.beforeContextChange(t);const n=this._context;if(this._context=t,this.initialized){const r=this.getElementG(),i=this.getContainerG();mg.set(this.element,r),vg.set(this.element,i),Nm(this.board).set(this.element.id,this.element),yg.set(this.element,this.ref),this.updateListRender(),lO(this)&&this.onContextChanged(t,n)}else yn.isRootElement(this.element)&&this.hasChildren?(this._g=Lt(),this._containerG=Lt(),this._containerG.append(this._g)):(this._g=Lt(),this._containerG=this._g),mg.set(this.element,this._g),vg.set(this.element,this._containerG),yg.set(this.element,this.ref),Nm(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(t){this.ref=t,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(yn.isRootElement(this.element))this._rootContainerG=this._containerG;else{const t=I.findPath(this.board,this.element),n=Xt.get(this.board,t.slice(0,1));this._rootContainerG=yn.getContainerG(n,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new VP(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var t;mg.get(this.element)===this._g&&mg.delete(this.element),Nm(this.board).delete(this.element.id),vg.get(this.element)===this._containerG&&vg.delete(this.element),yg.get(this.element)===this.ref&&yg.set(this.element,this.ref),tv(this.board,this.element),this.getContainerG().remove(),(t=this.listRender)==null||t.destroy()}}class GF{constructor(){this._stable=new $E,this.uploadingFiles=[]}getUploadingFile(t){return this.uploadingFiles.find(n=>n.url===t)}setUploadingFile(t){return this.uploadingFiles.push(t)}removeUploadingFile(t){this.uploadingFiles=this.uploadingFiles.filter(n=>n.url!==t.url)}onStable(){return this._stable.asObservable()}nextStable(){this._stable.next("")}}const jF={transform(e,t){const{current:n}=e;if(n==null)return;const r=wt.transform(n,t);e.current=r,r==null&&e.unref()}};function $F(e,t){const n={viewport:{zoom:1},children:e,theme:{themeColorMode:fr.default},operations:[],history:{redos:[],undos:[]},selection:null,options:t||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:t!=null&&t.readonly?Zt.hand:Zt.selection,undo:()=>{},redo:()=>{},apply:r=>{for(const i of n.pathRefs())jF.transform(i,r);n.operations.push(r),Xe.transform(n,r),Fm.get(n)||(Fm.set(n,!0),Promise.resolve().then(()=>{Fm.set(n,!1),n.onChange(),n.afterChange(),n.operations=[]}))},pathRef:(r,i)=>{const o=(i==null?void 0:i.affinity)||"forward",s={current:r,affinity:o,unref(){const{current:c}=s;return n.pathRefs().delete(s),s.current=null,c}};return n.pathRefs().add(s),s},pathRefs:()=>{let r=w9.get(n);return r||(r=new Set,w9.set(n,r)),r},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>WI(n),mousedown:r=>{},mousemove:r=>{},mouseleave:r=>{},globalMousemove:r=>{},mouseup:r=>{},globalMouseup:r=>{},keyDown:r=>{},globalKeyDown:r=>{},keyUp:r=>{},dblClick:r=>{},buildFragment:(r,i,o,s)=>r,insertFragment:(r,i,o)=>{},deleteFragment:r=>{_P.removeElements(n,r)},getDeletedFragment:r=>r,getRelatedFragment:(r,i)=>r,normalizeElement:r=>{},drawElement:r=>{throw new Error(`can not resolve plugin element component type: ${r.element.type}`)},isWithinSelection:r=>!1,isRectangleHit:r=>!1,isHit:r=>!1,isInsidePoint:r=>!1,getOneHitElement:r=>r[0],isRecursion:r=>!0,isMovable:r=>!1,getRectangle:r=>null,applyTheme:r=>{},isAlign:r=>!1,pointerDown:r=>{},pointerMove:r=>{},pointerUp:r=>{},pointerCancel:r=>{},pointerOut:r=>{},pointerLeave:r=>{},globalPointerMove:r=>{},globalPointerUp:r=>{},drop:r=>!1,isImageBindingAllowed:r=>!1,canAddToGroup:r=>!0,canSetZIndex:r=>!0,isExpanded:r=>!0};return n}function WF(e){const{onChange:t,afterChange:n}=e;return e.onChange=()=>{const r=r3.get(e);r&&r(),t()},e.afterChange=()=>{const r=i3.get(e);r&&r(),n()},e}const O9=(e,t)=>I.isPointer(e,Zt.selection)&&IP(t),I9="Space";function zF(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,keyDown:i,keyUp:o,pointerUp:s}=e;let u=!1,c=null,h=null,d=!1,g=!1;return e.pointerDown=v=>{const y=e.getPluginOptions(Ga.withHand),x=At(e,Ot(e,v.x,v.y)),E=sP(e,x);((y==null?void 0:y.isHandMode(e,v))||I.isPointer(e,Zt.hand)||O9(e,v)&&!E||g)&&Va(v)?(c={x:v.x,y:v.y},I.isPointer(e,Zt.hand)||I.getBoardContainer(e).classList.add("viewport-moving")):BO(v)&&(d=!0,v.preventDefault(),c={x:v.x,y:v.y},u=!0,I.getBoardContainer(e).classList.add("viewport-moving")),h=v,t(v)},e.pointerMove=v=>{const y=e.getPluginOptions(Ga.withHand),x=ZE+4;if(c&&!u&&!gi(e)&&h&&Tt(h.x,h.y,v.x,v.y)>x&&!fc(e)&&(u=!0,I.getBoardContainer(e).classList.add("viewport-moving")),((y==null?void 0:y.isHandMode(e,v))||I.isPointer(e,Zt.hand)||O9(e,v)||d||g)&&u&&c&&!gi(e)&&!fc(e)){const T=I.getViewportContainer(e),D=T.scrollLeft-(v.x-c.x),S=T.scrollTop-(v.y-c.y);gP(e,D,S,!1),c.x=v.x,c.y=v.y}n(v)},e.pointerUp=v=>{u||s(v)},e.globalPointerUp=v=>{c&&(c=null),u=!1,I.getBoardContainer(e).classList.remove("viewport-moving"),d=!1,r(v)},e.keyDown=v=>{v.code===I9&&(!e.options.readonly&&!I.isPointer(e,Zt.hand)&&(g=!0,P6(e,{isDisabledSelection:!0}),I.getBoardContainer(e).classList.add("viewport-moving")),v.preventDefault()),i(v)},e.keyUp=v=>{!e.options.readonly&&v.code===I9&&(g=!1,P6(e,{isDisabledSelection:!1}),I.getBoardContainer(e).classList.remove("viewport-moving")),o(v)},e}function VF(e){const{apply:t,keyDown:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:r}=e,{redos:i}=r;if(i.length>0){const o=i[i.length-1];vs.withoutSaving(e,()=>{for(const s of o)e.apply(s)}),r.redos.pop(),r.undos.push(o)}},e.undo=()=>{const{history:r}=e,{undos:i}=r;if(i.length>0){const o=i[i.length-1];vs.withoutSaving(e,()=>{const s=o.map(ql.inverse).reverse();for(const u of s)e.apply(u)}),r.redos.push(o),r.undos.pop()}},e.apply=r=>{const{operations:i,history:o}=e,{undos:s}=o,u=s[s.length-1],c=u&&u[u.length-1];let h=vs.isSaving(e),d=vs.isMerging(e);if(h==null&&(h=LO(r)),h){if(d||(u==null?d=!1:i.length!==0?d=!0:d=FO(r,c)),vs.isSplittingOnce(e)&&(d=!1,vs.setSplittingOnce(e,void 0)),u&&d)u.push(r);else{const g=[r];s.push(g)}for(;s.length>100;)s.shift();_O(r)&&(o.redos=[])}t(r)},e.keyDown=r=>{if(nn.isHotkey("mod+z",r)){e.undo();return}if(nn.isHotkey("mod+shift+z",r)){e.redo();return}n(r)},e}const UF=e=>{const{keyDown:t,keyUp:n,globalKeyDown:r}=e;return e.keyDown=i=>{const o=e.getPluginOptions(Ga.withSelection);if(!I.isReadonly(e)&&o.isMultipleSelection&&nn.isHotkey("mod+a",i)){i.preventDefault();let u=[];di(e,c=>{I.isBoard(c)||u.push(c)},c=>!!(I.isBoard(c)||e.isRecursion(c)),!0),Xe.addSelectionWithTemporaryElements(e,u);return}if(!I.isReadonly(e)){if(nn.isKeyHotkey("mod+]",i)){i.preventDefault(),Xe.moveUp(e);return}if(nn.isKeyHotkey("mod+[",i)){i.preventDefault(),Xe.moveDown(e);return}if(nn.isKeyHotkey("mod+option+‘",i)){i.preventDefault(),Xe.moveToTop(e);return}if(nn.isKeyHotkey("mod+option+“",i)){i.preventDefault(),Xe.moveToBottom(e);return}}const s=Qe(e);if(!I.isReadonly(e)&&s.length>0&&nn.isKeyHotkey("mod+d",i)){i.preventDefault(),Y4(e);return}!I.isReadonly(e)&&s.length>0&&(Ti.isDeleteBackward(i)||Ti.isDeleteForward(i))&&(i.preventDefault(),K4(e)),t(i)},e.keyUp=i=>{n(i)},e.globalKeyDown=i=>{if(I.getMovingPointInBoard(e)||I.isMovingPointInBoard(e)){if(nn.isHotkey(["mod+=","mod++"],{byKey:!0})(i)){i.preventDefault(),vn.updateZoom(e,e.viewport.zoom+.1);return}if(nn.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(i)){i.preventDefault(),vn.fitViewport(e);return}if(nn.isHotkey(["mod+-","mod+shift+-"])(i)){i.preventDefault(),vn.updateZoom(e,e.viewport.zoom-.1);return}if(nn.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(i)){i.preventDefault(),vn.updateZoom(e,1);return}}r(i)},e};function XF(e,t,n){const r=BP(e,n),i=Lt();let o=YF(t,r);const s=ZF(e,o,t,r);i.append(s);const u=QF(e,o,t,r);return o=u.snapDelta,i.append(u.snapG),{...o,snapG:i}}function KF(e,t,n){const r=Kf(e,n),i=Sg(t,r[0],n),o=Sg(t,r[1],n),s=Sg(t,r[2],n);return[i,o,s]}function YF(e,t){let n={deltaX:0,deltaY:0};function r(i){let o=0;const s=KF(e,t,i);for(let u=0;u<s.length;u++)if(Math.abs(s[u])<zu){o=s[u];break}return o}return n.deltaX=r(!0),n.deltaY=r(!1),n}function qF(e,t){const{deltaX:n,deltaY:r}=e,{x:i,y:o,width:s,height:u}=t;return{x:i+n,y:o+r,width:s,height:u}}function ZF(e,t,n,r){const i=qF(t,n);return RP(e,i,r,!0,!0,!0)}function QF(e,t,n,r){let i=t.deltaX,o=t.deltaY;const s=F9(n,r,!0),u=F9(n,r,!1),c=[...s.lines,...u.lines];return s.delta&&(i=s.delta),u.delta&&(o=u.delta),{snapDelta:{deltaX:i,deltaY:o},snapG:MP(e,c)}}function F9(e,t,n){var S,R;let r=[],i=0,o=[];const s=n?"x":"y",u=n?"width":"height",c=e[s]+e[u]/2;t.forEach(L=>{(n?JF(L,e):eL(L,e))&&!M.isHit(L,e)&&o.push(L)}),o=[...o,e].sort((L,k)=>L[s]-k[s]);const h=[];let d=0,g,v;for(let L=0;L<o.length;L++)for(let k=L+1;k<o.length;k++){const W=o[L],z=o[k],Y=z[s]-(W[s]+W[u]);let te=1/0;(S=h[L])!=null&&S.after?h[L].after.push({distance:Y,index:k}):h[L]={...h[L],after:[{distance:Y,index:k}]},(R=h[k])!=null&&R.before?h[k].before.push({distance:Y,index:L}):h[k]={...h[k],before:[{distance:Y,index:L}]};let se=(W[s]+W[u]+z[s])/2;te=Math.abs(se-c),te<zu&&(d=(z[s]-(W[s]+W[u])-e[u])/2,i=se-c,g=L,v=k);const me=z[s]-(W[s]+W[u]);se=z[s]+z[u]+me+e[u]/2,te=Math.abs(se-c),(!d||d!==me)&&te<zu&&(d=me,g=k,i=se-c);const ne=z[s]-(W[s]+W[u]);se=W[s]-ne-e[u]/2,te=Math.abs(se-c),!d&&te<zu&&(d=ne,v=L,i=se-c)}const y=o.indexOf(e);let x=[],E=[];if(g!==void 0&&(x.push(g),T(d,h[g],"before",x)),v!==void 0&&(E.push(v),T(d,h[v],"after",E)),x.length||E.length){const L=[...x.reverse(),y,...E];e[s]+=i;for(let k=1;k<L.length;k++)r.push(D(o[L[k-1]],o[L[k]]))}function T(L,k,W,z){const Y=k[W],te=h.indexOf(k);if(!(te===0&&W==="before"||te===h.length-1&&W==="after")){for(let se=0;se<Y.length;se++)if(Math.abs(Y[se].distance-L)<.1){z.push(Y[se].index),T(L,h[Y[se].index],W,z);return}}}function D(L,k){const W=s==="x"?"y":"x",z=u==="width"?"height":"width",te=[L[W],L[W]+L[z],k[W],k[W]+k[z]].sort((ne,oe)=>ne-oe),se=(te[1]+te[2])/2,me=3;return n?[[L.x+L.width+me,se],[k.x-me,se]]:[[se,L.y+L.height+me],[se,k.y-me]]}return{delta:i,lines:r}}function JF(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height)}function eL(e,t){return!(e.x+e.width<t.x||e.x>t.x+t.width)}function tL(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,globalPointerMove:i,globalKeyDown:o,keyUp:s}=e;let u=0,c=0,h=!1,d,g=[],v=null,y=null,x=null,E,T,D=null;e.globalKeyDown=R=>{I.isReadonly(e)||nn.isKeyHotkey("option",R)&&(R.preventDefault(),d&&g.length&&!I.hasBeenTextEditing(e)&&(D=L9(e,g,u,c),D&&I.getElementTopHost(e).append(D))),o(R)},e.keyUp=R=>{if(!I.isReadonly(e)&&D&&d&&g.length&&!I.hasBeenTextEditing(e)){R.preventDefault();const L=R6(e,g,u,c);I.getBoardContainer(e).classList.add("element-moving"),E9(e,L)}D==null||D.remove(),s(R)},e.pointerDown=R=>{if(I.isReadonly(e)||!I.isPointer(e,Zt.selection)||!Va(R)){t(R);return}const L=At(e,Ot(e,R.x,R.y));if(E=Qa(e,L,k=>e.isMovable(k)),x=KP(e),T=E&&x.includes(E),E&&T)d=L,g=x,y=on(e,g,!0);else if(E){d=L;const k=e.getRelatedFragment([],[E]);g=[...V4(e,E),...k],y=on(e,g,!0)}else{const k=x.length>0&&on(e,x,!1);k&&M.isPointInRectangle(k,L)&&(d=L,g=x,y=k)}t(R)},e.pointerMove=R=>{if(d&&g.length&&!I.hasBeenTextEditing(e)){h||(h=!0),v==null||v.remove(),D==null||D.remove();const L=At(e,Ot(e,R.x,R.y));u=L[0]-d[0],c=L[1]-d[1],(Tt(...L,...d)>D4||gI(e).length>0)&&(E&&!T&&x&&x.length>0&&(LP(e,[]),E=void 0,x=null,T=void 0),Ua(e,"with-moving",()=>{if(!y)return;const W={...y,x:y.x+u,y:y.y+c},z=xp(W,po(g)),Y=XF(e,z,g);if(u+=Y.deltaX,c+=Y.deltaY,v=Y.snapG,v.classList.add(YE),I.getElementTopHost(e).append(v),R.altKey)D=L9(e,g,u,c),D&&I.getElementTopHost(e).append(D);else{const te=R6(e,g,u,c);I.getBoardContainer(e).classList.add("element-moving"),E9(e,te)}}))}h&&R.preventDefault(),n(R)},e.globalPointerMove=R=>{d&&(xO(e,R.x,R.y)||S(e)),i(R)},e.globalPointerUp=R=>{if(R.altKey&&g.length){const L=q4(e,g),k=on(e,L,!1);Y4(e,L,[k.x+u,k.y+c])}h=!1,E=void 0,x=null,T=void 0,d&&S(e),r(R)};function S(R){v==null||v.remove(),D==null||D.remove(),d=null,y=null,u=0,c=0,g=[],fc(R)&&pI(R),br.set(R,!1),I.getBoardContainer(R).classList.remove("element-moving")}return nL(e)}function nL(e){const{keyDown:t,keyUp:n}=e;return e.keyDown=r=>{const i=Qe(e);if(!I.isReadonly(e)&&i.length>0&&(Ti.isArrow(r)||Ti.isExtendArrow(r))){r.preventDefault();const o=!!r.shiftKey,s=[0,0],u=o?10:1;switch(!0){case(Ti.isMoveUp(r)||Ti.isExtendUp(r)):{s[1]=-u;break}case(Ti.isMoveDown(r)||Ti.isExtendDown(r)):{s[1]=u;break}case(Ti.isMoveBackward(r)||Ti.isExtendBackward(r)):{s[0]=-u;break}case(Ti.isMoveForward(r)||Ti.isExtendForward(r)):{s[0]=u;break}}const c=KP(e);Ua(e,"with-arrow-moving",()=>{R6(e,c,s[0],s[1])})}t(r)},e.keyUp=r=>{br.set(e,!1),n(r)},e}function KP(e){const t=Qe(e),n=e.children.filter(o=>e.isMovable(o)),r=t.filter(o=>n.includes(o)),i=e.getRelatedFragment([]);return r.push(...i),r}function q4(e,t){return[...t].filter(r=>!wo.isGroup(r)&&yn.isRootElement(r))}function R6(e,t,n,r){return q4(e,t).map(s=>{const c=(s.points||[]).map(d=>[d[0]+n,d[1]+r]),h=i0.get(s);return Xe.setNode(e,{points:c},[h]),br.set(e,!0),Xt.get(e,[h])})}function L9(e,t,n,r){let i=null;const o=[];return q4(e,t).forEach(u=>{di(u,c=>{o.push(c)},()=>!0)}),o.forEach(u=>{let c=e.getRectangle(u);if(c){c={x:c.x+n,y:c.y+r,width:c.width,height:c.height};const h=ua(e,c,{stroke:yo,strokeWidth:1,fill:_4,fillStyle:"solid"});i||(i=Lt(),i.classList.add(YE));const d=SF(u);d&&Ps(h,M.getCenterPoint(c),d),i.append(h)}}),i}const rL=e=>{const t=new Map,n=e;return n.getPluginOptions=r=>t.get(r),n.setPluginOptions=(r,i)=>{const o=n.getPluginOptions(r)||{};t.set(r,{...o,...i})},n};function iL(e){const{buildFragment:t}=e;return e.buildFragment=(n,r,i,o)=>{let s=e.getRelatedFragment(o||[]);if(s&&(o!=null&&o.length&&(s=s.filter(u=>!o.map(c=>c.id).includes(u.id))),s.length)){const u={text:"",type:Xu.elements,elements:s};n=iv(n,u)}return t(n,r,i,o)},e}function oL(e){const{pointerDown:t,pointerUp:n,pointerMove:r,globalPointerUp:i,onChange:o,afterChange:s,drawSelectionRectangle:u}=e;let c=null,h=null,d,g,v=!1,y=null,x=null;return e.pointerDown=E=>{!v&&E.shiftKey&&(v=!0),v&&!E.shiftKey&&(v=!1);const T=At(e,Ot(e,E.x,E.y)),D=sP(e,T),S=_m(e);I.isPointer(e,Zt.selection)&&Va(E)&&!D&&S.isMultipleSelection&&!S.isDisabledSelection&&(IP(E)?y=setTimeout(()=>{c=[E.x,E.y],y=null},120):c=[E.x,E.y]),x=E,t(E)},e.pointerMove=E=>{if(y&&x&&Tt(x.x,x.y,E.x,E.y)>ZE&&(clearTimeout(y),y=null),I.isPointer(e,Zt.selection)&&c){E.preventDefault(),h=[E.x,E.y];const T=M.getRectangleByPoints([Xf(e,...c),Xf(e,...h)]);d==null||d.remove(),Ua(e,"with-selection",()=>{c&&h&&Xe.setSelection(e,{anchor:At(e,Ot(e,c[0],c[1])),focus:At(e,Ot(e,h[0],h[1]))})}),NI(e),d=ua(e,T,{stroke:yo,strokeWidth:1,fill:_4,fillStyle:"solid"}),I.getActiveHost(e).append(d)}r(E)},e.pointerUp=E=>{const T=I.isPointer(e,Zt.selection)||I.isPointer(e,Zt.hand);if(!Va(E)||cc(e)||!T){n(E);return}const S=At(e,Ot(e,E.x,E.y)),R={anchor:S,focus:S};Xe.setSelection(e,R),n(E)},e.globalPointerUp=E=>{c&&h&&(d==null||d.remove(),HI(e),Xe.setSelection(e,{anchor:At(e,Ot(e,c[0],c[1])),focus:At(e,Ot(e,h[0],h[1]))}));const T=_m(e);if(I.isFocus(e)&&!T.isPreventClearSelection){const D=E.target instanceof Node&&I.getBoardContainer(e).contains(E.target),S=E.target instanceof Node&&document.contains(E.target),R=E.target instanceof Element&&E.target.closest(`.${il}`);!D&&!c&&!R&&S&&Xe.setSelection(e,null)}c=null,h=null,y&&(clearTimeout(y),y=null),x=null,i(E)},e.onChange=()=>{const E=_m(e);if(E.isDisabledSelection&&B0(e),e.operations.forEach(T=>{T.type==="remove_node"&&tv(e,T.node,!0)}),D9(e)&&A9(e))try{v||g==null||g.remove();const T=GI(e);if(T)Na(e,[...T]);else{let S=iP(e);!E.isMultipleSelection&&S.length>1&&(S=[S[0]]);const R=S.some(k=>k.groupId),L=Qe(e);if(R)zI(e,S,v);else{if(e.selection&&v0.isCollapsed(e.selection)){const k=e.getOneHitElement(S);k&&(S=[k])}if(v){const k=[...L];e.selection&&v0.isCollapsed(e.selection)?(S.forEach(W=>{k.includes(W)?k.splice(k.indexOf(W),1):k.push(W)}),Na(e,k)):(S.forEach(W=>{k.includes(W)||k.push(W)}),Na(e,[...k]))}else Na(e,[...S])}}const D=Qe(e);$I(e),gi(e)||(g==null||g.remove(),D.length>1&&(g=e.drawSelectionRectangle(),I.getActiveHost(e).append(g)))}catch(T){console.error(T)}o()},e.afterChange=()=>{if(D9(e)&&!A9(e))try{const E=Qe(e);E.length&&E.length>1?(g==null||g.remove(),g=e.drawSelectionRectangle(),I.getActiveHost(e).append(g)):g==null||g.remove()}catch(E){console.error(E)}s()},P6(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const sL=e=>{const t=e;return t.getI18nValue=n=>(console.warn(`I18n key "${n}" is not found.`),null),t},ov=(e,t,n="")=>e.getI18nValue(t)||n;var K7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var _9;function aL(){return _9||(_9=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",s=0;s<arguments.length;s++){var u=arguments[s];u&&(o=i(o,r(u)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var u in o)t.call(o,u)&&o[u]&&(s=i(s,u));return s}function i(o,s){return s?o?o+" "+s:o+s:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(K7)),K7.exports}var uL=aL();const Dn=vc(uL);var lL=function(e){return typeof e=="function"};function N9(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function YP(e){var t=j.useRef(e);return t.current=e,t}var cL=function(e){var t=YP(e);j.useEffect(function(){return function(){t.current()}},[])},Y7,H9;function Z4(){if(H9)return Y7;H9=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Y7=e,Y7}var q7,G9;function fL(){if(G9)return q7;G9=1;var e=typeof Cs=="object"&&Cs&&Cs.Object===Object&&Cs;return q7=e,q7}var Z7,j9;function qP(){if(j9)return Z7;j9=1;var e=fL(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Z7=n,Z7}var Q7,$9;function hL(){if($9)return Q7;$9=1;var e=qP(),t=function(){return e.Date.now()};return Q7=t,Q7}var J7,W9;function dL(){if(W9)return J7;W9=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return J7=t,J7}var e5,z9;function gL(){if(z9)return e5;z9=1;var e=dL(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return e5=n,e5}var t5,V9;function ZP(){if(V9)return t5;V9=1;var e=qP(),t=e.Symbol;return t5=t,t5}var n5,U9;function pL(){if(U9)return n5;U9=1;var e=ZP(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(s){var u=n.call(s,i),c=s[i];try{s[i]=void 0;var h=!0}catch{}var d=r.call(s);return h&&(u?s[i]=c:delete s[i]),d}return n5=o,n5}var r5,X9;function mL(){if(X9)return r5;X9=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return r5=n,r5}var i5,K9;function vL(){if(K9)return i5;K9=1;var e=ZP(),t=pL(),n=mL(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function s(u){return u==null?u===void 0?i:r:o&&o in Object(u)?t(u):n(u)}return i5=s,i5}var o5,Y9;function yL(){if(Y9)return o5;Y9=1;function e(t){return t!=null&&typeof t=="object"}return o5=e,o5}var s5,q9;function wL(){if(q9)return s5;q9=1;var e=vL(),t=yL(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return s5=r,s5}var a5,Z9;function CL(){if(Z9)return a5;Z9=1;var e=gL(),t=Z4(),n=wL(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;function c(h){if(typeof h=="number")return h;if(n(h))return r;if(t(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=t(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=e(h);var g=o.test(h);return g||s.test(h)?u(h.slice(2),g?2:8):i.test(h)?r:+h}return a5=c,a5}var u5,Q9;function QP(){if(Q9)return u5;Q9=1;var e=Z4(),t=hL(),n=CL(),r="Expected a function",i=Math.max,o=Math.min;function s(u,c,h){var d,g,v,y,x,E,T=0,D=!1,S=!1,R=!0;if(typeof u!="function")throw new TypeError(r);c=n(c)||0,e(h)&&(D=!!h.leading,S="maxWait"in h,v=S?i(n(h.maxWait)||0,c):v,R="trailing"in h?!!h.trailing:R);function L(oe){var ve=d,ge=g;return d=g=void 0,T=oe,y=u.apply(ge,ve),y}function k(oe){return T=oe,x=setTimeout(Y,c),D?L(oe):y}function W(oe){var ve=oe-E,ge=oe-T,Be=c-ve;return S?o(Be,v-ge):Be}function z(oe){var ve=oe-E,ge=oe-T;return E===void 0||ve>=c||ve<0||S&&ge>=v}function Y(){var oe=t();if(z(oe))return te(oe);x=setTimeout(Y,W(oe))}function te(oe){return x=void 0,R&&d?L(oe):(d=g=void 0,y)}function se(){x!==void 0&&clearTimeout(x),T=0,d=E=g=x=void 0}function me(){return x===void 0?y:te(t())}function ne(){var oe=t(),ve=z(oe);if(d=arguments,g=this,E=oe,ve){if(x===void 0)return k(E);if(S)return clearTimeout(x),x=setTimeout(Y,c),L(E)}return x===void 0&&(x=setTimeout(Y,c)),y}return ne.cancel=se,ne.flush=me,ne}return u5=s,u5}var xL=QP();const EL=vc(xL);var PL=!!(typeof window<"u"&&window.document&&window.document.createElement),l5,J9;function SL(){if(J9)return l5;J9=1;var e=QP(),t=Z4(),n="Expected a function";function r(i,o,s){var u=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return t(s)&&(u="leading"in s?!!s.leading:u,c="trailing"in s?!!s.trailing:c),e(i,o,{leading:u,maxWait:o,trailing:c})}return l5=r,l5}var TL=SL();const DL=vc(TL);function JP(e,t){if(PL){if(!e)return t;var n;return lL(e)?n=e():"current"in e?n=e.current:n=e,n}}var AL=function(e){var t=function(n,r,i){var o=j.useRef(!1),s=j.useRef([]),u=j.useRef([]),c=j.useRef();e(function(){var h,d=Array.isArray(i)?i:[i],g=d.map(function(v){return JP(v)});if(!o.current){o.current=!0,s.current=g,u.current=r,c.current=n();return}(g.length!==s.current.length||!N9(s.current,g)||!N9(u.current,r))&&((h=c.current)===null||h===void 0||h.call(c),s.current=g,u.current=r,c.current=n())}),cL(function(){var h;(h=c.current)===null||h===void 0||h.call(c),o.current=!1})};return t},BL=AL(j.useEffect);function ai(e,t,n){n===void 0&&(n={});var r=n.enable,i=r===void 0?!0:r,o=YP(t);BL(function(){if(i){var s=JP(n.target,window);if(s!=null&&s.addEventListener){var u=function(h){return o.current(h)},c=Array.isArray(e)?e:[e];return c.forEach(function(h){s.addEventListener(h,u,{capture:n.capture,once:n.once,passive:n.passive})}),function(){c.forEach(function(h){s.removeEventListener(h,u,{capture:n.capture})})}}}},[e,n.capture,n.once,n.passive,i],n.target)}const RL=(e,t,n)=>{ai("pointerdown",r=>{e.pointerDown(r)},{target:n}),ai("pointermove",r=>{v6.set(e,[r.x,r.y]),e.pointerMove(r)},{target:t}),ai("pointerleave",r=>{v6.delete(e),e.pointerLeave(r)},{target:t}),ai("pointerup",r=>{e.pointerUp(r)},{target:t}),ai("dblclick",r=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&e.dblClick(r)},{target:n}),ai("pointermove",r=>{JE.set(e,[r.x,r.y]),e.globalPointerMove(r)}),ai("pointerup",r=>{e.globalPointerUp(r)}),ai("keydown",r=>{e.globalKeyDown(r),I.isFocus(e)&&!I.hasBeenTextEditing(e)&&!AO(r.target)&&e.keyDown(r)}),ai("keyup",r=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&(e==null||e.keyUp(r))}),ai("copy",r=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&(r.preventDefault(),B9(e,aa.copy,r.clipboardData))}),ai("paste",async r=>{if(I.isFocus(e)&&!I.isReadonly(e)&&!I.hasBeenTextEditing(e)){const i=I.getMovingPointInBoard(e);if(i){const o=At(e,Ot(e,i[0],i[1])),s=await LI(r.clipboardData);e.insertFragment(s,o,aa.paste)}}}),ai("cut",r=>{I.isFocus(e)&&!I.isReadonly(e)&&!I.hasBeenTextEditing(e)&&(r.preventDefault(),B9(e,aa.cut,r.clipboardData),K4(e))}),ai("drop",r=>{I.isReadonly(e)||(r.preventDefault(),e.drop(r))},{target:t}),ai("dragover",r=>{r.preventDefault()},{target:t})},ML=(e,t)=>{ai("scroll",r=>{if(uI(e))yP(e,!1);else{const{scrollLeft:i,scrollTop:o}=r.target;pP(e,i,o)}},{target:t}),ai("touchstart",r=>{r.preventDefault()},{target:t,passive:!1}),ai("wheel",r=>{if(r.metaKey||r.ctrlKey){r.preventDefault();const{deltaX:i,deltaY:o}=r,s=e.viewport.zoom,u=Math.sign(o),c=iO*100,h=Math.abs(o);let d=o;h>c&&(d=c*u);let g=s-d/100;g+=Math.log10(Math.max(1,s))*-u*Math.min(1,h/20),vn.updateZoom(e,g,I.getMovingPointInBoard(e))}},{target:t,passive:!1});const n=j.useRef(!1);j.useEffect(()=>{const r=new ResizeObserver(()=>{if(!n.current){n.current=!0;return}G4(e),j4(e),u3(e)});return r.observe(I.getBoardContainer(e)),()=>{r&&r.disconnect()}},[])},Q4=j.createContext(null),Zr=()=>{const e=j.useContext(Q4);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:t}=e;return t},eS=()=>{const e=j.useContext(Q4);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:t}=e;return t},tS=({style:e,className:t,children:n,afterInit:r})=>{var x,E;const i=j.useRef(null),o=j.useRef(null),s=j.useRef(null),u=j.useRef(null),c=j.useRef(null),h=j.useRef(null),d=j.useRef(null),g=j.useRef(null),v=Zr(),y=eS();return j.useEffect(()=>{const T=qb.svg(i.current,{options:{roughness:0,strokeWidth:1}});d6.set(v,T),g6.set(v,i.current),m6.set(v,!0),Lu.set(v,{lowerHost:o.current,host:s.current,upperHost:u.current,topHost:c.current,activeHost:h.current,container:g.current,viewportContainer:d.current});const D=new GF;return p6.set(v,D),f6.set(v,new Map),y.initialized||(y.initialize(v.children,{board:v,parent:v,parentG:I.getElementHost(v)}),r&&r(v)),G4(v),j4(v),oI(v),()=>{p6.delete(v),i3.delete(v),r3.delete(v),Lu.delete(v),m6.delete(v),g6.delete(v),d6.delete(v),f6.delete(v)}},[]),RL(v,d,i),ML(v,d),b.jsx("div",{className:Dn(t,oO,`${bL()}`,`theme-${(x=v.theme)==null?void 0:x.themeColorMode}`,`pointer-${v.pointer}`,{focused:I.isFocus(v),readonly:I.isReadonly(v),"disabled-scroll":((E=v.options)==null?void 0:E.disabledScrollOnNonFocus)&&!I.isFocus(v)}),ref:g,style:e,children:b.jsxs("div",{className:"viewport-container",ref:d,style:{width:"100%",height:"100%",overflow:"auto"},children:[b.jsxs("svg",{ref:i,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[b.jsx("g",{className:"element-lower-host",ref:o}),b.jsx("g",{className:"element-host",ref:s}),b.jsx("g",{className:"element-upper-host",ref:u}),b.jsx("g",{className:"element-top-host",ref:c})]}),b.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:b.jsx("g",{className:"active-host-g",ref:h})}),n]})})},bL=()=>OO?"safari":IO?"chrome":kO?"firefox":"";var kL={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=K.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},OL={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=pn.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},IL={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=Ee.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},f3=new WeakMap,h3=new WeakMap,Tg=new WeakMap,nS=new WeakMap,ew=new WeakMap,tw=new WeakMap,nw=new WeakMap,K={ancestors(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=K.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var i=e[r],o=t[r];if(i!==o)break;n.push(i)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return K.equals(r,i)&&o>s},endsAt(e,t){var n=e.length,r=e.slice(0,n),i=t.slice(0,n);return K.equals(r,i)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return K.equals(r,i)&&o<s},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,t){return K.compare(e,t)===1},isAncestor(e,t){return e.length<t.length&&K.compare(e,t)===0},isBefore(e,t){return K.compare(e,t)===-1},isChild(e,t){return e.length===t.length+1&&K.compare(e,t)===0},isCommon(e,t){return e.length<=t.length&&K.compare(e,t)===0},isDescendant(e,t){return e.length>t.length&&K.compare(e,t)===0},isParent(e,t){return e.length+1===t.length&&K.compare(e,t)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&K.equals(n,r)},levels(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=[],i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!K.isAncestor(t,e)&&!K.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:i="forward"}=n;if(e.length===0)return r;switch(t.type){case"insert_node":{var{path:o}=t;(K.equals(o,r)||K.endsBefore(o,r)||K.isAncestor(o,r))&&(r[o.length-1]+=1);break}case"remove_node":{var{path:s}=t;if(K.equals(s,r)||K.isAncestor(s,r))return null;K.endsBefore(s,r)&&(r[s.length-1]-=1);break}case"merge_node":{var{path:u,position:c}=t;K.equals(u,r)||K.endsBefore(u,r)?r[u.length-1]-=1:K.isAncestor(u,r)&&(r[u.length-1]-=1,r[u.length]+=c);break}case"split_node":{var{path:h,position:d}=t;if(K.equals(h,r)){if(i==="forward")r[r.length-1]+=1;else if(i!=="backward")return null}else K.endsBefore(h,r)?r[h.length-1]+=1:K.isAncestor(h,r)&&e[h.length]>=d&&(r[h.length-1]+=1,r[h.length]-=d);break}case"move_node":{var{path:g,newPath:v}=t;if(K.equals(g,v))return r;if(K.isAncestor(g,r)||K.equals(g,r)){var y=v.slice();return K.endsBefore(g,v)&&g.length<v.length&&(y[g.length-1]-=1),y.concat(r.slice(g.length))}else K.isSibling(g,v)&&(K.isAncestor(v,r)||K.equals(v,r))?K.endsBefore(g,r)?r[g.length-1]-=1:r[g.length-1]+=1:K.endsBefore(v,r)||K.equals(v,r)||K.isAncestor(v,r)?(K.endsBefore(g,r)&&(r[g.length-1]-=1),r[v.length-1]+=1):K.endsBefore(g,r)&&(K.equals(v,r)&&(r[v.length-1]+=1),r[g.length-1]-=1);break}}return r}};function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}function FL(e,t){if($g(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($g(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LL(e){var t=FL(e,"string");return $g(t)==="symbol"?t:String(t)}function Wi(e,t,n){return t=LL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var iw=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return[...t.slice(0,n),...i,...t.slice(n)]},Wg=function(t,n,r){for(var i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return[...t.slice(0,n),...o,...t.slice(n+r)]},ow=Wg,J4=(e,t,n)=>{if(t.length===0)throw new Error("Cannot modify the editor");for(var r=Ke.get(e,t),i=t.slice(),o=n(r);i.length>1;){var s=i.pop(),u=Ke.get(e,i);o=Xn(Xn({},u),{},{children:Wg(u.children,s,1,o)})}var c=i.pop();e.children=Wg(e.children,c,1,o)},jd=(e,t,n)=>{t.length===0?e.children=n(e.children):J4(e,t,r=>{if(ot.isText(r))throw new Error("Cannot get the element at path [".concat(t,"] because it refers to a leaf node: ").concat(Pr.stringify(r)));return Xn(Xn({},r),{},{children:n(r.children)})})},sw=(e,t,n)=>J4(e,t,r=>{if(!ot.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Pr.stringify(r)));return n(r)}),_L={transform(e,t){var n=!1;switch(t.type){case"insert_node":{var{path:r,node:i}=t;jd(e,K.parent(r),Se=>{var Te=r[r.length-1];if(Te>Se.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));return iw(Se,Te,i)}),n=!0;break}case"insert_text":{var{path:o,offset:s,text:u}=t;if(u.length===0)break;sw(e,o,Se=>{var Te=Se.text.slice(0,s),ke=Se.text.slice(s);return Xn(Xn({},Se),{},{text:Te+u+ke})}),n=!0;break}case"merge_node":{var{path:c}=t,h=c[c.length-1],d=K.previous(c),g=d[d.length-1];jd(e,K.parent(c),Se=>{var Te=Se[h],ke=Se[g],vt;if(ot.isText(Te)&&ot.isText(ke))vt=Xn(Xn({},ke),{},{text:ke.text+Te.text});else if(!ot.isText(Te)&&!ot.isText(ke))vt=Xn(Xn({},ke),{},{children:ke.children.concat(Te.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(c,"] to nodes of different interfaces: ").concat(Pr.stringify(Te)," ").concat(Pr.stringify(ke)));return Wg(Se,g,2,vt)}),n=!0;break}case"move_node":{var{path:v,newPath:y}=t,x=v[v.length-1];if(K.isAncestor(v,y))throw new Error("Cannot move a path [".concat(v,"] to new path [").concat(y,"] because the destination is inside itself."));var E=Ke.get(e,v);jd(e,K.parent(v),Se=>ow(Se,x,1));var T=K.transform(v,t),D=T[T.length-1];jd(e,K.parent(T),Se=>iw(Se,D,E)),n=!0;break}case"remove_node":{var{path:S}=t,R=S[S.length-1];if(jd(e,K.parent(S),Se=>ow(Se,R,1)),e.selection){var L=Xn({},e.selection);for(var[k,W]of Ee.points(L)){var z=pn.transform(k,t);if(L!=null&&z!=null)L[W]=z;else{var Y=void 0,te=void 0;for(var[se,me]of Ke.texts(e))if(K.compare(me,S)===-1)Y=[se,me];else{te=[se,me];break}var ne=!1;Y&&te&&(K.equals(te[1],S)?ne=!K.hasPrevious(te[1]):ne=K.common(Y[1],S).length<K.common(te[1],S).length),Y&&!ne?L[W]={path:Y[1],offset:Y[0].text.length}:te?L[W]={path:te[1],offset:0}:L=null}}e.selection=L}break}case"remove_text":{var{path:oe,offset:ve,text:ge}=t;if(ge.length===0)break;sw(e,oe,Se=>{var Te=Se.text.slice(0,ve),ke=Se.text.slice(ve+ge.length);return Xn(Xn({},Se),{},{text:Te+ke})}),n=!0;break}case"set_node":{var{path:Be,properties:Pe,newProperties:he}=t;if(Be.length===0)throw new Error("Cannot set properties on the root node!");J4(e,Be,Se=>{var Te=Xn({},Se);for(var ke in he){if(ke==="children"||ke==="text")throw new Error('Cannot set the "'.concat(ke,'" property of nodes!'));var vt=he[ke];vt==null?delete Te[ke]:Te[ke]=vt}for(var Ye in Pe)he.hasOwnProperty(Ye)||delete Te[Ye];return Te});break}case"set_selection":{var{newProperties:ue}=t;if(ue==null){e.selection=null;break}if(e.selection==null){if(!Ee.isRange(ue))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Pr.stringify(ue)," when there is no current selection."));e.selection=Xn({},ue);break}var we=Xn({},e.selection);for(var U in ue){var xe=ue[U];if(xe==null){if(U==="anchor"||U==="focus")throw new Error('Cannot remove the "'.concat(U,'" selection property'));delete we[U]}else we[U]=xe}e.selection=we;break}case"split_node":{var{path:Ie,position:Le,properties:$e}=t,Fe=Ie[Ie.length-1];if(Ie.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ie,"] because the root node cannot be split."));jd(e,K.parent(Ie),Se=>{var Te=Se[Fe],ke,vt;if(ot.isText(Te)){var Ye=Te.text.slice(0,Le),Dt=Te.text.slice(Le);ke=Xn(Xn({},Te),{},{text:Ye}),vt=Xn(Xn({},$e),{},{text:Dt})}else{var cn=Te.children.slice(0,Le),Bt=Te.children.slice(Le);ke=Xn(Xn({},Te),{},{children:cn}),vt=Xn(Xn({},$e),{},{children:Bt})}return Wg(Se,Fe,1,ke,vt)}),n=!0;break}}if(n&&e.selection){var Ze=Xn({},e.selection);for(var[et,Q]of Ee.points(Ze))Ze[Q]=pn.transform(et,t);e.selection=Ze}}},NL={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},HL={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},ui=e=>typeof e=="object"&&e!==null,rS=(e,t)=>{for(var n in e){var r=e[n],i=t[n];if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==i[o])return!1}else if(ui(r)&&ui(i)){if(!rS(r,i))return!1}else if(r!==i)return!1}for(var s in t)if(e[s]===void 0&&t[s]!==void 0)return!1;return!0};function GL(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Ku(e,t){if(e==null)return{};var n=GL(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var jL=["anchor","focus"];function aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $L(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ee={edges(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:i}=e;return Ee.isBackward(e)===n?[r,i]:[i,r]},end(e){var[,t]=Ee.edges(e);return t},equals(e,t){return pn.equals(e.anchor,t.anchor)&&pn.equals(e.focus,t.focus)},surrounds(e,t){var n=Ee.intersection(e,t);return n?Ee.equals(n,t):!1},includes(e,t){if(Ee.isRange(t)){if(Ee.includes(e,t.anchor)||Ee.includes(e,t.focus))return!0;var[n,r]=Ee.edges(e),[i,o]=Ee.edges(t);return pn.isBefore(n,i)&&pn.isAfter(r,o)}var[s,u]=Ee.edges(e),c=!1,h=!1;return pn.isPoint(t)?(c=pn.compare(t,s)>=0,h=pn.compare(t,u)<=0):(c=K.compare(t,s.path)>=0,h=K.compare(t,u.path)<=0),c&&h},intersection(e,t){var n=Ku(e,jL),[r,i]=Ee.edges(e),[o,s]=Ee.edges(t),u=pn.isBefore(r,o)?o:r,c=pn.isBefore(i,s)?i:s;return pn.isBefore(c,u)?null:$L({anchor:u,focus:c},n)},isBackward(e){var{anchor:t,focus:n}=e;return pn.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return pn.equals(t,n)},isExpanded(e){return!Ee.isCollapsed(e)},isForward(e){return!Ee.isBackward(e)},isRange(e){return ui(e)&&pn.isPoint(e.anchor)&&pn.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=Ee.edges(e);return t},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:r="inward"}=n,i,o;if(r==="inward"){var s=Ee.isCollapsed(e);Ee.isForward(e)?(i="forward",o=s?i:"backward"):(i="backward",o=s?i:"forward")}else r==="outward"?Ee.isForward(e)?(i="backward",o="forward"):(i="forward",o="backward"):(i=r,o=r);var u=pn.transform(e.anchor,t,{affinity:i}),c=pn.transform(e.focus,t,{affinity:o});return!u||!c?null:{anchor:u,focus:c}}},uw=function(t){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ui(t))return!1;var r=typeof t.apply=="function";if(r)return!1;var i=n?Ke.isNodeList(t.children):Array.isArray(t.children);return i},ut={isAncestor(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ui(e)&&Ke.isNodeList(e.children,{deep:t})},isElement:uw,isElementList(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(n=>ut.isElement(n,{deep:t}))},isElementProps(e){return e.children!==void 0},isElementType:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return uw(t)&&t[r]===n},matches(e,t){for(var n in t)if(n!=="children"&&e[n]!==t[n])return!1;return!0}},WL=["children"],zL=["text"],Ke={ancestor(e,t){var n=Ke.get(e,t);if(ot.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(Pr.stringify(n)));return n},ancestors(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of K.ancestors(t,n)){var i=Ke.ancestor(e,r),o=[i,r];yield o}}()},child(e,t){if(ot.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Pr.stringify(e)));var n=e.children[t];if(n==null)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(Pr.stringify(e)));return n},children(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,i=Ke.ancestor(e,t),{children:o}=i,s=r?o.length-1:0;r?s>=0:s<o.length;){var u=Ke.child(i,s),c=t.concat(s);yield[u,c],s=r?s-1:s+1}}()},common(e,t,n){var r=K.common(t,n),i=Ke.get(e,r);return[i,r]},descendant(e,t){var n=Ke.get(e,t);if(F.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(Pr.stringify(n)));return n},descendants(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))r.length!==0&&(yield[n,r])}()},elements(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))ut.isElement(n)&&(yield[n,r])}()},extractProps(e){if(ut.isAncestor(e)){var t=Ku(e,WL);return t}else{var t=Ku(e,zL);return t}},first(e,t){for(var n=t.slice(),r=Ke.get(e,n);r&&!(ot.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(ot.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Pr.stringify(e)));var n=ak({children:e.children},r=>{var[i,o]=Ee.edges(t),s=Ke.nodes(r,{reverse:!0,pass:v=>{var[,y]=v;return!Ee.includes(t,y)}});for(var[,u]of s){if(!Ee.includes(t,u)){var c=Ke.parent(r,u),h=u[u.length-1];c.children.splice(h,1)}if(K.equals(u,o.path)){var d=Ke.leaf(r,u);d.text=d.text.slice(0,o.offset)}if(K.equals(u,i.path)){var g=Ke.leaf(r,u);g.text=g.text.slice(i.offset)}}F.isEditor(r)&&(r.selection=null)});return n.children},get(e,t){var n=Ke.getIf(e,t);if(n===void 0)throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(Pr.stringify(e)));return n},getIf(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(ot.isText(n)||!n.children[i])return;n=n.children[i]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(ot.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ot.isText(e)||ut.isElement(e,{deep:t})||F.isEditor(e,{deep:t})},isNodeList(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(n=>Ke.isNode(n,{deep:t}))},last(e,t){for(var n=t.slice(),r=Ke.get(e,n);r&&!(ot.isText(r)||r.children.length===0);){var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(e,t){var n=Ke.get(e,t);if(!ot.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Pr.stringify(n)));return n},levels(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of K.levels(t,n)){var i=Ke.get(e,r);yield[i,r]}}()},matches(e,t){return ut.isElement(e)&&ut.isElementProps(t)&&ut.matches(e,t)||ot.isText(e)&&ot.isTextProps(t)&&ot.matches(e,t)},nodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=t,{from:i=[],to:o}=t,s=new Set,u=[],c=e;!(o&&(r?K.isBefore(u,o):K.isAfter(u,o)));){if(s.has(c)||(yield[c,u]),!s.has(c)&&!ot.isText(c)&&c.children.length!==0&&(n==null||n([c,u])===!1)){s.add(c);var h=r?c.children.length-1:0;K.isAncestor(u,i)&&(h=i[u.length]),u=u.concat(h),c=Ke.get(e,u);continue}if(u.length===0)break;if(!r){var d=K.next(u);if(Ke.has(e,d)){u=d,c=Ke.get(e,u);continue}}if(r&&u[u.length-1]!==0){var g=K.previous(u);u=g,c=Ke.get(e,u);continue}u=K.parent(u),c=Ke.get(e,u),s.add(c)}}()},parent(e,t){var n=K.parent(t),r=Ke.get(e,n);if(ot.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string(e){return ot.isText(e)?e.text:e.children.map(Ke.string).join("")},texts(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))ot.isText(n)&&(yield[n,r])}()}};function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Nu={isNodeOperation(e){return Nu.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!ui(e))return!1;switch(e.type){case"insert_node":return K.isPath(e.path)&&Ke.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&K.isPath(e.path);case"merge_node":return typeof e.position=="number"&&K.isPath(e.path)&&ui(e.properties);case"move_node":return K.isPath(e.path)&&K.isPath(e.newPath);case"remove_node":return K.isPath(e.path)&&Ke.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&K.isPath(e.path);case"set_node":return K.isPath(e.path)&&ui(e.properties)&&ui(e.newProperties);case"set_selection":return e.properties===null&&Ee.isRange(e.newProperties)||e.newProperties===null&&Ee.isRange(e.properties)||ui(e.properties)&&ui(e.newProperties);case"split_node":return K.isPath(e.path)&&typeof e.position=="number"&&ui(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(t=>Nu.isOperation(t))},isSelectionOperation(e){return Nu.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Nu.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return Qn(Qn({},e),{},{type:"remove_node"});case"insert_text":return Qn(Qn({},e),{},{type:"remove_text"});case"merge_node":return Qn(Qn({},e),{},{type:"split_node",path:K.previous(e.path)});case"move_node":{var{newPath:t,path:n}=e;if(K.equals(t,n))return e;if(K.isSibling(n,t))return Qn(Qn({},e),{},{path:t,newPath:n});var r=K.transform(n,e),i=K.transform(K.next(n),e);return Qn(Qn({},e),{},{path:r,newPath:i})}case"remove_node":return Qn(Qn({},e),{},{type:"insert_node"});case"remove_text":return Qn(Qn({},e),{},{type:"insert_text"});case"set_node":{var{properties:o,newProperties:s}=e;return Qn(Qn({},e),{},{properties:s,newProperties:o})}case"set_selection":{var{properties:u,newProperties:c}=e;return u==null?Qn(Qn({},e),{},{properties:c,newProperties:null}):c==null?Qn(Qn({},e),{},{properties:null,newProperties:u}):Qn(Qn({},e),{},{properties:c,newProperties:u})}case"split_node":return Qn(Qn({},e),{},{type:"merge_node",path:K.next(e.path)})}}},VL=function(t){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ui(t))return!1;var r=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||ui(t.marks))&&(t.selection===null||Ee.isRange(t.selection))&&(!n||Ke.isNodeList(t.children))&&Nu.isOperationList(t.operations);return r},F={above(e,t){return e.above(t)},addMark(e,t,n){e.addMark(t,n)},after(e,t,n){return e.after(t,n)},before(e,t,n){return e.before(t,n)},deleteBackward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges(e,t){return e.edges(t)},elementReadOnly(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(t)},end(e,t){return e.end(t)},first(e,t){return e.first(t)},fragment(e,t){return e.fragment(t)},hasBlocks(e,t){return e.hasBlocks(t)},hasInlines(e,t){return e.hasInlines(t)},hasPath(e,t){return e.hasPath(t)},hasTexts(e,t){return e.hasTexts(t)},insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock(e,t){return e.isBlock(t)},isEdge(e,t,n){return e.isEdge(t,n)},isEditor(e){return VL(e)},isElementReadOnly(e,t){return e.isElementReadOnly(t)},isEmpty(e,t){return e.isEmpty(t)},isEnd(e,t,n){return e.isEnd(t,n)},isInline(e,t){return e.isInline(t)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,t){return e.isSelectable(t)},isStart(e,t,n){return e.isStart(t,n)},isVoid(e,t){return e.isVoid(t)},last(e,t){return e.last(t)},leaf(e,t,n){return e.leaf(t,n)},levels(e,t){return e.levels(t)},marks(e){return e.getMarks()},next(e,t){return e.next(t)},node(e,t,n){return e.node(t,n)},nodes(e,t){return e.nodes(t)},normalize(e,t){e.normalize(t)},parent(e,t,n){return e.parent(t,n)},path(e,t,n){return e.path(t,n)},pathRef(e,t,n){return e.pathRef(t,n)},pathRefs(e){return e.pathRefs()},point(e,t,n){return e.point(t,n)},pointRef(e,t,n){return e.pointRef(t,n)},pointRefs(e){return e.pointRefs()},positions(e,t){return e.positions(t)},previous(e,t){return e.previous(t)},range(e,t,n){return e.range(t,n)},rangeRef(e,t,n){return e.rangeRef(t,n)},rangeRefs(e){return e.rangeRefs()},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start(e,t){return e.start(t)},string(e,t,n){return e.string(t,n)},unhangRange(e,t,n){return e.unhangRange(t,n)},void(e,t){return e.void(t)},withoutNormalizing(e,t){e.withoutNormalizing(t)},shouldMergeNodesRemovePrevNode:(e,t,n)=>e.shouldMergeNodesRemovePrevNode(t,n)},UL={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(K.isPath)}};function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pn={compare(e,t){var n=K.compare(e.path,t.path);return n===0?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter(e,t){return pn.compare(e,t)===1},isBefore(e,t){return pn.compare(e,t)===-1},equals(e,t){return e.offset===t.offset&&K.equals(e.path,t.path)},isPoint(e){return ui(e)&&typeof e.offset=="number"&&K.isPath(e.path)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:r="forward"}=n,{path:i,offset:o}=e;switch(t.type){case"insert_node":case"move_node":{i=K.transform(i,t,n);break}case"insert_text":{K.equals(t.path,i)&&(t.offset<o||t.offset===o&&r==="forward")&&(o+=t.text.length);break}case"merge_node":{K.equals(t.path,i)&&(o+=t.position),i=K.transform(i,t,n);break}case"remove_text":{K.equals(t.path,i)&&t.offset<=o&&(o-=Math.min(o-t.offset,t.text.length));break}case"remove_node":{if(K.equals(t.path,i)||K.isAncestor(t.path,i))return null;i=K.transform(i,t,n);break}case"split_node":{if(K.equals(t.path,i)){if(t.position===o&&r==null)return null;(t.position<o||t.position===o&&r==="forward")&&(o-=t.position,i=K.transform(i,t,fw(fw({},n),{},{affinity:"forward"})))}else i=K.transform(i,t,n);break}default:return e}return{path:i,offset:o}}},hw=void 0,Pr={setScrubber(e){hw=e},stringify(e){return JSON.stringify(e,hw)}},XL=["text"],KL=["anchor","focus","merge"];function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ot={equals(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function i(o){var s=Ku(o,XL);return s}return rS(r?i(e):e,r?i(t):t)},isText(e){return ui(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(t=>ot.isText(t))},isTextProps(e){return e.text!==void 0},matches(e,t){for(var n in t)if(n!=="text"&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[{leaf:Fu({},e)}];for(var r of t){var{anchor:i,focus:o,merge:s}=r,u=Ku(r,KL),[c,h]=Ee.edges(r),d=[],g=0,v=c.offset,y=h.offset,x=s??Object.assign;for(var{leaf:E}of n){var{length:T}=E.text,D=g;if(g+=T,v<=D&&g<=y){x(E,u),d.push({leaf:E});continue}if(v!==y&&(v===g||y===D)||v>g||y<D||y===D&&D!==0){d.push({leaf:E});continue}var S=E,R=void 0,L=void 0;if(y<g){var k=y-D;L={leaf:Fu(Fu({},S),{},{text:S.text.slice(k)})},S=Fu(Fu({},S),{},{text:S.text.slice(0,k)})}if(v>D){var W=v-D;R={leaf:Fu(Fu({},S),{},{text:S.text.slice(0,W)})},S=Fu(Fu({},S),{},{text:S.text.slice(W)})}x(S,u),R&&d.push(R),d.push({leaf:S}),L&&d.push(L)}n=d}if(n.length>1){var z=0;for(var[Y,te]of n.entries()){var se=z,me=se+te.leaf.text.length,ne={start:se,end:me};Y===0&&(ne.isFirst=!0),Y===n.length-1&&(ne.isLast=!0),te.position=ne,z=me}}return n}},e8=e=>e.selection?e.selection:e.children.length>0?F.end(e,[]):[0],O0=(e,t)=>{var[n]=F.node(e,t);return r=>r===n},t8=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,i=n?e_(t):t,o=Ht.None,s=Ht.None,u=0,c=null,h=null;for(var d of i){var g=d.codePointAt(0);if(!g)break;var v=h_(d,g);if([o,s]=r?[s,v]:[v,o],qd(o,Ht.ZWJ)&&qd(s,Ht.ExtPict)&&(r?c=gw(t.substring(0,u)):c=gw(t.substring(0,t.length-u)),!c)||qd(o,Ht.RI)&&qd(s,Ht.RI)&&(h!==null?h=!h:r?h=!0:h=v_(t.substring(0,t.length-u)),!h)||o!==Ht.None&&s!==Ht.None&&g_(o,s))break;u+=d.length}return u||1},YL=/\s/,qL=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ZL=/['\u2018\u2019]/,QL=function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,i=!1;t.length>0;){var o=t8(t,n),[s,u]=n8(t,o,n);if(JL(s,u,n))i=!0,r+=o;else if(!i)r+=o;else break;t=u}return r},n8=(e,t,n)=>{if(n){var r=e.length-t;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,t),e.slice(t)]},JL=function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(YL.test(t))return!1;if(ZL.test(t)){var i=t8(n,r),[o,s]=n8(n,i,r);if(e(o,s,r))return!0}return!qL.test(t)},e_=function*(t){for(var n=t.length-1,r=0;r<t.length;r++){var i=t.charAt(n-r);if(n_(i.charCodeAt(0))){var o=t.charAt(n-r-1);if(t_(o.charCodeAt(0))){yield o+i,r++;continue}}yield i}},t_=e=>e>=55296&&e<=56319,n_=e=>e>=56320&&e<=57343,Ht;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(Ht||(Ht={}));var r_=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,i_=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,o_=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,s_=/^[\u1100-\u115F\uA960-\uA97C]$/,a_=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,u_=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,l_=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,c_=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,f_=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,h_=(e,t)=>{var n=Ht.Any;return e.search(r_)!==-1&&(n|=Ht.Extend),t===8205&&(n|=Ht.ZWJ),t>=127462&&t<=127487&&(n|=Ht.RI),e.search(i_)!==-1&&(n|=Ht.Prepend),e.search(o_)!==-1&&(n|=Ht.SpacingMark),e.search(s_)!==-1&&(n|=Ht.L),e.search(a_)!==-1&&(n|=Ht.V),e.search(u_)!==-1&&(n|=Ht.T),e.search(l_)!==-1&&(n|=Ht.LV),e.search(c_)!==-1&&(n|=Ht.LVT),e.search(f_)!==-1&&(n|=Ht.ExtPict),n};function qd(e,t){return(e&t)!==0}var d_=[[Ht.L,Ht.L|Ht.V|Ht.LV|Ht.LVT],[Ht.LV|Ht.V,Ht.V|Ht.T],[Ht.LVT|Ht.T,Ht.T],[Ht.Any,Ht.Extend|Ht.ZWJ],[Ht.Any,Ht.SpacingMark],[Ht.Prepend,Ht.Any],[Ht.ZWJ,Ht.ExtPict],[Ht.RI,Ht.RI]];function g_(e,t){return d_.findIndex(n=>qd(e,n[0])&&qd(t,n[1]))===-1}var p_=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,gw=e=>e.search(p_)!==-1,m_=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,v_=e=>{var t=e.match(m_);if(t===null)return!1;var n=t[0].length/2;return n%2===1},y_={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(e,()=>{var{voids:r=!1}=n,{at:i=e8(e)}=n;if(K.isPath(i)&&(i=F.range(e,i)),Ee.isRange(i))if(Ee.isCollapsed(i))i=i.anchor;else{var o=Ee.end(i);if(!r&&F.void(e,{at:o}))return;var s=Ee.start(i),u=F.pointRef(e,s),c=F.pointRef(e,o);Re.delete(e,{at:i,voids:r});var h=u.unref(),d=c.unref();i=h||d,Re.setSelection(e,{anchor:i,focus:i})}if(!(!r&&F.void(e,{at:i})||F.elementReadOnly(e,{at:i}))){var{path:g,offset:v}=i;t.length>0&&e.apply({type:"insert_text",path:g,offset:v,text:t})}})}};function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Re=cm(cm(cm(cm({},_L),NL),HL),y_),Hm=new WeakMap,w_=e=>Hm.get(e)||!1,C_=(e,t,n)=>{var r=Hm.get(e)||!1;Hm.set(e,!0);try{t(),n()}finally{Hm.set(e,r)}};function iS(e,t,n){var r=f3.get(e)||[],i=h3.get(e)||new Set,o,s,u=g=>{if(g){var v=g.join(",");s.has(v)||(s.add(v),o.push(g))}};if(n){o=[],s=new Set;for(var c of r){var h=n(c);u(h)}}else o=r,s=i;for(var d of t)u(d);f3.set(e,o),h3.set(e,s)}var x_=(e,t)=>{for(var n of F.pathRefs(e))kL.transform(n,t);for(var r of F.pointRefs(e))OL.transform(r,t);for(var i of F.rangeRefs(e))IL.transform(i,t);if(!w_(e)){var o=K.operationCanTransformPath(t)?s=>K.transform(s,t):void 0;iS(e,e.getDirtyPaths(t),o)}Re.transform(e,t),e.operations.push(t),F.normalize(e,{operation:t}),t.type==="set_selection"&&(e.marks=null),Tg.get(e)||(Tg.set(e,!0),Promise.resolve().then(()=>{Tg.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},E_=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=t;return K.levels(n)}case"insert_node":{var{node:r,path:i}=t,o=K.levels(i),s=ot.isText(r)?[]:Array.from(Ke.nodes(r),se=>{var[,me]=se;return i.concat(me)});return[...o,...s]}case"merge_node":{var{path:u}=t,c=K.ancestors(u),h=K.previous(u);return[...c,h]}case"move_node":{var{path:d,newPath:g}=t;if(K.equals(d,g))return[];var v=[],y=[];for(var x of K.ancestors(d)){var E=K.transform(x,t);v.push(E)}for(var T of K.ancestors(g)){var D=K.transform(T,t);y.push(D)}var S=y[y.length-1],R=g[g.length-1],L=S.concat(R);return[...v,...y,L]}case"remove_node":{var{path:k}=t,W=K.ancestors(k);return[...W]}case"split_node":{var{path:z}=t,Y=K.levels(z),te=K.next(z);return[...Y,te]}default:return[]}},P_=e=>{var{selection:t}=e;return t?Ke.fragment(e,t):[]},S_=(e,t,n)=>{var[r,i]=t;if(!ot.isText(r)){if(ut.isElement(r)&&r.children.length===0){var o={text:""};Re.insertNodes(e,o,{at:i.concat(0),voids:!0});return}for(var s=F.isEditor(r)?!1:ut.isElement(r)&&(e.isInline(r)||r.children.length===0||ot.isText(r.children[0])||e.isInline(r.children[0])),u=0,c=0;c<r.children.length;c++,u++){var h=Ke.get(e,i);if(!ot.isText(h)){var d=h.children[u],g=h.children[u-1],v=c===r.children.length-1,y=ot.isText(d)||ut.isElement(d)&&e.isInline(d);if(y!==s)y?n!=null&&n.fallbackElement?Re.wrapNodes(e,n.fallbackElement(),{at:i.concat(u),voids:!0}):Re.removeNodes(e,{at:i.concat(u),voids:!0}):Re.unwrapNodes(e,{at:i.concat(u),voids:!0}),u--;else if(ut.isElement(d)){if(e.isInline(d)){if(g==null||!ot.isText(g)){var x={text:""};Re.insertNodes(e,x,{at:i.concat(u),voids:!0}),u++}else if(v){var E={text:""};Re.insertNodes(e,E,{at:i.concat(u+1),voids:!0}),u++}}}else{if(!ot.isText(d)&&!("children"in d)){var T=d;T.children=[]}g!=null&&ot.isText(g)&&(ot.equals(d,g,{loose:!0})?(Re.mergeNodes(e,{at:i.concat(u),voids:!0}),u--):g.text===""?(Re.removeNodes(e,{at:i.concat(u-1),voids:!0}),u--):d.text===""&&(Re.removeNodes(e,{at:i.concat(u),voids:!0}),u--))}}}}},T_=(e,t)=>{var{iteration:n,initialDirtyPathsLength:r}=t,i=r*42;if(n>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},D_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:i="lowest",at:o=t.selection,match:s}=n;if(o){var u=F.path(t,o);if(!Ee.isRange(o)||K.equals(o.focus.path,o.anchor.path)){if(u.length===0)return;u=K.parent(u)}var c=i==="lowest",[h]=F.levels(t,{at:u,voids:r,match:s,reverse:c});return h}};function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var A_=(e,t,n)=>{var{selection:r}=e;if(r){var i=(g,v)=>{if(!ot.isText(g))return!1;var[y,x]=F.parent(e,v);return!e.isVoid(y)||e.markableVoid(y)},o=Ee.isExpanded(r),s=!1;if(!o){var[u,c]=F.node(e,r);if(u&&i(u,c)){var[h]=F.parent(e,c);s=h&&e.markableVoid(h)}}if(o||s)Re.setNodes(e,{[t]:n},{match:i,split:!0,voids:!0});else{var d=vw(vw({},F.marks(e)||{}),{},{[t]:n});e.marks=d,Tg.get(e)||e.onChange()}}};function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ww(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var B_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.point(t,n,{edge:"end"}),o=F.end(t,[]),s={anchor:i,focus:o},{distance:u=1}=r,c=0,h;for(var d of F.positions(t,ww(ww({},r),{},{at:s}))){if(c>u)break;c!==0&&(h=d),c++}return h};function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var R_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.start(t,[]),o=F.point(t,n,{edge:"start"}),s={anchor:i,focus:o},{distance:u=1}=r,c=0,h;for(var d of F.positions(t,xw(xw({},r),{},{at:s,reverse:!0}))){if(c>u)break;c!==0&&(h=d),c++}return h},M_=(e,t)=>{var{selection:n}=e;n&&Ee.isCollapsed(n)&&Re.delete(e,{unit:t,reverse:!0})},b_=(e,t)=>{var{selection:n}=e;n&&Ee.isCollapsed(n)&&Re.delete(e,{unit:t})},k_=function(t){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t;r&&Ee.isExpanded(r)&&Re.delete(t,{reverse:n==="backward"})},O_=(e,t)=>[F.start(e,t),F.end(e,t)];function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var I_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return F.above(t,Pw(Pw({},n),{},{match:r=>ut.isElement(r)&&F.isElementReadOnly(t,r)}))},F_=(e,t)=>F.point(e,t,{edge:"end"}),L_=(e,t)=>{var n=F.path(e,t,{edge:"start"});return F.node(e,n)},__=(e,t)=>{var n=F.range(e,t);return Ke.fragment(e,n)};function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var N_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return F.above(t,Tw(Tw({},n),{},{match:r=>ut.isElement(r)&&F.isVoid(t,r)}))},H_=(e,t)=>t.children.some(n=>ut.isElement(n)&&F.isBlock(e,n)),G_=(e,t)=>t.children.some(n=>ot.isText(n)||F.isInline(e,n)),j_=(e,t)=>Ke.has(e,t),$_=(e,t)=>t.children.every(n=>ot.isText(n)),W_=e=>{Re.splitNodes(e,{always:!0})},z_=(e,t,n)=>{Re.insertNodes(e,t,n)},V_=e=>{Re.splitNodes(e,{always:!0})};function Dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var X_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i,marks:o}=t;if(i){if(o){var s=U_({text:n},o);Re.insertNodes(t,s,{at:r.at,voids:r.voids})}else Re.insertText(t,n,r);t.marks=null}},K_=(e,t)=>!e.isInline(t),Y_=(e,t,n)=>F.isStart(e,t,n)||F.isEnd(e,t,n),q_=(e,t)=>{var{children:n}=t,[r]=n;return n.length===0||n.length===1&&ot.isText(r)&&r.text===""&&!e.isVoid(t)},Z_=(e,t,n)=>{var r=F.end(e,n);return pn.equals(t,r)},Q_=e=>{var t=nS.get(e);return t===void 0?!0:t},J_=(e,t,n)=>{if(t.offset!==0)return!1;var r=F.start(e,n);return pn.equals(t,r)},eN=(e,t)=>{var n=F.path(e,t,{edge:"end"});return F.node(e,n)},tN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.path(t,n,r),o=Ke.leaf(t,i);return[o,i]};function nN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,reverse:r=!1,voids:i=!1}=t,{match:o}=t;if(o==null&&(o=()=>!0),!!n){var s=[],u=F.path(e,n);for(var[c,h]of Ke.levels(e,u))if(o(c,h)&&(s.push([c,h]),!i&&ut.isElement(c)&&F.isVoid(e,c)))break;r&&s.reverse(),yield*s}}()}var rN=["text"],iN=["text"],oN=function(t){var{marks:n,selection:r}=t;if(!r)return null;var{anchor:i,focus:o}=r;if(n)return n;if(Ee.isExpanded(r)){var s=Ee.isBackward(r);s&&([o,i]=[i,o]);var u=F.isEnd(t,i,i.path);if(u){var c=F.after(t,i);c&&(i=c)}var[h]=F.nodes(t,{match:ot.isText,at:{anchor:i,focus:o}});if(h){var[d]=h,g=Ku(d,rN);return g}else return{}}var{path:v}=i,[y]=F.leaf(t,v);if(i.offset===0){var x=F.previous(t,{at:v,match:ot.isText}),E=F.above(t,{match:k=>ut.isElement(k)&&F.isVoid(t,k)&&t.markableVoid(k)});if(!E){var T=F.above(t,{match:k=>ut.isElement(k)&&F.isBlock(t,k)});if(x&&T){var[D,S]=x,[,R]=T;K.isAncestor(R,S)&&(y=D)}}}var L=Ku(y,iN);return L},sN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var u=F.after(t,s,{voids:i});if(u){var[,c]=F.last(t,[]),h=[u.path,c];if(K.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(o==null)if(K.isPath(s)){var[d]=F.parent(t,s);o=v=>d.children.includes(v)}else o=()=>!0;var[g]=F.nodes(t,{at:h,match:o,mode:r,voids:i});return g}}},aN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.path(t,n,r),o=Ke.get(t,i);return[o,i]};function uN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,mode:r="all",universal:i=!1,reverse:o=!1,voids:s=!1,pass:u,ignoreNonSelectable:c=!1}=t,{match:h}=t;if(h||(h=()=>!0),!!n){var d,g;if(UL.isSpan(n))d=n[0],g=n[1];else{var v=F.path(e,n,{edge:"start"}),y=F.path(e,n,{edge:"end"});d=o?y:v,g=o?v:y}var x=Ke.nodes(e,{reverse:o,from:d,to:g,pass:k=>{var[W,z]=k;return u&&u([W,z])?!0:ut.isElement(W)?!!(!s&&(F.isVoid(e,W)||F.isElementReadOnly(e,W))||c&&!F.isSelectable(e,W)):!1}}),E=[],T;for(var[D,S]of x)if(!(c&&ut.isElement(D)&&!F.isSelectable(e,D))){var R=T&&K.compare(S,T[1])===0;if(!(r==="highest"&&R)){if(!h(D,S)){if(i&&!R&&ot.isText(D))return;continue}if(r==="lowest"&&R){T=[D,S];continue}var L=r==="lowest"?T:[D,S];L&&(i?E.push(L):yield L),T=[D,S]}}r==="lowest"&&T&&(i?E.push(T):yield T),i&&(yield*E)}}()}var lN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:i}=n,o=d=>f3.get(d)||[],s=d=>h3.get(d)||new Set,u=d=>{var g=o(d).pop(),v=g.join(",");return s(d).delete(v),g};if(F.isNormalizing(t)){if(r){var c=Array.from(Ke.nodes(t),d=>{var[,g]=d;return g}),h=new Set(c.map(d=>d.join(",")));f3.set(t,c),h3.set(t,h)}o(t).length!==0&&F.withoutNormalizing(t,()=>{for(var d of o(t))if(Ke.has(t,d)){var g=F.node(t,d),[v,y]=g;ut.isElement(v)&&v.children.length===0&&t.normalizeNode(g,{operation:i})}for(var x=o(t),E=x.length,T=0;x.length!==0;){if(!t.shouldNormalize({dirtyPaths:x,iteration:T,initialDirtyPathsLength:E,operation:i}))return;var D=u(t);if(Ke.has(t,D)){var S=F.node(t,D);t.normalizeNode(S,{operation:i})}T++,x=o(t)}})}},cN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.path(t,n,r),o=K.parent(i),s=F.node(t,o);return s},fN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:u}=o,c=F.pathRefs(t);return c.delete(o),o.current=null,u}},s=F.pathRefs(t);return s.add(o),o},hN=e=>{var t=ew.get(e);return t||(t=new Set,ew.set(e,t)),t},dN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:i,edge:o}=r;if(K.isPath(n)){if(o==="start"){var[,s]=Ke.first(t,n);n=s}else if(o==="end"){var[,u]=Ke.last(t,n);n=u}}return Ee.isRange(n)&&(o==="start"?n=Ee.start(n):o==="end"?n=Ee.end(n):n=K.common(n.anchor.path,n.focus.path)),pn.isPoint(n)&&(n=n.path),i!=null&&(n=n.slice(0,i)),n},gN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:u}=o,c=F.pointRefs(t);return c.delete(o),o.current=null,u}},s=F.pointRefs(t);return s.add(o),o},pN=e=>{var t=tw.get(e);return t||(t=new Set,tw.set(e,t)),t},mN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:i="start"}=r;if(K.isPath(n)){var o;if(i==="end"){var[,s]=Ke.last(t,n);o=s}else{var[,u]=Ke.first(t,n);o=u}var c=Ke.get(t,o);if(!ot.isText(c))throw new Error("Cannot get the ".concat(i," point in the node at path [").concat(n,"] because it has no ").concat(i," text node."));return{path:o,offset:i==="end"?c.text.length:0}}if(Ee.isRange(n)){var[h,d]=Ee.edges(n);return i==="start"?h:d}return n};function vN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,unit:r="offset",reverse:i=!1,voids:o=!1,ignoreNonSelectable:s=!1}=t;if(!n)return;var u=F.range(e,n),[c,h]=Ee.edges(u),d=i?h:c,g=!1,v="",y=0,x=0,E=0;for(var[T,D]of F.nodes(e,{at:n,reverse:i,voids:o,ignoreNonSelectable:s})){if(ut.isElement(T)){if(!o&&(e.isVoid(T)||e.isElementReadOnly(T))){yield F.start(e,D);continue}if(e.isInline(T))continue;if(F.hasInlines(e,T)){var S=K.isAncestor(D,h.path)?h:F.end(e,D),R=K.isAncestor(D,c.path)?c:F.start(e,D);v=F.string(e,{anchor:R,focus:S},{voids:o}),g=!0}}if(ot.isText(T)){var L=K.equals(D,d.path);for(L?(x=i?d.offset:T.text.length-d.offset,E=d.offset):(x=T.text.length,E=i?x:0),(L||g||r==="offset")&&(yield{path:D,offset:E},g=!1);;){if(y===0){if(v==="")break;y=k(v,r,i),v=n8(v,y,i)[1]}if(E=i?E-y:E+y,x=x-y,x<0){y=-x;break}y=0,yield{path:D,offset:E}}}}function k(W,z,Y){return z==="character"?t8(W,Y):z==="word"?QL(W,Y):z==="line"||z==="block"?W.length:1}}()}var yN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var u=F.before(t,s,{voids:i});if(u){var[,c]=F.first(t,[]),h=[u.path,c];if(K.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(o==null)if(K.isPath(s)){var[d]=F.parent(t,s);o=v=>d.children.includes(v)}else o=()=>!0;var[g]=F.nodes(t,{reverse:!0,at:h,match:o,mode:r,voids:i});return g}}},wN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:u}=o,c=F.rangeRefs(t);return c.delete(o),o.current=null,u}},s=F.rangeRefs(t);return s.add(o),o},CN=e=>{var t=nw.get(e);return t||(t=new Set,nw.set(e,t)),t},xN=(e,t,n)=>{if(Ee.isRange(t)&&!n)return t;var r=F.start(e,t),i=F.end(e,n||t);return{anchor:r,focus:i}};function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var PN=(e,t)=>{var{selection:n}=e;if(n){var r=(d,g)=>{if(!ot.isText(d))return!1;var[v,y]=F.parent(e,g);return!e.isVoid(v)||e.markableVoid(v)},i=Ee.isExpanded(n),o=!1;if(!i){var[s,u]=F.node(e,n);if(s&&r(s,u)){var[c]=F.parent(e,u);o=c&&e.markableVoid(c)}}if(i||o)Re.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var h=EN({},F.marks(e)||{});delete h[t],e.marks=h,Tg.get(e)||e.onChange()}}},SN=(e,t)=>{nS.set(e,t)},TN=(e,t)=>F.point(e,t,{edge:"start"}),DN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,o=F.range(t,n),[s,u]=Ee.edges(o),c="";for(var[h,d]of F.nodes(t,{at:o,match:ot.isText,voids:i})){var g=h.text;K.equals(d,u.path)&&(g=g.slice(0,u.offset)),K.equals(d,s.path)&&(g=g.slice(s.offset)),c+=g}return c},AN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,[o,s]=Ee.edges(n);if(o.offset!==0||s.offset!==0||Ee.isCollapsed(n)||K.hasPrevious(s.path))return n;var u=F.above(t,{at:s,match:x=>ut.isElement(x)&&F.isBlock(t,x),voids:i}),c=u?u[1]:[],h=F.start(t,o),d={anchor:h,focus:s},g=!0;for(var[v,y]of F.nodes(t,{at:d,match:ot.isText,reverse:!0,voids:i})){if(g){g=!1;continue}if(v.text!==""||K.isBefore(y,c)){s={path:y,offset:v.text.length};break}}return{anchor:o,focus:s}},BN=(e,t)=>{var n=F.isNormalizing(e);F.setNormalizing(e,!1);try{t()}finally{F.setNormalizing(e,n)}F.normalize(e)},RN=(e,t,n)=>{var[r,i]=t;return ut.isElement(r)&&F.isEmpty(e,r)||ot.isText(r)&&r.text===""&&i[i.length-1]!==0},MN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var r,i,{reverse:o=!1,unit:s="character",distance:u=1,voids:c=!1}=n,{at:h=t.selection,hanging:d=!1}=n;if(h){var g=!1;if(Ee.isRange(h)&&Ee.isCollapsed(h)&&(g=!0,h=h.anchor),pn.isPoint(h)){var v=F.void(t,{at:h,mode:"highest"});if(!c&&v){var[,y]=v;h=y}else{var x={unit:s,distance:u},E=o?F.before(t,h,x)||F.start(t,[]):F.after(t,h,x)||F.end(t,[]);h={anchor:h,focus:E},d=!0}}if(K.isPath(h)){Re.removeNodes(t,{at:h,voids:c});return}if(!Ee.isCollapsed(h)){if(!d){var[,T]=Ee.edges(h),D=F.end(t,[]);pn.equals(T,D)||(h=F.unhangRange(t,h,{voids:c}))}var[S,R]=Ee.edges(h),L=F.above(t,{match:Ye=>ut.isElement(Ye)&&F.isBlock(t,Ye),at:S,voids:c}),k=F.above(t,{match:Ye=>ut.isElement(Ye)&&F.isBlock(t,Ye),at:R,voids:c}),W=L&&k&&!K.equals(L[1],k[1]),z=K.equals(S.path,R.path),Y=c?null:(r=F.void(t,{at:S,mode:"highest"}))!==null&&r!==void 0?r:F.elementReadOnly(t,{at:S,mode:"highest"}),te=c?null:(i=F.void(t,{at:R,mode:"highest"}))!==null&&i!==void 0?i:F.elementReadOnly(t,{at:R,mode:"highest"});if(Y){var se=F.before(t,S);se&&L&&K.isAncestor(L[1],se.path)&&(S=se)}if(te){var me=F.after(t,R);me&&k&&K.isAncestor(k[1],me.path)&&(R=me)}var ne=[],oe;for(var ve of F.nodes(t,{at:h,voids:c})){var[ge,Be]=ve;oe&&K.compare(Be,oe)===0||(!c&&ut.isElement(ge)&&(F.isVoid(t,ge)||F.isElementReadOnly(t,ge))||!K.isCommon(Be,S.path)&&!K.isCommon(Be,R.path))&&(ne.push(ve),oe=Be)}var Pe=Array.from(ne,Ye=>{var[,Dt]=Ye;return F.pathRef(t,Dt)}),he=F.pointRef(t,S),ue=F.pointRef(t,R),we="";if(!z&&!Y){var U=he.current,[xe]=F.leaf(t,U),{path:Ie}=U,{offset:Le}=S,$e=xe.text.slice(Le);$e.length>0&&(t.apply({type:"remove_text",path:Ie,offset:Le,text:$e}),we=$e)}if(Pe.reverse().map(Ye=>Ye.unref()).filter(Ye=>Ye!==null).forEach(Ye=>Re.removeNodes(t,{at:Ye,voids:c})),!te){var Fe=ue.current,[Ze]=F.leaf(t,Fe),{path:et}=Fe,Q=z?S.offset:0,Se=Ze.text.slice(Q,R.offset);Se.length>0&&(t.apply({type:"remove_text",path:et,offset:Q,text:Se}),we=Se)}!z&&W&&ue.current&&he.current&&Re.mergeNodes(t,{at:ue.current,hanging:!0,voids:c}),g&&o&&s==="character"&&we.length>1&&we.match(/[\u0980-\u09FF\u0E00-\u0E7F]+/)&&Re.insertText(t,we.slice(0,we.length-u));var Te=he.unref(),ke=ue.unref(),vt=o?Te||ke:ke||Te;n.at==null&&vt&&Re.select(t,vt)}}})},bN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1}=r,{at:s=e8(t),batchDirty:u=!0}=r;if(n.length){if(Ee.isRange(s))if(i||(s=F.unhangRange(t,s,{voids:o})),Ee.isCollapsed(s))s=s.anchor;else{var[,c]=Ee.edges(s);if(!o&&F.void(t,{at:c}))return;var h=F.pointRef(t,c);Re.delete(t,{at:s}),s=h.unref()}else K.isPath(s)&&(s=F.start(t,s));if(!(!o&&F.void(t,{at:s}))){var d=F.above(t,{at:s,match:Ie=>ut.isElement(Ie)&&F.isInline(t,Ie),mode:"highest",voids:o});if(d){var[,g]=d;if(F.isEnd(t,s,g)){var v=F.after(t,g);s=v}else if(F.isStart(t,s,g)){var y=F.before(t,g);s=y}}var x=F.above(t,{match:Ie=>ut.isElement(Ie)&&F.isBlock(t,Ie),at:s,voids:o}),[,E]=x,T=F.isStart(t,s,E),D=F.isEnd(t,s,E),S=T&&D,[,R]=Ke.first({children:n},[]),[,L]=Ke.last({children:n},[]),k=Ie=>{var[Le,$e]=Ie,Fe=$e.length===0;return Fe?!1:S?!0:!(!T&&K.isAncestor($e,R)&&ut.isElement(Le)&&!t.isVoid(Le)&&!t.isInline(Le)||!D&&K.isAncestor($e,L)&&ut.isElement(Le)&&!t.isVoid(Le)&&!t.isInline(Le))},W=!0,z=[],Y=[],te=[];for(var se of Ke.nodes({children:n},{pass:k})){var[me,ne]=se;W&&ut.isElement(me)&&!t.isInline(me)&&!K.isAncestor(ne,R)&&(W=!1),k(se)&&(ut.isElement(me)&&!t.isInline(me)?(W=!1,Y.push(me)):W?z.push(me):te.push(me))}var[oe]=F.nodes(t,{at:s,match:Ie=>ot.isText(Ie)||F.isInline(t,Ie),mode:"highest",voids:o}),[,ve]=oe,ge=F.isStart(t,s,ve),Be=F.isEnd(t,s,ve),Pe=F.pathRef(t,D&&!te.length?K.next(E):E),he=F.pathRef(t,Be?K.next(ve):ve),ue=te.length>0;Re.splitNodes(t,{at:s,match:Ie=>ue?ut.isElement(Ie)&&F.isBlock(t,Ie):ot.isText(Ie)||F.isInline(t,Ie),mode:ue?"lowest":"highest",always:ue&&(!T||z.length>0)&&(!D||te.length>0),voids:o});var we=F.pathRef(t,!ge||ge&&Be?K.next(ve):ve);if(Re.insertNodes(t,z,{at:we.current,match:Ie=>ot.isText(Ie)||F.isInline(t,Ie),mode:"highest",voids:o,batchDirty:u}),S&&!z.length&&Y.length&&!te.length&&Re.delete(t,{at:E,voids:o}),Re.insertNodes(t,Y,{at:Pe.current,match:Ie=>ut.isElement(Ie)&&F.isBlock(t,Ie),mode:"lowest",voids:o,batchDirty:u}),Re.insertNodes(t,te,{at:he.current,match:Ie=>ot.isText(Ie)||F.isInline(t,Ie),mode:"highest",voids:o,batchDirty:u}),!r.at){var U;if(te.length>0&&he.current?U=K.previous(he.current):Y.length>0&&Pe.current?U=K.previous(Pe.current):we.current&&(U=K.previous(we.current)),U){var xe=F.end(t,U);Re.select(t,xe)}}we.unref(),Pe.unref(),he.unref()}}})},kN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:i}=t;if(i){if(r==="anchor")Re.select(t,i.anchor);else if(r==="focus")Re.select(t,i.focus);else if(r==="start"){var[o]=Ee.edges(i);Re.select(t,o)}else if(r==="end"){var[,s]=Ee.edges(i);Re.select(t,s)}}else return},ON=e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},IN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t,{distance:i=1,unit:o="character",reverse:s=!1}=n,{edge:u=null}=n;if(r){u==="start"&&(u=Ee.isBackward(r)?"focus":"anchor"),u==="end"&&(u=Ee.isBackward(r)?"anchor":"focus");var{anchor:c,focus:h}=r,d={distance:i,unit:o,ignoreNonSelectable:!0},g={};if(u==null||u==="anchor"){var v=s?F.before(t,c,d):F.after(t,c,d);v&&(g.anchor=v)}if(u==null||u==="focus"){var y=s?F.before(t,h,d):F.after(t,h,d);y&&(g.focus=y)}Re.setSelection(t,g)}},FN=(e,t)=>{var{selection:n}=e;if(t=F.range(e,t),n){Re.setSelection(e,t);return}if(!Ee.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Pr.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})};function Bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var LN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i}=t,{edge:o="both"}=r;if(i){o==="start"&&(o=Ee.isBackward(i)?"focus":"anchor"),o==="end"&&(o=Ee.isBackward(i)?"anchor":"focus");var{anchor:s,focus:u}=i,c=o==="anchor"?s:u;Re.setSelection(t,{[o==="anchor"?"anchor":"focus"]:Rw(Rw({},c),n)})}},_N=(e,t)=>{var{selection:n}=e,r={},i={};if(n){for(var o in t)(o==="anchor"&&t.anchor!=null&&!pn.equals(t.anchor,n.anchor)||o==="focus"&&t.focus!=null&&!pn.equals(t.focus,n.focus)||o!=="anchor"&&o!=="focus"&&t[o]!==n[o])&&(r[o]=n[o],i[o]=t[o]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:i})}},NN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest",batchDirty:u=!0}=r,{at:c,match:h,select:d}=r;if(Ke.isNode(n)&&(n=[n]),n.length!==0){var[g]=n;if(c||(c=e8(t),d!==!1&&(d=!0)),d==null&&(d=!1),Ee.isRange(c))if(i||(c=F.unhangRange(t,c,{voids:o})),Ee.isCollapsed(c))c=c.anchor;else{var[,v]=Ee.edges(c),y=F.pointRef(t,v);Re.delete(t,{at:c}),c=y.unref()}if(pn.isPoint(c)){h==null&&(ot.isText(g)?h=se=>ot.isText(se):t.isInline(g)?h=se=>ot.isText(se)||F.isInline(t,se):h=se=>ut.isElement(se)&&F.isBlock(t,se));var[x]=F.nodes(t,{at:c.path,match:h,mode:s,voids:o});if(x){var[,E]=x,T=F.pathRef(t,E),D=F.isEnd(t,c,E);Re.splitNodes(t,{at:c,match:h,mode:s,voids:o});var S=T.unref();c=D?K.next(S):S}else return}var R=K.parent(c),L=c[c.length-1];if(!(!o&&F.void(t,{at:R}))){if(u){var k=[],W=K.levels(R);C_(t,()=>{var se=function(){var oe=R.concat(L);L++;var ve={type:"insert_node",path:oe,node:me};t.apply(ve),c=K.next(c),k.push(ve),ot.isText(me)?W.push(oe):W.push(...Array.from(Ke.nodes(me),ge=>{var[,Be]=ge;return oe.concat(Be)}))};for(var me of n)se()},()=>{iS(t,W,se=>{var me=se;for(var ne of k)if(K.operationCanTransformPath(ne)&&(me=K.transform(me,ne),!me))return null;return me})})}else for(var z of n){var Y=R.concat(L);L++,t.apply({type:"insert_node",path:Y,node:z}),c=K.next(c)}if(c=K.previous(c),d){var te=F.end(t,c);te&&Re.select(t,te)}}}})},HN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{at:r=t.selection,mode:i="lowest",voids:o=!1}=n,{match:s}=n;if(s==null&&(s=K.isPath(r)?O0(t,r):L=>ut.isElement(L)&&F.isBlock(t,L)),!!r){var u=F.nodes(t,{at:r,match:s,mode:i,voids:o}),c=Array.from(u,L=>{var[,k]=L;return F.pathRef(t,k)});for(var h of c){var d=h.unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var g=F.node(t,K.parent(d)),[v,y]=g,x=d[d.length-1],{length:E}=v.children;if(E===1){var T=K.next(y);Re.moveNodes(t,{at:d,to:T,voids:o}),Re.removeNodes(t,{at:y,voids:o})}else if(x===0)Re.moveNodes(t,{at:d,to:y,voids:o});else if(x===E-1){var D=K.next(y);Re.moveNodes(t,{at:d,to:D,voids:o})}else{var S=K.next(d),R=K.next(y);Re.splitNodes(t,{at:S,voids:o}),Re.moveNodes(t,{at:d,to:R,voids:o})}}}})},GN=["text"],jN=["children"],oS=(e,t)=>{if(ut.isElement(t)){var n=t;return F.isVoid(e,t)?!0:n.children.length===1?oS(e,n.children[0]):!1}else return!F.isEditor(t)},$N=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{match:r,at:i=t.selection}=n,{hanging:o=!1,voids:s=!1,mode:u="lowest"}=n;if(i){if(r==null)if(K.isPath(i)){var[c]=F.parent(t,i);r=se=>c.children.includes(se)}else r=se=>ut.isElement(se)&&F.isBlock(t,se);if(!o&&Ee.isRange(i)&&(i=F.unhangRange(t,i,{voids:s})),Ee.isRange(i))if(Ee.isCollapsed(i))i=i.anchor;else{var[,h]=Ee.edges(i),d=F.pointRef(t,h);Re.delete(t,{at:i}),i=d.unref(),n.at==null&&Re.select(t,i)}var[g]=F.nodes(t,{at:i,match:r,voids:s,mode:u}),v=F.previous(t,{at:i,match:r,voids:s,mode:u});if(!(!g||!v)){var[y,x]=g,[E,T]=v;if(!(x.length===0||T.length===0)){var D=K.next(T),S=K.common(x,T),R=K.isSibling(x,T),L=Array.from(F.levels(t,{at:x}),se=>{var[me]=se;return me}).slice(S.length).slice(0,-1),k=F.above(t,{at:x,mode:"highest",match:se=>L.includes(se)&&oS(t,se)}),W=k&&F.pathRef(t,k[1]),z,Y;if(ot.isText(y)&&ot.isText(E)){var te=Ku(y,GN);Y=E.text.length,z=te}else if(ut.isElement(y)&&ut.isElement(E)){var te=Ku(y,jN);Y=E.children.length,z=te}else throw new Error("Cannot merge the node at path [".concat(x,"] with the previous sibling because it is not the same kind: ").concat(Pr.stringify(y)," ").concat(Pr.stringify(E)));R||Re.moveNodes(t,{at:x,to:D,voids:s}),W&&Re.removeNodes(t,{at:W.current,voids:s}),F.shouldMergeNodesRemovePrevNode(t,v,g)?Re.removeNodes(t,{at:T,voids:s}):t.apply({type:"merge_node",path:D,position:Y,properties:z}),W&&W.unref()}}}})},WN=(e,t)=>{F.withoutNormalizing(e,()=>{var{to:n,at:r=e.selection,mode:i="lowest",voids:o=!1}=t,{match:s}=t;if(r){s==null&&(s=K.isPath(r)?O0(e,r):y=>ut.isElement(y)&&F.isBlock(e,y));var u=F.pathRef(e,n),c=F.nodes(e,{at:r,match:s,mode:i,voids:o}),h=Array.from(c,y=>{var[,x]=y;return F.pathRef(e,x)});for(var d of h){var g=d.unref(),v=u.current;g.length!==0&&e.apply({type:"move_node",path:g,newPath:v}),u.current&&K.isSibling(v,g)&&K.isAfter(v,g)&&(u.current=K.next(u.current))}u.unref()}})},zN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{hanging:r=!1,voids:i=!1,mode:o="lowest"}=n,{at:s=t.selection,match:u}=n;if(s){u==null&&(u=K.isPath(s)?O0(t,s):y=>ut.isElement(y)&&F.isBlock(t,y)),!r&&Ee.isRange(s)&&(s=F.unhangRange(t,s,{voids:i}));var c=F.nodes(t,{at:s,match:u,mode:o,voids:i}),h=Array.from(c,y=>{var[,x]=y;return F.pathRef(t,x)});for(var d of h){var g=d.unref();if(g){var[v]=F.node(t,g);t.apply({type:"remove_node",path:g,node:v})}}}})},VN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(t,()=>{var{match:i,at:o=t.selection,compare:s,merge:u}=r,{hanging:c=!1,mode:h="lowest",split:d=!1,voids:g=!1}=r;if(o){if(i==null&&(i=K.isPath(o)?O0(t,o):Y=>ut.isElement(Y)&&F.isBlock(t,Y)),!c&&Ee.isRange(o)&&(o=F.unhangRange(t,o,{voids:g})),d&&Ee.isRange(o)){if(Ee.isCollapsed(o)&&F.leaf(t,o.anchor)[0].text.length>0)return;var v=F.rangeRef(t,o,{affinity:"inward"}),[y,x]=Ee.edges(o),E=h==="lowest"?"lowest":"highest",T=F.isEnd(t,x,x.path);Re.splitNodes(t,{at:x,match:i,mode:E,voids:g,always:!T});var D=F.isStart(t,y,y.path);Re.splitNodes(t,{at:y,match:i,mode:E,voids:g,always:!D}),o=v.unref(),r.at==null&&Re.select(t,o)}s||(s=(Y,te)=>Y!==te);for(var[S,R]of F.nodes(t,{at:o,match:i,mode:h,voids:g})){var L={},k={};if(R.length!==0){var W=!1;for(var z in n)z==="children"||z==="text"||s(n[z],S[z])&&(W=!0,S.hasOwnProperty(z)&&(L[z]=S[z]),u?n[z]!=null&&(k[z]=u(S[z],n[z])):n[z]!=null&&(k[z]=n[z]));W&&t.apply({type:"set_node",path:R,properties:L,newProperties:k})}}}})},UN=(e,t)=>{if(Ee.isCollapsed(t))return t.anchor;var[,n]=Ee.edges(t),r=F.pointRef(e,n);return Re.delete(e,{at:t}),r.unref()},XN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection,height:u=0,always:c=!1}=n;if(o==null&&(o=ue=>ut.isElement(ue)&&F.isBlock(t,ue)),Ee.isRange(s)&&(s=UN(t,s)),K.isPath(s)){var h=s,d=F.point(t,h),[g]=F.parent(t,h);o=ue=>ue===g,u=d.path.length-h.length+1,s=d,c=!0}if(s){var v=F.pointRef(t,s,{affinity:"backward"}),y;try{var[x]=F.nodes(t,{at:s,match:o,mode:r,voids:i});if(!x)return;var E=F.void(t,{at:s,mode:"highest"}),T=0;if(!i&&E){var[D,S]=E;if(ut.isElement(D)&&t.isInline(D)){var R=F.after(t,S);if(!R){var L={text:""},k=K.next(S);Re.insertNodes(t,L,{at:k,voids:i}),R=F.point(t,k)}s=R,c=!0}var W=s.path.length-S.length;u=W+1,c=!0}y=F.pointRef(t,s);var z=s.path.length-u,[,Y]=x,te=s.path.slice(0,z),se=u===0?s.offset:s.path[z]+T;for(var[me,ne]of F.levels(t,{at:te,reverse:!0,voids:i})){var oe=!1;if(ne.length<Y.length||ne.length===0||!i&&ut.isElement(me)&&F.isVoid(t,me))break;var ve=v.current,ge=F.isEnd(t,ve,ne);if(c||!v||!F.isEdge(t,ve,ne)){oe=!0;var Be=Ke.extractProps(me);t.apply({type:"split_node",path:ne,position:se,properties:Be})}se=ne[ne.length-1]+(oe||ge?1:0)}if(n.at==null){var Pe=y.current||F.end(t,[]);Re.select(t,Pe)}}finally{var he;v.unref(),(he=y)===null||he===void 0||he.unref()}}})},KN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var i={};for(var o of n)i[o]=null;Re.setNodes(t,i,r)},YN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{mode:r="lowest",split:i=!1,voids:o=!1}=n,{at:s=t.selection,match:u}=n;if(s){u==null&&(u=K.isPath(s)?O0(t,s):y=>ut.isElement(y)&&F.isBlock(t,y)),K.isPath(s)&&(s=F.range(t,s));var c=Ee.isRange(s)?F.rangeRef(t,s):null,h=F.nodes(t,{at:s,match:u,mode:r,voids:o}),d=Array.from(h,y=>{var[,x]=y;return F.pathRef(t,x)}).reverse(),g=function(){var x=v.unref(),[E]=F.node(t,x),T=F.range(t,x);i&&c&&(T=Ee.intersection(c.current,T)),Re.liftNodes(t,{at:T,match:D=>ut.isAncestor(E)&&E.children.includes(D),voids:o})};for(var v of d)g();c&&c.unref()}})};function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mw(Object(n),!0).forEach(function(r){Wi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var qN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(t,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{match:u,at:c=t.selection}=r;if(c){if(u==null&&(K.isPath(c)?u=O0(t,c):t.isInline(n)?u=T=>ut.isElement(T)&&F.isInline(t,T)||ot.isText(T):u=T=>ut.isElement(T)&&F.isBlock(t,T)),o&&Ee.isRange(c)){var[h,d]=Ee.edges(c),g=F.rangeRef(t,c,{affinity:"inward"});Re.splitNodes(t,{at:d,match:u,voids:s}),Re.splitNodes(t,{at:h,match:u,voids:s}),c=g.unref(),r.at==null&&Re.select(t,c)}var v=Array.from(F.nodes(t,{at:c,match:t.isInline(n)?T=>ut.isElement(T)&&F.isBlock(t,T):T=>F.isEditor(T),mode:"lowest",voids:s})),y=function(){var D=Ee.isRange(c)?Ee.intersection(c,F.range(t,E)):c;if(!D)return 0;var S=Array.from(F.nodes(t,{at:D,match:u,mode:i,voids:s}));if(S.length>0){var[R]=S,L=S[S.length-1],[,k]=R,[,W]=L;if(k.length===0&&W.length===0)return 0;var z=K.equals(k,W)?K.parent(k):K.common(k,W),Y=F.range(t,k,W),te=F.node(t,z),[se]=te,me=z.length+1,ne=K.next(W.slice(0,me)),oe=bw(bw({},n),{},{children:[]});Re.insertNodes(t,oe,{at:ne,voids:s}),Re.moveNodes(t,{at:Y,match:ve=>ut.isAncestor(se)&&se.children.includes(ve),to:ne.concat(0),voids:s})}},x;for(var[,E]of v)x=y()}})},ZN=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return x_(e,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return A_(e,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return M_(e,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return b_(e,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return k_(e,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return P_(e,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return W_(e,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return V_(e,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return bN(e,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return z_(e,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return X_(e,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return S_(e,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return PN(e,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return E_(e,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return T_(e,...r)},above:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return D_(e,...r)},after:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return B_(e,...r)},before:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return R_(e,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return kN(e,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return MN(e,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ON(e,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return O_(e,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return I_(e,...r)},end:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return F_(e,...r)},first:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return L_(e,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return __(e,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return oN(e,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return H_(e,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return G_(e,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return j_(e,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $_(e,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return NN(e,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return K_(e,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Y_(e,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return q_(e,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Z_(e,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Q_(e,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return J_(e,...r)},last:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return eN(e,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return tN(e,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return nN(e,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return HN(e,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $N(e,...r)},move:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return IN(e,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return WN(e,...r)},next:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return sN(e,...r)},node:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return aN(e,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return uN(e,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return lN(e,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cN(e,...r)},path:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return dN(e,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return fN(e,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return hN(e,...r)},point:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return mN(e,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return gN(e,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return pN(e,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vN(e,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return yN(e,...r)},range:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xN(e,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return wN(e,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return CN(e,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return zN(e,...r)},select:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return FN(e,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return VN(e,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return SN(e,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return LN(e,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _N(e,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return XN(e,...r)},start:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return TN(e,...r)},string:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return DN(e,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return AN(e,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return KN(e,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return YN(e,...r)},void:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return N_(e,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return BN(e,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qN(e,...r)},shouldMergeNodesRemovePrevNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return RN(e,...r)}};return e},c5,kw;function QN(){if(kw)return c5;kw=1,c5=i;var e="֑-߿יִ-﷽ﹰ-ﻼ",t="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",n=new RegExp("^[^"+t+"]*["+e+"]"),r=new RegExp("^[^"+e+"]*["+t+"]");function i(o){return o=String(o||""),n.test(o)?"rtl":r.test(o)?"ltr":"neutral"}return c5}var JN=QN();const sS=vc(JN),Ow=e=>typeof e=="object"&&e!=null&&e.nodeType===1,Iw=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",fm=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return Iw(n.overflowY,t)||Iw(n.overflowX,t)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(e)}return!1},hm=(e,t,n,r,i,o,s,u)=>o<e&&s>t||o>e&&s<t?0:o<=e&&u<=n||s>=t&&u>=n?o-e-r:s>t&&u<n||o<e&&u>n?s-t+i:0,eH=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},Fw=(e,t)=>{var n,r,i,o;if(typeof document>"u")return[];const{scrollMode:s,block:u,inline:c,boundary:h,skipOverflowHiddenElements:d}=t,g=typeof h=="function"?h:Be=>Be!==h;if(!Ow(e))throw new TypeError("Invalid target");const v=document.scrollingElement||document.documentElement,y=[];let x=e;for(;Ow(x)&&g(x);){if(x=eH(x),x===v){y.push(x);break}x!=null&&x===document.body&&fm(x)&&!fm(document.documentElement)||x!=null&&fm(x,d)&&y.push(x)}const E=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,T=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:D,scrollY:S}=window,{height:R,width:L,top:k,right:W,bottom:z,left:Y}=e.getBoundingClientRect(),{top:te,right:se,bottom:me,left:ne}=(Be=>{const Pe=window.getComputedStyle(Be);return{top:parseFloat(Pe.scrollMarginTop)||0,right:parseFloat(Pe.scrollMarginRight)||0,bottom:parseFloat(Pe.scrollMarginBottom)||0,left:parseFloat(Pe.scrollMarginLeft)||0}})(e);let oe=u==="start"||u==="nearest"?k-te:u==="end"?z+me:k+R/2-te+me,ve=c==="center"?Y+L/2-ne+se:c==="end"?W+se:Y-ne;const ge=[];for(let Be=0;Be<y.length;Be++){const Pe=y[Be],{height:he,width:ue,top:we,right:U,bottom:xe,left:Ie}=Pe.getBoundingClientRect();if(s==="if-needed"&&k>=0&&Y>=0&&z<=T&&W<=E&&(Pe===v&&!fm(Pe)||k>=we&&z<=xe&&Y>=Ie&&W<=U))return ge;const Le=getComputedStyle(Pe),$e=parseInt(Le.borderLeftWidth,10),Fe=parseInt(Le.borderTopWidth,10),Ze=parseInt(Le.borderRightWidth,10),et=parseInt(Le.borderBottomWidth,10);let Q=0,Se=0;const Te="offsetWidth"in Pe?Pe.offsetWidth-Pe.clientWidth-$e-Ze:0,ke="offsetHeight"in Pe?Pe.offsetHeight-Pe.clientHeight-Fe-et:0,vt="offsetWidth"in Pe?Pe.offsetWidth===0?0:ue/Pe.offsetWidth:0,Ye="offsetHeight"in Pe?Pe.offsetHeight===0?0:he/Pe.offsetHeight:0;if(v===Pe)Q=u==="start"?oe:u==="end"?oe-T:u==="nearest"?hm(S,S+T,T,Fe,et,S+oe,S+oe+R,R):oe-T/2,Se=c==="start"?ve:c==="center"?ve-E/2:c==="end"?ve-E:hm(D,D+E,E,$e,Ze,D+ve,D+ve+L,L),Q=Math.max(0,Q+S),Se=Math.max(0,Se+D);else{Q=u==="start"?oe-we-Fe:u==="end"?oe-xe+et+ke:u==="nearest"?hm(we,xe,he,Fe,et+ke,oe,oe+R,R):oe-(we+he/2)+ke/2,Se=c==="start"?ve-Ie-$e:c==="center"?ve-(Ie+ue/2)+Te/2:c==="end"?ve-U+Ze+Te:hm(Ie,U,ue,$e,Ze+Te,ve,ve+L,L);const{scrollLeft:Dt,scrollTop:cn}=Pe;Q=Ye===0?0:Math.max(0,Math.min(cn+Q/Ye,Pe.scrollHeight-he/Ye+ke)),Se=vt===0?0:Math.max(0,Math.min(Dt+Se/vt,Pe.scrollWidth-ue/vt+Te)),oe+=cn-Q,ve+=Dt-Se}ge.push({el:Pe,top:Q,left:Se})}return ge},tH=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function nH(e,t){if(!e.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((i=>typeof i=="object"&&typeof i.behavior=="function")(t))return t.behavior(Fw(e,t));const r=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:i,top:o,left:s}of Fw(e,tH(t))){const u=o-n.top+n.bottom,c=s-n.left+n.right;i.scroll({top:u,left:c,behavior:r})}}var aS=globalThis.Node,rH=globalThis.Text,r8=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,iH=e=>dc(e)&&e.nodeType===8,ws=e=>dc(e)&&e.nodeType===1,dc=e=>{var t=r8(e);return!!t&&e instanceof t.Node},M6=e=>{var t=e&&e.anchorNode&&r8(e.anchorNode);return!!t&&e instanceof t.Selection},uS=e=>dc(e)&&e.nodeType===3,oH=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,sH=e=>{var[t,n]=e;if(ws(t)&&t.childNodes.length){var r=n===t.childNodes.length,i=r?n-1:n;for([t,i]=lS(t,i,r?"backward":"forward"),r=i<n;ws(t)&&t.childNodes.length;){var o=r?t.childNodes.length-1:0;t=uH(t,o,r?"backward":"forward")}n=r&&t.textContent!=null?t.textContent.length:0}return[t,n]},aH=e=>{for(var t=e&&e.parentNode;t;){if(t.toString()==="[object ShadowRoot]")return!0;t=t.parentNode}return!1},lS=(e,t,n)=>{for(var{childNodes:r}=e,i=r[t],o=t,s=!1,u=!1;(iH(i)||ws(i)&&i.childNodes.length===0||ws(i)&&i.getAttribute("contenteditable")==="false")&&!(s&&u);){if(o>=r.length){s=!0,o=t-1,n="backward";continue}if(o<0){u=!0,o=t+1,n="forward";continue}i=r[o],t=o,o+=n==="forward"?1:-1}return[i,t]},uH=(e,t,n)=>{var[r]=lS(e,t,n);return r},cS=e=>{var t="";if(uS(e)&&e.nodeValue)return e.nodeValue;if(ws(e)){for(var n of Array.from(e.childNodes))t+=cS(n);var r=getComputedStyle(e).getPropertyValue("display");(r==="block"||r==="list"||e.tagName==="BR")&&(t+=`
`)}return t},lH=/data-slate-fragment="(.+?)"/m,cH=e=>{var t=e.getData("text/html"),[,n]=t.match(lH)||[];return n},Dg=e=>e.getSelection!=null?e.getSelection():document.getSelection(),i8=(e,t,n)=>{var{target:r}=t;if(ws(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:i}=Gt.getWindow(e);if(i.contains(r))return Gt.hasDOMNode(e,r,{editable:!0});var o=n.find(s=>{var{addedNodes:u,removedNodes:c}=s;for(var h of u)if(h===r||h.contains(r))return!0;for(var d of c)if(d===r||d.contains(r))return!0});return!o||o===t?!1:i8(e,o,n)},fH=()=>{for(var e=document.activeElement;(t=e)!==null&&t!==void 0&&t.shadowRoot&&(n=e.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var t,n,r;e=(r=e)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return e},Lw=(e,t)=>!!(e.compareDocumentPosition(t)&aS.DOCUMENT_POSITION_PRECEDING),hH=(e,t)=>!!(e.compareDocumentPosition(t)&aS.DOCUMENT_POSITION_FOLLOWING),f5,h5,dH=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,_w=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Hi=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Zd=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),bf=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),gH=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),fS=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),pH=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),mH=Hi&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),vH=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),yH=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),wH=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Gm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((f5=navigator.userAgent.match(/Version\/(\d+)/))!==null&&f5!==void 0&&f5[1]&&parseInt((h5=navigator.userAgent.match(/Version\/(\d+)/))===null||h5===void 0?void 0:h5[1],10)<17);var Kl=(!pH||!mH)&&!gH&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}function CH(e,t){if(zg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xH(e){var t=CH(e,"string");return zg(t)==="symbol"?t:String(t)}function o8(e,t,n){return t=xH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var EH=0;class hS{constructor(){o8(this,"id",void 0),this.id="".concat(EH++)}}var o0=new WeakMap,Qd=new WeakMap,Ag=new WeakMap,dS=new WeakMap,jm=new WeakMap,b6=new WeakMap,Vg=new WeakMap,jf=new WeakMap,d3=new WeakMap,sv=new WeakMap,k6=new WeakMap,tc=new WeakMap,Ff=new WeakMap,Bg=new WeakMap,O6=new WeakMap,s8=new WeakMap,ia=new WeakMap,Hu=new WeakMap,ho=new WeakMap,Zl=new WeakMap,Ql=new WeakMap,gS=new WeakMap,y0=Symbol("placeholder"),pS=Symbol("mark-placeholder"),Gt={androidPendingDiffs:e=>ho.get(e),androidScheduleFlush:e=>{var t;(t=s8.get(e))===null||t===void 0||t()},blur:e=>{var t=Gt.toDOMNode(e,e),n=Gt.findDocumentOrShadowRoot(e);tc.set(e,!1),n.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,n=Gt.findDocumentOrShadowRoot(e),r=Dg(n);r&&r.rangeCount>0&&r.removeAllRanges(),t&&Re.deselect(e)},findDocumentOrShadowRoot:e=>{var t=Gt.toDOMNode(e,e),n=t.getRootNode();return n instanceof Document||n instanceof ShadowRoot?n:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:n,clientY:r,target:i}=t;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o=Gt.toSlateNode(e,t.target),s=Gt.findPath(e,o);if(ut.isElement(o)&&F.isVoid(e,o)){var u=i.getBoundingClientRect(),c=e.isInline(o)?n-u.left<u.left+u.width-n:r-u.top<u.top+u.height-r,h=F.point(e,s,{edge:c?"start":"end"}),d=c?F.before(e,h):F.after(e,h);if(d){var g=F.range(e,d);return g}}var v,{document:y}=Gt.getWindow(e);if(y.caretRangeFromPoint)v=y.caretRangeFromPoint(n,r);else{var x=y.caretPositionFromPoint(n,r);x&&(v=y.createRange(),v.setStart(x.offsetNode,x.offset),v.setEnd(x.offsetNode,x.offset))}if(!v)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var E=Gt.toSlateRange(e,v,{exactMatch:!1,suppressThrow:!1});return E},findKey:(e,t)=>{var n=d3.get(t);return n||(n=new hS,d3.set(t,n)),n},findPath:(e,t)=>{for(var n=[],r=t;;){var i=Ag.get(r);if(i==null){if(F.isEditor(r))return n;break}var o=Qd.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error("Unable to find the path for Slate node: ".concat(Pr.stringify(t)))},focus:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!tc.get(t)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(t.operations.length>0){setTimeout(()=>{Gt.focus(t,{retries:n.retries-1})},10);return}var r=Gt.toDOMNode(t,t),i=Gt.findDocumentOrShadowRoot(t);if(i.activeElement!==r){if(t.selection&&i instanceof Document){var o=Dg(i),s=Gt.toDOMRange(t,t.selection);o==null||o.removeAllRanges(),o==null||o.addRange(s)}t.selection||Re.select(t,F.start(t,[])),tc.set(t,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var t=dS.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=r,o=Gt.toDOMNode(t,t),s;try{s=ws(n)?n:n.parentElement}catch(u){if(u instanceof Error&&!u.message.includes('Permission denied to access property "nodeType"'))throw u}return s?s.closest("[data-slate-editor]")===o&&(!i||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===o||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,t)=>dc(t)&&Gt.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:n,focus:r}=t;return F.hasPath(e,n.path)&&F.hasPath(e,r.path)},hasSelectableTarget:(e,t)=>Gt.hasEditableTarget(e,t)||Gt.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>dc(t)&&Gt.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!Ff.get(e),isFocused:e=>!!tc.get(e),isReadOnly:e=>!!k6.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(k6.get(e))return!1;var n=Gt.hasTarget(e,t)&&Gt.toSlateNode(e,t);return ut.isElement(n)&&F.isVoid(e,n)},setFragmentData:(e,t,n)=>e.setFragmentData(t,n),toDOMNode:(e,t)=>{var n=sv.get(e),r=F.isEditor(t)?jm.get(e):n==null?void 0:n.get(Gt.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Pr.stringify(t)));return r},toDOMPoint:(e,t)=>{var[n]=F.node(e,t.path),r=Gt.toDOMNode(e,n),i;F.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o="[data-slate-string], [data-slate-zero-width]",s=Array.from(r.querySelectorAll(o)),u=0,c=0;c<s.length;c++){var h=s[c],d=h.childNodes[0];if(!(d==null||d.textContent==null)){var{length:g}=d.textContent,v=h.getAttribute("data-slate-length"),y=v==null?g:parseInt(v,10),x=u+y,E=s[c+1];if(t.offset===x&&E!==null&&E!==void 0&&E.hasAttribute("data-slate-mark-placeholder")){var T,D=E.childNodes[0];i=[D instanceof rH?D:E,(T=E.textContent)!==null&&T!==void 0&&T.startsWith("\uFEFF")?1:0];break}if(t.offset<=x){var S=Math.min(g,Math.max(0,t.offset-u));i=[d,S];break}u=x}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Pr.stringify(t)));return i},toDOMRange:(e,t)=>{var{anchor:n,focus:r}=t,i=Ee.isBackward(t),o=Gt.toDOMPoint(e,n),s=Ee.isCollapsed(t)?o:Gt.toDOMPoint(e,r),u=Gt.getWindow(e),c=u.document.createRange(),[h,d]=i?s:o,[g,v]=i?o:s,y=ws(h)?h:h.parentElement,x=!!y.getAttribute("data-slate-zero-width"),E=ws(g)?g:g.parentElement,T=!!E.getAttribute("data-slate-zero-width");return c.setStart(h,x?1:d),c.setEnd(g,T?1:v),c},toSlateNode:(e,t)=>{var n=ws(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?Vg.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(e,t,n)=>{var{exactMatch:r,suppressThrow:i,searchDirection:o="backward"}=n,[s,u]=r?t:sH(t),c=s.parentNode,h=null,d=0;if(c){var g,v,y=Gt.toDOMNode(e,e),x=c.closest('[data-slate-void="true"]'),E=x&&y.contains(x)?x:null,T=c.closest('[contenteditable="false"]'),D=T&&y.contains(T)?T:null,S=c.closest("[data-slate-leaf]"),R=null;if(S){if(h=S.closest('[data-slate-node="text"]'),h){var L=Gt.getWindow(e),k=L.document.createRange();k.setStart(h,0),k.setEnd(s,u);var W=k.cloneContents(),z=[...Array.prototype.slice.call(W.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(W.querySelectorAll("[contenteditable=false]"))];z.forEach(Ie=>{if(Hi&&!r&&Ie.hasAttribute("data-slate-zero-width")&&Ie.textContent.length>0&&Ie.textContext!=="\uFEFF"){Ie.textContent.startsWith("\uFEFF")&&(Ie.textContent=Ie.textContent.slice(1));return}Ie.parentNode.removeChild(Ie)}),d=W.textContent.length,R=h}}else if(E){for(var Y=E.querySelectorAll("[data-slate-leaf]"),te=0;te<Y.length;te++){var se=Y[te];if(Gt.hasDOMNode(e,se)){S=se;break}}S?(h=S.closest('[data-slate-node="text"]'),R=S,d=R.textContent.length,R.querySelectorAll("[data-slate-zero-width]").forEach(Ie=>{d-=Ie.textContent.length})):d=1}else if(D){var me=Ie=>Ie?Ie.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],ne=D.closest('[data-slate-node="element"]');if(o==="forward"){var oe,ve=[...me(ne),...me(ne==null?void 0:ne.nextElementSibling)];S=(oe=ve.find(Ie=>hH(D,Ie)))!==null&&oe!==void 0?oe:null}else{var ge,Be=[...me(ne==null?void 0:ne.previousElementSibling),...me(ne)];S=(ge=Be.findLast(Ie=>Lw(D,Ie)))!==null&&ge!==void 0?ge:null}S&&(h=S.closest('[data-slate-node="text"]'),R=S,o==="forward"?d=0:(d=R.textContent.length,R.querySelectorAll("[data-slate-zero-width]").forEach(Ie=>{d-=Ie.textContent.length})))}R&&d===R.textContent.length&&Hi&&R.getAttribute("data-slate-zero-width")==="z"&&(g=R.textContent)!==null&&g!==void 0&&g.startsWith("\uFEFF")&&(c.hasAttribute("data-slate-zero-width")||Zd&&(v=R.textContent)!==null&&v!==void 0&&v.endsWith(`

`))&&d--}if(Hi&&!h&&!r){var Pe=c.hasAttribute("data-slate-node")?c:c.closest("[data-slate-node]");if(Pe&&Gt.hasDOMNode(e,Pe,{editable:!0})){var he=Gt.toSlateNode(e,Pe),{path:ue,offset:we}=F.start(e,Gt.findPath(e,he));return Pe.querySelector("[data-slate-leaf]")||(we=u),{path:ue,offset:we}}}if(!h){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var U=Gt.toSlateNode(e,h),xe=Gt.findPath(e,U);return{path:xe,offset:d}},toSlateRange:(e,t,n)=>{var r,{exactMatch:i,suppressThrow:o}=n,s=M6(t)?t.anchorNode:t.startContainer,u,c,h,d,g;if(s)if(M6(t)){if(Zd&&t.rangeCount>1){h=t.focusNode;var v=t.getRangeAt(0),y=t.getRangeAt(t.rangeCount-1);if(h instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement&&y.startContainer instanceof HTMLTableRowElement){let W=function(z){return z.childElementCount>0?W(z.children[0]):z};var x=v.startContainer,E=y.startContainer,T=W(x.children[v.startOffset]),D=W(E.children[y.startOffset]);d=0,D.childNodes.length>0?u=D.childNodes[0]:u=D,T.childNodes.length>0?h=T.childNodes[0]:h=T,D instanceof HTMLElement?c=D.innerHTML.length:c=0}else v.startContainer===h?(u=y.endContainer,c=y.endOffset,d=v.startOffset):(u=v.startContainer,c=v.endOffset,d=y.startOffset)}else u=t.anchorNode,c=t.anchorOffset,h=t.focusNode,d=t.focusOffset;fS&&aH(u)||Zd?g=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:g=t.isCollapsed}else u=t.startContainer,c=t.startOffset,h=t.endContainer,d=t.endOffset,g=t.collapsed;if(u==null||h==null||c==null||d==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));Zd&&(r=h.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&d===h.textContent.length&&d--;var S=Gt.toSlatePoint(e,[u,c],{exactMatch:i,suppressThrow:o});if(!S)return null;var R=Lw(u,h)||u===h&&d<c,L=g?S:Gt.toSlatePoint(e,[h,d],{exactMatch:i,suppressThrow:o,searchDirection:R?"forward":"backward"});if(!L)return null;var k={anchor:S,focus:L};return Ee.isExpanded(k)&&Ee.isForward(k)&&ws(h)&&F.void(e,{at:k.focus,mode:"highest"})&&(k=F.unhangRange(e,k,{voids:!0})),k}};function PH(e,t){var{path:n,diff:r}=t;if(!F.hasPath(e,n))return!1;var i=Ke.get(e,n);if(!ot.isText(i))return!1;if(r.start!==i.text.length||r.text.length===0)return i.text.slice(r.start,r.start+r.text.length)===r.text;var o=K.next(n);if(!F.hasPath(e,o))return!1;var s=Ke.get(e,o);return ot.isText(s)&&s.text.startsWith(r.text)}function mS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((i,o)=>i.slice(0,o.start)+o.text+i.slice(o.end),e)}function SH(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}function TH(e,t,n){for(var r=Math.min(e.length,t.length,n),i=0;i<r;i++)if(e.charAt(e.length-i-1)!==t.charAt(t.length-i-1))return i;return r}function vS(e,t){var{start:n,end:r,text:i}=t,o=e.slice(n,r),s=SH(o,i),u=Math.min(o.length-s,i.length-s),c=TH(o,i,u),h={start:n+s,end:r-c,text:i.slice(s,i.length-c)};return h.start===h.end&&h.text.length===0?null:h}function DH(e,t,n){var r=Math.min(t.start,n.start),i=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),o=mS(e,t,n),s=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-i),u=o.slice(r,s),c=Math.max(t.end,n.end-t.text.length+(t.end-t.start));return vS(e,{start:r,end:c,text:u})}function AH(e){var{path:t,diff:n}=e;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function I6(e,t){var{path:n,offset:r}=t;if(!F.hasPath(e,n))return null;var i=Ke.get(e,n);if(!ot.isText(i))return null;var o=F.above(e,{match:u=>ut.isElement(u)&&F.isBlock(e,u),at:n});if(!o)return null;for(;r>i.text.length;){var s=F.next(e,{at:n,match:ot.isText});if(!s||!K.isDescendant(s[1],o[1]))return null;r-=i.text.length,i=s[0],n=s[1]}return{path:n,offset:r}}function Nw(e,t){var n=I6(e,t.anchor);if(!n)return null;if(Ee.isCollapsed(t))return{anchor:n,focus:n};var r=I6(e,t.focus);return r?{anchor:n,focus:r}:null}function F6(e,t,n){var r=ho.get(e),i=r==null?void 0:r.find(d=>{var{path:g}=d;return K.equals(g,t.path)});if(!i||t.offset<=i.diff.start)return pn.transform(t,n,{affinity:"backward"});var{diff:o}=i;if(t.offset<=o.start+o.text.length){var s={path:t.path,offset:o.start},u=pn.transform(s,n,{affinity:"backward"});return u?{path:u.path,offset:u.offset+t.offset-o.start}:null}var c={path:t.path,offset:t.offset-o.text.length+o.end-o.start},h=pn.transform(c,n,{affinity:"backward"});return h?n.type==="split_node"&&K.equals(n.path,t.path)&&c.offset<n.position&&o.start<n.position?h:{path:h.path,offset:h.offset+o.text.length-o.end+o.start}:null}function Hw(e,t,n){var r=F6(e,t.anchor,n);if(!r)return null;if(Ee.isCollapsed(t))return{anchor:r,focus:r};var i=F6(e,t.focus,n);return i?{anchor:r,focus:i}:null}function BH(e,t){var{path:n,diff:r,id:i}=e;switch(t.type){case"insert_text":return!K.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:i,path:n};case"remove_text":return!K.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:i,path:n};case"split_node":return!K.equals(t.path,n)||t.position>=r.end?{diff:r,id:i,path:K.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:i,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:i,path:K.transform(n,t,{affinity:"forward"})};case"merge_node":return K.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:i,path:K.transform(n,t)}:{diff:r,id:i,path:K.transform(n,t)}}var o=K.transform(n,t);return o?{diff:r,path:o,id:i}:null}var Gw=(e,t)=>{var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},jw=(e,t,n)=>{var r=Gt.toDOMRange(e,t).getBoundingClientRect(),i=Gt.toDOMRange(e,n).getBoundingClientRect();return Gw(r,i)&&Gw(i,r)},RH=(e,t)=>{var n=F.range(e,Ee.end(t)),r=Array.from(F.positions(e,{at:t})),i=0,o=r.length,s=Math.floor(o/2);if(jw(e,F.range(e,r[i]),n))return F.range(e,r[i],n);if(r.length<2)return F.range(e,r[r.length-1],n);for(;s!==r.length&&s!==i;)jw(e,F.range(e,r[s]),n)?o=s:i=s,s=Math.floor((i+o)/2);return F.range(e,r[i],n)};function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ww(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$w(Object(n),!0).forEach(function(r){o8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var MH=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=t,{apply:i,onChange:o,deleteBackward:s,addMark:u,removeMark:c}=r;return sv.set(r,new WeakMap),r.addMark=(h,d)=>{var g,v;(g=s8.get(r))===null||g===void 0||g(),!ia.get(r)&&(v=ho.get(r))!==null&&v!==void 0&&v.length&&ia.set(r,null),Hu.delete(r),u(h,d)},r.removeMark=h=>{var d;!ia.get(r)&&(d=ho.get(r))!==null&&d!==void 0&&d.length&&ia.set(r,null),Hu.delete(r),c(h)},r.deleteBackward=h=>{if(h!=="line")return s(h);if(r.selection&&Ee.isCollapsed(r.selection)){var d=F.above(r,{match:x=>ut.isElement(x)&&F.isBlock(r,x),at:r.selection});if(d){var[,g]=d,v=F.range(r,g,r.selection.anchor),y=RH(r,v);Ee.isCollapsed(y)||Re.delete(r,{at:y})}}},r.apply=h=>{var d=[],g=[],v=ho.get(r);if(v!=null&&v.length){var y=v.map(ve=>BH(ve,h)).filter(Boolean);ho.set(r,y)}var x=Ql.get(r);x&&Ql.set(r,Hw(r,x,h));var E=Zl.get(r);if(E!=null&&E.at){var T=pn.isPoint(E==null?void 0:E.at)?F6(r,E.at,h):Hw(r,E.at,h);Zl.set(r,T?Ww(Ww({},E),{},{at:T}):null)}switch(h.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...$d(r,h.path));break}case"set_selection":{var D;(D=Bg.get(r))===null||D===void 0||D.unref(),Bg.delete(r);break}case"insert_node":case"remove_node":{d.push(...$d(r,K.parent(h.path)));break}case"merge_node":{var S=K.previous(h.path);d.push(...$d(r,S));break}case"move_node":{var R=K.common(K.parent(h.path),K.parent(h.newPath));d.push(...$d(r,R));var L;K.isBefore(h.path,h.newPath)?(d.push(...$d(r,K.parent(h.path))),L=h.newPath):(d.push(...$d(r,K.parent(h.newPath))),L=h.path);var k=Ke.get(t,K.parent(L)),W=Gt.findKey(r,k),z=F.pathRef(r,K.parent(L));g.push([z,W]);break}}switch(i(h),h.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":o0.set(r,!0)}for(var[Y,te]of d){var[se]=F.node(r,Y);d3.set(se,te)}for(var[me,ne]of g){if(me.current){var[oe]=F.node(r,me.current);d3.set(oe,ne)}me.unref()}},r.setFragmentData=h=>{var{selection:d}=r;if(d){var[g,v]=Ee.edges(d),y=F.void(r,{at:g.path}),x=F.void(r,{at:v.path});if(!(Ee.isCollapsed(d)&&!y)){var E=Gt.toDOMRange(r,d),T=E.cloneContents(),D=T.childNodes[0];if(T.childNodes.forEach(se=>{se.textContent&&se.textContent.trim()!==""&&(D=se)}),x){var[S]=x,R=E.cloneRange(),L=Gt.toDOMNode(r,S);R.setEndAfter(L),T=R.cloneContents()}if(y&&(D=T.querySelector("[data-slate-spacer]")),Array.from(T.querySelectorAll("[data-slate-zero-width]")).forEach(se=>{var me=se.getAttribute("data-slate-zero-width")==="n";se.textContent=me?`
`:""}),uS(D)){var k=D.ownerDocument.createElement("span");k.style.whiteSpace="pre",k.appendChild(D),T.appendChild(k),D=k}var W=r.getFragment(),z=JSON.stringify(W),Y=window.btoa(encodeURIComponent(z));D.setAttribute("data-slate-fragment",Y),h.setData("application/".concat(n),Y);var te=T.ownerDocument.createElement("div");return te.appendChild(T),te.setAttribute("hidden","true"),T.ownerDocument.body.appendChild(te),h.setData("text/html",te.innerHTML),h.setData("text/plain",cS(te)),T.ownerDocument.body.removeChild(te),h}}},r.insertData=h=>{r.insertFragmentData(h)||r.insertTextData(h)},r.insertFragmentData=h=>{var d=h.getData("application/".concat(n))||cH(h);if(d){var g=decodeURIComponent(window.atob(d)),v=JSON.parse(g);return r.insertFragment(v),!0}return!1},r.insertTextData=h=>{var d=h.getData("text/plain");if(d){var g=d.split(/\r\n|\r|\n/),v=!1;for(var y of g)v&&Re.splitNodes(r,{always:!0}),r.insertText(y),v=!0;return!0}return!1},r.onChange=h=>{var d=O6.get(r);d&&d(h),o(h)},r},$d=(e,t)=>{var n=[];for(var[r,i]of F.levels(e,{at:t})){var o=Gt.findKey(e,r);n.push([i,o])}return n},bH=3,kH={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},OH={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},IH={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Jn=e=>{var t=kH[e],n=OH[e],r=IH[e],i=t&&nn.isHotkey(t),o=n&&nn.isHotkey(n),s=r&&nn.isHotkey(r);return u=>!!(i&&i(u)||_w&&o&&o(u)||!_w&&s&&s(u))},sr={isBold:Jn("bold"),isCompose:Jn("compose"),isMoveBackward:Jn("moveBackward"),isMoveForward:Jn("moveForward"),isDeleteBackward:Jn("deleteBackward"),isDeleteForward:Jn("deleteForward"),isDeleteLineBackward:Jn("deleteLineBackward"),isDeleteLineForward:Jn("deleteLineForward"),isDeleteWordBackward:Jn("deleteWordBackward"),isDeleteWordForward:Jn("deleteWordForward"),isExtendBackward:Jn("extendBackward"),isExtendForward:Jn("extendForward"),isExtendLineBackward:Jn("extendLineBackward"),isExtendLineForward:Jn("extendLineForward"),isItalic:Jn("italic"),isMoveLineBackward:Jn("moveLineBackward"),isMoveLineForward:Jn("moveLineForward"),isMoveWordBackward:Jn("moveWordBackward"),isMoveWordForward:Jn("moveWordForward"),isRedo:Jn("redo"),isSoftBreak:Jn("insertSoftBreak"),isSplitBlock:Jn("splitBlock"),isTransposeCharacter:Jn("transposeCharacter"),isUndo:Jn("undo")};function FH(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function zw(e,t){if(e==null)return{};var n=FH(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var LH=["anchor","focus"],_H=["anchor","focus"];function Vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Uw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vw(Object(n),!0).forEach(function(r){o8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var NH=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n]),yS=(e,t)=>{var n=zw(e,LH),r=zw(t,_H);return e[y0]===t[y0]&&NH(n,r)},a8=(e,t)=>{if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(!Ee.equals(r,i)||!yS(r,i))return!1}return!0},wS=(e,t)=>{if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.anchor.offset!==i.anchor.offset||r.focus.offset!==i.focus.offset||!yS(r,i))return!1}return!0},HH=(e,t,n)=>{var r=Array.from(t.children,()=>[]);if(n.length===0)return r;var i=Gt.findPath(e,t),o=i.length,s=F.range(e,i),u=new Array(t.children.length),c=R=>{var L=u[R];if(L)return L;var k=F.range(e,[...i,R]);return u[R]=k,k};for(var h of n){var d=Ee.intersection(s,h);if(d)for(var[g,v]=Ee.edges(d),y=g.path[o],x=v.path[o],E=y;E<=x;E++){var T=r[E];if(T){var D=c(E),S=Ee.intersection(D,h);S&&T.push(Uw(Uw({},h),S))}}}return r},$f=[],GH=function(){return $f.some(function(e){return e.activeTargets.length>0})},jH=function(){return $f.some(function(e){return e.skippedTargets.length>0})},Xw="ResizeObserver loop completed with undelivered notifications.",$H=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Xw}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Xw),window.dispatchEvent(e)},Ug;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Ug||(Ug={}));var Wf=function(e){return Object.freeze(e)},WH=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,Wf(this)}return e}(),CS=function(){function e(t,n,r,i){return this.x=t,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Wf(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,i=t.top,o=t.right,s=t.bottom,u=t.left,c=t.width,h=t.height;return{x:n,y:r,top:i,right:o,bottom:s,left:u,width:c,height:h}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),u8=function(e){return e instanceof SVGElement&&"getBBox"in e},xS=function(e){if(u8(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||e.getClientRects().length)},Kw=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},zH=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Rg=typeof window<"u"?window:{},dm=new WeakMap,Yw=/auto|scroll/,VH=/^tb|vertical/,UH=/msie|trident/i.test(Rg.navigator&&Rg.navigator.userAgent),Oa=function(e){return parseFloat(e||"0")},s0=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new WH((n?t:e)||0,(n?e:t)||0)},qw=Wf({devicePixelContentBoxSize:s0(),borderBoxSize:s0(),contentBoxSize:s0(),contentRect:new CS(0,0,0,0)}),ES=function(e,t){if(t===void 0&&(t=!1),dm.has(e)&&!t)return dm.get(e);if(xS(e))return dm.set(e,qw),qw;var n=getComputedStyle(e),r=u8(e)&&e.ownerSVGElement&&e.getBBox(),i=!UH&&n.boxSizing==="border-box",o=VH.test(n.writingMode||""),s=!r&&Yw.test(n.overflowY||""),u=!r&&Yw.test(n.overflowX||""),c=r?0:Oa(n.paddingTop),h=r?0:Oa(n.paddingRight),d=r?0:Oa(n.paddingBottom),g=r?0:Oa(n.paddingLeft),v=r?0:Oa(n.borderTopWidth),y=r?0:Oa(n.borderRightWidth),x=r?0:Oa(n.borderBottomWidth),E=r?0:Oa(n.borderLeftWidth),T=g+h,D=c+d,S=E+y,R=v+x,L=u?e.offsetHeight-R-e.clientHeight:0,k=s?e.offsetWidth-S-e.clientWidth:0,W=i?T+S:0,z=i?D+R:0,Y=r?r.width:Oa(n.width)-W-k,te=r?r.height:Oa(n.height)-z-L,se=Y+T+k+S,me=te+D+L+R,ne=Wf({devicePixelContentBoxSize:s0(Math.round(Y*devicePixelRatio),Math.round(te*devicePixelRatio),o),borderBoxSize:s0(se,me,o),contentBoxSize:s0(Y,te,o),contentRect:new CS(g,c,Y,te)});return dm.set(e,ne),ne},PS=function(e,t,n){var r=ES(e,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case Ug.DEVICE_PIXEL_CONTENT_BOX:return s;case Ug.BORDER_BOX:return i;default:return o}},XH=function(){function e(t){var n=ES(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=Wf([n.borderBoxSize]),this.contentBoxSize=Wf([n.contentBoxSize]),this.devicePixelContentBoxSize=Wf([n.devicePixelContentBoxSize])}return e}(),SS=function(e){if(xS(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},KH=function(){var e=1/0,t=[];$f.forEach(function(s){if(s.activeTargets.length!==0){var u=[];s.activeTargets.forEach(function(h){var d=new XH(h.target),g=SS(h.target);u.push(d),h.lastReportedSize=PS(h.target,h.observedBox),g<e&&(e=g)}),t.push(function(){s.callback.call(s.observer,u,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var i=r[n];i()}return e},Zw=function(e){$f.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(SS(i.target)>e?n.activeTargets.push(i):n.skippedTargets.push(i))})})},YH=function(){var e=0;for(Zw(e);GH();)e=KH(),Zw(e);return jH()&&$H(),e>0},d5,TS=[],qH=function(){return TS.splice(0).forEach(function(e){return e()})},ZH=function(e){if(!d5){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return qH()}).observe(n,r),d5=function(){n.textContent="".concat(t?t--:t++)}}TS.push(e),d5()},QH=function(e){ZH(function(){requestAnimationFrame(e)})},$m=0,JH=function(){return!!$m},eG=250,tG={attributes:!0,characterData:!0,childList:!0,subtree:!0},Qw=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Jw=function(e){return e===void 0&&(e=0),Date.now()+e},g5=!1,nG=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=eG),!g5){g5=!0;var r=Jw(t);QH(function(){var i=!1;try{i=YH()}finally{if(g5=!1,t=r-Jw(),!JH())return;i?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,tG)};document.body?n():Rg.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Qw.forEach(function(n){return Rg.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Qw.forEach(function(n){return Rg.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),L6=new nG,eC=function(e){!$m&&e>0&&L6.start(),$m+=e,!$m&&L6.stop()},rG=function(e){return!u8(e)&&!zH(e)&&getComputedStyle(e).display==="inline"},iG=function(){function e(t,n){this.target=t,this.observedBox=n||Ug.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=PS(this.target,this.observedBox,!0);return rG(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),oG=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),gm=new WeakMap,tC=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},pm=function(){function e(){}return e.connect=function(t,n){var r=new oG(t,n);gm.set(t,r)},e.observe=function(t,n,r){var i=gm.get(t),o=i.observationTargets.length===0;tC(i.observationTargets,n)<0&&(o&&$f.push(i),i.observationTargets.push(new iG(n,r&&r.box)),eC(1),L6.schedule())},e.unobserve=function(t,n){var r=gm.get(t),i=tC(r.observationTargets,n),o=r.observationTargets.length===1;i>=0&&(o&&$f.splice($f.indexOf(r),1),r.observationTargets.splice(i,1),eC(-1))},e.disconnect=function(t){var n=this,r=gm.get(t);r.observationTargets.slice().forEach(function(i){return n.unobserve(t,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),sG=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");pm.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Kw(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");pm.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Kw(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");pm.unobserve(this,t)},e.prototype.disconnect=function(){pm.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),l8=EE();const aG=vc(l8);function uG(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function g3(e,t){if(e==null)return{};var n=uG(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}function lG(e,t){if(Xg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cG(e){var t=lG(e,"string");return Xg(t)==="symbol"?t:String(t)}function er(e,t,n){return t=cG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c8=j.createContext(null),Ja=()=>{var e=j.useContext(c8);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},ze=Gt;function nC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nC(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var fG=25,hG=200,dG=function(){},gG=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function pG(e){var{editor:t,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=e,i=!1,o=null,s=null,u=null,c=0,h=!1,d=()=>{var ne=Ql.get(t);if(Ql.delete(t),ne){var{selection:oe}=t,ve=Nw(t,ne);ve&&(!oe||!Ee.equals(ve,oe))&&Re.select(t,ve)}},g=()=>{var ne=Zl.get(t);if(Zl.delete(t),!!ne){if(ne.at){var oe=pn.isPoint(ne.at)?I6(t,ne.at):Nw(t,ne.at);if(!oe)return;var ve=F.range(t,oe);(!t.selection||!Ee.equals(t.selection,ve))&&Re.select(t,oe)}ne.run()}},v=()=>{if(s&&(clearTimeout(s),s=null),u&&(clearTimeout(u),u=null),!L()&&!R()){d();return}i||(i=!0,setTimeout(()=>i=!1)),R()&&(i="action");var ne=t.selection&&F.rangeRef(t,t.selection,{affinity:"forward"});Hu.set(t,t.marks),dG("flush",Zl.get(t),ho.get(t));for(var oe=L(),ve;ve=(ge=ho.get(t))===null||ge===void 0?void 0:ge[0];){var ge,Be,Pe=ia.get(t);Pe!==void 0&&(ia.delete(t),t.marks=Pe),Pe&&h===!1&&(h=null);var he=AH(ve);(!t.selection||!Ee.equals(t.selection,he))&&Re.select(t,he),ve.diff.text?F.insertText(t,ve.diff.text):F.deleteFragment(t),ho.set(t,(Be=ho.get(t))===null||Be===void 0?void 0:Be.filter(U=>{var{id:xe}=U;return xe!==ve.id})),PH(t,ve)||(oe=!1,Zl.delete(t),Hu.delete(t),i="action",Ql.delete(t),n.cancel(),r.cancel(),ne==null||ne.unref())}var ue=ne==null?void 0:ne.unref();if(ue&&!Ql.get(t)&&(!t.selection||!Ee.equals(ue,t.selection))&&Re.select(t,ue),R()){g();return}oe&&n(),n.flush(),r.flush(),d();var we=Hu.get(t);Hu.delete(t),we!==void 0&&(t.marks=we,t.onChange())},y=ne=>{o&&clearTimeout(o),o=setTimeout(()=>{Ff.set(t,!1),v()},fG)},x=ne=>{Ff.set(t,!0),o&&(clearTimeout(o),o=null)},E=function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=b6.get(t);if(ve){if(L()||oe){ve.style.display="none";return}ve.style.removeProperty("display")}},T=(ne,oe)=>{var ve,ge=(ve=ho.get(t))!==null&&ve!==void 0?ve:[];ho.set(t,ge);var Be=Ke.leaf(t,ne),Pe=ge.findIndex(we=>K.equals(we.path,ne));if(Pe<0){var he=vS(Be.text,oe);he&&ge.push({path:ne,diff:oe,id:c++}),E();return}var ue=DH(Be.text,ge[Pe].diff,oe);if(!ue){ge.splice(Pe,1),E();return}ge[Pe]=mm(mm({},ge[Pe]),{},{diff:ue})},D=function(oe){var{at:ve}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};h=!1,Ql.delete(t),n.cancel(),r.cancel(),R()&&v(),Zl.set(t,{at:ve,run:oe}),u=setTimeout(v)},S=ne=>{var oe;if(s&&(clearTimeout(s),s=null),!o0.get(t)){var{inputType:ve}=ne,ge=null,Be=ne.dataTransfer||ne.data||void 0;h!==!1&&ve!=="insertText"&&ve!=="insertCompositionText"&&(h=!1);var[Pe]=ne.getTargetRanges();Pe&&(ge=ze.toSlateRange(t,Pe,{exactMatch:!1,suppressThrow:!0}));var he=ze.getWindow(t),ue=he.getSelection();if(!ge&&ue&&(Pe=ue,ge=ze.toSlateRange(t,ue,{exactMatch:!1,suppressThrow:!0})),ge=(oe=ge)!==null&&oe!==void 0?oe:t.selection,!!ge){var we=!0;if(ve.startsWith("delete")){if(Ee.isExpanded(ge)){var[U,xe]=Ee.edges(ge),Ie=Ke.leaf(t,U.path);if(Ie.text.length===U.offset&&xe.offset===0){var Le=F.next(t,{at:U.path,match:ot.isText});Le&&K.equals(Le[1],xe.path)&&(ge={anchor:xe,focus:xe})}}var $e=ve.endsWith("Backward")?"backward":"forward",[Fe,Ze]=Ee.edges(ge),[et,Q]=F.leaf(t,Fe.path),Se={text:"",start:Fe.offset,end:Ze.offset},Te=ho.get(t),ke=Te==null?void 0:Te.find(mn=>K.equals(mn.path,Q)),vt=ke?[ke.diff,Se]:[Se],Ye=mS(et.text,...vt);if(Ye.length===0&&(we=!1),Ee.isExpanded(ge)){if(we&&K.equals(ge.anchor.path,ge.focus.path)){var Dt={path:ge.anchor.path,offset:Fe.offset},cn=F.range(t,Dt,Dt);return z(cn),T(ge.anchor.path,{text:"",end:Ze.offset,start:Fe.offset})}return D(()=>F.deleteFragment(t,{direction:$e}),{at:ge})}}switch(ve){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return D(()=>F.deleteFragment(t),{at:ge});case"deleteContent":case"deleteContentForward":{var{anchor:Bt}=ge;if(we&&Ee.isCollapsed(ge)){var Mn=Ke.leaf(t,Bt.path);if(Bt.offset<Mn.text.length)return T(Bt.path,{text:"",start:Bt.offset,end:Bt.offset+1})}return D(()=>F.deleteForward(t),{at:ge})}case"deleteContentBackward":{var wn,{anchor:fn}=ge,_t=M6(Pe)?Pe.isCollapsed:!!((wn=Pe)!==null&&wn!==void 0&&wn.collapsed);return we&&_t&&Ee.isCollapsed(ge)&&fn.offset>0?T(fn.path,{text:"",start:fn.offset-1,end:fn.offset}):D(()=>F.deleteBackward(t),{at:ge})}case"deleteEntireSoftLine":return D(()=>{F.deleteBackward(t,{unit:"line"}),F.deleteForward(t,{unit:"line"})},{at:ge});case"deleteHardLineBackward":return D(()=>F.deleteBackward(t,{unit:"block"}),{at:ge});case"deleteSoftLineBackward":return D(()=>F.deleteBackward(t,{unit:"line"}),{at:ge});case"deleteHardLineForward":return D(()=>F.deleteForward(t,{unit:"block"}),{at:ge});case"deleteSoftLineForward":return D(()=>F.deleteForward(t,{unit:"line"}),{at:ge});case"deleteWordBackward":return D(()=>F.deleteBackward(t,{unit:"word"}),{at:ge});case"deleteWordForward":return D(()=>F.deleteForward(t,{unit:"word"}),{at:ge});case"insertLineBreak":return D(()=>F.insertSoftBreak(t),{at:ge});case"insertParagraph":return D(()=>F.insertBreak(t),{at:ge});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(gG(Be))return D(()=>ze.insertData(t,Be),{at:ge});var sn=Be??"";if(ia.get(t)&&(sn=sn.replace("\uFEFF","")),ve==="insertText"&&/.*\n.*\n$/.test(sn)&&(sn=sn.slice(0,-1)),sn.includes(`
`))return D(()=>{var mn=sn.split(`
`);mn.forEach((bn,Ir)=>{bn&&F.insertText(t,bn),Ir!==mn.length-1&&F.insertSoftBreak(t)})},{at:ge});if(K.equals(ge.anchor.path,ge.focus.path)){var[gr,zi]=Ee.edges(ge),jn={start:gr.offset,end:zi.offset,text:sn};if(sn&&h&&ve==="insertCompositionText"){var Vi=h.start+h.text.search(/\S|$/),pr=jn.start+jn.text.search(/\S|$/);pr===Vi+1&&jn.end===h.start+h.text.length?(jn.start-=1,h=null,se()):h=!1}else ve==="insertText"?h===null?h=jn:h&&Ee.isCollapsed(ge)&&h.end+h.text.length===gr.offset?h=mm(mm({},h),{},{text:h.text+sn}):h=!1:h=!1;if(we){T(gr.path,jn);return}}return D(()=>F.insertText(t,sn),{at:ge})}}}}},R=()=>!!Zl.get(t),L=()=>{var ne;return!!((ne=ho.get(t))!==null&&ne!==void 0&&ne.length)},k=()=>R()||L(),W=()=>i,z=ne=>{Ql.set(t,ne),s&&(clearTimeout(s),s=null);var{selection:oe}=t;if(ne){var ve=!oe||!K.equals(oe.anchor.path,ne.anchor.path),ge=!oe||!K.equals(oe.anchor.path.slice(0,-1),ne.anchor.path.slice(0,-1));(ve&&h||ge)&&(h=!1),(ve||L())&&(s=setTimeout(v,hG))}},Y=()=>{(R()||!L())&&v()},te=ne=>{L()||(E(!0),setTimeout(E))},se=()=>{R()||(u=setTimeout(v))},me=ne=>{if(!(L()||R())&&ne.some(ve=>i8(t,ve,ne))){var oe;(oe=gS.get(t))===null||oe===void 0||oe()}};return{flush:v,scheduleFlush:se,hasPendingDiffs:L,hasPendingAction:R,hasPendingChanges:k,isFlushing:W,handleUserSelect:z,handleCompositionEnd:y,handleCompositionStart:x,handleDOMBeforeInput:S,handleKeyDown:te,handleDomMutations:me,handleInput:Y}}function mG(){var e=j.useRef(!1);return j.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var Yu=Gm?j.useLayoutEffect:j.useEffect;function vG(e,t,n){var[r]=j.useState(()=>new MutationObserver(t));Yu(()=>{r.takeRecords()}),j.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,n),()=>r.disconnect()},[r,e,n])}var yG=["node"];function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var CG={subtree:!0,childList:!0,characterData:!0},xG=Hi?e=>{var{node:t}=e,n=g3(e,yG);if(!Hi)return null;var r=Ja(),i=mG(),[o]=j.useState(()=>pG(wG({editor:r},n)));return vG(t,o.handleDomMutations,CG),s8.set(r,o.scheduleFlush),i&&o.flush(),o}:()=>null;function iC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var PG=e=>{var{isLast:t,leaf:n,parent:r,text:i}=e,o=Ja(),s=ze.findPath(o,i),u=K.parent(s),c=!!n[pS];return o.isVoid(r)?xt.createElement(p5,{length:Ke.string(r).length}):n.text===""&&r.children[r.children.length-1]===i&&!o.isInline(r)&&F.string(o,u)===""?xt.createElement(p5,{isLineBreak:!0,isMarkPlaceholder:c}):n.text===""?xt.createElement(p5,{isMarkPlaceholder:c}):t&&n.text.slice(-1)===`
`?xt.createElement(oC,{isTrailing:!0,text:n.text}):xt.createElement(oC,{text:n.text})},oC=e=>{var{text:t,isTrailing:n=!1}=e,r=j.useRef(null),i=()=>"".concat(t??"").concat(n?`
`:""),[o]=j.useState(i);return Yu(()=>{var s=i();r.current&&r.current.textContent!==s&&(r.current.textContent=s)}),xt.createElement(SG,{ref:r},o)},SG=j.memo(j.forwardRef((e,t)=>xt.createElement("span",{"data-slate-string":!0,ref:t},e.children))),p5=e=>{var{length:t=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=e,i={"data-slate-zero-width":n?"n":"z","data-slate-length":t};return r&&(i["data-slate-mark-placeholder"]=!0),xt.createElement("span",EG({},i),!Hi||!n?"\uFEFF":null,n?xt.createElement("br",null):null)};function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function DS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var TG=Hi?300:0;function DG(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}function aC(e){e.current&&(clearTimeout(e.current),e.current=null)}var AG=e=>xt.createElement(MG,DS({},e)),BG=e=>{var{leaf:t,isLast:n,text:r,parent:i,renderPlaceholder:o,renderLeaf:s=AG,leafPosition:u}=e,c=Ja(),h=j.useRef(null),d=j.useRef(null),[g,v]=j.useState(!1),y=j.useRef(null),x=j.useCallback(R=>{if(DG(h,R==null),R==null){var L;b6.delete(c),(L=t.onPlaceholderResize)===null||L===void 0||L.call(t,null)}else{if(b6.set(c,R),!h.current){var k=window.ResizeObserver||sG;h.current=new k(()=>{var W;(W=t.onPlaceholderResize)===null||W===void 0||W.call(t,R)})}h.current.observe(R),d.current=R}},[d,t,c]),E=xt.createElement(PG,{isLast:n,leaf:t,parent:i,text:r}),T=!!t[y0];if(j.useEffect(()=>(T?y.current||(y.current=setTimeout(()=>{v(!0),y.current=null},TG)):(aC(y),v(!1)),()=>aC(y)),[T,v]),T&&g){var D={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:bf?"inherit":void 0},contentEditable:!1,ref:x}};E=xt.createElement(xt.Fragment,null,E,o(D))}var S={"data-slate-leaf":!0};return s({attributes:S,children:E,leaf:t,text:r,leafPosition:u})},RG=xt.memo(BG,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&ot.equals(t.leaf,e.leaf)&&t.leaf[y0]===e.leaf[y0]),MG=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",DS({},t),n)};function bG(e,t){var[,n]=j.useReducer(h=>h+1,0),r=j.useRef(),i=j.useRef(()=>null),o=j.useRef(null),s;try{if(e!==i.current||r.current){var u=e();t(o.current,u)?s=o.current:s=u}else s=o.current}catch(h){throw r.current&&kG(h)&&(h.message+=`
The error may be correlated with this previous error:
`.concat(r.current.stack,`

`)),h}i.current=e,o.current=s,r.current=void 0;var c=j.useCallback(()=>{try{var h=i.current();if(t(o.current,h))return;o.current=h}catch(d){d instanceof Error?r.current=d:r.current=new Error(String(d))}n()},[]);return[s,c]}function kG(e){return e instanceof Error}var AS=j.createContext({}),BS=(e,t)=>{var n=Ja(),{decorate:r,addEventListener:i}=j.useContext(AS),o=()=>{var h=ze.findPath(n,e);return r([e,h])},s=ot.isText(e)?wS:a8,[u,c]=bG(o,s);return Yu(()=>{var h=i(c);return c(),h},[i,c]),j.useMemo(()=>[...u,...t],[u,t])},OG=e=>{var t=j.useRef(new Set),n=j.useRef(e);Yu(()=>{n.current=e,t.current.forEach(o=>o())},[e]);var r=j.useCallback(o=>n.current(o),[]),i=j.useCallback(o=>(t.current.add(o),()=>{t.current.delete(o)}),[]);return j.useMemo(()=>({decorate:r,addEventListener:i}),[r,i])};function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var IG=e=>xt.createElement(LG,RS({},e)),FG=e=>{for(var{decorations:t,isLast:n,parent:r,renderPlaceholder:i,renderLeaf:o,renderText:s=IG,text:u}=e,c=Ja(),h=j.useRef(null),d=BS(u,t),g=ot.decorations(u,d),v=ze.findKey(c,u),y=[],x=0;x<g.length;x++){var{leaf:E,position:T}=g[x];y.push(xt.createElement(RG,{isLast:n&&x===g.length-1,key:"".concat(v.id,"-").concat(x),renderPlaceholder:i,leaf:E,leafPosition:T,text:u,parent:r,renderLeaf:o}))}var D=j.useCallback(R=>{var L=sv.get(c);R?(L==null||L.set(v,R),jf.set(u,R),Vg.set(R,u)):(L==null||L.delete(v),jf.delete(u),h.current&&Vg.delete(h.current)),h.current=R},[h,c,v,u]),S={"data-slate-node":"text",ref:D};return s({text:u,children:y,attributes:S})},MS=xt.memo(FG,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&wS(t.decorations,e.decorations)),LG=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",RS({},t),n)};function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var _G=e=>xt.createElement(GG,_6({},e)),NG=e=>{var{decorations:t,element:n,renderElement:r=_G,renderChunk:i,renderPlaceholder:o,renderLeaf:s,renderText:u}=e,c=Ja(),h=qG(),d=c.isInline(n),g=BS(n,t),v=ze.findKey(c,n),y=j.useCallback(L=>{var k=sv.get(c);L?(k==null||k.set(v,L),jf.set(n,L),Vg.set(L,n)):(k==null||k.delete(v),jf.delete(n))},[c,v,n]),x=OS({decorations:g,node:n,renderElement:r,renderChunk:i,renderPlaceholder:o,renderLeaf:s,renderText:u}),E={"data-slate-node":"element",ref:y};if(d&&(E["data-slate-inline"]=!0),!d&&F.hasInlines(c,n)){var T=Ke.string(n),D=sS(T);D==="rtl"&&(E.dir=D)}if(F.isVoid(c,n)){E["data-slate-void"]=!0,!h&&d&&(E.contentEditable=!1);var S=d?"span":"div",[[R]]=Ke.texts(n);x=xt.createElement(S,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},xt.createElement(MS,{renderPlaceholder:o,decorations:[],isLast:!1,parent:n,text:R})),Qd.set(R,0),Ag.set(R,n)}return r({attributes:E,children:x,element:n})},HG=xt.memo(NG,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&a8(e.decorations,t.decorations)),GG=e=>{var{attributes:t,children:n,element:r}=e,i=Ja(),o=i.isInline(r)?"span":"div";return xt.createElement(o,_6(_6({},t),{},{style:{position:"relative"}}),n)};class jG{constructor(t,n){var{chunkSize:r,debug:i}=n;er(this,"root",void 0),er(this,"chunkSize",void 0),er(this,"debug",void 0),er(this,"reachedEnd",void 0),er(this,"pointerChunk",void 0),er(this,"pointerIndex",void 0),er(this,"pointerIndexStack",void 0),er(this,"cachedPointerNode",void 0),this.root=t,this.chunkSize=r,this.debug=i??!1,this.pointerChunk=t,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(t){this.returnToPreviousLeaf(),this.insertAfter(t),this.readLeaf()}insertAfter(t){if(t.length!==0){for(var n=0,r=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var i=this.chunkSize-this.pointerSiblings.length,o=Math.min(i,t.length);if(o>0){var s=t.splice(0,o);this.rawInsertAfter(s,n)}this.exitChunk(),n++}if(t.length!==0){var u=this.savePointer(),c=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var h=this.chunkSize-this.pointerSiblings.length,d=Math.min(h,t.length);if(d>0){var g=t.splice(-d,d);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(g,r),c||(c=this.savePointer())}this.exitChunk(),r++}this.restorePointer(u);var v=Math.max(n,r);this.rawInsertAfter(t,v),c&&this.restorePointer(c),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var t=this.pointerChunk;t.type==="chunk";t=t.parent)this.root.modifiedChunks.add(t)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var t=this.getPointerNode();return this.cachedPointerNode=t,t}getChunkPath(t){for(var n=[],r=t;r.type==="chunk";r=r.parent){var i=r.parent.children.indexOf(r);if(i===-1)return null;n.unshift(i)}return n}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(t){if(t==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:n,node:r}=t,i=n.children.indexOf(r);if(i===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var o=this.getChunkPath(n);if(!o)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=n,this.pointerIndex=i,this.pointerIndexStack=o,this.reachedEnd=!1,this.cachedPointerNode=r,this.validateState()}enterChunk(t){var n;if(((n=this.pointerNode)===null||n===void 0?void 0:n.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=t?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(t){for(;((n=this.pointerNode)===null||n===void 0?void 0:n.type)==="chunk";){var n;this.enterChunk(t)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var t=this.pointerChunk;this.pointerChunk=t.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(t,n){if(t.length!==0){for(var r=(d,g,v)=>{if(v===1)return d;for(var y=[],x=0;x<this.chunkSize;x++){var E=d.slice(x*v,(x+1)*v);if(E.length===0)break;var T={type:"chunk",key:new hS,parent:g,children:[]};T.children=r(E,T,v/this.chunkSize),y.push(T)}return y},i=this.pointerSiblings.length+t.length,o=0,s=this.chunkSize;s<i;s*=this.chunkSize)o++;var u=Math.max(o,n),c=Math.pow(this.chunkSize,u),h=r(t,this.pointerChunk,c);this.pointerSiblings.splice(this.pointerIndex+1,0,...h),this.pointerIndex+=h.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var t=r=>{if(r.type==="chunk"){var{parent:i,children:o}=r;if(!i.children.includes(r))throw new Error("Debug: Chunk ".concat(r.key.id," has an incorrect parent property"));o.forEach(t)}};if(this.root.children.forEach(t),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var n=this.getChunkPath(this.pointerChunk);if(!n)throw new Error("Debug: The pointer chunk is not connected to the root");if(!K.equals(this.pointerIndexStack,n))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(n.join(", "),"]"))}}}class $G{constructor(t,n){er(this,"editor",void 0),er(this,"children",void 0),er(this,"cachedKeys",void 0),er(this,"pointerIndex",void 0),this.editor=t,this.children=n,this.cachedKeys=new Array(n.length),this.pointerIndex=0}read(t){if(t===1)return[this.children[this.pointerIndex++]];var n=this.remaining(t);return this.pointerIndex+=t,n}remaining(t){return t===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+t)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(t,n){var r=this.children.indexOf(t,this.pointerIndex);if(r>-1)return r-this.pointerIndex;for(var i=this.pointerIndex;i<this.children.length;i++){var o=this.children[i],s=this.findKey(o,i);if(s===n)return i-this.pointerIndex}return-1}toChunkLeaves(t,n){return t.map((r,i)=>({type:"leaf",node:r,key:this.findKey(r,n+i),index:n+i}))}findKey(t,n){var r=this.cachedKeys[n];if(r)return r;var i=ze.findKey(this.editor,t);return this.cachedKeys[n]=i,i}}var WG=(e,t)=>{var{chunkTree:n,children:r,chunkSize:i,rerenderChildren:o=[],onInsert:s,onUpdate:u,onIndexChange:c,debug:h}=t;n.modifiedChunks.clear();for(var d=new jG(n,{chunkSize:i,debug:h}),g=new $G(e,r),v,y=function(){var D=g.lookAhead(v.node,v.key),S=D>0&&n.movedNodeKeys.has(v.key);if(D===-1||S)return d.remove(),1;var R=g.pointerIndex,L=g.read(D+1),k=L.pop();if(L.length){var W=g.toChunkLeaves(L,R);d.insertBefore(W),L.forEach((Y,te)=>{s==null||s(Y,R+te)})}var z=g.pointerIndex-1;v.node!==k&&(v.node=k,d.invalidateChunk(),u==null||u(k,z)),v.index!==z&&(v.index=z,c==null||c(k,z)),o.includes(z)&&d.invalidateChunk()};v=d.readLeaf();)y();if(!g.reachedEnd){var x=g.remaining(),E=g.toChunkLeaves(x,g.pointerIndex);d.returnToPreviousLeaf(),d.insertAfter(E),x.forEach((T,D)=>{s==null||s(T,g.pointerIndex+D)})}n.movedNodeKeys.clear()};function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var fC=new WeakMap,bS=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=ze.findKey(t,n),o=fC.get(i);return o||(o={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},fC.set(i,o)),r.reconcile&&WG(t,zG({chunkTree:o,children:n.children},r.reconcile)),o},VG=e=>{var{children:t}=e;return t},kS=e=>{var{root:t,ancestor:n,renderElement:r,renderChunk:i=VG}=e;return n.children.map(o=>{if(o.type==="chunk"){var s=o.key.id,u=i({highest:n===t,lowest:o.children.some(h=>h.type==="leaf"),attributes:{"data-slate-chunk":!0},children:xt.createElement(XG,{root:t,ancestor:o,renderElement:r,renderChunk:i})});return xt.createElement(j.Fragment,{key:s},u)}var c=o.node;return r(c,o.index,o.key)})},UG=kS,XG=xt.memo(kS,(e,t)=>e.root===t.root&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&!t.root.modifiedChunks.has(t.ancestor)),KG=j.createContext(null),OS=e=>{var{decorations:t,node:n,renderElement:r,renderChunk:i,renderPlaceholder:o,renderText:s,renderLeaf:u}=e,c=Ja();o0.set(c,!1);var h=F.isEditor(n),d=!h&&ut.isElement(n)&&!c.isInline(n),g=d&&F.hasInlines(c,n),v=g?null:c.getChunkSize(n),y=!!v,{decorationsByChild:x,childrenToRedecorate:E}=YG(c,n,t);y||n.children.forEach((R,L)=>{Qd.set(R,L),Ag.set(R,n)});var T=j.useCallback((R,L,k)=>{var W=k??ze.findKey(c,R);return xt.createElement(KG.Provider,{key:"provider-".concat(W.id),value:R},xt.createElement(HG,{decorations:x[L],element:R,key:W.id,renderElement:r,renderChunk:i,renderPlaceholder:o,renderLeaf:u,renderText:s}))},[c,x,r,i,o,u,s]),D=(R,L)=>{var k=ze.findKey(c,R);return xt.createElement(MS,{decorations:x[L],key:k.id,isLast:L===n.children.length-1,parent:n,renderPlaceholder:o,renderLeaf:u,renderText:s,text:R})};if(!y)return n.children.map((R,L)=>ot.isText(R)?D(R,L):T(R,L));var S=bS(c,n,{reconcile:{chunkSize:v,rerenderChildren:E,onInsert:(R,L)=>{Qd.set(R,L),Ag.set(R,n)},onUpdate:(R,L)=>{Qd.set(R,L),Ag.set(R,n)},onIndexChange:(R,L)=>{Qd.set(R,L)}}});return xt.createElement(UG,{root:S,ancestor:S,renderElement:T,renderChunk:i})},YG=(e,t,n)=>{var r=HH(e,t,n),i=j.useRef(r).current,o=[];i.length=r.length;for(var s=0;s<r.length;s++){var u,c=r[s],h=(u=i[s])!==null&&u!==void 0?u:null;a8(h,c)||(i[s]=c,o.push(s))}return{decorationsByChild:i,childrenToRedecorate:o}},IS=j.createContext(!1),qG=()=>j.useContext(IS),f8=j.createContext({});function ZG(){var e=j.useRef(new Set),t=j.useRef(new Set),n=j.useCallback(()=>{e.current.forEach(s=>s())},[]),r=j.useCallback(()=>{t.current.forEach(s=>s()),t.current.clear()},[]),i=j.useCallback(function(s){var{deferred:u=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=u?()=>t.current.add(s):s;return e.current.add(c),()=>{e.current.delete(c)}},[]),o=j.useMemo(()=>({addEventListener:i,flushDeferred:r}),[i,r]);return{selectorContext:o,onChange:n}}function QG(){var{flushDeferred:e}=j.useContext(f8);Yu(e)}var JG=()=>{var{addEventListener:e}=j.useContext(f8),[,t]=j.useReducer(n=>n+1,0);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return Yu(()=>e(t),[e]),Ja()};function ej(){var e=Ja(),t=j.useRef(!1),n=j.useRef(0),r=j.useCallback(()=>{if(!t.current){t.current=!0;var i=ze.getWindow(e);i.cancelAnimationFrame(n.current),n.current=i.requestAnimationFrame(()=>{t.current=!1})}},[e]);return j.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:t,onUserInput:r}}var tj=(e,t)=>{var n=[],r=()=>{n=[]},i=s=>{if(t.current){var u=s.filter(c=>i8(e,c,s));n.push(...u)}};function o(){n.length>0&&(n.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(u=>{s.target.insertBefore(u,s.nextSibling)}),s.addedNodes.forEach(u=>{s.target.removeChild(u)}))}),r())}return{registerMutations:i,restoreDOM:o,clear:r}},nj={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class FS extends j.Component{constructor(){super(...arguments),er(this,"context",null),er(this,"manager",null),er(this,"mutationObserver",null)}observe(){var t,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(t=this.mutationObserver)===null||t===void 0||t.observe(n.current,nj)}componentDidMount(){var{receivedUserInput:t}=this.props,n=this.context;this.manager=tj(n,t),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var t,n,r,i=(t=this.mutationObserver)===null||t===void 0?void 0:t.takeRecords();if(i!=null&&i.length){var o;(o=this.manager)===null||o===void 0||o.registerMutations(i)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var t;(t=this.manager)===null||t===void 0||t.clear(),this.observe()}componentWillUnmount(){var t;(t=this.mutationObserver)===null||t===void 0||t.disconnect()}render(){return this.props.children}}er(FS,"contextType",c8);var rj=Hi?FS:e=>{var{children:t}=e;return xt.createElement(xt.Fragment,null,t)},ij=j.createContext(!1),oj=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],sj=["text"];function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var aj=e=>xt.createElement(xt.Fragment,null,OS(e)),uj=j.forwardRef((e,t)=>{var n=j.useCallback(Q=>xt.createElement(lj,La({},Q)),[]),{autoFocus:r,decorate:i=cj,onDOMBeforeInput:o,placeholder:s,readOnly:u=!1,renderElement:c,renderChunk:h,renderLeaf:d,renderText:g,renderPlaceholder:v=n,scrollSelectionIntoView:y=fj,style:x={},as:E="div",disableDefaultStyles:T=!1}=e,D=g3(e,oj),S=JG(),[R,L]=j.useState(!1),k=j.useRef(null),W=j.useRef([]),[z,Y]=j.useState(),te=j.useRef(!1),{onUserInput:se,receivedUserInput:me}=ej(),[,ne]=j.useReducer(Q=>Q+1,0);gS.set(S,ne),k6.set(S,u);var oe=j.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);j.useEffect(()=>{k.current&&r&&k.current.focus()},[r]);var ve=j.useRef(),ge=j.useMemo(()=>DL(()=>{if(o0.get(S)){ge();return}var Q=ze.toDOMNode(S,S),Se=Q.getRootNode();if(!te.current&&bf&&Se instanceof ShadowRoot){te.current=!0;var Te=fH();Te?document.execCommand("indent"):Re.deselect(S),te.current=!1;return}var ke=ve.current;if((Hi||!ze.isComposing(S))&&(!oe.isUpdatingSelection||ke!=null&&ke.isFlushing())&&!oe.isDraggingInternally){var vt=ze.findDocumentOrShadowRoot(S),{activeElement:Ye}=vt,Dt=ze.toDOMNode(S,S),cn=Dg(vt);if(Ye===Dt?(oe.latestElement=Ye,tc.set(S,!0)):tc.delete(S),!cn)return Re.deselect(S);var{anchorNode:Bt,focusNode:Mn}=cn,wn=ze.hasEditableTarget(S,Bt)||ze.isTargetInsideNonReadonlyVoid(S,Bt),fn=ze.hasTarget(S,Mn);if(wn&&fn){var _t=ze.toSlateRange(S,cn,{exactMatch:!1,suppressThrow:!0});_t&&(!ze.isComposing(S)&&!(ke!=null&&ke.hasPendingChanges())&&!(ke!=null&&ke.isFlushing())?Re.select(S,_t):ke==null||ke.handleUserSelect(_t))}u&&(!wn||!fn)&&Re.deselect(S)}},100),[S,u,oe]),Be=j.useMemo(()=>EL(ge,0),[ge]);ve.current=xG({node:k,onDOMSelectionChange:ge,scheduleOnDOMSelectionChange:Be}),Yu(()=>{var Q,Se,Te;k.current&&(Te=r8(k.current))?(dS.set(S,Te),jm.set(S,k.current),jf.set(S,k.current),Vg.set(k.current,S)):jf.delete(S);var{selection:ke}=S,vt=ze.findDocumentOrShadowRoot(S),Ye=Dg(vt);if(!(!Ye||!ze.isFocused(S)||(Q=ve.current)!==null&&Q!==void 0&&Q.hasPendingAction())){var Dt=wn=>{var fn=Ye.type!=="None";if(!(!ke&&!fn)){var _t=Ye.focusNode,sn;if(Zd&&Ye.rangeCount>1){var gr=Ye.getRangeAt(0),zi=Ye.getRangeAt(Ye.rangeCount-1);gr.startContainer===_t?sn=zi.endContainer:sn=gr.startContainer}else sn=Ye.anchorNode;var jn=jm.get(S),Vi=!1;if(jn.contains(sn)&&jn.contains(_t)&&(Vi=!0),fn&&Vi&&ke&&!wn){var pr=ze.toSlateRange(S,Ye,{exactMatch:!0,suppressThrow:!0});if(pr&&Ee.equals(pr,ke)){var mn;if(!oe.hasMarkPlaceholder||(mn=sn)!==null&&mn!==void 0&&(mn=mn.parentElement)!==null&&mn!==void 0&&mn.hasAttribute("data-slate-mark-placeholder"))return}}if(ke&&!ze.hasRange(S,ke)){S.selection=ze.toSlateRange(S,Ye,{exactMatch:!1,suppressThrow:!0});return}oe.isUpdatingSelection=!0;var bn=null;try{bn=ke&&ze.toDOMRange(S,ke)}catch{}return bn?(ze.isComposing(S)&&!Hi?Ye.collapseToEnd():Ee.isBackward(ke)?Ye.setBaseAndExtent(bn.endContainer,bn.endOffset,bn.startContainer,bn.startOffset):Ye.setBaseAndExtent(bn.startContainer,bn.startOffset,bn.endContainer,bn.endOffset),y(S,bn)):Ye.removeAllRanges(),bn}};Ye.rangeCount<=1&&Dt();var cn=((Se=ve.current)===null||Se===void 0?void 0:Se.isFlushing())==="action";if(!Hi||!cn){setTimeout(()=>{oe.isUpdatingSelection=!1});return}var Bt=null,Mn=requestAnimationFrame(()=>{if(cn){var wn=fn=>{try{var _t=ze.toDOMNode(S,S);_t.focus(),Dt(fn)}catch{}};wn(),Bt=setTimeout(()=>{wn(!0),oe.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Mn),Bt&&clearTimeout(Bt)}}});var Pe=j.useCallback(Q=>{gC(S,Q);var Se=ze.toDOMNode(S,S),Te=Se.getRootNode();if(te!=null&&te.current&&bf&&Te instanceof ShadowRoot){var ke=Q.getTargetRanges(),vt=ke[0],Ye=new window.Range;Ye.setStart(vt.startContainer,vt.startOffset),Ye.setEnd(vt.endContainer,vt.endOffset);var Dt=ze.toSlateRange(S,Ye,{exactMatch:!1,suppressThrow:!1});Re.select(S,Dt),Q.preventDefault(),Q.stopImmediatePropagation();return}if(se(),!u&&ze.hasEditableTarget(S,Q.target)&&!hj(Q,o)){var cn;if(ve.current)return ve.current.handleDOMBeforeInput(Q);Be.flush(),ge.flush();var{selection:Bt}=S,{inputType:Mn}=Q,wn=Q.dataTransfer||Q.data||void 0,fn=Mn==="insertCompositionText"||Mn==="deleteCompositionText";if(fn&&ze.isComposing(S))return;var _t=!1;if(Mn==="insertText"&&Bt&&Ee.isCollapsed(Bt)&&Q.data&&Q.data.length===1&&/[a-z ]/i.test(Q.data)&&Bt.anchor.offset!==0&&(_t=!0,S.marks&&(_t=!1),!o0.get(S))){var sn,gr,{anchor:zi}=Bt,[jn,Vi]=ze.toDOMPoint(S,zi),pr=(sn=jn.parentElement)===null||sn===void 0?void 0:sn.closest("a"),mn=ze.getWindow(S);if(_t&&pr&&ze.hasDOMNode(S,pr)){var bn,Ir=mn==null?void 0:mn.document.createTreeWalker(pr,NodeFilter.SHOW_TEXT).lastChild();Ir===jn&&((bn=Ir.textContent)===null||bn===void 0?void 0:bn.length)===Vi&&(_t=!1)}if(_t&&jn.parentElement&&(mn==null||(gr=mn.getComputedStyle(jn.parentElement))===null||gr===void 0?void 0:gr.whiteSpace)==="pre"){var Bi=F.above(S,{at:zi.path,match:Ui=>ut.isElement(Ui)&&F.isBlock(S,Ui)});Bi&&Ke.string(Bi[0]).includes("	")&&(_t=!1)}}if((!Mn.startsWith("delete")||Mn.startsWith("deleteBy"))&&!o0.get(S)){var[bs]=Q.getTargetRanges();if(bs){var qo=ze.toSlateRange(S,bs,{exactMatch:!1,suppressThrow:!1});if(!Bt||!Ee.equals(Bt,qo)){_t=!1;var Po=!fn&&S.selection&&F.rangeRef(S,S.selection);Re.select(S,qo),Po&&Bg.set(S,Po)}}}if(fn)return;if(_t||Q.preventDefault(),Bt&&Ee.isExpanded(Bt)&&Mn.startsWith("delete")){var ru=Mn.endsWith("Backward")?"backward":"forward";F.deleteFragment(S,{direction:ru});return}switch(Mn){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{F.deleteFragment(S);break}case"deleteContent":case"deleteContentForward":{F.deleteForward(S);break}case"deleteContentBackward":{F.deleteBackward(S);break}case"deleteEntireSoftLine":{F.deleteBackward(S,{unit:"line"}),F.deleteForward(S,{unit:"line"});break}case"deleteHardLineBackward":{F.deleteBackward(S,{unit:"block"});break}case"deleteSoftLineBackward":{F.deleteBackward(S,{unit:"line"});break}case"deleteHardLineForward":{F.deleteForward(S,{unit:"block"});break}case"deleteSoftLineForward":{F.deleteForward(S,{unit:"line"});break}case"deleteWordBackward":{F.deleteBackward(S,{unit:"word"});break}case"deleteWordForward":{F.deleteForward(S,{unit:"word"});break}case"insertLineBreak":F.insertSoftBreak(S);break;case"insertParagraph":{F.insertBreak(S);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{Mn==="insertFromComposition"&&ze.isComposing(S)&&(L(!1),Ff.set(S,!1)),(wn==null?void 0:wn.constructor.name)==="DataTransfer"?ze.insertData(S,wn):typeof wn=="string"&&(_t?W.current.push(()=>F.insertText(S,wn)):F.insertText(S,wn));break}}var So=(cn=Bg.get(S))===null||cn===void 0?void 0:cn.unref();Bg.delete(S),So&&(!S.selection||!Ee.equals(S.selection,So))&&Re.select(S,So)}},[S,ge,se,o,u,Be]),he=j.useCallback(Q=>{Q==null?(ge.cancel(),Be.cancel(),jm.delete(S),jf.delete(S),k.current&&Kl&&k.current.removeEventListener("beforeinput",Pe)):Kl&&Q.addEventListener("beforeinput",Pe),k.current=Q,typeof t=="function"?t(Q):t&&(t.current=Q)},[ge,Be,S,Pe,t]);Yu(()=>{var Q=ze.getWindow(S),Se=ke=>{var{target:vt}=ke,Ye=vt instanceof HTMLElement?vt:null,Dt=Ye==null?void 0:Ye.tagName;Dt==="INPUT"||Dt==="TEXTAREA"||Be()};Q.document.addEventListener("selectionchange",Se);var Te=()=>{oe.isDraggingInternally=!1};return Q.document.addEventListener("dragend",Te),Q.document.addEventListener("drop",Te),()=>{Q.document.removeEventListener("selectionchange",Se),Q.document.removeEventListener("dragend",Te),Q.document.removeEventListener("drop",Te)}},[Be,oe]);var ue=i([S,[]]),we=OG(i),U=s&&S.children.length===1&&Array.from(Ke.texts(S)).length===1&&Ke.string(S)===""&&!R,xe=j.useCallback(Q=>{if(Q&&U){var Se;Y((Se=Q.getBoundingClientRect())===null||Se===void 0?void 0:Se.height)}else Y(void 0)},[U]);if(U){var Ie=F.start(S,[]);ue.push({[y0]:!0,placeholder:s,onPlaceholderResize:xe,anchor:Ie,focus:Ie})}var{marks:Le}=S;if(oe.hasMarkPlaceholder=!1,S.selection&&Ee.isCollapsed(S.selection)&&Le){var{anchor:$e}=S.selection,Fe=Ke.leaf(S,$e.path),Ze=g3(Fe,sj);if(!ot.equals(Fe,Le,{loose:!0})){oe.hasMarkPlaceholder=!0;var et=Object.fromEntries(Object.keys(Ze).map(Q=>[Q,null]));ue.push(La(La(La({[pS]:!0},et),Le),{},{anchor:$e,focus:$e}))}}return j.useEffect(()=>{setTimeout(()=>{var{selection:Q}=S;if(Q){var{anchor:Se}=Q,Te=Ke.leaf(S,Se.path);if(Le&&!ot.equals(Te,Le,{loose:!0})){ia.set(S,Le);return}}ia.delete(S)})}),QG(),xt.createElement(IS.Provider,{value:u},xt.createElement(ij.Provider,{value:R},xt.createElement(AS.Provider,{value:we},xt.createElement(rj,{node:k,receivedUserInput:me},xt.createElement(E,La(La({role:u?void 0:"textbox","aria-multiline":u?void 0:!0},D),{},{spellCheck:Kl||!Gm?D.spellCheck:!1,autoCorrect:Kl||!Gm?D.autoCorrect:"false",autoCapitalize:Kl||!Gm?D.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!u,zindex:-1,suppressContentEditableWarning:!0,ref:he,style:La(La({},T?{}:La({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},z?{minHeight:z}:{})),x),onBeforeInput:j.useCallback(Q=>{if(!Kl&&!u&&!Ni(Q,D.onBeforeInput)&&ze.hasSelectableTarget(S,Q.target)&&(Q.preventDefault(),!ze.isComposing(S))){var Se=Q.data;F.insertText(S,Se)}},[D.onBeforeInput,S,u]),onInput:j.useCallback(Q=>{if(!Ni(Q,D.onInput)){if(ve.current){ve.current.handleInput();return}for(var Se of W.current)Se();W.current=[],ze.isFocused(S)||gC(S,Q.nativeEvent)}},[D.onInput,S]),onBlur:j.useCallback(Q=>{if(!(u||oe.isUpdatingSelection||!ze.hasSelectableTarget(S,Q.target)||Ni(Q,D.onBlur))){var Se=ze.findDocumentOrShadowRoot(S);if(oe.latestElement!==Se.activeElement){var{relatedTarget:Te}=Q,ke=ze.toDOMNode(S,S);if(Te!==ke&&!(ws(Te)&&Te.hasAttribute("data-slate-spacer"))){if(Te!=null&&dc(Te)&&ze.hasDOMNode(S,Te)){var vt=ze.toSlateNode(S,Te);if(ut.isElement(vt)&&!S.isVoid(vt))return}if(bf){var Ye=Dg(Se);Ye==null||Ye.removeAllRanges()}tc.delete(S)}}}},[u,oe.isUpdatingSelection,oe.latestElement,S,D.onBlur]),onClick:j.useCallback(Q=>{if(ze.hasTarget(S,Q.target)&&!Ni(Q,D.onClick)&&dc(Q.target)){var Se=ze.toSlateNode(S,Q.target),Te=ze.findPath(S,Se);if(!F.hasPath(S,Te)||Ke.get(S,Te)!==Se)return;if(Q.detail===bH&&Te.length>=1){var ke=Te;if(!(ut.isElement(Se)&&F.isBlock(S,Se))){var vt,Ye=F.above(S,{match:_t=>ut.isElement(_t)&&F.isBlock(S,_t),at:Te});ke=(vt=Ye==null?void 0:Ye[1])!==null&&vt!==void 0?vt:Te.slice(0,1)}var Dt=F.range(S,ke);Re.select(S,Dt);return}if(u)return;var cn=F.start(S,Te),Bt=F.end(S,Te),Mn=F.void(S,{at:cn}),wn=F.void(S,{at:Bt});if(Mn&&wn&&K.equals(Mn[1],wn[1])){var fn=F.range(S,cn);Re.select(S,fn)}}},[S,D.onClick,u]),onCompositionEnd:j.useCallback(Q=>{if(ze.hasSelectableTarget(S,Q.target)){var Se;if(ze.isComposing(S)&&Promise.resolve().then(()=>{L(!1),Ff.set(S,!1)}),(Se=ve.current)===null||Se===void 0||Se.handleCompositionEnd(Q),Ni(Q,D.onCompositionEnd)||Hi)return;if(!bf&&!vH&&!dH&&!wH&&!yH&&Q.data){var Te=ia.get(S);ia.delete(S),Te!==void 0&&(Hu.set(S,S.marks),S.marks=Te),F.insertText(S,Q.data);var ke=Hu.get(S);Hu.delete(S),ke!==void 0&&(S.marks=ke)}}},[D.onCompositionEnd,S]),onCompositionUpdate:j.useCallback(Q=>{ze.hasSelectableTarget(S,Q.target)&&!Ni(Q,D.onCompositionUpdate)&&(ze.isComposing(S)||(L(!0),Ff.set(S,!0)))},[D.onCompositionUpdate,S]),onCompositionStart:j.useCallback(Q=>{if(ze.hasSelectableTarget(S,Q.target)){var Se;if((Se=ve.current)===null||Se===void 0||Se.handleCompositionStart(Q),Ni(Q,D.onCompositionStart)||Hi)return;L(!0);var{selection:Te}=S;if(Te&&Ee.isExpanded(Te)){F.deleteFragment(S);return}}},[D.onCompositionStart,S]),onCopy:j.useCallback(Q=>{ze.hasSelectableTarget(S,Q.target)&&!Ni(Q,D.onCopy)&&!dC(Q)&&(Q.preventDefault(),ze.setFragmentData(S,Q.clipboardData,"copy"))},[D.onCopy,S]),onCut:j.useCallback(Q=>{if(!u&&ze.hasSelectableTarget(S,Q.target)&&!Ni(Q,D.onCut)&&!dC(Q)){Q.preventDefault(),ze.setFragmentData(S,Q.clipboardData,"cut");var{selection:Se}=S;if(Se)if(Ee.isExpanded(Se))F.deleteFragment(S);else{var Te=Ke.parent(S,Se.anchor.path);F.isVoid(S,Te)&&Re.delete(S)}}},[u,S,D.onCut]),onDragOver:j.useCallback(Q=>{if(ze.hasTarget(S,Q.target)&&!Ni(Q,D.onDragOver)){var Se=ze.toSlateNode(S,Q.target);ut.isElement(Se)&&F.isVoid(S,Se)&&Q.preventDefault()}},[D.onDragOver,S]),onDragStart:j.useCallback(Q=>{if(!u&&ze.hasTarget(S,Q.target)&&!Ni(Q,D.onDragStart)){var Se=ze.toSlateNode(S,Q.target),Te=ze.findPath(S,Se),ke=ut.isElement(Se)&&F.isVoid(S,Se)||F.void(S,{at:Te,voids:!0});if(ke){var vt=F.range(S,Te);Re.select(S,vt)}oe.isDraggingInternally=!0,ze.setFragmentData(S,Q.dataTransfer,"drag")}},[u,S,D.onDragStart,oe]),onDrop:j.useCallback(Q=>{if(!u&&ze.hasTarget(S,Q.target)&&!Ni(Q,D.onDrop)){Q.preventDefault();var Se=S.selection,Te=ze.findEventRange(S,Q),ke=Q.dataTransfer;Re.select(S,Te),oe.isDraggingInternally&&Se&&!Ee.equals(Se,Te)&&!F.void(S,{at:Te,voids:!0})&&Re.delete(S,{at:Se}),ze.insertData(S,ke),ze.isFocused(S)||ze.focus(S)}},[u,S,D.onDrop,oe]),onDragEnd:j.useCallback(Q=>{!u&&oe.isDraggingInternally&&D.onDragEnd&&ze.hasTarget(S,Q.target)&&D.onDragEnd(Q)},[u,oe,D,S]),onFocus:j.useCallback(Q=>{if(!u&&!oe.isUpdatingSelection&&ze.hasEditableTarget(S,Q.target)&&!Ni(Q,D.onFocus)){var Se=ze.toDOMNode(S,S),Te=ze.findDocumentOrShadowRoot(S);if(oe.latestElement=Te.activeElement,Zd&&Q.target!==Se){Se.focus();return}tc.set(S,!0)}},[u,oe,S,D.onFocus]),onKeyDown:j.useCallback(Q=>{if(!u&&ze.hasEditableTarget(S,Q.target)){var Se;(Se=ve.current)===null||Se===void 0||Se.handleKeyDown(Q);var{nativeEvent:Te}=Q;if(ze.isComposing(S)&&Te.isComposing===!1&&(Ff.set(S,!1),L(!1)),Ni(Q,D.onKeyDown)||ze.isComposing(S))return;var{selection:ke}=S,vt=S.children[ke!==null?ke.focus.path[0]:0],Ye=sS(Ke.string(vt))==="rtl";if(sr.isRedo(Te)){Q.preventDefault();var Dt=S;typeof Dt.redo=="function"&&Dt.redo();return}if(sr.isUndo(Te)){Q.preventDefault();var cn=S;typeof cn.undo=="function"&&cn.undo();return}if(sr.isMoveLineBackward(Te)){Q.preventDefault(),Re.move(S,{unit:"line",reverse:!0});return}if(sr.isMoveLineForward(Te)){Q.preventDefault(),Re.move(S,{unit:"line"});return}if(sr.isExtendLineBackward(Te)){Q.preventDefault(),Re.move(S,{unit:"line",edge:"focus",reverse:!0});return}if(sr.isExtendLineForward(Te)){Q.preventDefault(),Re.move(S,{unit:"line",edge:"focus"});return}if(sr.isMoveBackward(Te)){Q.preventDefault(),ke&&Ee.isCollapsed(ke)?Re.move(S,{reverse:!Ye}):Re.collapse(S,{edge:Ye?"end":"start"});return}if(sr.isMoveForward(Te)){Q.preventDefault(),ke&&Ee.isCollapsed(ke)?Re.move(S,{reverse:Ye}):Re.collapse(S,{edge:Ye?"start":"end"});return}if(sr.isMoveWordBackward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)&&Re.collapse(S,{edge:"focus"}),Re.move(S,{unit:"word",reverse:!Ye});return}if(sr.isMoveWordForward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)&&Re.collapse(S,{edge:"focus"}),Re.move(S,{unit:"word",reverse:Ye});return}if(Kl){if((fS||bf)&&ke&&(sr.isDeleteBackward(Te)||sr.isDeleteForward(Te))&&Ee.isCollapsed(ke)){var Bt=Ke.parent(S,ke.anchor.path);if(ut.isElement(Bt)&&F.isVoid(S,Bt)&&(F.isInline(S,Bt)||F.isBlock(S,Bt))){Q.preventDefault(),F.deleteBackward(S,{unit:"block"});return}}}else{if(sr.isBold(Te)||sr.isItalic(Te)||sr.isTransposeCharacter(Te)){Q.preventDefault();return}if(sr.isSoftBreak(Te)){Q.preventDefault(),F.insertSoftBreak(S);return}if(sr.isSplitBlock(Te)){Q.preventDefault(),F.insertBreak(S);return}if(sr.isDeleteBackward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?F.deleteFragment(S,{direction:"backward"}):F.deleteBackward(S);return}if(sr.isDeleteForward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?F.deleteFragment(S,{direction:"forward"}):F.deleteForward(S);return}if(sr.isDeleteLineBackward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?F.deleteFragment(S,{direction:"backward"}):F.deleteBackward(S,{unit:"line"});return}if(sr.isDeleteLineForward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?F.deleteFragment(S,{direction:"forward"}):F.deleteForward(S,{unit:"line"});return}if(sr.isDeleteWordBackward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?F.deleteFragment(S,{direction:"backward"}):F.deleteBackward(S,{unit:"word"});return}if(sr.isDeleteWordForward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?F.deleteFragment(S,{direction:"forward"}):F.deleteForward(S,{unit:"word"});return}}}},[u,S,D.onKeyDown]),onPaste:j.useCallback(Q=>{!u&&ze.hasEditableTarget(S,Q.target)&&!Ni(Q,D.onPaste)&&(!Kl||oH(Q.nativeEvent)||bf)&&(Q.preventDefault(),ze.insertData(S,Q.clipboardData))},[u,S,D.onPaste])}),xt.createElement(aj,{decorations:ue,node:S,renderElement:c,renderChunk:h,renderPlaceholder:v,renderLeaf:d,renderText:g}))))))}),lj=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",La({},t),n,Hi&&xt.createElement("br",null))},cj=()=>[],fj=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&Ee.isCollapsed(e.selection))){var n=t.startContainer.parentElement;n.getBoundingClientRect=t.getBoundingClientRect.bind(t),nH(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},Ni=(e,t)=>{if(!t)return!1;var n=t(e);return n??(e.isDefaultPrevented()||e.isPropagationStopped())},dC=e=>dc(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),hj=(e,t)=>{if(!t)return!1;var n=t(e);return n??e.defaultPrevented},gC=(e,t)=>{var n=e;if(t.inputType==="historyUndo"&&typeof n.undo=="function"){n.undo();return}if(t.inputType==="historyRedo"&&typeof n.redo=="function"){n.redo();return}},dj=j.createContext(!1),LS=parseInt(xt.version.split(".")[0],10),gj=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],pj=e=>{var{editor:t,children:n,onChange:r,onSelectionChange:i,onValueChange:o,initialValue:s}=e,u=g3(e,gj);xt.useState(()=>{if(!Ke.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Pr.stringify(s)));if(!F.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(Pr.stringify(t)));t.children=s,Object.assign(t,u)});var{selectorContext:c,onChange:h}=ZG(),d=j.useCallback(y=>{var x;switch(r&&r(t.children),y==null||(x=y.operation)===null||x===void 0?void 0:x.type){case"set_selection":i==null||i(t.selection);break;default:o==null||o(t.children)}h()},[t,h,r,i,o]);j.useEffect(()=>(O6.set(t,d),()=>{O6.set(t,()=>{})}),[t,d]);var[g,v]=j.useState(ze.isFocused(t));return j.useEffect(()=>{v(ze.isFocused(t))},[t]),Yu(()=>{var y=()=>v(ze.isFocused(t));return LS>=17?(document.addEventListener("focusin",y),document.addEventListener("focusout",y),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",y)}):(document.addEventListener("focus",y,!0),document.addEventListener("blur",y,!0),()=>{document.removeEventListener("focus",y,!0),document.removeEventListener("blur",y,!0)})},[]),xt.createElement(f8.Provider,{value:c},xt.createElement(c8.Provider,{value:t},xt.createElement(dj.Provider,{value:g},n)))},mj=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=t;r=MH(r,n);var{onChange:i,apply:o}=r;return r.getChunkSize=()=>null,r.onChange=s=>{var u=LS<18?aG.unstable_batchedUpdates:c=>c();u(()=>{i(s)})},r.apply=s=>{if(s.type==="move_node"){var u=Ke.parent(r,s.path),c=!!r.getChunkSize(u);if(c){var h=Ke.get(r,s.path),d=bS(r,u),g=ze.findKey(r,h);d.movedNodeKeys.add(g)}}o(s)},r},vj={isHistory(e){return ui(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||Nu.isOperationList(e.redos[0].operations))&&(e.undos.length===0||Nu.isOperationList(e.undos[0].operations))}},m5=new WeakMap,Tf=new WeakMap,vm=new WeakMap,_a={isHistoryEditor(e){return vj.isHistory(e.history)&&F.isEditor(e)},isMerging(e){return Tf.get(e)},isSplittingOnce(e){return vm.get(e)},setSplittingOnce(e,t){vm.set(e,t)},isSaving(e){return m5.get(e)},redo(e){e.redo()},undo(e){e.undo()},withMerging(e,t){var n=_a.isMerging(e);Tf.set(e,!0),t(),Tf.set(e,n)},withNewBatch(e,t){var n=_a.isMerging(e);Tf.set(e,!0),vm.set(e,!0),t(),Tf.set(e,n),vm.delete(e)},withoutMerging(e,t){var n=_a.isMerging(e);Tf.set(e,!1),t(),Tf.set(e,n)},withoutSaving(e,t){var n=_a.isSaving(e);m5.set(e,!1);try{t()}finally{m5.set(e,n)}}},yj=e=>{var t=e,{apply:n}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:r}=t,{redos:i}=r;if(i.length>0){var o=i[i.length-1];o.selectionBefore&&Re.setSelection(t,o.selectionBefore),_a.withoutSaving(t,()=>{F.withoutNormalizing(t,()=>{for(var s of o.operations)t.apply(s)})}),r.redos.pop(),t.writeHistory("undos",o)}},t.undo=()=>{var{history:r}=t,{undos:i}=r;if(i.length>0){var o=i[i.length-1];_a.withoutSaving(t,()=>{F.withoutNormalizing(t,()=>{var s=o.operations.map(Nu.inverse).reverse();for(var u of s)t.apply(u);o.selectionBefore&&Re.setSelection(t,o.selectionBefore)})}),t.writeHistory("redos",o),r.undos.pop()}},t.apply=r=>{var{operations:i,history:o}=t,{undos:s}=o,u=s[s.length-1],c=u&&u.operations[u.operations.length-1],h=_a.isSaving(t),d=_a.isMerging(t);if(h==null&&(h=Cj(r)),h){if(d==null&&(u==null?d=!1:i.includes(c)?d=!0:d=wj(r,c)),_a.isSplittingOnce(t)&&(d=!1,_a.setSplittingOnce(t,void 0)),u&&d)u.operations.push(r);else{var g={operations:[r],selectionBefore:t.selection};t.writeHistory("undos",g)}for(;s.length>100;)s.shift();o.redos=[]}n(r)},t.writeHistory=(r,i)=>{t.history[r].push(i)},t},wj=(e,t)=>!!(t&&e.type==="insert_text"&&t.type==="insert_text"&&e.offset===t.offset+t.text.length&&K.equals(e.path,t.path)||t&&e.type==="remove_text"&&t.type==="remove_text"&&e.offset+e.text.length===t.offset&&K.equals(e.path,t.path)),Cj=(e,t)=>e.type!=="set_selection";const xj=e=>{const t=e,{insertData:n}=t;return t.insertBreak=()=>{e.insertText(`
`)},t.insertSoftBreak=()=>{e.insertText(`
`)},t.insertData=r=>{let i=r.getData("text/plain");if(!r.getData("application/x-slate-fragment")&&i){i.endsWith(`
`)&&(i=i.substring(0,i.length-1)),i=i.trim().replace(/\t+/g," "),t.insertText(i);return}n(r)},t},I0="#6698FF",oa=9,N6="plait-text-plugin-key",_S=30,H6="transparent",p3=20,Mg=18,a0="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",NS="none";var pC;(function(e){e.image="image"})(pC||(pC={}));const HS=["png","jpeg","gif","bmp"];var G6;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(G6||(G6={}));var Ss;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(Ss||(Ss={}));class Yo{constructor(t,n){this.board=t,this.options=n}processDrawing(t,n,r){var i,o;if(this.canDraw&&this.canDraw(t,r)){const s=this.draw(t,r);if(s){this.g&&n.contains(this.g)?this.g.replaceWith(s):(this.g&&this.g.remove(),(i=this.options)!=null&&i.prepend?n.prepend(s):n.appendChild(s)),this.g=s;const u=this.board.getRectangle(t);if(!u)return;let c=M.getCenterPoint(u);if((o=this.options)!=null&&o.active){const d=Di(this.board,u);c=M.getCenterPoint(d)}let h;wo.isGroup(t)?h=po(Bs(this.board,t,!0)):h=t.angle,h&&Ps(s,c,h)}else this.destroy();Ej(this)&&this.afterDraw(t)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function Ej(e){return!!e.afterDraw}const GS=(e,t)=>{const n={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},r=ih(I.getRoughSVG(e),t,oa,n);return r.classList.add(sO),r};function Pj(e,t){return ih(I.getRoughSVG(e),t,oa,{stroke:"#FFFFFF",strokeWidth:1,fill:`${I0}`,fillStyle:"solid"})}function mC(e,t){return ih(I.getRoughSVG(e),t,oa,{stroke:`${I0}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const Df=6,vC=(e,t)=>{const n={stroke:qr,strokeWidth:1,fillStyle:"solid"},r=[t.x-p3-Mg/2,t.y+t.height+p3+Mg/2],i=I.getRoughSVG(e),o=Lt(),s=i.path(`M ${r[0]+Df} ${r[1]} A ${Df} ${Df}, 0, 1, 0, ${r[0]} ${r[1]+Df}`,n),u=i.polygon([[r[0],r[1]+Df-2],[r[0],r[1]+Df+2],[r[0]+4.5,r[1]+Df]],{...n,fill:qr});return Wt(u,"round"),o.append(s,u),o},Ep=(e,t)=>new m3(e,{...t,active:!0}),vy=class vy extends Yo{constructor(t,n){super(t,{...n,active:!0}),this.board=t,this.options=n,this.hasResizeHandle=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Lt(),i=Di(this.board,this.options.getRectangle(t)),o=this.options.getStrokeWidth()*this.board.viewport.zoom,s=M.inflate(i,o),u=ua(this.board,s,{stroke:I0,strokeWidth:dr});return r.append(u),u.classList.add(vp),u.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,M.getCornerPoints(s).forEach(c=>{const h=GS(this.board,c);r.append(h)})):this.hasResizeHandle=!1,r}};vy.key="active-generator";let m3=vy;const v3=e=>`${e}`,y3=e=>Number(e),Sj=(e,t)=>{let r=(j6(e,v3(t))?t-4:t)+2;return r>=4&&(r=r-4),j6(e,v3(t))?r+4:r},yC=e=>{switch(e){case 0:case 2:return ra.nwse;case 1:case 3:return ra.nesw;case 4:case 6:return ra.ns;case 5:case 7:return ra.ew;default:return null}},Tj=(e,t)=>{const n=z7.indexOf(e);if(n>=0){const r=Math.round(t/(Math.PI/4));e=z7[(n+r)%z7.length]}return e},jS=(e,t)=>{const n=M.getCornerPoints(e),r=n.map((o,s)=>({rectangle:{x:o[0]-t/2,y:o[1]-t/2,width:t,height:t},handle:v3(s),cursorClass:yC(s)})),i=Dj(n,t/2);return r.push(...i.map((o,s)=>({rectangle:o,handle:v3(s+4),cursorClass:yC(s+4)}))),r},wC=(e,t)=>t<=3?M.getCornerPoints(e)[t]:M.getEdgeCenterPoints(e)[t-4],Dj=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){let i=M.getRectangleByPoints([e[r],e[(r+1)%4]]);const o=new Array(2).fill(0);o[(r+1)%2]=t/2,i=M.expand(i,o[0],o[1]),n.push(i)}return n},av=new WeakMap,Gu=e=>!!av.get(e),Aj=(e,t)=>Gu(e)&&t(av.get(e)),Bj=(e,t,n)=>{I.getBoardContainer(e).classList.add(`${n}-resizing`),av.set(e,t),ol(e,!0)},Rj=(e,t)=>{I.getBoardContainer(e).classList.remove(`${t}-resizing`),av.delete(e),ol(e,!1)},j6=(e,t)=>y3(t)>=4,Wm=(e,t)=>!j6(e,t),h8=(e,t,n,r,i)=>{const o=kr([r],n,i)[0],s=kr([M.getCenterPoint(t)],n,i)[0],u=M.getPoints(t),c=M.getCenterPoint(e),h=kr([s],o,-i)[0],d=kr(u,c,i);return kr(d,h,-i)},Mj=e=>{const t=e.points;return t&&t.length>1},uv=(e,t)=>{if(I.hasBeenTextEditing(e)||gi(e))return!1;const n=Qe(e);return n.length===1&&n[0]===t&&Mj(t)};function Kn(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(n*n+r*r);if(i===0)throw new Error("Points must not be the same for a unit vector calculation.");const o=n/i,s=r/i;return[o,s]}function Jd(e,t,n){const r=Math.hypot(t[0],t[1]);return[e[0]+t[0]/r*n,e[1]+t[1]/r*n]}function CC(e,t,n,r){return r?[e[0]+n,e[1]+n/t[0]*t[1]]:[e[0]+n/t[1]*t[0],e[1]+n]}function xC(e){const t=e[0],r=e[1],i=-t;return[r,i]}function Kg(e,t){if(!t)return e;const n=e[0],r=e[1],i=n*Math.cos(t)-r*Math.sin(t),o=n*Math.sin(t)+r*Math.cos(t);return[i,o]}function $S(e,t,n){const r=Tt(e[0],e[1],t[0],t[1]),i=Tt(e[0],e[1],n[0],n[1]),o=Tt(t[0],t[1],n[0],n[1]);return Math.abs(r+i-o)<.1}const bj=(e,t,n)=>{const r=[],i=[Math.min(t[0],n[0]),Math.max(t[0],n[0])],o=[Math.min(t[1],n[1]),Math.max(t[1],n[1])],s=Kn(t,n);if(e[0]>=i[0]&&e[0]<=i[1]){const u=CC(t,s,e[0]-t[0],!0);r.push(u)}else if(e[1]>=o[0]&&e[1]<=o[1]){const u=CC(t,s,e[1]-t[1],!1);r.push(u)}return r};function WS(e,t){const r=zS(e)*t;let i=0;for(let o=0;o<e.length-1;o++){const[s,u]=e[o],[c,h]=e[o+1],d=Tt(s,u,c,h);if(i+d>=r){const v=(r-i)/d,y=s+(c-s)*v,x=u+(h-u)*v;return[y,x]}i+=d}return e[e.length-1]}function zS(e){let t=0;for(let n=0;n<e.length-1;n++){const[r,i]=e[n],[o,s]=e[n+1];t+=Tt(r,i,o,s)}return t}function VS(e,t){const n=zS(e);let r=0;for(let i=0;i<e.length-1;i++){if($S(t,e[i],e[i+1]))return r+=Tt(t[0],t[1],e[i][0],e[i][1]),r/n;r+=Tt(e[i][0],e[i][1],e[i+1][0],e[i+1][1])}throw new Error("Cannot get ratio by point")}const w0=e=>{const t=[];return e.forEach(n=>{t.findIndex(i=>mt.isEquals(n,i))===-1&&t.push(n)}),t};function _u(e){if(e.length<=2)return e;let t=[e[0]];for(let n=1;n<e.length-1;n++){const r=e[n-1],i=e[n],o=e[n+1];!(mt.isOverHorizontal([r,i,o])||mt.isOverVertical([r,i,o]))&&t.push(i)}return t.push(e[e.length-1]),t}const Yg=(e,t,n)=>{const r=Tt(...e,...t),i=mt.isEquals(e,t),o=i?1:(t[1]-e[1])/r,s=i?1:(t[0]-e[0])/r;return[e[0]+n*s,e[1]+n*o]},kj={[kt.left]:{x:-1,y:0},[kt.right]:{x:1,y:0},[kt.top]:{x:0,y:-1},[kt.bottom]:{x:0,y:1}};function Oj(e){switch(e){case kt.left:return kt.right;case kt.right:return kt.left;case kt.top:return kt.bottom;case kt.bottom:return kt.top}}function US(e){if(e[0]===0)return kt.left;if(e[0]===1)return kt.right;if(e[1]===0)return kt.top;if(e[1]===1)return kt.bottom}function Kd(e){const t=e[0],n=e[1];if(t===0&&n===0)return null;if(t===0)return n>0?kt.bottom:kt.top;if(n===0)return t>0?kt.right:kt.left;const r=Math.atan2(n,t);return r>-Math.PI/4&&r<=Math.PI/4?kt.right:r>Math.PI/4&&r<=3*Math.PI/4?kt.bottom:r>-3*Math.PI/4&&r<=-Math.PI/4?kt.top:kt.left}function Yf(e){return kj[e]}function C0(e){return e===0?e:e/Math.abs(e)}const Ij=(e,t,n,r,i)=>{const o=Yf(t),s=Yf(r),u=[e[0]+o.x*i,e[1]+o.y*i],c=[n[0]+s.x*i,n[1]+s.y*i],h=Fj(u,t,c),d=h.x!==0?"x":"y",g=h[d];let v=[],y,x;const[E,T]=Lj({sourceX:e[0],sourceY:e[1],targetX:n[0],targetY:n[1]});if(o[d]*s[d]===-1){y=E,x=T;const D=[[y,u[1]],[y,c[1]]],S=[[u[0],x],[c[0],x]];o[d]===g?v=d==="x"?D:S:v=d==="x"?S:D}else{const D=[[u[0],c[1]]],S=[[c[0],u[1]]];d==="x"?v=o.x===g?S:D:v=o.y===g?D:S;let R;if(t!==r){const L=d==="x"?1:0,k=o[d]===s[d==="x"?"y":"x"],W=u[L]>c[L],z=u[L]<c[L];R=o[d]===1&&(!k&&W||k&&z)||o[d]!==1&&(!k&&z||k&&W),R&&(v=d==="x"?D:S)}}return[e,u,...v,c,n]},Fj=(e,t=kt.bottom,n)=>t===kt.left||t===kt.right?e[0]<n[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<n[1]?{x:0,y:1}:{x:0,y:-1};function Lj({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,u=r<t?r+s:r-s;return[o,u,i,s]}function d8(e){const t=e.ctrlKey||e.metaKey,n=nn.isKeyHotkey("alt",e),r=nn.isKeyHotkey("shift",e),i=e.key.includes("CapsLock"),o=e.key.includes("Tab"),s=e.key.includes("Escape"),u=e.key.startsWith("F"),c=!!e.key.includes("Arrow");return i||t||n||c||r||o||s||u}const _j=e=>nn.isKeyHotkey("mod+/",e),Nj=e=>e.key==="Tab",Hj=e=>e.key==="Enter",g8=e=>e.code==="Space",p8=e=>Ti.isDeleteBackward(e)||Ti.isDeleteForward(e);var Gi;(function(e){e.dnd="dnd",e.drawing="drawing"})(Gi||(Gi={}));const XS=new WeakMap,KS=e=>XS.get(e),na=(e,t)=>{XS.set(e,t)},lv=e=>KS(e)===Gi.dnd,F0=e=>KS(e)===Gi.drawing,L0=e=>{const t=yn.getElementRef(e);return(t==null?void 0:t.getTextManages())||[]},oh=e=>{const t=L0(e)[0];return t||console.warn("can not find textManage"),t},sh=e=>L0(e).map(t=>t.editor),cv=e=>{const t=sh(e)[0];return t||console.warn("can not find textManage"),t},Gj=e=>{const t=Qe(e);let n=null;return t.forEach(r=>{const i=sh(r);!n&&i&&i.length>0&&(n=i[0])}),n},YS=e=>e.map(t=>{try{const n=sh(t);return n.length?n.map(r=>{const i=Ke.texts(r);return Array.from(i).reduce((o,s)=>o+=s[0].text,"")}).join(" "):""}catch{return""}}).filter(t=>t).join(" "),qS=(e,t)=>{const n=t||Qe(e);if(n.length){const r=[];n.forEach(o=>{r.push(...L0(o))});const i=r.find(o=>o.isEditing);return i?[i.editor]:r.map(o=>o.editor)}},eu=(e,t,n)=>{n=n||{};const r=typeof e=="string"?{children:[{text:e,...n}],type:"paragraph"}:e;return t&&(r.align=t),r},EC=e=>e===14?20:e===18?25:e*1.5,ZS=async(e,t,n,r)=>{let i=0,o=0;await jj(t,n).then(h=>{i=h.width,o=h.height});let s=null;const u=URL.createObjectURL(t);I.getBoardContext(e).setUploadingFile({url:u,file:t}),s={url:u,width:i,height:o},r(s)};function jj(e,t){return new Promise((n,r)=>{const i=new Image;i.src=URL.createObjectURL(e),i.onload=function(){const o=t,s=t*i.naturalHeight/i.naturalWidth;n(i.naturalWidth>t?{width:o,height:s}:{width:i.naturalWidth,height:i.naturalHeight})}})}const m8=new WeakMap,fo=e=>m8.get(e),QS=(e,t)=>{m8.set(e,t)},$j=e=>{m8.delete(e)};class Wj{constructor(){this.list=[]}enqueue(t){this.list.push(t),this.list=this.list.sort((n,r)=>n.priority-r.priority)}dequeue(){return this.list.shift()}}class zj{constructor(t){this.graph=t,this.cameFrom=new Map}heuristic(t,n){return Math.abs(t[0]-n[0])+Math.abs(t[1]-n[1])}search(t,n,r){const i=new Wj,o=this.graph.get(t);this.cameFrom=new Map;const s=new Map;for(s.set(o,0),i.enqueue({node:o,priority:0});i.list.length>0;){var u=i.dequeue();if(!u)throw new Error("can't find current");const c=u.node.data;if(c[0]===n[0]&&c[1]===n[1])break;u.node.adjacentNodes.forEach(h=>{let d=s.get(u.node)+this.heuristic(h.data,u.node.data);const g=this.cameFrom.get(u.node),v=g?g.data:r,y=v[0]===(u==null?void 0:u.node.data[0])&&v[0]===h.data[0],x=v[1]===(u==null?void 0:u.node.data[1])&&v[1]===h.data[1];if(!y&&!x&&(d=d+1),!s.has(h)||s.get(h)&&d<s.get(h)){s.set(h,d);const E=d+this.heuristic(h.data,n);i.enqueue({node:h,priority:E}),this.cameFrom.set(h,u.node)}})}}getRoute(t,n){const r=[];let i=n;for(;i[0]!==t[0]||i[1]!==t[1];){const o=this.graph.get(i),s=this.cameFrom.get(o);r.unshift(s.data),i=s.data}return r}}class Vj{constructor(t){this.data=t,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class Uj{constructor(){this.index={}}add(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();i in this.index||(this.index[i]={}),o in this.index[i]||(this.index[i][o]=new Vj(t))}connect(t,n){const r=this.get(t),i=this.get(n);if(!r||!i)throw new Error("A point was not found");r.adjacentNodes.push(i)}has(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]}get(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]?this.index[i][o]:null}}const JS=A0("debug:plait:elbow-line-routing"),eT=(e,t)=>{const{nextSourcePoint:n,nextTargetPoint:r}=e,i=Kj(e),o=Yj(i),s=new zj(o);s.search(n,r,e.sourcePoint);let u=s.getRoute(n,r);u=[e.sourcePoint,...u,r,e.targetPoint];const c=M.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),h=M.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),d=c?void 0:M.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),g=h?void 0:M.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return u=Xj(u,{centerX:d,centerY:g,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},t),u},Xj=(e,t,n)=>{const{sourceRectangle:r,targetRectangle:i,centerX:o,centerY:s}=t;if(n&&JS.clear(),o!==void 0){const u=SC(e,o,!0),c=u.pointOfHit&&PC(e,{parallelPaths:u.parallelPaths,pointOfHit:u.pointOfHit,sourceRectangle:r,targetRectangle:i},n);c&&(e=c)}if(s!==void 0){const u=SC(e,s,!1),c=u.pointOfHit&&PC(e,{parallelPaths:u.parallelPaths,pointOfHit:u.pointOfHit,sourceRectangle:r,targetRectangle:i},n);c&&(e=c)}return e},PC=(e,t,n)=>{const{parallelPaths:r,pointOfHit:i,sourceRectangle:o,targetRectangle:s}=t;let u=null;return r.forEach(c=>{const h=[i,c[0],c[1]],d=M.getRectangleByPoints(h);if(!M.isHit(d,o)&&!M.isHit(d,s)){const g=M.getCornerPointsByPoints(h);n&&JS.drawRectangle(n,d);const v=[],y=[];e.forEach((L,k)=>{const W=g.findIndex(z=>mt.isEquals(L,z));W!==-1&&(v.push(k),y.push(W))});const x=[...e],E=g.find((L,k)=>!y.includes(k)),T=Math.abs(v[0]-v[v.length-1])+1;x.splice(v[0]+1,T-2,E);const D=_u([...e]).length-1;_u([...x]).length-1<=D&&(u=x)}return null}),u},SC=(e,t,n)=>{const r=[];let i=null,o=null;const s=n?0:1;for(let u=0;u<e.length;u++){const c=e[u-1],h=e[u];i===null&&c&&c[s]===h[s]&&(i=c),i!==null&&c[s]!==h[s]&&(r.push([i,c]),i=null),h[s]===t&&(o=h)}return i&&r.push([i,e[e.length-1]]),{pointOfHit:o,parallelPaths:r}},Kj=e=>{const{nextSourcePoint:t,nextTargetPoint:n,sourceOuterRectangle:r,targetOuterRectangle:i}=e,o=[],s=[];let u=[];[r,i].forEach(d=>{o.push(d.x,d.x+d.width/2,d.x+d.width),s.push(d.y,d.y+d.height/2,d.y+d.height)});const c=[r.x,r.x+r.width,i.x,i.x+i.width].sort((d,g)=>d-g);o.push((c[1]+c[2])/2,t[0],n[0]);const h=[r.y,r.y+r.height,i.y,i.y+i.height].sort((d,g)=>d-g);s.push((h[1]+h[2])/2,t[1],n[1]);for(let d=0;d<o.length;d++)for(let g=0;g<s.length;g++){const v=[o[d],s[g]],y=M.isPointInRectangle(r,v),x=M.isPointInRectangle(i,v);!y&&!x&&u.push(v)}return u=w0(u).filter(d=>{const g=M.isPointInRectangle(r,d),v=M.isPointInRectangle(i,d);return!g&&!v}),u},Yj=e=>{const t=new Uj,n=[],r=[];e.forEach(o=>{const s=o[0],u=o[1];n.indexOf(s)<0&&n.push(s),r.indexOf(u)<0&&r.push(u),t.add(o)}),n.sort((o,s)=>o-s),r.sort((o,s)=>o-s);const i=o=>t.has(o);for(let o=0;o<n.length;o++)for(let s=0;s<r.length;s++){const u=[n[o],r[s]];if(i(u)){if(o>0){const c=[n[o-1],r[s]];i(c)&&(t.connect(c,u),t.connect(u,c))}if(s>0){const c=[n[o],r[s-1]];i(c)&&(t.connect(c,u),t.connect(u,c))}}}return t},qj=(e,t)=>{const n=_S;let r=new Array(4).fill(n),i=new Array(4).fill(n);const o=e.x-(t.x+t.width),s=t.x-(e.x+e.width);if(o>0&&o<n*2){const h=o/2;r[3]=h,i[1]=h}if(s>0&&s<n*2){const h=s/2;i[3]=h,r[1]=h}const u=e.y-(t.y+t.height),c=t.y-(e.y+e.height);if(u>0&&u<n*2){const h=u/2;r[0]=h,i[2]=h}if(c>0&&c<n*2){const h=c/2;r[2]=h,i[0]=h}return{sourceOffset:r,targetOffset:i}},TC=(e,t,n)=>{switch(n){case kt.top:return[e[0],t.y];case kt.bottom:return[e[0],t.y+t.height];case kt.right:return[t.x+t.width,e[1]];default:return[t.x,e[1]]}},Zj=(e,t)=>{const{sourceOffset:n,targetOffset:r}=qj(e,t),i=M.expand(e,n[3],n[0],n[1],n[2]),o=M.expand(t,r[3],r[0],r[1],r[2]);return{sourceOuterRectangle:i,targetOuterRectangle:o}},Qj=e=>{const{sourcePoint:t,nextSourcePoint:n,sourceRectangle:r,sourceOuterRectangle:i,targetPoint:o,nextTargetPoint:s,targetRectangle:u,targetOuterRectangle:c}=e;return M.isPointInRectangle(u,t)||M.isPointInRectangle(c,n)||M.isPointInRectangle(i,s)||M.isPointInRectangle(r,o)},zm=new Map,v8=(e,t,n)=>{let r=zm.has(e)?zm.get(e):{};r[t]=n,zm.set(e,r)},fv=e=>zm.get(e),tT=new WeakMap,Jj=(e,t)=>{I.getBoardContainer(e).classList.add("draw-elements-rotating"),tT.set(e,t),ol(e,!0)},e$=e=>{I.getBoardContainer(e).classList.remove("draw-elements-rotating"),tT.delete(e),ol(e,!1)},DC=(e,t)=>{const n=e.getRectangle(t);return n?n.width*n.height:0},t$=(e,t,n="asc")=>t.sort((r,i)=>{const o=DC(e,r),s=DC(e,i);return n==="asc"?o-s:s-o}),n$=e=>e&&e!==NS&&e!==H6,xc=(e,t)=>{switch(e){case Ss.dashed:return[8,8+t];case Ss.dotted:return[2,4+t];default:return}},nT=(e,t,n,r)=>t.map(i=>{const o=r&&r(i);if(o)return o;if(i.points){const s=i.points.map(u=>[u[0]-n[0],u[1]-n[1]]);return{...i,points:s}}return i}),rT=(e,t,n,r)=>{const i={};t.forEach(o=>{i[o.id]=En()}),t.forEach(o=>{o.id=i[o.id],r&&r(o,i),o.points&&(o.points=o.points.map(s=>[n[0]+s[0],n[1]+s[1]])),Xe.insertNode(e,o,[e.children.length])}),Xe.addSelectionWithTemporaryElements(e,t)},Yn=(e,t,n=kt.right)=>n===kt.left?[e[0]-t,e[1]]:n===kt.bottom?[e[0],e[1]+t]:n===kt.top?[e[0],e[1]-t]:[e[0]+t,e[1]],ym=(e,t,n=kt.right)=>n===kt.bottom?[e[0]+t,e[1]]:n===kt.top?[e[0]+t,e[1]]:[e[0],e[1]+t],r$=e=>e===0?kt.top:e===1?kt.right:e===2?kt.bottom:e===3?kt.left:kt.right,iT=(e,t,n)=>Math.abs(n?e[0]-t[0]:e[1]-t[1]),i$="foreign-object-image",yy=class yy extends Yo{constructor(t,n){super(t,n),this.board=t,this.options=n,this.isFocus=!1}canDraw(t){return!!this.options.getImageItem(t)}draw(t){this.element=t;const n=Lt(),r=this.options.getRectangle(t);this.foreignObject=L4(r.x,r.y,r.width,r.height),this.foreignObject.classList.add(i$),n.append(this.foreignObject);const i={board:this.board,imageItem:this.options.getImageItem(t),element:t,getRectangle:()=>this.options.getRectangle(t)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,i),this.activeGenerator=Ep(this.board,{getStrokeWidth:()=>(Qe(this.board).length===1&&!gi(this.board),dr),getStrokeOpacity:()=>{const o=Qe(this.board);return o.length===1&&!gi(this.board)||!o.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const o=uv(this.board,this.element);return!!fo(this.board)||o}}),n}updateImage(t,n,r){if(this.element=r,n!==r&&this.imageComponentRef){const s={imageItem:this.options.getImageItem(r),element:r,getRectangle:()=>this.options.getRectangle(r)};this.imageComponentRef.update(s)}const i=this.options.getRectangle(r);Pg(this.g,i.width,i.height,i.x,i.y),i&&r.angle!==void 0&&Ps(this.g,M.getCenterPoint(i),r.angle);const o=I.getActiveHost(this.board);this.activeGenerator.processDrawing(r,o,{selected:this.isFocus})}setFocus(t,n){this.isFocus=n;const r=I.getActiveHost(this.board);this.activeGenerator.processDrawing(t,r,{selected:n});const i={isFocus:n};this.imageComponentRef.update(i)}destroy(){var t,n;super.destroy(),(t=this.imageComponentRef)==null||t.destroy(),(n=this.activeGenerator)==null||n.destroy()}};yy.key="image-generator";let qu=yy;const Pp=(e,t,n)=>{Qe(e).forEach(i=>{if(n!=null&&n.match&&!(n!=null&&n.match(i)))return;const o=I.findPath(e,i),s=n!=null&&n.getMemorizeKey?n==null?void 0:n.getMemorizeKey(i):"";for(let u in t)s&&v8(s,u,t[u]);n!=null&&n.callback?n.callback(i,o):Xe.setNode(e,t,o)})},o$=(e,t,n)=>{Pp(e,{strokeStyle:t},n)},s$=(e,t,n)=>{Pp(e,{fill:t},n)},a$=(e,t,n)=>{Pp(e,{strokeColor:t},n)},u$=(e,t,n)=>{Pp(e,{strokeWidth:t},n)},tu={setFillColor:s$,setStrokeStyle:o$,setProperty:Pp,setStrokeWidth:u$,setStrokeColor:a$},qf=(e,t=!1)=>{let n=e[0],r=e[1];if(t){const s=Math.abs(n[0]-r[0]),u=Math.abs(n[1]-r[1]),c=Math.max(u,s);r=[n[0]+(r[0]>n[0]?c:-c),n[1]+(r[1]>n[1]?c:-c)]}const i=[Math.min(n[0],r[0]),Math.min(n[1],r[1])];let o=[Math.max(n[0],r[0]),Math.max(n[1],r[1])];return[i,o]},AC=(e,t)=>!I.isReadonly(e)&&!I.hasBeenTextEditing(e)&&I.isPointer(e,Zt.selection),ah=(e,t)=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s=null,u=null,c=null;e.pointerDown=d=>{if(!t.canResize()||!AC(e)||!Va(d)){n(d);return}const g=At(e,Ot(e,d.x,d.y));if(o=t.hitTest(g),o){o.cursorClass&&I.getBoardContainer(e).classList.add(`${o.cursorClass}`),u=[d.x,d.y],s={path:Array.isArray(o.element)?o.element.map(y=>I.findPath(e,y)):I.findPath(e,o.element),element:o.element,handle:o.handle,handleIndex:o.handleIndex,rectangle:o.rectangle,options:o.options};return}n(d)},e.pointerMove=d=>{if(!t.canResize()||!AC(e)){h(),r(d);return}if(u&&o&&!Gu(e)){const g=[d.x,d.y];Tt(u[0],u[1],g[0],g[1])>D4&&(Bj(e,s,t.key),br.set(e,!0),t.beforeResize&&t.beforeResize(s))}if(!Gu(e)&&!cc(e)){const g=At(e,Ot(e,d.x,d.y));Ua(e,t.key+"-common-resize-hit-test",()=>{const v=t.hitTest(g);v?(c&&v.cursorClass!==c.cursorClass&&I.getBoardContainer(e).classList.remove(`${c.cursorClass}`),c=v,c.cursorClass&&I.getBoardContainer(e).classList.add(`${c.cursorClass}`)):h()})}else if(u&&Gu(e)){d.preventDefault();const g=At(e,Ot(e,d.x,d.y));Ua(e,"with-common-resize",()=>{u&&s&&t.onResize(s,{startPoint:At(e,Ot(e,u[0],u[1])),endPoint:g,isShift:!!d.shiftKey})});return}r(d)},e.globalPointerUp=d=>{i(d),(Gu(e)||o)&&(t.afterResize&&t.afterResize(s),Rj(e,t.key),u=null,o=null,s=null,br.set(e,!1))};const h=()=>{c&&(c.cursorClass&&I.getBoardContainer(e).classList.remove(`${c.cursorClass}`),c=null)};return e};class l$ extends Yo{canDraw(t){return!0}draw(t,n){const r={stroke:"",strokeWidth:dr,strokeLineDash:[5]};let i={x:0,y:0,width:0,height:0};return n&&(r.stroke="#999",i=z4(this.board,t,!0)),ua(this.board,i,r)}}class c${constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(t,n){this.generatorMap.set(t,n)}getGenerator(t){return this.generatorMap.get(t)}initializeTextManage(t){this.textManages=[],Array.isArray(t)?this.textManages.push(...t):this.textManages.push(t)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(t=>{t.destroy()}),this.textManages=[]}}class Ec extends HF{constructor(t=new c$){super(t)}}class f$ extends Ec{constructor(){super()}initializeGenerator(){this.activeGenerator=Ep(this.board,{getRectangle:t=>z4(this.board,t),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!gi(this.board)}),this.groupGenerator=new l$(this.board)}initialize(){super.initialize(),this.initializeGenerator();const t=I.getBoardContext(this.board);this.onStableSubscription=t.onStable().subscribe(()=>{const n=Bs(this.board,this.element,!1,!0),r=n.some(i=>T6(this.board,i))&&!n.every(i=>T6(this.board,i));this.groupGenerator.processDrawing(this.element,this.getElementG(),r)})}onContextChanged(t,n){}destroy(){var t;super.destroy(),(t=this.onStableSubscription)==null||t.unsubscribe()}}function oT(e){let t,n;const{drawElement:r,pointerMove:i,globalPointerUp:o,insertFragment:s,getDeletedFragment:u,deleteFragment:c,getRelatedFragment:h,getRectangle:d,keyDown:g}=e;return e.drawElement=v=>wo.isGroup(v.element)?f$:r(v),e.pointerMove=v=>{Ua(e,"with-group",()=>{t==null||t.remove();const y=At(e,Ot(e,v.x,v.y));let x={anchor:y,focus:y};e.selection&&!v0.isCollapsed(e.selection)&&(x=e.selection);const E=I.getPointer(e);if(!Gu(e)&&!fc(e)&&E===Zt.selection){const T=iP(e,x);T.length&&(t=YI(e,T),t&&I.getElementTopHost(e).append(t))}}),i(v)},e.globalPointerUp=v=>{t==null||t.remove(),t=null,o(v)},e.getRelatedFragment=(v,y)=>{const x=XI(e,v,y);return h([...v,...x],y)},e.insertFragment=(v,y,x)=>{var D,S;let E=[];if((D=v==null?void 0:v.elements)!=null&&D.length){E=new Array((S=v==null?void 0:v.elements)==null?void 0:S.length);const R=Cc(e,v==null?void 0:v.elements);U4(e,v==null?void 0:v.elements).forEach(k=>{const W=v.elements.map(z=>z.id).indexOf(k.id);E.splice(W,1,k.groupId?w3(k,void 0):k)}),R.length&&R.forEach(k=>{const W=v.elements.map(Y=>Y.id).indexOf(k.id),z={...w3(k,void 0),id:En()};E.splice(W,1,z),sT(k,v.elements,z.id,E)}),v.elements=E}s(v,y,x),(E==null?void 0:E.filter(R=>wo.isGroup(R))).forEach(R=>{Xe.insertNode(e,R,[e.children.length])})},e.getDeletedFragment=v=>(n=h$(e),n&&n.length&&v.push(...n),u(v)),e.deleteFragment=v=>{n!=null&&n.length&&g$(e,n),c(v),n=null},e.getRectangle=v=>wo.isGroup(v)?z4(e,v,!0):d(v),e.keyDown=v=>{if(!I.isReadonly(e)){if(nn.isKeyHotkey("mod+g",v)){v.preventDefault(),Xe.addGroup(e);return}if(nn.isKeyHotkey("mod+shift+g",v)){v.preventDefault(),Xe.removeGroup(e);return}}g(v)},e}const w3=(e,t)=>({...e,groupId:t}),sT=(e,t,n,r)=>{const i=t.filter(o=>o.groupId===e.id);return i.length&&i.forEach(o=>{const s=t.map(u=>u.id).indexOf(o.id);if(wo.isGroup(o)){const u={...w3(o,n),id:En()};r.splice(s,1,u),sT(o,t,u.id,r)}else r.splice(s,1,w3(o,n))}),r},h$=e=>{const n=[...e.getRelatedFragment([])],r=Cc(e),i=X4(e),o=[...r,...i];return o.forEach(s=>{const u=wc(e,s,!0);if(u.length){const h=Bs(e,u[0],!1,!0).filter(d=>![...o,...n].map(g=>g.id).includes(d.id));if((h.length===1||h.length===0)&&(n.includes(u[0])||n.push(u[0]),h.length===1&&u.length>1)){const d=d$(e,u.slice(1,u.length),[...o,...n]);let g=u.length;d&&(g=u.findIndex(v=>v.id===d.id)),[...u.slice(1,g)].forEach(v=>{n.includes(v)||n.push(v)})}}}),n},d$=(e,t,n)=>{let r=null;for(let i=0;i<t.length;i++)if(Bs(e,t[i],!1,!0).filter(u=>!n.map(c=>c.id).includes(u.id)).length>0){r=t[i];break}return r},g$=(e,t)=>{const n=X4(e),r=Cc(e),i=n.filter(o=>o.groupId);[...r,...i].forEach(o=>{const s=wc(e,o,!0);if(s.length){const c=Bs(e,s[0],!1,!0).filter(h=>h.id!==o.id);if(c.length===1){const h=t.map(d=>d.id);if(s.some(d=>h.includes(d.id))){const d=s.find(v=>!h.includes(v.id)),g=I.findPath(e,c[0]);Xe.setNode(e,{groupId:(d==null?void 0:d.id)||void 0},g)}}}})},v5=new WeakMap,p$=e=>{if(e){if(!v5.get(e)){const t=document.createElement("canvas");return v5.set(e,t),t}return v5.get(e)}return document.createElement("canvas")};function Sp(e,t,n,r=1e4){const o=p$(e).getContext("2d"),s=Ke.texts(t),u=[[]];for(const d of s){const[g]=d;Ke.string(g).split(`
`).forEach((x,E)=>{const T={...g,text:x};if(E===0)u[u.length-1].push(T);else{const D=[];D.push(T),u.push(D)}})}let c=0,h=0;return u.forEach((d,g)=>{let v=0,y=EC(n.fontSize);if(d.forEach((x,E)=>{const T=m$(x,{fontFamily:n.fontFamily,fontSize:n.fontSize});o.font=T,v+=o.measureText(x.text).width;const D=E===d.length-1;if(x["font-size"]&&(D||x.text!=="")){const S=EC(parseFloat(x["font-size"]));S>y&&(y=S)}}),v<=r)v>c&&(c=v),h+=y;else{c=r;const x=Math.ceil(v/r);h+=y*x}}),{width:c,height:h}}const m$=(e,t)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||t.fontSize}px ${t.fontFamily} `;class Tp{constructor(t,n){this.board=t,this.options=n,this.isEditing=!1,this.getSize=(r,i)=>{const o=window.getComputedStyle(this.foreignObject.children[0]),s=o.fontFamily,u=parseFloat(o.fontSize),c=r||this.editor.children[0];return Sp(this.board,c,{fontSize:u,fontFamily:s},i||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(t){const n=this.options.getRectangle();this.g=Lt(),this.foreignObject=L4(n.x,n.y,n.width,n.height),this.g.append(this.foreignObject),this.g.classList.add("text");const r={board:this.board,text:t,textPlugins:this.options.textPlugins,onChange:i=>{if(i.operations.some(o=>!Nu.isSelectionOperation(o))){const{width:o,height:s}=this.getSize();this.options.onChange&&this.options.onChange({...i,width:o,height:s}),br.set(this.board,!0)}},afterInit:i=>{this.editor=i},onComposition:i=>{if(i.type==="compositionend")return;const o=v$(this.editor,i.data);if(o){const s=this.getSize(o.children[0]);this.options.onChange&&this.options.onChange({...s}),br.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,r)}updateRectangleWidth(t){RO(this.g,t)}updateAngle(t,n=0){Ps(this.g,t,n)}updateRectangle(t){const{x:n,y:r,width:i,height:o}=t||this.options.getRectangle();Pg(this.g,i,o,n,r)}updateText(t){const n={text:t};this.textComponentRef.update(n)}edit(t,n){this.isEditing=!0,h6.set(this.board,!0);const r={readonly:!1};this.textComponentRef.update(r),Re.select(this.editor,[0]);const i=n3(document,"mousedown").subscribe(u=>{const c=At(this.board,Ot(this.board,u.x,u.y)),h=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),d=M.isHit(M.getRectangleByPoints([c,c]),h),g=u.target.closest(".plait-board-attached");!d&&!g&&nO(0).subscribe(()=>{s()})}),o=n3(document,"keydown").subscribe(u=>{if(!u.isComposing&&(u.key==="Escape"||u.key==="Tab"||n&&n(u))){u.preventDefault(),u.stopPropagation(),s();return}}),s=()=>{if(this.isEditing){this.updateRectangle(),i.unsubscribe(),o.unsubscribe(),h6.set(this.board,!1),br.set(this.board,!1),t&&t();const u={readonly:!0};this.textComponentRef.update(u),this.isEditing=!1,this.exitCallback=void 0}};return this.exitCallback=s,s}destroy(){var t,n;(t=this.g)==null||t.remove(),(n=this.textComponentRef)==null||n.destroy(),this.exitCallback&&this.exitCallback()}}const v$=(e,t)=>{if(e.selection&&Ee.isCollapsed(e.selection)){const[n,r]=F.node(e,e.selection),i=e.selection.anchor.offset,s={children:[JSON.parse(JSON.stringify(e.children[0]))]},u=n.text.slice(0,i+1)+t+n.text.slice(i+1),c=Ke.get(s,r);return c.text=u,s}return null},y$=e=>{const t=e;return t.renderText=(n,r)=>{throw new Error("No implementation for renderText method.")},t};var hi;(function(e){e.left="left",e.center="center",e.right="right"})(hi||(hi={}));const w$=e=>{const t=e;return t.renderImage=(n,r)=>{throw new Error("No implementation for renderImage method.")},t},$6={isActive(e,t){const n=Ke.get(e,BC);if(n){const{align:r}=n;return r===t}return!1},setAlign(e,t){const n={align:t};Re.setNodes(e,n,{at:BC})}},BC=[0];var li;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(li||(li={}));const RC=[li.bold,li.color,li.italic,li.strike,li.underline,li.fontSize];var C3;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(C3||(C3={}));li.bold,li.italic,li.underline,li.strike;const hv=14,ja={getMarks(e){const t={};let n=[];e.selection?n=e.selection:e.children&&e.children.length>0&&(n={anchor:F.start(e,[0]),focus:F.end(e,[0])});const r=F.nodes(e,{match:ot.isText,at:n});for(const i of r){const[o]=i,{text:s,...u}=o;Object.assign(t,u)}for(const i in t)RC.includes(i)||delete t[i];return t},getMarksByElement(e){const t={},n=Ke.texts(e);for(const r of n){const[i]=r,{text:o,...s}=i;Object.assign(t,s)}for(const r in t)RC.includes(r)||delete t[r];return t},isMarkActive(e,t){var i,o;if(!(e!=null&&e.selection))return;const n=Ke.get(e,(o=(i=e==null?void 0:e.selection)==null?void 0:i.anchor)==null?void 0:o.path);if(!ot.isText(n))return!1;const r=ja.getMarks(e);return!!(r&&r[t])},toggleMark(e,t){y5(e),ja.isMarkActive(e,t)?F.removeMark(e,t):F.addMark(e,t,!0)},setFontSizeMark(e,t,n=hv){y5(e),Number(t)===n?F.removeMark(e,li.fontSize):F.addMark(e,li.fontSize,Number(t))},setColorMark(e,t,n=qr){y5(e),t===n||t===null||t===void 0?F.removeMark(e,"color"):F.addMark(e,"color",t)}};function y5(e){e.selection||Re.select(e,[0])}const $a={wrapLink(e,t,n){$a.isLinkActive(e)&&$a.unwrapLink(e);const{selection:r}=e,i=r&&Ee.isCollapsed(r),o={type:"link",url:n,children:[{text:t}]};if(i||Ke.string(e)==="")Re.insertNodes(e,o);else if(r)Re.wrapNodes(e,o,{split:!0}),Re.collapse(e,{edge:"end"});else{const s={anchor:F.start(e,[0]),focus:F.end(e,[0])};Re.wrapNodes(e,o,{split:!0,at:s})}},unwrapLink(e,t){t||(t=e.selection,!t&&e.children&&e.children.length>0&&(t={anchor:F.start(e,[0]),focus:F.end(e,[0])})),Re.unwrapNodes(e,{at:t,match:n=>ut.isElement(n)&&n.type==="link"})},isLinkActive(e){let t=e.selection;!t&&e.children&&e.children.length>0&&(t={anchor:F.start(e,[0]),focus:F.end(e,[0])});const[n]=F.nodes(e,{match:r=>ut.isElement(r)&&r.type==="link",at:t});return!!n},getLinkElement(e){let t=e.selection;!t&&e.children&&e.children.length>0&&(t={anchor:F.start(e,[0]),focus:F.end(e,[0])});const[n]=F.nodes(e,{match:r=>ut.isElement(r)&&r.type==="link",at:t});return n}},aT=20;function MC(e){const t=/^(?:\w+:)?\/\/(\S+)$/,n=/^mailto:([^\s@]+@[^\s@]+\.[^\s@]+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,i=/^[^\s\.]+\.\S{2,}$/;if(typeof e!="string")return!1;const o=e.match(n);if(o)return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o[1]);const s=e.match(t);if(!s)return!1;const u=s[1];return u?!!(r.test(u)||i.test(u)):!1}const uT=e=>{const n=sh(e)[0];return!n||n.children.length===0?{}:ja.getMarks(n)},C$=(e,t,n)=>{let r;if(n!=null&&n.length)r=n;else{const i=Qe(e);if(i.length){const o=Gj(e);if(!o)return;const s=ja.getMarks(o),u=i.filter(c=>sh(c).some(d=>ja.getMarks(d)[t]===s[t]));r=qS(e,u)}}r&&r.length&&r.forEach(i=>{ja.toggleMark(i,t)})},x$=(e,t,n,r)=>{const i=y8(e,r);if(i&&i.length){const o=Qe(e);i.forEach(s=>{let u;if(typeof n=="function"){const c=o.find(h=>sh(h).includes(s));u=n(c)}else u=n;ja.setFontSizeMark(s,t,u)})}},E$=(e,t,n,r)=>{const i=y8(e,r);i&&i.length&&i.forEach(o=>{n&&Re.select(o,n),t==="transparent"?F.removeMark(o,li.color):ja.setColorMark(o,t)})},P$=(e,t,n)=>{const r=y8(e,n);r&&r.length&&r.forEach(i=>$6.setAlign(i,t))},y8=(e,t)=>{let n;return t!=null&&t.length?n=t:n=qS(e),n},W6={setTextAlign:P$,setTextColor:E$,setFontSize:x$,setTextMarks:C$},bC=()=>b.jsx("span",{contentEditable:!1,style:{fontSize:0},children:String.fromCodePoint(160)}),S$=({attributes:e,children:t,element:n})=>b.jsxs("a",{...e,style:{textDecoration:"none",cursor:"inherit"},"data-url":n.url,className:"plait-board-link",children:[b.jsx(bC,{}),t,b.jsx(bC,{})]}),T$=e=>{const{insertData:t,insertText:n,isInline:r}=e;return e.isInline=i=>i.type&&["link"].includes(i.type)||r(i),e.insertText=i=>{i&&MC(i)?$a.wrapLink(e,i,i):n(i)},e.insertData=i=>{const o=i.getData("text/plain");o&&MC(o)?$a.wrapLink(e,o,o):t(i)},e},kC=e=>{const{text:t,readonly:n,onChange:r,onComposition:i,afterInit:o}=e,s=j.useCallback(d=>b.jsx(B$,{...d}),[]),u=[t],c=j.useMemo(()=>{const d=T$(xj(yj(mj(ZN()))));return o&&o(d),d},[]);j.useEffect(()=>{t!==c.children[0]&&(c.children=[t],c.onChange())},[t,c]);const h=d=>{const{selection:g}=c;if(g&&Ee.isCollapsed(g)){const{nativeEvent:v}=d;if(nn.isKeyHotkey("left",v)){d.preventDefault(),Re.move(c,{unit:"offset",reverse:!0});return}if(nn.isKeyHotkey("right",v)){d.preventDefault(),Re.move(c,{unit:"offset"});return}}};return b.jsx(pj,{editor:c,initialValue:u,onChange:d=>{r&&r({newText:c.children[0],operations:c.operations})},children:b.jsx(uj,{className:"slate-editable-container plait-text-container",renderElement:d=>b.jsx(D$,{...d}),renderLeaf:s,readOnly:n===void 0?!0:n,onCompositionStart:d=>{i&&i(d)},onCompositionUpdate:d=>{i&&i(d)},onCompositionEnd:d=>{i&&i(d)},onKeyDown:h})})},D$=e=>{const{attributes:t,children:n,element:r}=e;switch(r.type){case"link":return b.jsx(S$,{...e});default:return b.jsx(A$,{...e})}},A$=({attributes:e,children:t,element:n})=>{const r={textAlign:n.align};return b.jsx("div",{style:r,...e,children:t})},B$=({children:e,leaf:t,attributes:n})=>(t.bold&&(e=b.jsx("strong",{children:e})),t.code&&(e=b.jsx("code",{children:e})),t.italic&&(e=b.jsx("em",{children:e})),t.underlined&&(e=b.jsx("u",{children:e})),b.jsx("span",{style:{color:t.color},...n,children:e})),R$=e=>{const t=e;return t.renderText=(n,r)=>{const i=z3.createRoot(n);let o;const s=b.jsx(kC,{...r,afterInit:h=>{o=h,r.afterInit&&r.afterInit(h)}});i.render(s);let u={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:h=>{if(!(h&&u&&!Object.keys(h).every(v=>h[v]===u[v])))return;const g=ze.isReadOnly(o);u={...u,...h},i.render(b.jsx(kC,{...u})),g===!0&&u.readonly===!1?setTimeout(()=>{ze.focus(o)},0):g===!1&&u.readonly===!0&&(ze.blur(o),ze.deselect(o))}}},t},M$=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e,o=[];let s=!1;return e.pointerDown=u=>{const c=[u.clientX,u.clientY];o.length<2&&(e.viewport.zoom,o.push({pointerId:u.pointerId,lastPoint:c,currentPoint:c,hasMoved:!1})),t(u)},e.pointerMove=u=>{const c=[u.clientX,u.clientY];if(o.length>=2){const h=o.find(d=>d.pointerId===u.pointerId);if(h&&(h.currentPoint=c,h.hasMoved=!0,o.length===2&&o.every(d=>d.hasMoved))){const[d,g]=o,v=x9(...d.lastPoint,...g.lastPoint),y=x9(...d.currentPoint,...g.currentPoint),x=y[0]-v[0],E=y[1]-v[1],T=I.getBoardContainer(e).getBoundingClientRect(),D=T.width/2,S=T.height/2,R=e.viewport.zoom,L=b0(e);let k=L[0]+D/R-x/R,W=L[1]+S/R-E/R,z=[k-T.width/2/R,W-T.height/2/R],Y=R;const te=Tt(...d.lastPoint,...g.lastPoint),me=Tt(...d.currentPoint,...g.currentPoint)/te,ne=[d.currentPoint[0]-d.lastPoint[0],d.currentPoint[1]-d.lastPoint[1]],oe=[g.currentPoint[0]-g.lastPoint[0],g.currentPoint[1]-g.lastPoint[1]],ve=ne[0]*oe[0]+ne[1]*oe[1],ge=Math.sqrt(ne[0]*ne[0]+ne[1]*ne[1]),Be=Math.sqrt(oe[0]*oe[0]+oe[1]*oe[1]),Pe=ve/(ge*Be||1);if(Pe<-.7||Pe<=.8&&s&&me>=.01?s=!0:s=!1,s){Y=Math.min(Math.max(e.viewport.zoom*me,XE),KE);const ue=I.getBoardContainer(e).getBoundingClientRect(),we=y[0]-ue.x,U=y[1]-ue.y;k=z[0]+we/R,W=z[1]+U/R,z=[k-we/Y,W-U/Y]}vn.updateViewport(e,z,Y),o.forEach(he=>{he.lastPoint=he.currentPoint,he.hasMoved=!1})}return}n(u)},e.pointerUp=u=>{const c=o.findIndex(h=>h.pointerId===u.pointerId);c!==-1&&o.splice(c,1),r(u)},e.globalPointerUp=u=>{const c=o.findIndex(h=>h.pointerId===u.pointerId);c!==-1&&o.splice(c,1),i(u)},e},lT=({value:e,children:t,options:n,plugins:r,viewport:i,theme:o,onChange:s,onSelectionChange:u,onValueChange:c,onViewportChange:h,onThemeChange:d})=>{const[g,v]=j.useState(()=>{const D=b$(e,n,r,i,o),S=k$(D);return{v:0,board:D,listRender:S}}),{board:y,listRender:x}=g,E=j.useCallback(()=>{if(s){const k={children:y.children,operations:y.operations,viewport:y.viewport,selection:y.selection,theme:y.theme};s(k)}const D=y.operations.some(k=>ql.isSetSelectionOperation(k)),S=y.operations.some(k=>ql.isSetViewportOperation(k)),R=y.operations.some(k=>ql.isSetThemeOperation(k)),L=y.operations.length>0&&!y.operations.every(k=>ql.isSetSelectionOperation(k)||ql.isSetViewportOperation(k)||ql.isSetThemeOperation(k));c&&L&&c(y.children),u&&D&&u(y.selection),h&&S&&h(y.viewport),d&&R&&d(y.theme.themeColorMode),v(k=>({v:k.v+1,board:y,listRender:x}))},[y,s,u,c]);j.useEffect(()=>(r3.set(y,()=>{if(y.operations.length&&y.operations.every(L=>L.type==="set_selection")){x.update(y.children,{board:y,parent:y,parentG:I.getElementHost(y)});return}const S=y.operations.length&&y.operations.some(L=>L.type==="set_viewport");if(S&&aI(y)){vP(y,!1),x.update(y.children,{board:y,parent:y,parentG:I.getElementHost(y)});return}x.update(y.children,{board:y,parent:y,parentG:I.getElementHost(y)}),S?j4(y):iI(y),u3(y),Qe(y).forEach(L=>{yn.getElementRef(L).updateActiveSection()})}),i3.set(y,()=>{E()}),()=>{r3.delete(y),i3.delete(y)}),[y]);const T=j.useRef(!0);return j.useEffect(()=>{if(T.current){T.current=!1;return}e!==g.board.children&&!Fm.get(y)&&(y.children=e,x.update(y.children,{board:y,parent:y,parentG:I.getElementHost(y)}),vn.fitViewport(y))},[e]),b.jsx(Q4.Provider,{value:g,children:t})},b$=(e,t,n,r,i)=>{let o=iL(UF(zF(VF(oL(tL(WF(sL(rL(R$(w$(y$($F(e,t)))))))))))));return n.forEach(s=>{o=s(o)}),M$(o),r&&(o.viewport=r),i&&(o.theme=i),o},k$=e=>new VP(e);function O$(e,t){return Math.sqrt(I$(e,t))}function I$(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Wd(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function F$(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let u=3*r[1]-2*n[1]-o[1];u*=u;let c=3*i[0]-2*o[0]-n[0];c*=c;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<c&&(s=c),u<h&&(u=h),s+u}function z6(e,t,n,r){const i=r||[];if(F$(e,t)<n){const o=e[t+0];i.length?O$(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],u=e[t+1],c=e[t+2],h=e[t+3],d=Wd(s,u,.5),g=Wd(u,c,.5),v=Wd(c,h,.5),y=Wd(d,g,.5),x=Wd(g,v,.5),E=Wd(y,x,.5);z6([s,d,y,E],0,n,i),z6([E,x,v,h],0,n,i)}return i}function Co(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;z6(e,s,t,r)}return r}var pt;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})(pt||(pt={}));var gt;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(gt||(gt={}));var ft;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(ft||(ft={}));var Ko;(function(e){e.name="name",e.content="content"})(Ko||(Ko={}));var mo;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(mo||(mo={}));var sa;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(sa||(sa={}));var x0;(function(e){e.table="table"})(x0||(x0={}));const qg={isTable:e=>e.type==="table",isVerticalText:e=>{var t;return((t=e.text)==null?void 0:t.direction)==="vertical"}},cT="plait-draw-plugin-key";var x3;(function(e){e.lineText="line-text",e.geometryText="geometry-text"})(x3||(x3={}));const lt={rectangleAndText:4},dv={strokeWidth:2,fill:NS},L$={selectionStrokeWidth:dr},Zg={width:100,height:100,strokeColor:qr,strokeWidth:2},OC={width:120,height:50},_$={width:138,height:80},IC={width:100,height:80},N$={width:120,height:100},gv={height:20,text:"文本"},fT={defaultTextMaxWidth:34*14},w5={width:44,height:44},Ia={width:120,height:60},H$={width:70,height:80},G$={width:80,height:80},j$={width:140,height:70},$$={width:124,height:60},hT={width:120,height:70},C5={width:160,height:100},V6={width:120,height:80},W$={width:117,height:59},z$={width:47,height:33},V$={width:68,height:100},U$={width:300,height:240},X$={width:210,height:150,texts:[{id:Ko.name,text:"包名",align:hi.left},{id:Ko.content,text:"",align:hi.left}]},K$={width:18,height:80},wm={width:120,height:60},Y$={width:200,height:150},FC={width:40,height:40},q$={width:20,height:20},Z$={width:70,height:56},Q$={width:120,height:56},J$={width:70,height:34},eW={width:400,height:280,texts:[{id:Ko.name,text:"Opt | Alt | Loop",align:hi.left},{id:Ko.content,text:"[Condition]",align:hi.left}]},tW={width:230,height:180,texts:[{text:"Class",align:hi.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:hi.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:hi.left}]},nW={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:hi.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:hi.left}]},dT={[pt.pentagonArrow]:OC,[pt.processArrow]:OC,[pt.cloud]:N$,[pt.twoWayArrow]:_$,[pt.leftArrow]:IC,[pt.rightArrow]:IC},gT={[gt.connector]:w5,[gt.process]:Ia,[gt.decision]:j$,[gt.data]:$$,[gt.terminal]:Ia,[gt.manualInput]:W$,[gt.preparation]:Ia,[gt.manualLoop]:Ia,[gt.merge]:z$,[gt.delay]:Ia,[gt.storedData]:Ia,[gt.or]:w5,[gt.summingJunction]:w5,[gt.predefinedProcess]:Ia,[gt.offPage]:Ia,[gt.document]:hT,[gt.multiDocument]:V6,[gt.database]:H$,[gt.hardDisk]:Ia,[gt.internalStorage]:G$,[gt.noteCurlyLeft]:C5,[gt.noteCurlyRight]:C5,[gt.noteSquare]:C5,[gt.display]:Ia},pT={[ft.actor]:V$,[ft.useCase]:hT,[ft.container]:U$,[ft.note]:wm,[ft.package]:X$,[ft.combinedFragment]:eW,[ft.class]:tW,[ft.interface]:nW,[ft.activation]:K$,[ft.object]:wm,[ft.deletion]:FC,[ft.activityClass]:wm,[ft.simpleClass]:wm,[ft.component]:V6,[ft.template]:V6,[ft.componentBox]:Y$,[ft.port]:q$,[ft.branchMerge]:FC,[ft.assembly]:Q$,[ft.providedInterface]:J$,[ft.requiredInterface]:Z$},rW={[ft.package]:Object.keys(Ko),[ft.combinedFragment]:Object.keys(Ko)},E3=10,iW=6,oW=8,mT=[gt.or,gt.summingJunction,ft.activation,ft.deletion,ft.port,ft.branchMerge,ft.assembly,ft.providedInterface,ft.requiredInterface],sW=[ft.package,ft.combinedFragment],aW=[gt.noteCurlyLeft,gt.noteCurlyRight,gt.noteSquare,ft.requiredInterface,ft.deletion],w8=()=>[...Object.keys(pt),...Object.keys(gt),...Object.keys(ft)],vT=()=>Object.keys(sa),uW=()=>Object.keys(gt),lW=()=>Object.keys(ft),cW=()=>Object.keys(Fn),fW=()=>Object.keys(A3),hW=1e3,yT={[fr.default]:{strokeColor:qr,fill:"#FFFFFF"},[fr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[fr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[fr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[fr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[fr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},hg=42,dW={width:580,height:524},gW={width:524,height:580},pW={width:580,height:524},mW={width:524,height:580},wT={[sa.swimlaneHorizontal]:mW,[sa.swimlaneVertical]:pW,[sa.swimlaneHorizontalWithHeader]:gW,[sa.swimlaneVerticalWithHeader]:dW},P3=5,CT={strokeWidth:2},vW=4,yW=6,wW=1,CW=1,xW=12,e0=3,EW="文本",Qg=new WeakMap,LC=(e,t,n,r)=>{const i=Qg.get(e);return Qg.set(e,{...i,[zT(t,n)]:r})},bg=(e,t,n)=>Qg.get(e)[zT(t,n)],_C=(e,t)=>{const n=Qg.get(e);delete n[t],Qg.set(e,n)};class C8{get shape(){return this.element.shape||this.element.type}constructor(t,n,r,i){this.board=t,this.texts=r,this.element=n,this.options=i}initialize(){const t=(this.board.getPluginOptions(N6)||{}).textPlugins;this.textManages=this.texts.map(r=>{const i=this.createTextManage(r,t);return LC(this.board,this.element,r,i),i}),yn.getElementRef(this.element).initializeTextManage(this.textManages)}draw(t){const n=M.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(r=>{const i=bg(this.board,this.element,r);r.text&&i&&(i.draw(r.text),t.append(i.g),(this.element.angle||this.element.angle===0)&&i.updateAngle(n,this.element.angle))})}update(t,n,r,i){this.element=t;const o=M.getCenterPoint(this.board.getRectangle(this.element)),s=(this.board.getPluginOptions(N6)||{}).textPlugins,u=n.filter(c=>!r.find(h=>h.id===c.id));u.length&&u.forEach(c=>{const h=bg(this.board,t,c),d=this.textManages.findIndex(g=>g===h);d>-1&&c.text&&c.textHeight&&this.textManages.splice(d,1),h==null||h.destroy(),_C(this.board,c.id)}),r.forEach(c=>{if(c.text){let h=bg(this.board,this.element,c);h?(h.updateText(c.text),h.updateRectangle()):(h=this.createTextManage(c,s),LC(this.board,t,c,h),h.draw(c.text),i.append(h.g),this.textManages.push(h)),(this.element.angle||this.element.angle===0)&&h.updateAngle(o,this.element.angle)}})}createTextManage(t,n){return new Tp(this.board,{getRectangle:()=>this.getRectangle(t),onChange:i=>this.options.onChange(this.element,i,t),getMaxWidth:()=>this.getMaxWidth(t),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,t):this.getRectangle(t),textPlugins:n})}getRectangle(t){const n=pi(this.shape).getTextRectangle;return n?n(this.element,t):Tr(this.element)}getMaxWidth(t){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(t).width}destroy(){yn.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(n=>{_C(this.board,n.id)})}}const U6=e=>{const t=Qe(e);return t&&t.length===1&&fe.isElementByTable(t[0])},PW=(e,t)=>(t!=null&&t.length?t:Qe(e)).filter(r=>fe.isElementByTable(r)),x8=new WeakMap;function t0(e){return x8.get(e)}function xT(e,t){return x8.set(e,t)}function NC(e){return x8.delete(e)}function Dp(e,t){const n=e==null?void 0:e.buildTable(t);if(!n||!n.points||!n.columns||!n.rows)throw new Error("can not get table cells points");const r=M.getRectangleByPoints(n.points),i=n.columns.length,o=n.rows.length,s=HC(n.columns,r.width,i,!0),u=HC(n.rows,r.height,o,!1);return n.cells.map(h=>{const d=n.rows.findIndex(S=>S.id===h.rowId),g=n.columns.findIndex(S=>S.id===h.columnId);let v=r.x;for(let S=0;S<g;S++)v+=s[S];let y=r.y;for(let S=0;S<d;S++)y+=u[S];const x=GC(h,s,g,!0),E=v+x,T=GC(h,u,d,!1),D=y+T;return{...h,points:[[v,y],[E,D]]}})}function uh(e,t,n){try{const r=Dp(e,t),i=r&&t.cells.findIndex(o=>o.id===n);return r[i]}catch{throw new Error("can not get table cell points")}}function HC(e,t,n,r){const i=[],o=r?"width":"height";let s=t;e.forEach((h,d)=>{h[o]&&(i[d]=h[o],s-=h[o])});const u=n-i.filter(h=>!!h).length,c=u>0?s/u:0;for(let h=0;h<n;h++)i[h]||(i[h]=c);return i}function GC(e,t,n,r){const i=r?e.colspan||1:e.rowspan||1;let o=0;for(let s=0;s<i;s++){const u=n+s;o+=t[u]}return o}function jC(e,t,n){const r=e.buildTable(t),i=Dp(e,r),o=M.getRectangleByPoints([n,n]),s=i.find(u=>{const c=M.getRectangleByPoints(u.points);return M.isHit(o,c)});return s?r.cells.find(u=>u.id===s.id):null}function $C(e,t){const n=ET(e,t);n&&n.edit()}function ET(e,t){return bg(e,void 0,t)}const PT=(e,t,n,r)=>{const i=e.columns.map(s=>s.id===t?{...s,width:n}:s),o=[e.points[0],[e.points[1][0]+r,e.points[1][1]]];return{columns:i,points:o}},ST=(e,t,n,r)=>{const i=e.rows.map(s=>s.id===t?{...s,height:n}:s),o=[e.points[0],[e.points[1][0],e.points[1][1]+r]];return{rows:i,points:o}};function SW(e,t,n,r){const i=`${r}Id`;e.forEach(o=>{o[i]===t&&(o[i]=n)})}function WC(e,t){e[`${t}s`].forEach(n=>{const r=En();SW(e.cells,n.id,r,t),n.id=r})}function TW(e){e.forEach(t=>{const n=En();t.id=n})}function TT(e){return e.text&&e.textHeight}function DW(e,t,n){const r=Dp(e,t),i=n.map(o=>r.find(u=>u.id===o.id).points);return M.getRectangleByPoints(i)}const x5=(e,t,n=null)=>{const r={id:En(),rowId:e,columnId:t};return n!==null&&(r.textHeight=aT,r.text={children:[{text:n}],align:hi.center}),r},AW=6,E5=new WeakMap,_0=e=>{let t="";switch(!0){case fe.isText(e):{t=Go.text;break}case fe.isBasicShape(e):{t=Go.basicShape;break}case fe.isFlowchart(e):{t=Go.flowchart;break}case fe.isArrowLine(e):{t=Go.arrowLine;break}case fe.isUML(e):t=Go.UML}return t},DT=()=>({...fv(Go.arrowLine)}),Pc=e=>{let t="";fe.isBasicShape({shape:e})?t=e===pt.text?Go.text:Go.basicShape:fe.isUML({shape:e})?t=Go.UML:t=Go.flowchart;const n={...fv(t)},r={...n.text};return delete n.text,{textProperties:r,geometryProperties:n}},E8=(e,t)=>{var o;const n=_0(e);let r=((o=fv(n))==null?void 0:o.text)||{};const i=t.find(s=>s.type==="set_node");if(i){const{properties:s,newProperties:u}=i;for(const c in u){const h=u[c];h==null?delete r[c]:r[c]=h}for(const c in s)u.hasOwnProperty(c)||delete r[c];v8(n,"text",r)}},BW=(e,t)=>{const n=E5.has(e)?E5.get(e):[],r=n.indexOf(t);t===pt.text||r===0||(r!==-1?n.splice(r,1):n.length===AW&&n.pop(),n.unshift(t),E5.set(e,n))},RW="debug:plait:line-mirror",Cm=A0(RW),P8=(e,t)=>{const n=[...t];return mt.isVertical(n,e,e0)&&(n[0]=e[0]),mt.isHorizontal(n,e,e0)&&(n[1]=e[1]),n};function MW(e,t,n,r){const i={previous:null,next:null},o=e[r],s=e[r+1],u=mt.isHorizontal(o,s),c=mt.isVertical(o,s),h=e[r-1]??e[0],d=e[r-2]??t;(u&&mt.isHorizontal(d,h)||c&&mt.isVertical(d,h))&&(i.previous=h);const g=e[r+2]??e[e.length-1],v=e[r+3]??n;return(u&&mt.isHorizontal(g,v)||c&&mt.isVertical(g,v))&&(i.next=g),i}function bW(e,t,n,r){let i=e,o=t;if(mt.isHorizontal(e,t)){const s=mt.getOffsetY(n.startPoint,n.endPoint);let u=e[1]+s;r.previous&&Math.abs(r.previous[1]-u)<e0?u=r.previous[1]:r.next&&Math.abs(r.next[1]-u)<e0&&(u=r.next[1]),i=[e[0],u],o=[t[0],u]}if(mt.isVertical(e,t)){const s=mt.getOffsetX(n.startPoint,n.endPoint);let u=e[0]+s;r.previous&&Math.abs(r.previous[0]-u)<e0?u=r.previous[0]:r.next&&Math.abs(r.next[0]-u)<e0&&(u=r.next[0]),i=[u,e[1]],o=[u,t[1]]}return[i,o]}function AT(e,t,n,r,i){let o=null,s=null;const u=r[i],c=r[i+1];if(!u||!c)return{index:o,deleteCount:s};const h=n.slice(1,-1),d=h.findIndex(v=>mt.isEquals(v,u)),g=h.findIndex(v=>mt.isEquals(v,c));if(Math.max(d,g)>-1){if(d>-1&&g>-1)return{index:d,deleteCount:2};if(d>-1&&g===-1)return d<h.length-1&&mt.isAlign([h[d],h[d+1],u,c])?{index:d,deleteCount:2}:{index:d,deleteCount:1};if(d===-1&&g>-1)return g>0&&mt.isAlign([h[g],h[g-1],u,c])?{index:g-1,deleteCount:2}:{index:g,deleteCount:1}}else for(let v=0;v<h.length-1;v++){const y=h[v],x=h[v+1];if(mt.isAlign([y,x,u,c])){o=v,s=2;break}if(mt.isAlign([y,x,u])){o=Math.min(v+1,h.length-1),s=1;break}if(mt.isAlign([y,x,c])){o=Math.max(v-1,0),s=1;break}}if(o===null)if(s=0,h.length>0){const v=Mp(e,t),y=bp(e,t,v),x=w0(eT(y,e)),E=_u(x.slice(1,x.length-1)),T=[r[0],...h,r[r.length-1]],D=BT(e,T,E,y);for(let S=i-1;S>=0;S--){const R=D.slice(1,-1).findIndex(L=>mt.isEquals(L,r[S]));if(R>-1){o=R+1;break}}o===null&&(o=0,mt.isAlign(r)&&(s=h.length))}else o=0;return{index:o,deleteCount:s}}function BT(e,t,n,r){for(let i=1;i<t.length-2;i++)kW(e,i,t,n,r);return t}const kW=(e,t,n,r,i)=>{const o=n[t-1],s=n[t],u=n[t+1],c=n[t+2],h=[o,s],d=[u,c],g=mt.isAlign(h),v=mt.isAlign(d);let y=!1,x=!1;if(!g||!v){const E=X6(r,h[0],h[1]),T=X6(r,d[0],d[1]),D=E.length>0&&T.length>0;y=!g&&!D,x=!v&&!D}if(y||x){const E=[s,u],T=IW(E,r),D=FW(e,E,T,i.sourceRectangle,i.targetRectangle);if(D.length===1){const S=D[0];y&&n.splice(t,1,S[0]),x&&n.splice(t+1,1,S[1])}else{const R=mt.isHorizontal(s,u)?0:1;if(y){const L=[s[0],s[1]];L[R]=o[R],n.splice(t,1,L)}if(x){const L=[u[0],u[1]];L[R]=c[R],n.splice(t+1,1,L)}}}};function OW(e,t,n,r,i){const{deleteCount:o}=AT(e,t,n,r,i);return o!==null&&o>1}function X6(e,t,n){let r=[],i=-1,o=-1;for(let s=0;s<e.length;s++)if(mt.isAlign([e[s],t])&&(i=s),i>-1&&mt.isAlign([e[s],n])){o=s;break}return i>-1&&o>-1&&(r=e.slice(i,o+1)),r}function IW(e,t){const n=mt.isHorizontal(e[0],e[1]),r=[];for(let i=0;i<t.length-1;i++){const o=t[i],s=t[i+1],u=mt.isHorizontal(o,s,.1);n&&u&&r.push([o,s]),!n&&!u&&r.push([o,s])}return r}function FW(e,t,n,r,i){Cm.isDebug()&&Cm.clear();const o=[];for(let s=0;s<n.length;s++){const u=n[s],c=[t[0][0],t[0][1]],h=[t[1][0],t[1][1]],g=mt.isHorizontal(c,h)?0:1;c[g]=u[0][g],h[g]=u[1][g];const v=M.getRectangleByPoints([c,h,...u]);!M.isHit(v,r)&&!M.isHit(v,i)&&(o.push([c,h]),Cm.isDebug()&&Cm.drawPolygon(e,M.getCornerPoints(v)))}return o}const RT=e=>e.length===1?!0:e.some((t,n)=>{const r=e[n-1],i=e[n+1],o=r&&[r,t],s=i&&[t,i],u=o&&mt.isAlign(o),c=s&&mt.isAlign(s);return n===0?!c:n===e.length-1?!u:!u&&!c}),zC=20,LW=(e,t,n)=>{const r=Lt();if(Yr.isSourceMark(e,Vr.none)&&Yr.isTargetMark(e,Vr.none))return null;const i=zt(e),o=i*i/3;if(t.length===1&&(t=[t[0],[t[0][0]+.1,t[0][1]]]),!Yr.isSourceMark(e,Vr.none)){const s=Yg(t[0],t[1],zC+o),u=VC(e,{marker:e.source.marker,source:s,target:t[0],isSource:!0},n);u&&r.appendChild(u)}if(!Yr.isTargetMark(e,Vr.none)){const s=Yg(t[t.length-1],t[t.length-2],zC+o),u=VC(e,{marker:e.target.marker,source:s,target:t[t.length-1],isSource:!1},n);u&&r.appendChild(u)}return r},VC=(e,t,n)=>{const{marker:r,target:i,source:o,isSource:s}=t;let u;switch(r){case Vr.openTriangle:{u=GW(e,o,i,n);break}case Vr.solidTriangle:{u=HW(o,i,n);break}case Vr.arrow:{u=NW(e,o,i,n);break}case Vr.sharpArrow:{u=_W(o,i,n);break}case Vr.oneSideUp:{u=UC(o,i,s?"down":"up",n);break}case Vr.oneSideDown:{u=UC(o,i,s?"up":"down",n);break}case Vr.hollowTriangle:{u=$W(o,i,n);break}case Vr.singleSlash:{u=jW(o,i,s,n);break}}return u},_W=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=M0(e,t,20),s=Lt(),u=F4();let c=`M${o[0]},${o[1]}A25,25,20,0,1,${i[0]},${i[1]}L${r[0]},${r[1]}Z`;return u.setAttribute("d",c),u.setAttribute("stroke",`${n==null?void 0:n.stroke}`),u.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),u.setAttribute("fill",`${n==null?void 0:n.stroke}`),s.appendChild(u),s},NW=(e,t,n,r)=>{const i=Kn(t,n),o=zt(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],u=Tt(...t,...s),c=[s[0]-(u*3/5+o)/2*i[0],s[1]-(u*3/5+o)/2*i[1]],{pointLeft:h,pointRight:d}=M0(t,s,30),g=Ds([h,s,d,c],{...r,fill:r.stroke},!0);return g.querySelector("path").setAttribute("stroke-linejoin","round"),g},HW=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=M0(e,r,30);return Ds([i,r,o],{...n,fill:n.stroke},!0)},GW=(e,t,n,r)=>{const i=Kn(t,n),o=zt(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],{pointLeft:u,pointRight:c}=M0(t,s,40);return Ds([u,s,c],r)},UC=(e,t,n,r)=>{const{pointLeft:i,pointRight:o}=M0(e,t,40);return Ds([n==="up"?o:i,t],r)},jW=(e,t,n,r)=>{const i=Tt(...e,...t),o=Yg(t,e,i/2),s=n?120:60,u=m0(...e,...o,s*Math.PI/180),c=m0(...t,...o,s*Math.PI/180);return Ds([u,c],r)},$W=(e,t,n)=>{const{pointLeft:r,pointRight:i}=M0(e,t,30);return Ds([r,i,t],{...n,fill:"white"},!0)};class MT extends Yo{canDraw(t){return!0}draw(t){let n;return n=zW(this.board,t),n}}const WW=(e,t,n,r,i,o)=>({id:En(),type:"arrow-line",shape:e,source:n,texts:i||[],target:r,opacity:1,points:t,...o}),ji=(e,t)=>{switch(t.shape){case Fn.elbow:return wv(e,t);case Fn.curve:return bT(e,t);default:{const n=Yr.getPoints(e,t),r=Mp(e,t);return n[0]=r.source.point,n[n.length-1]=r.target.point,n}}},bT=(e,t)=>{if(t.points.length===2){const n=Mp(e,t),{source:r,target:i}=n,o=n.source.boundElement,s=n.target.boundElement;let u=[r.point];const h=12+Tt(...r.point,...i.point)/3;if(o&&u.push(Jd(r.point,r.vector,h)),s&&u.push(Jd(i.point,i.vector,h)),o&&!s||!o&&s){u.push(i.point);const g=KW(u);return Co(g)}return!o&&!s&&(u.push(Jd(r.point,r.vector,h)),u.push(Jd(i.point,i.vector,h))),u.push(i.point),Co(u)}else{let n=Yr.getPoints(e,t);n=w0(n);const r=wp(n);return Co(r)}},zW=(e,t)=>{const n=zt(t),r=H0(e,t),i=vv(e,t),o=xc(i,n),s={stroke:r,strokeWidth:n,strokeLineDash:o},u=Lt();let c=ji(e,t),h;t.shape===Fn.curve?h=I.getRoughSVG(e).curve(c,s):h=Ds(c,s);const d=En();h.setAttribute("mask",`url(#${d})`),t.strokeStyle===Ss.dotted&&Wt(h,"round"),u.appendChild(h);const{mask:g,maskTargetFillRect:v}=YW(e,t,d);u.appendChild(g),h.appendChild(v);const y=LW(t,c,{stroke:r,strokeWidth:n});return y&&u.appendChild(y),u},E0=(e,t,n)=>{const r=M8(e,n,t),i=r.connectorPoint||r.edgePoint;return VW(i,n)},VW=(e,t)=>{let n=M.getRectangleByPoints(t.points);return[(e[0]-n.x)/n.width,(e[1]-n.y)/n.height]},UW=(e,t)=>{const n=M.getRectangleByPoints(t.points),r=Sc(t);return pi(r).getConnectorPoints(n).find(o=>Tt(...o,...e)<=oW)},S8=(e,t,n)=>{const r=t.texts[n],i=ji(e,t),o=WS(i,r.position);return{x:o[0]-r.width/2,y:o[1]-r.height/2,width:r.width,height:r.height}},XW=e=>k0(e,{match:t=>fe.isArrowLine(t),recursion:t=>fe.isDrawElement(t)}),KW=e=>{const t=[],n=e.length/3;for(let r=0;r<n;r++){const i=e[r],o=e[r+1],s=e[r+2],u=Tt(...i,...o),c=Tt(...s,...o),h=Yg(i,o,u*2/3),d=Yg(s,o,c*2/3);t.push(i,h,d,s)}return t},T8=(e,t,n,r,i,o,s)=>{const u=R8(e,r),c=u?E0(e,r,u):void 0,h=i?E0(e,n,i):void 0,d=u?u.id:void 0,g=new MT(e),v=DT();let y,x;y=v.source,x=v.target,y&&delete v.source,x&&delete v.target;const E=WW(t,[n,r],{marker:y||Vr.none,connection:h,boundId:i==null?void 0:i.id},{marker:x||Vr.arrow,connection:c,boundId:d},[],{strokeWidth:CT.strokeWidth,...v,...s}),D=ji(e,E)[0];return E.points[1]=P8(D,r),g.processDrawing(E,o),I.getElementTopHost(e).append(o),E};function YW(e,t,n){const r=PO();r.setAttribute("id",n);const i=ji(e,t);let o=M.getRectangleByPoints(i);o=M.getOutlineRectangle(o,-30);const s=V7(o,{fill:"white"});r.appendChild(s),t.texts.forEach((h,d)=>{let g=S8(e,t,d);g=M.inflate(g,vW*2);const v=V7(g,{fill:"black"});r.appendChild(v)});const c=V7(o);return c.setAttribute("opacity","0"),c.setAttribute("fill","none"),{mask:r,maskTargetFillRect:c}}const D8=(e,t,n)=>{const r=t.texts;if(!r.length)return-1;const i=ji(e,t);return r.findIndex(o=>{const s=WS(i,o.position),u={x:s[0]-o.width/2,y:s[1]-o.height/2,width:o.width,height:o.height};return M.isHit(u,M.getRectangleByPoints([n,n]))})},A8=e=>sW.includes(e),Vu=e=>fe.isGeometry(e)&&A8(e.shape),qW=e=>rW[e],ZW=(e,t,n={})=>{const r=En(),i=QW(e);return{id:r,type:"geometry",shape:e,angle:0,opacity:1,texts:i,points:t,...n}},QW=e=>{var u;const n={...Pc(e).textProperties},r=n==null?void 0:n.align,i=(n==null?void 0:n.textHeight)||gv.height;n==null||delete n.align,n==null||delete n.textHeight;const o=((u=I8(e))==null?void 0:u.texts)||[];return(qW(e)||[]).map(c=>{const h=o==null?void 0:o.find(d=>(d==null?void 0:d.key)===c);return{id:c,text:eu((h==null?void 0:h.text)||"",r||(h==null?void 0:h.align)||hi.center,n),textHeight:i}})},JW=(e,t)=>{const n=pi(e.shape),r=M.getRectangleByPoints([t,t]);let i;return n.getTextRectangle&&(i=e.texts.find(o=>{const s=n.getTextRectangle(e,{id:o.id});return M.isHit(r,s)})),i};class kT extends Yo{canDraw(t){return!0}draw(t){let n;return n=nz(this.board,t),n}}const oc=(e,t)=>{switch(t.shape){case np.straight:return t.points;case np.curve:{if(t.points.length===2)return Co(t.points);{let n=t.points;const r=wp(n);return Co(r)}}default:return null}},ez=(e,t,n)=>({id:En(),type:"vector-line",shape:e,opacity:1,points:t,...n}),tz=(e,t,n,r,i)=>{const o=new kT(e),s=DT(),u=ez(t,[...n,r],{strokeWidth:CT.strokeWidth,...s}),c=n[n.length-1];return u.points[u.points.length-1]=P8(c,r),o.processDrawing(u,i),I.getElementTopHost(e).append(i),u},nz=(e,t)=>{const n=zt(t),r=H0(e,t),i=vv(e,t),o=xc(i,n),s=mv(e,t),u={stroke:r,strokeWidth:n,strokeLineDash:o,fill:s},c=Lt();let h=oc(e,t);const d=Ds(h,u),g=En();return d.setAttribute("mask",`url(#${g})`),t.strokeStyle===Ss.dotted&&Wt(d,"round"),c.appendChild(d),c},N0=e=>{const t=[];for(let n=0;n<e.length;n++){let r=n==e.length-1?0:n+1;t.push([(e[n][0]+e[r][0])/2,(e[n][1]+e[r][1])/2])}return t},OT=(e,t)=>{const n=[];for(let r=1;r<=e.length;r++){let i=e[r-1],o=r===e.length?e[0]:e[r];const s=bj(t,i,o);n.push(...s)}return n},Qr=(e,t)=>{for(let n=1;n<=e.length;n++){let r=e[n-1],i=n===e.length?e[0]:e[n];if($S(t,r,i))return[r,i]}return null};function K6(e){const t=e.width/7,n=e.height/3.2,r=t/8.5,i=n/20,o=[e.x+t,e.y+n],s=[{rx:r,ry:i*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*2,endY:e.y+n/2},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*4.2,endY:e.y+n/2.2},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*5.8,endY:e.y+n},{rx:r,ry:i*1.3,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*6,endY:e.y+n*2.2},{rx:r,ry:i*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*5,endY:e.y+n*2.8},{rx:r,ry:i/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*2.8,endY:e.y+n*2.8},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n*2.2},{rx:r,ry:i*1.42,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n}];return{startPoint:o,arcCommands:s}}const IT={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,arcCommands:o}=K6(t),s=`M ${i[0]} ${i[1]} `+o.map(c=>`A ${c.rx} ${c.ry} ${c.xAxisRotation} ${c.largeArcFlag} ${c.sweepFlag} ${c.endX} ${c.endY}`).join(`
`)+" Z",u=r.path(s,{...n,fillStyle:"solid"});return EO(u,"round"),u},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,arcCommands:r}=K6(e);let i=1/0,o=t,s=n;for(const u of r){const c=J3(t,s,u),h=Tt(t[0],t[1],c[0],c[1]);h<i&&(i=h,o=c),s=[u.endX,u.endY]}return o},getEdgeByConnectionPoint(e,t){const n=IT.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2,o=i/1.5;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n+i/6,y:t.y+t.height/6+(t.height*4/6-r)/2}}},FT=(e,t,n)=>D8(e,t,n)!==-1,Jg=(e,t)=>tP(t,e)<=A4,LT=(e,t,n)=>{const r=ji(e,t);return FT(e,t,n)||Jg(r,n)},_T=(e,t,n)=>{const r=oc(e,t);return Bp(t.points)&&lc(n,r)||Jg(r,n)},rz=(e,t)=>{const n=pi(e.shape);if(Vu(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return S3(t,M.getCornerPoints(o),e.angle)});{const r=n.getTextRectangle?n.getTextRectangle(e):Tr(e);return S3(t,M.getCornerPoints(r),e.angle)}},NT=(e,t)=>{const n=pi(e.shape);if(Vu(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return M.isPointInRectangle(o,t)});{const r=n.getTextRectangle?n.getTextRectangle(e):Tr(e);return M.isPointInRectangle(r,t)}},HT=e=>{if(!B8(e))return!0;const t=cv(e);return F.isEmpty(t,t.children[0])},iz=(e,t,n)=>{const r=M.getRectangleByPoints([n.anchor,n.focus]);if(fe.isGeometry(t)){const i=XC(e,r,t);return i||!HT(t)&&rz(t,r)}if(fe.isImage(t))return XC(e,r,t);if(fe.isArrowLine(t)){const i=ji(e,t);return o3(i,r)}if(fe.isVectorLine(t)){const i=oc(e,t);return o3(i,r)}return null},XC=(e,t,n)=>{const r=M.getRectangleByPoints(n.points);return S3(t,M.getCornerPoints(r),n.angle)},S3=(e,t,n)=>{let r=CF(t,n)||t;return o3(r,e)},GT=(e,t)=>{let n=jT(e,t),r=t.length;n&&(r=t.indexOf(n)+1);const i=t.slice(0,r),o=sz(i);return o?o[0]:t$(e,i,"asc")[0]},jT=(e,t)=>{let n=null;for(let r=0;r<t.length;r++){const i=t[r];if(pv(e,i)||Ap(i)){const o=mv(e,i);if(n$(o)){n=i;break}}}return n},oz=(e,t)=>jT(e,[t])!==null,sz=e=>{const t=e.filter(n=>fe.isText(n)||fe.isLine(n)||fe.isImage(n));return t.length?t:null},az="debug:plait:hit:shape:edge:sample-points",zd=A0(az),uz=[pt.cloud],lz=(e,t,n,r=!0)=>{const i=e.getRectangle(t);if(n=hc(e,n,t)||n,fe.isGeometry(t)&&i){if(zd.isDebug()&&uz.includes(t.shape)){zd.clear();const{startPoint:u,arcCommands:c}=K6(i),h=[u,...c.map(y=>[y.endX,y.endY])];zd.drawCircles(e,h,5,!1);let d=1/0,g=n,v=u;for(const y of c){const x=J3(n,v,y),E=Tt(n[0],n[1],x[0],x[1]),{center:T}=nP(v,y);zd.drawCircles(e,[T],8,!1,{fill:"yellow"}),E<d&&(d=E,g=x),v=[y.endX,y.endY]}zd.drawCircles(e,[n],12,!1,{fill:"black",stroke:"black"}),zd.drawCircles(e,[g],12,!1,{fill:"green",stroke:"green"})}if($T(e,t,n,A4))return!0;const o=pi(Sc(t));if(fe.isText(t)){const u=Tr(t);return M.isPointInRectangle(u,n)}return r&&HT(t)&&!oz(e,t)?!1:NT(t,n)||o.isInsidePoint(i,n)}if(fe.isImage(t)){const o=M.getRectangleByPoints(t.points);return M.isPointInRectangle(o,n)}return fe.isArrowLine(t)?LT(e,t,n):fe.isVectorLine(t)?_T(e,t,n):null},$T=(e,t,n,r)=>{const i=YT(t,n);return Tt(i[0],i[1],n[0],n[1])<=r},cz=(e,t,n,r)=>{const i=M.inflate(M.getRectangleByPoints(t.points),r);return pi(Sc(t)).isInsidePoint(i,n)},fz=(e,t,n)=>{const r=e.getRectangle(t);if(n=hc(e,n,t)||n,fe.isGeometry(t)&&!fe.isGeometryByTable(t)){const i=pi(Sc(t)),o=i.isInsidePoint(r,n);if(o)return o;if(i.getTextRectangle){const s=NT(t,n);if(s)return s}}if(fe.isImage(t)){const i=M.getRectangleByPoints(t.points);return M.isPointInRectangle(i,n)}return fe.isArrowLine(t)?LT(e,t,n):fe.isVectorLine(t)?_T(e,t,n):null},Tr=e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}},zt=e=>fe.isText(e)?0:e.strokeWidth||dv.strokeWidth,Zu=(e,t)=>{BW(e,t.shape),Xe.insertNode(e,t,[e.children.length]),B0(e),rh(e,t),vn.updatePointerType(e,Zt.selection)},B8=e=>fe.isText(e)?!0:fe.isImage(e)?!1:fe.isGeometry(e)?L8(e):fe.isArrowLine(e)?sh(e).length>0:fe.isElementByTable(e)?e.cells.some(t=>TT(t)):!0,hz=e=>e.some(t=>B8(t)),Ap=e=>fe.isDrawElement(e)?fe.isText(e)||fe.isArrowLine(e)||fe.isImage(e)?!1:fe.isVectorLine(e)?Bp(e.points):fe.isGeometry(e)?Bz(e):!0:!1,pv=(e,t)=>fe.isCustomGeometryElement(e,t)&&Bp(t.points),R8=(e,t)=>{let n=WT(e,t);if(n){const r=M8(e,n,t);if(r.isHitConnector||r.isHitEdge)return n}return null},M8=(e,t,n)=>{const r=hc(e,n,t)||n,i=UW(r,t),o=YT(t,r);return{isHitEdge:$T(e,t,r,iW),isHitConnector:!!i,connectorPoint:i,edgePoint:o}},WT=(e,t,n=E3)=>{let r=null;return dz(e,i=>{r===null&&cz(e,i,hc(e,t,i)||t,n*2)&&(r=i)}),r},dz=(e,t)=>{di(e,n=>{!I.isBoard(n)&&fe.isShapeElement(n)&&t(n)},nh(e),!0)},KC=(e,t,n,r,i)=>pi(n).draw(e,t,r,i),gz=(e,t,n={hasMask:!0,hasConnector:!0})=>{const r=Lt(),i=M.getRectangleByPoints(t.points),o=M.inflate(i,c6),s=Sc(t);let u;fe.isElementByTable(t)&&(u={element:t});const c=KC(e,o,s,{stroke:yo,strokeWidth:c6},u);if(r.appendChild(c),n.hasMask){const h=KC(e,o,s,{stroke:yo,strokeWidth:0,fill:Ap(t)?_4:dv.fill,fillStyle:"solid"},u);r.appendChild(h)}return n.hasConnector&&pi(s).getConnectorPoints(i).forEach(d=>{const g=ih(I.getRoughSVG(e),d,8,{stroke:yo,strokeWidth:dr,fill:"#FFF",fillStyle:"solid"});r.appendChild(g)}),r},zT=(e,t)=>e&&Vu(e)?`${e.id}-${t.id}`:t.id,Bp=e=>{const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]},ep=e=>ov(e,x3.geometryText,gv.text),H0=(e,t)=>{const n=Sz(e.theme.themeColorMode);return t.strokeColor||n},mv=(e,t)=>{const n=fe.isFlowchart(t)&&Ap(t)?Tz(e.theme.themeColorMode):dv.fill;return t.fill||n},vv=(e,t)=>t.strokeStyle||Ss.solid;class VT extends Yo{canDraw(t,n){return!0}draw(t,n){const r=M.getRectangleByPoints(t.points),i=t.shape;if(i===pt.text)return;const o=mv(this.board,t),s=zt(t),u=H0(this.board,t),c=vv(this.board,t),h=xc(c,s);return Cz(this.board,M.inflate(r,-s),i,{stroke:u,strokeWidth:s,fill:o,strokeLineDash:h})}}function UT(e,t){const n=[],r=t.shape,i=10;if(r===Fn.straight){const o=fe.isArrowLine(t)?Yr.getPoints(e,t):t.points;for(let s=0;s<o.length-1;s++)Tt(...o[s],...o[s+1])<i||n.push([(o[s][0]+o[s+1][0])/2,(o[s][1]+o[s+1][1])/2])}if(r===Fn.curve){const o=fe.isArrowLine(t)?Yr.getPoints(e,t):t.points,s=fe.isArrowLine(t)?bT(e,t):oc(e,t);if(o.length===2){const c=s.length-1,h=Math.round((0+c)/2);n.push(s[h])}else for(let u=0;u<o.length-1;u++){const c=s.findIndex(v=>v[0]===o[u][0]&&v[1]===o[u][1]),h=s.findIndex(v=>v[0]===o[u+1][0]&&v[1]===o[u+1][1]),d=Math.round((c+h)/2);Tt(...o[u],...o[u+1])<i||n.push(s[d])}}if(r===Fn.elbow){const o=wv(e,t),s=bp(e,t);if(!_8(t,s)){const[u,c]=QT(e,t);for(let h=0;h<o.length-1;h++){if(h==0&&mt.isEquals(o[h+1],u)||h===o.length-2&&mt.isEquals(o[o.length-2],c))continue;const[d,g]=o[h],[v,y]=o[h+1],x=[(d+v)/2,(g+y)/2];n.push(x)}}}return n}var Xr;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(Xr||(Xr={}));const XT=(e,t,n)=>{let r=fe.isArrowLine(t)?Yr.getPoints(e,t):t.points;const i=Y6(r,n);if(i!==-1){const u=i;if(i===0)return{handle:Xr.source,handleIndex:u};if(i===r.length-1)return{handle:Xr.target,handleIndex:u};if(t.shape!==Fn.elbow)return{handleIndex:u}}const o=UT(e,t),s=Y6(o,n);if(s!==-1)return{handle:Xr.addHandle,handleIndex:s}};function Y6(e,t){const n=e.map(i=>({x:i[0]-oa/2,y:i[1]-oa/2,width:oa,height:oa})),r=n.find(i=>M.isHit(M.getRectangleByPoints([t,t]),i));return r?n.indexOf(r):-1}class KT extends Yo{constructor(t,n={active:!0}){super(t,n),this.board=t,this.onlySelectedCurrentLine=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Lt(),i=Qe(this.board);if(this.onlySelectedCurrentLine=i.length===1,this.onlySelectedCurrentLine){r.classList.add(vp);const o=fe.isArrowLine(t)?Yr.getPoints(this.board,t):t.points;let s=[...o],u=[];t.shape===Fn.elbow&&(s=o.slice(0,1).concat(o.slice(-1)),u=JT(this.board,t,n.linePoints)),s.map(g=>Gg(this.board,g)).forEach(g=>{const v=mC(this.board,g);r.appendChild(v)});const d=UT(this.board,t).map(g=>Gg(this.board,g));if(!I.hasBeenTextEditing(this.board))for(let g=0;g<d.length;g++){const v=d[g];if(t.shape===Fn.elbow&&u.length){const x=Y6(d,v);if(OW(this.board,t,[...o],u,x)){const T=mC(this.board,v);r.appendChild(T);continue}}const y=Pj(this.board,v);r.appendChild(y)}}else{const o=this.board.getRectangle(t);if(o){const s=Di(this.board,o);let u="0.5";(s.height===0||s.width===0)&&(u="0.8");const c=ua(this.board,s,{stroke:I0,strokeWidth:L$.selectionStrokeWidth});c.style.opacity=u,r.appendChild(c)}}return r}needUpdate(){return Qe(this.board).length===1!==this.onlySelectedCurrentLine}}const wy=class wy extends Yo{constructor(t){super(t,{active:!0}),this.board=t,this.hoverElement=null}canDraw(t,n){const r=Qe(this.board);return!!(n.selected&&r.length===1&&!gi(this.board))}draw(t,n){return this.autoCompleteG=Lt(),O8(this.board,t,!0).forEach((i,o)=>{const s=ih(I.getRoughSVG(this.board),i,yW,{stroke:"none",fill:Hg(I0,wW),fillStyle:"solid"});s.classList.add(`line-auto-complete-${o}`),this.autoCompleteG.appendChild(s)}),this.autoCompleteG}removeAutoCompleteG(t){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${t}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};wy.key="line-auto-complete-generator";let Qu=wy;class pz extends C8{get textManage(){return this.textManages[0]}constructor(t,n,r,i){super(t,n,[{id:n.id,text:r,textHeight:n.textHeight}],i)}update(t,n,r,i){Vu(t)||super.update(t,[{text:n,id:t.id,textHeight:t.textHeight}],[{text:r,id:t.id,textHeight:t.textHeight}],i)}}class yv extends Yo{canDraw(t,n){return!0}draw(t,n){const r=M.getRectangleByPoints(t.points),i=zt(t),o=H0(this.board,t),s=vv(this.board,t),u=xc(s,i);return pi(x0.table).draw(this.board,r,{strokeWidth:i,stroke:o,strokeLineDash:u},{element:t})}}const Sc=e=>fe.isImage(e)?pt.rectangle:fe.isTable(e)?x0.table:e.shape,b8=(e,t)=>fe.isUMLClassOrInterface({shape:t})?new yv(e):new VT(e),mz=(e,t,n)=>{const r=Pc(t),i={id:En(),type:"geometry",angle:0,opacity:1,points:n,strokeWidth:Zg.strokeWidth,...r.geometryProperties};let o,s;return t===ft.class?(o=[{id:En(),height:30},{id:En()},{id:En()}],s=[{id:En()}]):(o=[{id:En(),height:50},{id:En()}],s=[{id:En()}]),{...i,shape:t,rows:o,columns:s,cells:vz(e,o,s,t)}},vz=(e,t,n,r)=>{var c;const i=Pc(r),o=t.length*n.length,s=((c=I8(r))==null?void 0:c.texts)||[],u=s.map(h=>Rp(e,h.text||ep(e),i.textProperties["font-size"]).height);return new Array(o).fill("").map((h,d)=>{const g=Math.floor(d/n.length),v=d%n.length;return{id:En(),rowId:t[g].id,columnId:n[v].id,textHeight:u[d],text:{children:[{text:s[d].text}],align:s[d].align}}})},k8=(e,t,n,r={},i={})=>mT.includes(e)?wz(e,t,r):yz(e,t,n,r,i),yz=(e,t,n,r={},i={})=>{let o={},s=hi.center,u=gv.height;return e===pt.text&&(o={autoSize:!0},s=void 0),i={...i},i!=null&&i.align&&(s=i==null?void 0:i.align),i!=null&&i.textHeight&&(u=i==null?void 0:i.textHeight),i==null||delete i.align,i==null||delete i.textHeight,{id:En(),type:"geometry",shape:e,angle:0,opacity:1,textHeight:u,text:eu(n,s,i),points:t,...o,...r}},wz=(e,t,n={})=>({id:En(),type:"geometry",shape:e,angle:0,opacity:1,points:t,...n}),Cz=(e,t,n,r)=>pi(n).draw(e,t,r),YT=(e,t)=>{const n=M.getRectangleByPoints(e.points),r=Sc(e);return pi(r).getNearestPoint(n,t)},xz=e=>gT[e],Ez=e=>dT[e]||Zg,Pz=e=>pT[e],O8=(e,t,n=!1)=>{const r=(12+oa/2)*2,i=M.getRectangleByPoints(t.points),o=Di(e,i),s=n?o:i;return M.getEdgeCenterPoints(M.inflate(s,r))},qT=(e,t)=>t.findIndex(n=>{const r=M.getRectangleByPoints([e]);let i=M.getRectangleByPoints([n]);return i=M.inflate(i,oa),M.isHit(r,i)}),Sz=e=>yT[e].strokeColor,Tz=e=>yT[e].fill,Rp=(e,t,n)=>{n=n?Number(n):hv;const r=Sp(e,eu(t),{fontSize:n,fontFamily:a0});return{width:r.width+lt.rectangleAndText*2,height:r.height}},ZT=(e,t)=>{const n=I8(e);return M.getPoints(M.getRectangleByCenterPoint(t,n.width,n.height))},I8=e=>{const t=uW().includes(e),n=lW().includes(e);return t?xz(e):n?Pz(e):Ez(e)},F8=(e,t,n,r)=>{const i=Pc(pt.text);return r=r||M.getRectangleByPoints(t).height,k8(pt.text,t,n,i.geometryProperties,{...i.textProperties,textHeight:r})},tp=(e,t,n)=>{const r=Pc(n),i=Rp(e,gv.text,r.textProperties["font-size"]).height;return fe.isUMLClassOrInterface({shape:n})?mz(e,n,t):A8(n)?ZW(n,t,{strokeWidth:Zg.strokeWidth,...r.geometryProperties}):k8(n,t,"",{strokeWidth:Zg.strokeWidth,...r.geometryProperties},{...r.textProperties,textHeight:i})},P5=(e,t,n)=>{const r=n?bg(e,t,n):oh(t);r&&r.edit(()=>{})},L8=e=>Az(e)||Vu(e),Dz=e=>!mT.includes(e)&&!A8(e),Az=e=>fe.isGeometry(e)&&Dz(e.shape),Bz=e=>!aW.includes(e.shape),Rz=e=>e.source.boundId&&e.source.boundId===e.target.boundId,_8=(e,t)=>Qj(t)&&!Rz(e),wv=(e,t)=>{const n=Mp(e,t),r=bp(e,t,n);if(_8(t,r))return _u(Ij(n.source.point,n.source.direction,n.target.point,n.target.direction,_S));const i=w0(eT(r,e)),o=i.slice(1,i.length-1);if(t.points.length===2)return _u(i);{const s=_u(o),c=w0(Yr.getPoints(e,t)).slice(1,-1);if(RT(c))return _u(i);const h=[s[0],...c,s[s.length-1]],d=BT(e,h,s,r),g=[i[0]];for(let y=0;y<d.length-1;y++){let x=d[y],E=d[y+1];if(mt.isAlign([x,E]))g.push(x);else{const D=X6(s,x,E);D.length?(g.push(x),g.push(...D)):(g.push(x),console.log("unknown data points"))}}return g.push(i[i.length-2],i[i.length-1]),_u(g)}},QT=(e,t)=>{const n=bp(e,t);return[n.nextSourcePoint,n.nextTargetPoint]},Mz=(e,t,n)=>{let r=t.source.boundId?xs(e,t.source.boundId):void 0,i=t.target.boundId?xs(e,t.target.boundId):void 0;if(!r){const h=n.source;r=YC(h.point,h.vector)}if(!i){const h=n.target;i=YC(h.point,h.vector)}let o=M.getRectangleByPoints(r.points);const s=Ka(M.getCornerPoints(o),r)||M.getCornerPoints(o);o=M.getRectangleByPoints(s),o=M.inflate(o,zt(r)*2);let u=M.getRectangleByPoints(i.points);const c=Ka(M.getCornerPoints(u),i)||M.getCornerPoints(u);return u=M.getRectangleByPoints(c),u=M.inflate(u,zt(i)*2),{sourceRectangle:o,targetRectangle:u}},YC=(e,t)=>{const n=Jd(e,t,-25),r=M.getPoints(M.getRectangleByCenterPoint(n,50,50));return k8(pt.rectangle,r,"")};function JT(e,t,n){let r=n??wv(e,t);const[i,o]=QT(e,t);return r.splice(0,1,i),r.splice(-1,1,o),w0(r)}const T3=(e,t)=>(t!=null&&t.length?t:Qe(e)).filter(r=>fe.isDrawElement(r)),N8=e=>Qe(e).filter(n=>fe.isArrowLine(n)),eD=e=>Qe(e).filter(n=>fe.isVectorLine(n)),bz=e=>{const t=Qe(e);return t&&t.length===1&&fe.isSwimlane(t[0])},kz=e=>{const t=Qe(e);return t&&t.length===1&&fe.isLine(t[0])},tD=(e,t,n)=>{const r=tp(e,t,n);return Zu(e,r),r},Oz=(e,t,n)=>{const r=Pc(pt.text),i=Rp(e,n,r.textProperties["font-size"]),o=[t,[t[0]+i.width,t[1]+i.height]],s=F8(e,o,n);Zu(e,s)},Iz=(e,t,n,r)=>{const i=qf(t),o=Xt.get(e,r),s={points:i,textHeight:n};fe.isText(o)&&o.autoSize&&(s.autoSize=!1),Xe.setNode(e,s,r)},Fz=(e,t)=>{const n=Qe(e),r=[];n.forEach(i=>{if(fe.isGeometry(i)&&!fe.isText(i)){const o=I.findPath(e,i);Xe.setNode(e,{shape:t},o),EU(e,{...i,shape:t},r)}}),r.length&&r.forEach(i=>{$i.resizeArrowLine(e,i.property,i.path)})},nD=(e,t,n,r)=>{let i=t.points,o=t.autoSize;const s=lt.rectangleAndText;if(o){const u=n<P3?P3:n,c=cv(t);if($6.isActive(c,hi.right))i=[[i[1][0]-(u+s*2),i[0][1]],[i[1][0],i[0][1]+r]];else if($6.isActive(c,hi.center)){const h=Math.abs(i[0][0]-i[1][0]),d=(u-h)/2;i=[[i[0][0]-d-s,i[0][1]],[i[1][0]+d+s,i[0][1]+r]]}else i=[i[0],[i[0][0]+u+s*2,i[0][1]+r]];Xa(t)&&(i=h8(M.getRectangleByPoints(t.points),M.getRectangleByPoints(i),M.getCenterPoint(M.getRectangleByPoints(t.points)),M.getCenterPoint(M.getRectangleByPoints(i)),t.angle))}return{points:i}},Lz=(e,t,n,r,i)=>{const o={text:n,textHeight:i,...nD(e,t,r,i)},s=e.children.findIndex(u=>u===t);Xe.setNode(e,o,[s])},_z=(e,t,n,r)=>{if(t.autoSize){const i={textHeight:r,...nD(e,t,n,r)},o=mt.isEquals(t.points[0],i.points[0])&&mt.isEquals(t.points[1],i.points[1]),s=Math.round(r)===Math.round(t.textHeight);if(!o||!s){const u=e.children.findIndex(c=>c===t);Xe.setNode(e,i,[u])}}},Nz=(e,t,n)=>{const{width:r,height:i,url:o}=t,s=I.getBoardContainer(e).clientWidth,u=I.getBoardContainer(e).clientHeight,c=At(e,Ot(e,s/2,u/2)),h=n?[n,[n[0]+r,n[1]+i]]:[[c[0]-r/2,c[1]-i/2],[c[0]+r/2,c[1]+i/2]],d={id:En(),type:"image",points:h,url:o};Xe.insertNode(e,d,[e.children.length]),Xe.addSelectionWithTemporaryElements(e,[d])},rD=(e,t,n)=>{Xe.setNode(e,t,n)},Hz=(e,t,n)=>{const r=I.findPath(e,t);Xe.setNode(e,{texts:n},r)},Gz=(e,t,n)=>{var s;const r=I.findPath(e,t),o=[...(s=t.texts)!=null&&s.length?[...t.texts]:[]];o.splice(n,1),Xe.setNode(e,{texts:o},r)},jz=(e,t,n)=>{v8(Go.arrowLine,t,n),N8(e).forEach(i=>{const o=I.findPath(e,i);let s=t===Es.source?i.source:i.target;s={...s,marker:n},Xe.setNode(e,{[t]:s},o)})},$z=(e,t)=>{N8(e).map(r=>{const i={...t};if(r.shape===t.shape)return;const o=I.findPath(e,r);Xe.setNode(e,i,o)})},Wz=(e,t,n,r)=>{const i=Yr.getPoints(e,t),o=n===Es.source?i[0]:i[i.length-1],s=E0(e,o,r);if(s){let u=t.source,c=t.target;n===Es.source?u={...u,boundId:r.id,connection:s}:c={...c,boundId:r.id,connection:s};const h=I.findPath(e,t);rD(e,{source:u,target:c},h)}};function zz(e){const t={...e};return fe.isHorizontalSwimlane(e)?(t.cells=e.cells.map((n,r)=>(r===0&&e.header&&(n={...e.cells[0],rowspan:e.rows.length}),n.text&&n.textHeight&&!n.text.direction&&(n={...n,text:{...n.text,direction:"vertical"}}),n)),t):(e.header&&(t.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),t)}const iD=(e,t)=>{const n=wT[e];return M.getPoints(M.getRectangleByCenterPoint(t,n.width,n.height))},D3=(e,t)=>{const n=Xz(e),r=Kz(e),i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=qC(r,"row",n,o),u=qC(r,"column",n,i);return{id:En(),type:"swimlane",shape:r,points:t,rows:s,columns:u,header:n,cells:Vz(r,s,u,n)}},qC=(e,t,n,r)=>{const i=s=>new Array(s).fill("").map(()=>({id:En()}));let o=i(3);if(t==="row"&&e===mo.swimlaneVertical||t==="column"&&e===mo.swimlaneHorizontal){o=n?o:i(2);const s=t==="row"?"height":"width";let u=hg;r<hg*o.length&&(u=Math.min(r/o.length/hg*hg,hg)),o=o.map((c,h)=>h===0||h===1&&n?{...c,[s]:u}:c)}return o},Vz=(e,t,n,r)=>{let i=[],o=0;r&&(i=[x5(t[0].id,n[0].id,"New Swimlane")],o=1);const s=new Array(6).fill("").map((u,c)=>{if(c<3){const g=e===mo.swimlaneVertical?t[o].id:t[c].id,v=e===mo.swimlaneVertical?n[c].id:n[o].id;return x5(g,v,r?"Lane":"New Swimlane")}const h=e===mo.swimlaneVertical?t[o+1].id:t[c-3].id,d=e===mo.swimlaneVertical?n[c-3].id:n[o+1].id;return x5(h,d)});return[...i,...s]},Uz=e=>fe.isHorizontalSwimlane(e)?e.rows.length:fe.isVerticalSwimlane(e)?e.columns.length:0,Xz=e=>[sa.swimlaneHorizontalWithHeader,sa.swimlaneVerticalWithHeader].includes(e),Kz=e=>[sa.swimlaneHorizontalWithHeader,sa.swimlaneHorizontal].includes(e)?mo.swimlaneHorizontal:mo.swimlaneVertical,oD=(e,t=e.pointer)=>vT().includes(t),Yz=(e,t,n)=>{if(n>0&&fe.isSwimlane(t)){const r=Uz(t);if(fe.isHorizontalSwimlane(t))if(n>r)sD(e,t,t.rows.length,n-r);else{const i=t.rows.length-(r-n);uD(e,t,i,r-n)}if(fe.isVerticalSwimlane(t))if(n>r)aD(e,t,t.columns.length,n-r);else{const i=t.columns.length-(r-n);lD(e,t,i,r-n)}}},sD=(e,t,n,r=1)=>{if(fe.isHorizontalSwimlane(t)){const i=[...t.rows],o=[];for(let d=0;d<r;d++)o.push({id:En()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(d=>{s.push(...cD(t,d.id,"column"))});const u=uh(e,t,t.cells[t.cells.length-1].id).points,c=M.getRectangleByPoints(u).height,h=[t.points[0],[t.points[1][0],t.points[1][1]+c*r]];Cv(e,t,t.columns,i,s,h)}},aD=(e,t,n,r=1)=>{if(fe.isVerticalSwimlane(t)){const i=[...t.columns],o=[];for(let d=0;d<r;d++)o.push({id:En()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(d=>{s.push(...cD(t,d.id,"row"))});const u=uh(e,t,t.cells[t.cells.length-1].id).points,c=M.getRectangleByPoints(u).width,h=[t.points[0],[t.points[1][0]+c*r,t.points[1][1]]];Cv(e,t,i,t.rows,s,h)}},uD=(e,t,n,r=1)=>{if(fe.isHorizontalSwimlane(t)){if(r>t.rows.length)return;const i=[...t.rows];if(i.splice(n,r),i.length===0){const o=I.findPath(e,t);Xe.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let h=n;h<r+n;h++){const d=t.rows[h];s.push(d),o=o.filter(g=>g.rowId!==d.id)}let u=0;s.forEach(h=>{if(h.height)u+=h.height;else{const d=t.cells.find(v=>v.rowId===h.id),g=uh(e,t,d.id).points;u+=M.getRectangleByPoints(g).height}});const c=[t.points[0],[t.points[1][0],t.points[1][1]-u]];Cv(e,t,t.columns,i,o,c)}}},lD=(e,t,n,r=1)=>{if(fe.isVerticalSwimlane(t)){if(r>t.columns.length)return;const i=[...t.columns];if(i.splice(n,r),i.length===0){const o=I.findPath(e,t);Xe.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let h=n;h<r+n;h++){const d=t.columns[h];s.push(d),o=o.filter(g=>g.columnId!==d.id)}let u=0;s.forEach(h=>{if(h.width)u+=h.width;else{const d=t.cells.find(v=>v.columnId===h.id),g=uh(e,t,d.id).points;u+=M.getRectangleByPoints(g).width}});const c=[t.points[0],[t.points[1][0]-u,t.points[1][1]]];Cv(e,t,i,t.rows,o,c)}}},cD=(e,t,n)=>{const r=e[`${n}s`].map(i=>({id:En(),rowId:n==="row"?i.id:t,columnId:n==="row"?t:i.id}));return e.header&&r.shift(),r[0]={...r[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:hi.center,direction:n==="row"?void 0:"vertical"},textHeight:20},r},Cv=(e,t,n,r,i,o)=>{const s=I.findPath(e,t);Xe.setNode(e,{columns:n,rows:r,cells:i,points:o},s)},qz=(e,t,n)=>{var s;const i={texts:(s=t.texts)==null?void 0:s.map(u=>u.id===n.id?{...u,...n}:u)},o=e.children.findIndex(u=>u===t);Xe.setNode(e,i,[o])},Zz=(e,t,n,r,i)=>{const o=Xt.get(e,t),s=uh(e,o,n),u=o.cells.findIndex(E=>E.id===s.id);let c=[...o.rows],h=[...o.columns],d=[...o.cells],g=[...o.points];const{width:v,height:y}=M.getRectangleByPoints(s.points),x=lt.rectangleAndText;if(qg.isVerticalText(s)){const E=o.columns.findIndex(T=>T.id===s.columnId);if(i>v){const T=i+x*2,D=T-v,S=PT(o,o.columns[E].id,T,D);g=S.points,h=S.columns}}else{const E=o.rows.findIndex(S=>S.id===s.rowId),D=o.rows[E].height??Math.max(y,s.textHeight||0);if(i>D){const S=i+x*2,R=S-D,L=ST(o,o.rows[E].id,S,R);g=L.points,c=L.rows}}d[u]={...d[u],textHeight:i,text:r},Xe.setNode(e,{rows:c,columns:h,cells:d,points:g},t)},Qz=(e,t,n,r)=>{const i=t0(t);let o=t.cells;i!=null&&i.length?o=t.cells.map(s=>i.map(u=>u.id).includes(s.id)?ZC(s,n):s):o=t.cells.map(s=>s.text&&s.textHeight?ZC(s,n):s),Xe.setNode(e,{cells:o},r)},ZC=(e,t)=>{const n={...e};return t?n.fill=t:delete n.fill,n},Jz=(e,t)=>{eD(e).map(r=>{if(r.shape===t.shape)return;const i=I.findPath(e,r);Xe.setNode(e,{...t},i)})},eV=(e,t,n,r)=>{const o=vT().includes(n);let s=gT[n]||dT[n]||pT[n]||Zg;o&&(s=wT[n]);const u=Kd(r);if(u){let c=0;[kt.left,kt.right].includes(u)?c=-s.width/2:c=-s.height/2;const h=Jd(t,r,c),d=M.getPoints(M.getRectangleByCenterPoint(h,s.width,s.height));if(o){const g=D3(n,d);return Zu(e,g),g}return tD(e,d,n)}return null},$i={setText:Lz,setDrawTexts:qz,insertGeometry:tD,resizeGeometry:Iz,insertText:Oz,setTextSize:_z,resizeArrowLine:rD,setArrowLineTexts:Hz,removeArrowLineText:Gz,setArrowLineMark:jz,setArrowLineShape:$z,setVectorLineShape:Jz,insertImage:Nz,connectArrowLineToDraw:Wz,switchGeometryShape:Fz,setTableText:Zz,addSwimlaneRow:sD,addSwimlaneColumn:aD,removeSwimlaneRow:uD,removeSwimlaneColumn:lD,updateSwimlaneCount:Yz,setTableFill:Qz,insertDrawByVector:eV},q6=(e,t,n,r=0)=>{const i=M.getCenterPoint(t),o=jS(t,oa);if(r){const s=kr([n],i,-r)[0];let u=o.find(c=>M.isHit(M.getRectangleByPoints([s,s]),c.rectangle));return u&&(u.cursorClass=Tj(u.cursorClass,r)),u}else return o.find(s=>M.isHit(M.getRectangleByPoints([n,n]),s.rectangle))},tV=e=>({x:e.x-p3-Mg,y:e.y+e.height+p3,width:Mg,height:Mg}),nV="debug:plait:resize-for-rotation",ys=A0(nV);function rV(e){const{afterChange:t,drawSelectionRectangle:n}=e;let r,i,o=!1,s=null;const u=()=>{const h=Qe(e);return h.length>=1&&h.every(d=>(fe.isDrawElement(d)||fe.isCustomGeometryElement(e,d)&&d.points.length>1)&&!kz(e)&&!bz(e))};return ah(e,{key:"draw-elements",canResize:u,hitTest:h=>{const d=Qe(e),g=on(e,d,!1),v=po(d),y=q6(e,g,h,v);return y?{element:[...d],rectangle:g,handle:y.handle,cursorClass:y.cursorClass}:null},onResize:(h,d)=>{r==null||r.remove(),ys.isDebug()&&ys.clear();const g=Wm(e,h.handle),v=d.isShift||h.element.length===1&&fe.isImage(h.element[0]),y=M.getCenterPoint(h.rectangle),x=y3(h.handle),{originPoint:E,handlePoint:T}=Z6(e,x,h.rectangle),D=po(h.element);let S;if(D){S={angle:D,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[k,W]=kr([d.startPoint,d.endPoint],y,-S.angle);d.startPoint=k,d.endPoint=W}const R=fD(e,h,d,{originPoint:E,handlePoint:T},v,g),L=xv(e,h.element,R);if(s=L.activePoints,r=L.snapG,I.getElementTopHost(e).append(r),S){const k=M.getPoints(h.rectangle),W=k.map(me=>ju(me,E,L.xZoom,L.yZoom)),z=M.getRectangleByPoints(W);ys.isDebug()&&ys.drawRectangle(e,z,{stroke:"blue"});const Y=M.getCenterPoint(z),te=h8(M.getRectangleByPoints(k),M.getRectangleByPoints(W),y,Y,S.angle),se=M.getCenterPoint(M.getRectangleByPoints(te));S=Object.assign(S,{offsetX:se[0]-Y[0],offsetY:se[1]-Y[1],newCenterPoint:se}),ys.isDebug()&&ys.drawRectangle(e,te)}h.element.forEach(k=>{const W=I.findPath(e,k);let z;if(S){z=A6(k.points,y,-S.angle).map(se=>ju(se,E,L.xZoom,L.yZoom));const te=z.map(se=>[se[0]+S.offsetX,se[1]+S.offsetY]);z=A6(te,S.newCenterPoint,S.angle)}else Xa(k)&&(o=!0),Xa(k)&&xF(k.angle)?z=iV(e,k.points,E,L.xZoom,L.yZoom):z=k.points.map(Y=>ju(Y,E,L.xZoom,L.yZoom));if(fe.isGeometry(k))if(fe.isGeometry(k)&&L8(k)){const{height:Y}=oh(k).getSize();$i.resizeGeometry(e,z,Y,W)}else z=qf(z),Xe.setNode(e,{points:z},W);else if(fe.isLine(k)||fe.isCustomGeometryElement(e,k)||fe.isVectorLine(k))Xe.setNode(e,{points:z},W);else if(fe.isImage(k))if(v)Xe.setNode(e,{points:z},W);else{const Y=M.getRectangleByPoints(k.points),te=M.getCenterPoint(Y),se=ju(te,E,L.xZoom,L.yZoom),me=M.getRectangleByCenterPoint(se,Y.width,Y.height);Xe.setNode(e,{points:M.getPoints(me)},W)}})},afterResize:h=>{if(r==null||r.remove(),r=null,o){o=!1,s=null;const d=Qe(e);Xe.addSelectionWithTemporaryElements(e,d)}}}),e.afterChange=()=>{t(),i&&(i.remove(),i=null);const h=Qe(e);u()&&!gi(e)&&h.length>1&&(i=oV(e,s,o),I.getActiveHost(e).append(i))},e.drawSelectionRectangle=()=>{if(o){const h=M.getRectangleByPoints(s),d=Di(e,h);return ua(e,M.inflate(d,dr),{stroke:yo,strokeWidth:dr})}return n()},e}const Z6=(e,t,n)=>{const r=Sj(e,t),i=wC(n,r),o=wC(n,t);return{originPoint:i,handlePoint:o}},H8=(e,t,n,r,i)=>{const[o,s]=e;let u=0,c=0;if(r)if(i)u=mt.getOffsetX(o,s)/(n[0]-t[0]),c=u;else{let h=mt.getOffsetX(o,s),d=mt.getOffsetY(o,s);u=h/(n[0]-t[0]),c=d/(n[1]-t[1])}else{const h=mt.isHorizontal(t,n,.1)||!1;let d=h?mt.getOffsetX(o,s):mt.getOffsetY(o,s),g=h?n[0]-t[0]:n[1]-t[1];const v=d/g;i?(u=v,c=v):h?u=v:c=v}return{xZoom:u,yZoom:c}},ju=(e,t,n,r)=>{const i=(e[0]-t[0])*n,o=(e[1]-t[1])*r;return[e[0]+i,e[1]+o]},iV=(e,t,n,r,i)=>{const o=M.getRectangleByPoints(t);ys.isDebug()&&ys.drawRectangle(e,o,{stroke:"black"});let s=t;s=kr(s,M.getCenterPoint(o),1/2*Math.PI),ys.isDebug()&&ys.drawRectangle(e,s,{stroke:"blue"}),s=s.map(c=>ju(c,n,r,i)),ys.isDebug()&&ys.drawRectangle(e,s);const u=M.getRectangleByPoints(s);return kr(s,M.getCenterPoint(u),-.5*Math.PI)},oV=(e,t,n)=>{const r=Lt(),i=Qe(e),o=n?M.getRectangleByPoints(t):on(e,i,!1),s=Di(e,o);let u=M.getCornerPoints(s);const c=po(i);if(c){const h=M.getCenterPoint(s);u=kr(u,h,c)}return u.forEach(h=>{const d=GS(e,h);r.append(d)}),r},sV="debug:plait:point-for-geometry",QC=A0(sV),xm=10;function fD(e,t,n,r,i,o){const{originPoint:s,handlePoint:u}=r,c=[n.startPoint,n.endPoint],{xZoom:h,yZoom:d}=H8(c,s,u,o,i);let g,v=[];if(Array.isArray(t.element)){g=t.element;const R=on(e,t.element,!1);v=M.getPoints(R)}else g=[t.element],v=t.element.points;const y=v.map(R=>ju(R,s,h,d)),x=M.getRectangleByPoints(y),E=xp(x,po(g)),T=ju(u,s,h,d),[D,S]=Kn(s,T);return{resizePoints:c,resizeOriginPoint:v,activeRectangle:E,originPoint:s,handlePoint:u,directionFactors:[C0(D),C0(S)],isAspectRatio:i,isFromCorner:o}}function xv(e,t,n){const r=Lt(),i=BP(e,t);let o=lV(i,n);o.deltaX===0&&o.deltaY===0&&(o=aV(i,n));const s=po(t),u=uV(o,n,s),c=fV(e,u.activePoints,i,n,s),h=cV(e,u.activePoints,i,n,s);return r.append(c,h),{...u,...o,snapG:r}}function aV(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i,directionFactors:o}=t,s=o[0]!==0||r,u=o[1]!==0||r;if(s){const c=Kf(i,!0),h=o[0]===-1?c[0]:c[2],d=Sg(e,h,!0);if(Math.abs(d)<zu&&(n.deltaX=d,n.deltaX!==0&&r))return n.deltaY=n.deltaX/(i.width/i.height),n}if(u){const c=Kf(i,!1),h=o[1]===-1?c[0]:c[2],d=Sg(e,h,!1);if(Math.abs(d)<zu&&(n.deltaY=d,n.deltaY!==0&&r))return n.deltaX=n.deltaY*(i.width/i.height),n}return n}function uV(e,t,n){const{deltaX:r,deltaY:i}=e,{resizePoints:o,isCreate:s}=t,u=[o[0],[o[1][0]+r,o[1][1]+i]];let c=u,h=0,d=0;if(!s){const{originPoint:g,handlePoint:v,isFromCorner:y,isAspectRatio:x,resizeOriginPoint:E}=t,T=H8(u,g,v,y,x);h=T.xZoom,d=T.yZoom,c=E.map(D=>ju(D,g,h,d)),n&&(c=h8(M.getRectangleByPoints(E),M.getRectangleByPoints(c),M.getCenterPoint(M.getRectangleByPoints(E)),M.getCenterPoint(M.getRectangleByPoints(c)),n))}return{xZoom:h,yZoom:d,activePoints:c}}function lV(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i}=t,o=e.find(u=>Math.abs(u.width-i.width)<zu);if(o){const u=o.width-i.width;if(n.deltaX=u*t.directionFactors[0],r){const c=u/(i.width/i.height);return n.deltaY=c*t.directionFactors[1],n}}const s=e.find(u=>Math.abs(u.height-i.height)<zu);if(s){const u=s.height-i.height;if(n.deltaY=u*t.directionFactors[1],r){const c=u*(i.width/i.height);return n.deltaX=c*t.directionFactors[0],n}}return n}function Em(e,t){return t?[[e.x,e.y-xm],[e.x+e.width,e.y-xm]]:[[e.x-xm,e.y],[e.x-xm,e.y+e.height]]}function cV(e,t,n,r,i){QC.isDebug()&&QC.clear();const o=M.getRectangleByPoints(t),s=xp(o,i),{isAspectRatio:u,directionFactors:c}=r,h=c[0]!==0||u,d=c[1]!==0||u;return RP(e,s,n,h,d)}function fV(e,t,n,r,i){let o=[],s=[];const u=r.directionFactors[0]!==0||r.isAspectRatio,c=r.directionFactors[1]!==0||r.isAspectRatio,h=M.getRectangleByPoints(t),d=xp(h,i);for(let v of n)d.width===v.width&&u&&o.push(Em(v,!0)),d.height===v.height&&c&&s.push(Em(v,!1));o.length&&u&&o.push(Em(d,!0)),s.length&&c&&s.push(Em(d,!1));const g=[...o,...s];return MP(e,g)}const hV=(e,t,n)=>nT(e,t,n,r=>{if(fe.isArrowLine(r)){let i={...r.source},o={...r.target},s=[...r.points];return r.source.boundId&&(s[0]=nc(xs(e,r.source.boundId),r.source.connection),xs(e,r.source.boundId,t)||(delete i.boundId,delete i.connection)),r.target.boundId&&(s[s.length-1]=nc(xs(e,r.target.boundId),r.target.connection),xs(e,r.target.boundId,t)||(delete o.boundId,delete o.connection)),s=s.map(u=>[u[0]-n[0],u[1]-n[1]]),{...r,points:s,source:i,target:o}}}),dV=(e,t,n)=>{rT(e,t,n,(r,i)=>{fe.isArrowLine(r)&&(r.source.boundId&&t.find(s=>[r.source.boundId,i[r.source.boundId]].includes(s.id))&&(r.source.boundId=i[r.source.boundId]),r.target.boundId&&t.find(s=>[r.target.boundId,i[r.target.boundId]].includes(s.id))&&(r.target.boundId=i[r.target.boundId])),fe.isElementByTable(r)&&(WC(r,"row"),WC(r,"column"),TW(r.cells))})},wg=3/4,gV={draw(e,t,n){const r=dg(t),o=I.getRoughSVG(e).polygon(r,{...n,fillStyle:"solid"});return Wt(o,"round"),o},isInsidePoint(e,t){const n=dg(e);return lc(t,n)},getCornerPoints(e){return dg(e)},getNearestPoint(e,t){return Ln(t,dg(e))},getEdgeByConnectionPoint(e,t){const n=dg(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height*wg-r)/2}}},dg=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*wg],[e.x+e.width*3/5,e.y+e.height*wg],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*wg],[e.x,e.y+e.height*wg]];function Or(e){const t=e.getPolygonPoints,n={draw(r,i,o){const s=t(i),c=I.getRoughSVG(r).polygon(s,{...o,fillStyle:"solid"});return Wt(c,"round"),c},isInsidePoint(r,i){const o=t(r);return lc(i,o)},getCornerPoints(r){return t(r)},getNearestPoint(r,i){return Ln(i,t(r))},getNearestCrossingPoint(r,i){const o=t(r),s=OT(o,i);let u=s[0],c=Tt(i[0],i[1],u[0],u[1]);return s.filter((h,d)=>d>0).forEach(h=>{let d=Tt(i[0],i[1],h[0],h[1]);d<c&&(c=d,u=h)}),u},getEdgeByConnectionPoint(r,i){const o=t(r),s=M.getConnectionPoint(r,i);return Qr(o,s)},getConnectorPoints(r){return e.getConnectorPoints?e.getConnectorPoints(r):t(r)}};return e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const pV=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],mV=Or({getPolygonPoints:pV,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),S5=Or({getPolygonPoints:M.getEdgeCenterPoints,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Tr(e);return t.width=t.width/2,t.x+=t.width/2,t}});function G8(e){const t={draw(n,r,i){const o=[r.x+r.width/2,r.y+r.height/2],u=I.getRoughSVG(n).ellipse(o[0],o[1],r.width,r.height,{...i,fillStyle:"solid"});return Wt(u,"round"),u},isInsidePoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return Uu(r,i,n.width/2,n.height/2)},getCornerPoints(n){return M.getEdgeCenterPoints(n)},getNearestPoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return Ai(r,i,n.width/2,n.height/2)},getTangentVectorByConnectionPoint(n,r){const i=M.getConnectionPoint(n,r),o=[n.x+n.width/2,n.y+n.height/2],s=[i[0]-o[0],-(i[1]-o[1])],u=n.width/2,c=n.height/2,h=qa(s[0],s[1],u,c);return Za(s[0],s[1],h)},getConnectorPoints(n){return M.getEdgeCenterPoints(n)},getTextRectangle(n){const r=Tr(n),i=r.width;return r.width=r.width*3/4,r.x+=i/8,r}};return e!=null&&e.draw&&(t.draw=e.draw),e!=null&&e.getTextRectangle&&(t.getTextRectangle=e.getTextRectangle),t}const T5=G8(),vV=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],yV=Or({getPolygonPoints:vV,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),wV=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],CV=Or({getPolygonPoints:wV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width*(1-.32),t.x+=n*.32,t}}),xV=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],EV=Or({getPolygonPoints:xV,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),JC=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],ex=Or({getPolygonPoints:JC,getConnectorPoints:e=>{const t=JC(e);return N0(t)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),PV=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],SV=Or({getPolygonPoints:PV,getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2,o=i*3/5;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n+i/5,y:t.y+t.height/5+(t.height*4/5-r)/2}}}),TV=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},DV=Or({getPolygonPoints:TV,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Tr(e),r=t.width>t.height/2+20;return n.width=r?t.width-t.height/2:n.width,n}}),AV=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(t?e.height/2:e.width),e.y+e.height/2]]},BV=Or({getPolygonPoints:AV,getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Tr(e),r=t.width>t.height+20;return n.width=r?t.width-t.height:n.width,n.x=r?t.x+t.height/2:n.x,n}}),RV=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],MV=Or({getPolygonPoints:RV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Tr(e);return t.width=t.width*.68,t}}),rn={draw(e,t,n){return ua(e,t,{...n,fillStyle:"solid"})},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},bV={draw(e,t,n){return R0(I.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,u0(t))},isInsidePoint(e,t){return k4(t,e,u0(e))},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return hD(t,e,u0(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},u0=e=>Math.min(e.width*.1,e.height*.1);function hD(e,t,n){const{x:r,y:i,width:o,height:s}=t,u=M.getCornerPoints(t);let c=Ln(e,u),h=null;return e[0]>=r&&e[0]<=r+n&&e[1]>=i&&e[1]<=i+n&&(h=[r+n,i+n]),e[0]>=r&&e[0]<=r+n&&e[1]>=i+s&&e[1]<=i+s-n&&(h=[r+n,i+s-n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i&&e[1]<=i+n&&(h=[r+o-n,i+n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i+s-n&&e[1]<=i+s&&(h=[r+o-n,i+s-n]),h&&(c=Ai(e,h,n,n)),c}const Lf=3/4,kV={draw(e,t,n){const r=I.getRoughSVG(e),i=t.x,o=t.y,s=t.x+t.width,u=t.y+t.height*Lf,c=u0(t),h=[i+c,o],d=[s-c,o],g=[s,o+c],v=[s,u-c],y=[s-c,u],x=[i+c,u],E=[i,u-c],T=[i,o+c],D=[i+t.width/4,u],S=[i+t.width/4,t.y+t.height],R=[i+t.width/2,u],L=r.path(`M${d[0]} ${d[1]} A ${c} ${c}, 0, 0, 1, ${g[0]} ${g[1]} L ${v[0]} ${v[1]} A ${c} ${c}, 0, 0, 1, ${y[0]} ${y[1]} L    ${R[0]} ${R[1]}  ${S[0]} ${S[1]}   ${D[0]} ${D[1]}   ${x[0]} ${x[1]} A ${c} ${c}, 0, 0, 1, ${E[0]} ${E[1]} L ${T[0]} ${T[1]} A ${c} ${c}, 0, 0, 1, ${h[0]} ${h[1]} Z`,{...n,fillStyle:"solid"});return Wt(L,"round"),L},isInsidePoint(e,t){const n=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,lc(t,n)||k4(t,e,u0(e))},getCornerPoints(e){return D5(e)},getNearestPoint(e,t){return Ln(t,D5(e))},getEdgeByConnectionPoint(e,t){const n=D5(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*Lf],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height*Lf-r)/2}}},D5=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Lf],[e.x+e.width/2,e.y+e.height*Lf],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*Lf],[e.x,e.y+e.height*Lf]],tx=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],OV=Or({getPolygonPoints:tx,getConnectorPoints(e){const t=tx(e);return N0(t)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),nx=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],IV=Or({getPolygonPoints:nx,getConnectorPoints(e){const t=nx(e);return[...N0(t),...t]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n+i/6,y:t.y+t.height*3/5+(t.height*2/5-r)/2}}}),FV=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],LV=Or({getPolygonPoints:FV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),rx=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],_V=Or({getPolygonPoints:rx,getConnectorPoints:e=>{const t=rx(e);return[t[1],t[3],t[5],t[7],t[9]]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2,o=i/2;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n+i/4,y:t.y+t.height*1/6+(t.height*4/5-r)/2}}}),NV={draw(e,t,n){return R0(I.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,Pm(t))},isInsidePoint(e,t){return k4(t,e,Pm(e))},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return HV(t,e,Pm(e))},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=Pm(e),i=dD(e,r,n);if(i){const o=[n[0]-i[0],-(n[1]-i[1])],s=r,u=r,c=qa(o[0],o[1],s,u);return Za(o[0],o[1],c)}return null},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},Pm=e=>Math.min(e.width/2,e.height/2);function HV(e,t,n){let r=null,i=dD(t,n,e);if(i)r=Ai(e,i,n,n);else{const o=M.getCornerPoints(t);r=Ln(e,o)}return r}function dD(e,t,n){const{x:r,y:i,width:o,height:s}=e;let u=null;return n[0]>=r&&n[0]<=r+t&&n[1]>=i&&n[1]<=i+t&&(u=[r+t,i+t]),n[0]>=r&&n[0]<=r+t&&n[1]>=i+s-t&&n[1]<=i+s&&(u=[r+t,i+s-t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i&&n[1]<=i+t&&(u=[r+o-t,i+t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i+s-t&&n[1]<=i+s&&(u=[r+o-t,i+s-t]),u}const ix=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],GV=Or({getPolygonPoints:ix,getConnectorPoints:e=>{const t=ix(e);return N0(t)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+t.height/4+(t.height*3/4-r)/2}}}),jV=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],$V=Or({getPolygonPoints:jV,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width*2/3,t.x+=n/6,t}}),ox=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],WV=Or({getPolygonPoints:ox,getConnectorPoints:e=>{const t=ox(e);return N0(t)},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),sx=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],zV=Or({getPolygonPoints:sx,getConnectorPoints:e=>{const t=sx(e);return[...N0(t),...t]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n+i/6,y:t.y+(t.height*2/3-r)/2}}}),VV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} L${t.x+t.width*3/4} ${t.y} A  ${t.width/4} ${t.height/2}, 0, 0, 1,${t.x+t.width*3/4} ${t.y+t.height} L${t.x} ${t.y+t.height} Z`,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,width:e.width*3/4},n),i=Uu(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return r||i},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));return n[0]>e.x+e.width*3/4?Ai(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/4,s=e.height/2,u=qa(i[0],i[1],o,s);return Za(i[0],i[1],u)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},UV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x+t.width/10} ${t.y} L${t.x+t.width} ${t.y} A  ${t.width/10} ${t.height/2}, 0, 0, 0,${t.x+t.width} ${t.y+t.height} L${t.x+t.width/10} ${t.y+t.height}A  ${t.width/10} ${t.height/2}, 0, 0, 1,${t.x+t.width/10} ${t.y}`,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},n),i=Uu(t,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),o=!Uu(t,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return r&&o||i},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));if(n[0]<e.x+e.width/10){const r=[e.x+e.width/10,e.y+e.height/2],i=Ai(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width*9/10){const r=[e.x+e.width,e.y+e.height/2],i=Ai(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+e.width/10,e.y+e.height/2],i=e.width/10,o=e.height/2;const s=n[0]>e.x+e.width*9/10&&n[1]>e.y;s&&(r=[e.x+e.width,e.y+e.height/2]);const u=[n[0]-r[0],-(n[1]-r[1])],c=qa(u[0],u[1],i,o),h=Za(u[0],u[1],c);return s?h.map(d=>-d):h},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=Tr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}},XV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.06} ${t.y} L${t.x+t.width*.06} ${t.y+t.height} M${t.x+t.width-t.width*.06} ${t.y} L${t.x+t.width-t.width*.06} ${t.y+t.height}`,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},KV=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],YV=Or({getPolygonPoints:KV,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-t.height/2-r)/2}}}),qV=G8({draw(e,t,n){const r=I.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],u=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${t.x} ${t.y+t.height/2}
        L${t.x+t.width} ${t.y+t.height/2}
        M${t.x+t.width/2} ${t.y}
        L${t.x+t.width/2} ${t.y+t.height}
        `,{...n,fillStyle:"solid"});return Wt(u,"round"),u}}),ZV=G8({draw(e,t,n){const r=I.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],u=[t.x+t.width/2,t.y+t.height/2],c=C9([t.x,t.y],[t.x+t.width,t.y+t.height],u[0],u[1],i,o),h=C9([t.x+t.width,t.y],[t.x,t.y+t.height],u[0],u[1],i,o),d=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${c[0][0]} ${c[0][1]}
        L${c[1][0]} ${c[1][1]}
        M${h[0][0]} ${h[0][1]}
        L${h[1][0]} ${h[1][1]}
        `,{...n,fillStyle:"solid"});return Wt(d,"round"),d}}),QV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9}
            Q${t.x+t.width-t.width/4} ${t.y+t.height-t.height/9*3}, ${t.x+t.width/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}           
            `,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){let n=Ln(t,rn.getCornerPoints(e)),r=wp([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(r=Co(r),n[1]>e.y+e.height-e.height/9){if(n[0]===e.x+e.width/2)return n[1]=e.y+e.height-e.height/9,n;n=Ln(t,r,!1)}return n},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x&&n[0]<e.x+e.width/4?Kn([e.x+e.width/4,e.y+e.height],n):n[0]>e.x+e.width/4&&n[0]<e.x+e.width/4*3?Kn([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):n[0]>e.x+e.width/4*3?Kn([e.x+e.width,e.y+e.height-e.height/9],n):Kn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},ax=e=>{const t=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let n=wp([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return n=Co(n),[...t,...n]},JV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y+10} H${t.x+5} V${t.y+5} H${t.x+10} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9-10-3} L${t.x+t.width-5} ${t.y+t.height-t.height/9-10-3-4} V${t.y+t.height-t.height/9-5-3}
                 L${t.x+t.width-10} ${t.y+t.height-t.height/9-5-3-4} V${t.y+t.height-t.height/9}
                
             Q${t.x+t.width-10-(t.width-10)/4} ${t.y+t.height-t.height/9*3}, ${t.x+(t.width-10)/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}
              
                M${t.x+5} ${t.y+10} H${t.x+t.width-10} V${t.y+t.height-t.height/9} 
                    
                M${t.x+10} ${t.y+5} H${t.x+t.width-5} V${t.y+t.height-t.height/9-10-3}
            `,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,ax(e),!1)},getConnectorPoints(e){let t=wp([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);t=Co(t);const n=Ln([e.x+e.width/2,e.y+e.height],t);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[n[0],n[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,t){const n=OT(ax(e),t);let r=n[0],i=Tt(t[0],t[1],r[0],r[1]);return n.filter((o,s)=>s>0).forEach(o=>{let s=Tt(t[0],t[1],o[0],o[1]);s<i&&(i=s,r=o)}),r},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);if(n[0]>e.x&&n[0]<e.x+(e.width-10)/4)return Kn([e.x+(e.width-10)/4,e.y+e.height],n);if(n[0]>e.x+(e.width-10)/4&&n[0]<e.x+(e.width-10)/4*3)return Kn([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(n[0]>e.x+(e.width-10)/4*3&&n[0]<e.x+e.width-10)return Kn([e.x+(e.width-10),e.y+e.height-e.height/9],n);const r=US(t)||kt.bottom,i=Yf(r);return[i.x,i.y]},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i-10:0,x:t.x+lt.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},eU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y+t.height*.15}  
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x+t.width} ${t.y+t.height*.15} 
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x} ${t.y+t.height*.15} 
            V${t.y+t.height-t.height*.15}
            A${t.width/2} ${t.height*.15}, 0, 0, 0, ${t.x+t.width} ${t.y+t.height-t.height*.15}
            V${t.y+t.height*.15}`,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},n),i=Uu(t,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),o=Uu(t,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return r||i||o},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));if(n[1]<e.y+e.height*.15){const r=[e.x+e.width/2,e.y+e.height*.15],i=Ai(t,r,e.width/2,e.height*.15);return i[1]>r[1]&&(i[1]=r[1]*2-i[1]),i}if(n[1]>e.y+e.height-e.height*.15){const r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=Ai(t,r,e.width/2,e.height*.15);return i[1]<r[1]&&(i[1]=r[0]*2-i[1]),i}return n},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=e.width/2,o=e.height*.15;n[1]<e.y+e.height*.15&&n[0]>e.x&&(r=[e.x+e.width/2,e.y+e.height*.15]);const u=[n[0]-r[0],-(n[1]-r[1])],c=qa(u[0],u[1],i,o);return Za(u[0],u[1],c)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+t.height*.3+(t.height-t.height*.45-r)/2}}},tU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x+t.width-t.width*.15} ${t.y}  
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y+t.height} 
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y} 
            H${t.x+t.width*.15}
            A${t.width*.15} ${t.height/2}, 0, 0, 0, ${t.x+t.width*.15} ${t.y+t.height}
            H${t.x+t.width-t.width*.15}`,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},n),i=Uu(t,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),o=Uu(t,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return r||i||o},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));if(n[0]<e.x+e.width*.15){const r=[e.x+e.width*.15,e.y+e.height/2],i=Ai(t,r,e.width*.15,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width-e.width*.15){const r=[e.x+e.width-e.width*.15,e.y+e.height/2],i=Ai(t,r,e.width*.15,e.height/2);return i[0]<r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+e.width*.15,e.y+e.height/2],i=e.width*.15,o=e.height/2;n[0]>e.x+e.width-e.width*.15&&n[1]>e.y&&(r=[e.x+e.width-e.width*.15,e.y+e.height/2]);const u=[n[0]-r[0],-(n[1]-r[1])],c=qa(u[0],u[1],i,o);return Za(u[0],u[1],c)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-t.width*.45-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.15+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},nU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} h${t.width} v${t.height} h${-t.width} v${-t.height}
            M${t.x} ${t.y+t.height/10} h${t.width}
            M${t.x+t.width/10} ${t.y} v${t.height}
            `,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-t.width*.1-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.1+lt.rectangleAndText+n,y:t.y+t.height*.1+(t.height-t.height*.1-r)/2}}};function ux(e){const t=e.width*.09,n=e.x+e.width,r=e.y+e.height/2;return{startPoint:[n,e.y],upperCurve:{controlPoint1:[n-t,e.y],controlPoint2:[n,r],endPoint:[n-t,r]},lowerCurve:{controlPoint1:[n,r],controlPoint2:[n-t,e.y+e.height],endPoint:[n,e.y+e.height]}}}const rU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,upperCurve:o,lowerCurve:s}=ux(t),u=[`M${i[0]} ${i[1]}`,`C${o.controlPoint1[0]} ${o.controlPoint1[1]},
            ${o.controlPoint2[0]} ${o.controlPoint2[1]},
            ${o.endPoint[0]} ${o.endPoint[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`].join(" "),c=r.path(u,{...n,fillStyle:"solid",fill:"transparent"});return Wt(c,"round"),c},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:i}=ux(e),o=Co([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),s=Co([r.endPoint,i.controlPoint1,i.controlPoint2,i.endPoint],.001),u=[...o,...s];let c=1/0,h=t;for(const d of u){const g=Tt(t[0],t[1],d[0],d[1]);g<c&&(c=g,h=[...d])}return h},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-t.width*.09-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function lx(e){const t=e.width*.09,n=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+t,e.y],controlPoint2:[e.x,n],endPoint:[e.x+t,n]},lowerCurve:{controlPoint1:[e.x,n],controlPoint2:[e.x+t,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const iU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,upperCurve:o,lowerCurve:s}=lx(t),u=[`M${i[0]} ${i[1]}`,`C${o.controlPoint1[0]} ${o.controlPoint1[1]},
            ${o.controlPoint2[0]} ${o.controlPoint2[1]},
            ${o.endPoint[0]} ${o.endPoint[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`].join(" "),c=r.path(u,{...n,fillStyle:"solid",fill:"transparent"});return Wt(c,"round"),c},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:i}=lx(e),o=Co([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),s=Co([r.endPoint,i.controlPoint1,i.controlPoint2,i.endPoint],.001),u=[...o,...s];let c=1/0,h=[...t];for(const d of u){const g=Tt(t[0],t[1],d[0],d[1]);g<c&&(c=g,h=[...d])}return h},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-t.width*.09-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.09+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},oU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x+t.width*.075} ${t.y+t.height} H${t.x} V${t.y} H${t.x+t.width*.075}
           `,{...n,fillStyle:"solid",fill:"transparent"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},sU=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],aU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x+t.width*.15} ${t.y} 
            H${t.x+t.width-t.width*.1} 
            A ${t.width*.1} ${t.height/2}, 0, 0, 1,${t.x+t.width-t.width*.1} ${t.y+t.height}
            H${t.x+t.width*.15}
            L${t.x} ${t.y+t.height/2}
            Z
            `,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],r=lc(t,n),i=Uu(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return r||i},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=Ln(t,sU(e));return n[0]>e.x+e.width-e.width*.1?Ai(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width-e.width*.1,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.1,s=e.height/2,u=qa(i[0],i[1],o,s);return Za(i[0],i[1],u)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-n*2-t.width*.25;return{width:i>0?i:0,height:r,x:t.x+n+t.width*.15,y:t.y+(t.height-r)/2}}},Yd={draw(e,t,n,r){const i=Lt();try{const o=Dp(e,{...r==null?void 0:r.element});if(o){const s=I.getRoughSVG(e),{x:u,y:c,width:h,height:d}=t,g=um(s,[u,c],[u+h,c],n),v=um(s,[u,c],[u,c+d],n);i.append(g,v),o.forEach(y=>{const x=M.getRectangleByPoints(y.points),{x:E,y:T,width:D,height:S}=x,R=ua(e,{x:E+dr,y:T+dr,width:D-dr*2,height:S-dr*2},{fill:y.fill,fillStyle:"solid",strokeWidth:0}),L=um(s,[E+D,T],[E+D,T+S],n),k=um(s,[E,T+S],[E+D,T+S],n);i.append(R,L,k)}),Wt(i,"round")}}catch(o){console.error(o)}return i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return hD(t,e,u0(e))},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e,t){try{if(t&&t.id){const n=uh(t==null?void 0:t.board,e,t.id);if(n)return qg.isVerticalText(n)?uU(n):gD(n)}}catch(n){console.error(n)}return{x:0,y:0,width:0,height:0}}};function uU(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight||0,i=t.height-lt.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x-i/2+t.width/2,y:t.y+(t.height-r)/2}}function gD(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight||0,i=t.width-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}function cx(e){const t=e.x+e.width/2,n={width:e.width/3/2,height:e.height/4/2};return e.y+e.height/4/2,{headArcCommand:{rx:n.width,ry:n.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:t,endY:e.y},bodyLine:[[t,e.y+e.height/4],[t,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const lU={draw(e,t,n){const r=I.getRoughSVG(e),{headArcCommand:i,bodyLine:o,armsLine:s,leftLegLine:u,rightLegLine:c}=cx(t),h=[`M${o[0][0]} ${o[0][1]}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${i.endX} ${i.endY}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${o[0][0]} ${o[0][1]}`,`V${o[1][1]}`,`M${s[0][0]} ${s[0][1]} H${s[1][0]}`,`M${u[0][0]} ${u[0][1]} L${u[1][0]} ${u[1][1]}`,`M${c[0][0]} ${c[0][1]} L${c[1][0]} ${c[1][1]}`].join(" "),d=r.path(h,{...n,fillStyle:"solid"});return Wt(d,"round"),d},getNearestPoint(e,t){const{headArcCommand:n,bodyLine:r,armsLine:i,leftLegLine:o,rightLegLine:s}=cx(e),u=[e.x+e.width/2,e.y+e.height/4/2],c=Ai(t,u,n.rx,n.ry),h=Tt(...t,...c),g=b4(t,[r,i,o,s]),v=Tt(...t,...g);return h<v?c:g},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);if(n[1]>=e.y&&n[1]<=e.y+e.height/4){const r=[e.x+e.width/2,e.y+e.height/4/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/2,s=e.height/2,u=qa(i[0],i[1],o,s);return Za(i[0],i[1],u)}return n[1]>=e.y+e.height/4&&n[1]<e.y+e.height/4*3?n[0]<e.x+e.width/2?Kg(Kn([e.x,e.y+e.height/2],n),-(Math.PI/2)):Kg(Kn([e.x+e.width,e.y+e.height/2],n),-(Math.PI/2)):n[1]>=e.y+e.height/4*3?n[0]<e.x+e.width/2?Kn(n,[e.x+e.width/12,e.y+e.height]):Kn([e.x+e.width/12*11,e.y+e.height],n):Kn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=e.textHeight,r=t.width+40;return{height:n,width:r>0?r:0,x:t.x-20,y:t.y+t.height+4}}},cU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+40} ${t.y} L${t.x+40} ${t.y+t.height} `,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=40-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function fx(e){const n=e.width*.7,r=e.x+e.width*.8;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+n,e.y],cornerPoint:[r,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[r,e.y+25]}}}const fU={draw(e,t,n){const r=I.getRoughSVG(e),{points:i}=fx(t),o=[`M${i.leftTop[0]} ${i.leftTop[1]}`,`V${i.topStart[1]}`,`H${i.topEnd[0]}`,`L${i.cornerPoint[0]} ${i.cornerPoint[1]}`,`H${i.rightTop[0]}`,`V${i.rightBottom[1]}`,`H${i.leftBottom[0]}`,`V${i.leftMiddle[1]}`,`H${i.middlePoint[0]}`].join(" "),s=r.path(o,{...n,fillStyle:"solid"});return Wt(s,"round"),s},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const{points:n}=fx(e),r=[[n.topStart,n.leftTop],[n.leftTop,n.leftBottom],[n.leftBottom,n.rightBottom],[n.rightBottom,n.rightTop],[n.topStart,n.topEnd],[n.topEnd,n.cornerPoint],[n.cornerPoint,n.rightTop],[n.leftMiddle,n.middlePoint]];return b4(t,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x+e.width*.7&&n[1]<e.y+25?Kn([e.x+e.width*.7,e.y],n):Kn([e.x+e.width*.8,e.y+25],n)},getTextRectangle(e,t){var o,s;const n=M.getRectangleByPoints(e.points),r=zt(e),i=(s=(o=e.texts)==null?void 0:o.find(u=>u.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===Ko.name){const u=n.width*.7-lt.rectangleAndText-r;return{height:i,width:u>0?u:0,x:n.x+lt.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===Ko.content){const u=n.width-lt.rectangleAndText*2-r*2;return{height:i,width:u>0?u:0,x:n.x+lt.rectangleAndText+r,y:n.y+25+(n.height-25-i)/2}}return n}},hU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y+25} 
            V${t.y}
            H${t.x+t.width} 
            V${t.y+t.height}
            H${t.x}
            V${t.y+25}
            H${t.x+t.width/3-8}
            L${t.x+t.width/3} ${t.y+16}
            V${t.y}
            `,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e,t){var o,s;const n=M.getRectangleByPoints(e.points),r=zt(e),i=(s=(o=e.texts)==null?void 0:o.find(u=>u.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===Ko.name){const u=n.width/3-8-lt.rectangleAndText-r;return{height:i,width:u>0?u:0,x:n.x+lt.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===Ko.content){const u=n.width-lt.rectangleAndText*2-r*2;return{height:i,width:u>0?u:0,x:n.x+lt.rectangleAndText+r,y:n.y+25+lt.rectangleAndText+r}}return n}};function hx(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const dU={draw(e,t,n){const r=I.getRoughSVG(e),i=hx(t),o=r.path(i.map(([s,u])=>`M${s[0]} ${s[1]} L${u[0]} ${u[1]}`).join(" "),{...n,fillStyle:"solid",strokeWidth:4});return Wt(o,"round"),o},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=hx(e);let r=1/0,i=t;return n.forEach(o=>{const s=Q3(t,o),u=Tt(t[0],t[1],s[0],s[1]);u<r&&(r=u,i=s)}),i},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},gU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.125} ${t.y} L${t.x+t.width*.125} ${t.y+t.height} M${t.x+t.width-t.width*.125} ${t.y} L${t.x+t.width-t.width*.125} ${t.y+t.height}`,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2-t.width*.125*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n+t.width*.125,y:t.y+(t.height-r)/2}}},pU={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} 
            h${t.width-16}
            v16
            h16
            v${t.height-16}
            h${-t.width}
            Z
            M${t.x+t.width-16} ${t.y} 
            A16 16, 0,0,1, ${t.x+t.width} ${t.y+16}
            `,{...n,fillStyle:"solid"});return Wt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=Ln(t,rn.getCornerPoints(e));return n[0]>e.x+e.width-16&&n[1]<e.y+16?Ai(t,[e.x+e.width-16,e.y+16],16,16):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=qa(i[0],i[1],16,16);return Za(i[0],i[1],o)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n-15;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function dx(e){const t=e.y+e.height/2,n=e.x+e.width*.3,r=e.width*.13,i=e.height*.285,o=n+r,s=e.width*.233;return{startPoint:[e.x,t],line1:[[e.x,t],[n,t]],circleArcCommand:{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:n,endY:t},verticalArcCommand:{rx:s,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:o,endY:e.y+e.height},line2:[[o+s,t],[e.x+e.width,t]]}}const mU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,line1:o,circleArcCommand:s,verticalArcCommand:u,line2:c}=dx(t),h=[`M${i[0]} ${i[1]}`,`H${o[1][0]}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${o[1][0]+s.rx*2} ${s.endY}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${s.endX} ${s.endY}`,`M${u.endX} ${t.y}`,`A${u.rx} ${u.ry} ${u.xAxisRotation} ${u.largeArcFlag} ${u.sweepFlag} ${u.endX} ${u.endY}`,`M${c[0][0]} ${c[0][1]} H${c[1][0]}`].join(" "),d=r.path(h,{...n,fillStyle:"solid"});return Wt(d,"round"),d},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getNearestPoint(e,t){const{line1:n,line2:r,circleArcCommand:i,verticalArcCommand:o}=dx(e),s=Ln(t,[...n,...r]),u=Tt(...t,...s),c=[n[1][0]+i.rx,n[1][1]],h=Ai(t,c,i.rx,i.ry),d=Tt(...t,...h),g=[o.endX,e.y],v=J3(t,g,o),y=Tt(...t,...v),x=Math.min(u,d,y);return x===u?s:x===d?h:v},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x+e.width*.43&&n[1]<e.y+e.height/2?Kg(Kn(n,[e.x,e.y+e.height/2]),-Math.PI):n[0]>e.x+e.width*.43&&n[1]>e.y+e.height/2?Kn(n,[e.x,e.y+e.height/2]):Kn(n,[e.x,e.y+e.height/2])}};function gx(e){const t=e.width*.39,n=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:t,ry:n,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+e.width*.41,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const vU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,leftArcCommand:o,line:s}=gx(t),u=[`M${i[0]} ${i[1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`M${s.startX} ${s.startY} H${s.endX}`].join(" "),c=r.path(u,{...n,fillStyle:"solid",fill:"transparent"});return Wt(c,"round"),c},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,leftArcCommand:r,line:i}=gx(e);let o=1/0,s=t;const u=J3(t,n,r),c=Tt(t[0],t[1],u[0],u[1]);c<o&&(o=c,s=u);const h=[i.startX,i.startY],d=[i.endX,i.endY],g=Q3(t,[h,d]),v=Tt(t[0],t[1],g[0],g[1]);return v<o&&(o=v,s=g),s},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},px=.54;function mx(e){const t=e.y+e.height/2,n=e.width*(1-px)/2,r=e.height/2,i=[e.x,t],o=e.x+e.width*px;return{startPoint:i,line:{startX:i[0],startY:t,endX:o,endY:t},arcCommands:[{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:t},{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:o,endY:t}]}}const yU={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,line:o,arcCommands:s}=mx(t),u=[`M${i[0]} ${i[1]}`,`H${o.endX}`,...s.map(h=>`A${h.rx} ${h.ry} ${h.xAxisRotation} ${h.largeArcFlag} ${h.sweepFlag} ${h.endX} ${h.endY}`)].join(" "),c=r.path(u,{...n,fillStyle:"solid"});return Wt(c,"round"),c},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getNearestPoint(e,t){const{line:n,arcCommands:r}=mx(e),i=[n.startX,n.startY],o=[n.endX,n.endY],s=Ln(t,[i,o]),u=Tt(...t,...s),c=[e.x+3*e.width/4,n.startY],h=Ai(t,c,r[0].rx,r[0].ry),d=Tt(...t,...h);return u<d?s:h},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2];if(n[0]>e.x+e.width*.54){const i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.46/2,s=e.height/2,u=qa(i[0],i[1],o,s);return Za(i[0],i[1],u)}return Kn(n,[e.x,e.y+e.height/2])}};function Sm(e){const t=e.x+12,n=e.width>70?24:e.width*.2,r=e.height-28-e.height*.35>1?14:e.height*.175,i=e.y+e.height*.175,o=e.y+e.height-e.height*.175-r;return{boxSize:{width:n,height:r},points:{mainStart:[t,e.y],topBoxStart:[t,i],topBoxEnd:[t,i+r],bottomBoxStart:[t,o],bottomBoxEnd:[t,o+r],mainEnd:[t,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const pD={draw(e,t,n){const r=I.getRoughSVG(e),{boxSize:i,points:o}=Sm(t),s=[`M${o.mainStart[0]} ${o.mainStart[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.mainEnd[0]}`,`M${o.topBoxStart[0]} ${o.topBoxStart[1]}`,`h${i.width/2} v${i.height} h${-i.width} v${-i.height} h${i.width/2}`,`M${o.bottomBoxStart[0]} ${o.bottomBoxStart[1]}`,`h${i.width/2} v${i.height} h${-i.width} v${-i.height} h${i.width/2}`,`M${o.mainStart[0]} ${o.mainStart[1]}`,`V${o.topBoxStart[1]}`,`M${o.topBoxEnd[0]} ${o.topBoxEnd[1]}`,`V${o.bottomBoxStart[1]}`,`M${o.bottomBoxEnd[0]} ${o.bottomBoxEnd[1]}`,`V${o.mainEnd[1]}`].join(" "),u=r.path(s,{...n,fillStyle:"solid"});return Wt(u,"round"),u},getNearestPoint(e,t){const{boxSize:n,points:r}=Sm(e),i=[[r.mainStart,[r.rightTop[0],r.mainStart[1]]],[[r.rightTop[0],r.mainStart[1]],r.rightBottom],[r.rightBottom,[r.mainEnd[0],r.rightBottom[1]]],[[r.mainEnd[0],r.rightBottom[1]],r.mainStart],[r.topBoxStart,[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]],[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]],r.topBoxStart],[r.bottomBoxStart,[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]],[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]],r.bottomBoxStart],[r.mainStart,r.topBoxStart],[r.topBoxEnd,r.bottomBoxStart],[r.bottomBoxEnd,r.mainEnd]];return b4(t,i)},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getTangentVectorByConnectionPoint(e,t){const{points:n}=Sm(e),r=M.getConnectionPoint(e,t);return Kn(n.mainStart,r)},getConnectorPoints(e){const{points:t}=Sm(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[t.mainStart[0],e.y+e.height/2]]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-24-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+24+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},wU={draw(e,t,n){const r=I.getRoughSVG(e),i=t.width-45*2-18>1?45:t.width*.25,o=t.height-30-8*2>1?30:t.height*.2,s={x:t.x+t.width-18-i,y:t.y+8,width:i,height:o},u=r.path(`M${t.x} ${t.y} 
            H${t.x+t.width} 
            V${t.y+t.height} 
            H${t.x} Z

            `,{...n,fillStyle:"solid"}),c=pD.draw(e,s,n);return u.append(c),Wt(u,"round"),u},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-45*2-18>1?45:t.width*.25,o=t.width-18-i-lt.rectangleAndText-n*2;return{height:r,width:o>0?o:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},CU={draw(e,t,n){const r=I.getRoughSVG(e);return R0(r,t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Ln(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=zt(e),r=e.textHeight,i=t.width-lt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+lt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},xU={[pt.rectangle]:rn,[pt.diamond]:S5,[pt.ellipse]:T5,[pt.parallelogram]:ex,[pt.roundRectangle]:bV,[pt.text]:rn,[pt.triangle]:IV,[pt.leftArrow]:CV,[pt.trapezoid]:OV,[pt.rightArrow]:MV,[pt.cross]:mV,[pt.star]:_V,[pt.pentagon]:SV,[pt.hexagon]:yV,[pt.octagon]:EV,[pt.pentagonArrow]:DV,[pt.processArrow]:BV,[pt.twoWayArrow]:LV,[pt.comment]:gV,[pt.roundComment]:kV,[pt.cloud]:IT,[gt.process]:rn,[gt.decision]:S5,[gt.connector]:T5,[gt.data]:ex,[gt.terminal]:NV,[gt.database]:eU,[gt.hardDisk]:tU,[gt.internalStorage]:nU,[gt.manualInput]:GV,[gt.preparation]:$V,[gt.manualLoop]:WV,[gt.merge]:zV,[gt.delay]:VV,[gt.storedData]:UV,[gt.or]:qV,[gt.summingJunction]:ZV,[gt.predefinedProcess]:XV,[gt.offPage]:YV,[gt.document]:QV,[gt.multiDocument]:JV,[gt.noteCurlyLeft]:rU,[gt.noteCurlyRight]:iU,[gt.noteSquare]:oU,[gt.display]:aU,[mo.swimlaneHorizontal]:Yd,[mo.swimlaneVertical]:Yd,[x0.table]:Yd,[ft.actor]:lU,[ft.useCase]:T5,[ft.container]:cU,[ft.note]:pU,[ft.package]:fU,[ft.combinedFragment]:hU,[ft.class]:Yd,[ft.interface]:Yd,[ft.activation]:rn,[ft.object]:rn,[ft.deletion]:dU,[ft.activityClass]:gU,[ft.simpleClass]:rn,[ft.component]:pD,[ft.componentBox]:wU,[ft.template]:CU,[ft.port]:rn,[ft.branchMerge]:S5,[ft.assembly]:mU,[ft.requiredInterface]:vU,[ft.providedInterface]:yU},pi=e=>xU[e],Mp=(e,t)=>{const n=zt(t),r=t.source.boundId?xs(e,t.source.boundId):void 0,i=t.target.boundId?xs(e,t.target.boundId):void 0;let o=r?nc(r,t.source.connection):t.points[0],s=i?nc(i,t.target.connection):t.points[t.points.length-1],u=Kd([s[0]-o[0],s[1]-o[1]])||kt.right,c=Oj(u);const h=Yf(u),d=Yf(c),g={key:Es.source,point:o,direction:u,vector:[h.x,h.y]},v={key:Es.target,point:s,direction:c,vector:[d.x,d.y]};if(r){const y=Yr.isSourceMarkOrTargetMark(t,Vr.none,Es.source)?0:n,x=vx(r,t.source.connection);if(g.vector=x,g.boundElement=r,Xa(r)){const E=Kd(Kg(x,r.angle));u=E||u}else{const E=Kd(x);u=E||u}g.direction=u,o=nc(r,t.source.connection,u,y),g.point=Ka(o,r)||o}if(i){const y=Yr.isSourceMarkOrTargetMark(t,Vr.none,Es.target)?0:n,x=vx(i,t.target.connection);if(v.vector=x,v.boundElement=i,Xa(i)){const E=Kd(Kg(x,i.angle));c=E||c}else{const E=Kd(x);c=E||c}v.direction=c,s=nc(i,t.target.connection,c,y),v.point=Ka(s,i)||s}return{source:g,target:v}},nc=(e,t,n,r)=>{const i=M.getRectangleByPoints(e.points);if(n&&r){const o=Yf(n),s=M.getConnectionPoint(i,t);return[s[0]+o.x*r,s[1]+o.y*r]}else return M.getConnectionPoint(i,t)},vx=(e,t)=>{const n=M.getRectangleByPoints(e.points),r=Sc(e),i=pi(r);let o=[0,0];const s=US(t);if(s&&e.shape!==pt.ellipse){const u=Yf(s);return[u.x,u.y]}if(i.getEdgeByConnectionPoint){const u=i.getEdgeByConnectionPoint(n,t);if(u){const c=[u[1][0]-u[0][0],u[1][1]-u[0][1]];return xC(c)}}if(i.getTangentVectorByConnectionPoint){const u=i.getTangentVectorByConnectionPoint(n,t);if(u)return xC(u)}return o},bp=(e,t,n)=>{n=n??Mp(e,t);const{sourceRectangle:r,targetRectangle:i}=Mz(e,t,n),{sourceOuterRectangle:o,targetOuterRectangle:s}=Zj(r,i),u=n.source.point,c=n.target.point,h=TC(u,o,n.source.direction),d=TC(c,s,n.target.direction);return{sourcePoint:u,nextSourcePoint:h,sourceRectangle:r,sourceOuterRectangle:o,targetPoint:c,nextTargetPoint:d,targetRectangle:i,targetOuterRectangle:s}},EU=(e,t,n)=>{const r=k0(e,{match:i=>fe.isArrowLine(i)?i.source.boundId===i.id||i.target.boundId===i.id:!1,recursion:i=>!0});r.length&&r.forEach(i=>{const o=i.source.boundId===t.id,s=o?"source":"target",u={...i[s]},c=ji(e,i),h=o?c[0]:c[c.length-1];u.connection=E0(e,h,t);const d=I.findPath(e,i),g=n.findIndex(v=>wt.equals(v.path,d));g===-1?n.push({property:{[s]:u},path:d}):n[g].property={...n[g].property,[s]:u}})};var Vr;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(Vr||(Vr={}));var Fn;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(Fn||(Fn={}));var Es;(function(e){e.source="source",e.target="target"})(Es||(Es={}));const Yr={isSourceMarkOrTargetMark(e,t,n){return n===Es.source?e.source.marker===t:e.target.marker===t},isSourceMark(e,t){return Yr.isSourceMarkOrTargetMark(e,t,Es.source)},isTargetMark(e,t){return Yr.isSourceMarkOrTargetMark(e,t,Es.target)},isBoundElementOfSource(e,t){return e.source.boundId===t.id},isBoundElementOfTarget(e,t){return e.target.boundId===t.id},getPoints(e,t){let n;if(t.source.boundId){const o=xs(e,t.source.boundId),s=nc(o,t.source.connection);n=Ka(s,o)||s}else n=t.points[0];let r;if(t.target.boundId){const o=xs(e,t.target.boundId),s=nc(o,t.target.connection);r=Ka(s,o)||s}else r=t.points[t.points.length-1];const i=t.points.length>2?t.points.slice(1,t.points.length-1):[];return[n,...i,r]}};var Go;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(Go||(Go={}));var A3;(function(e){e.vectorLine="vectorLine"})(A3||(A3={}));var np;(function(e){e.straight="straight",e.curve="curve"})(np||(np={}));const fe={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>fe.isArrowLine(e)||fe.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===pt.text,isImage:e=>e.type==="image",isTable:e=>qg.isTable(e),isDrawElement:e=>!!(fe.isGeometry(e)||fe.isLine(e)||fe.isImage(e)||fe.isTable(e)||fe.isSwimlane(e)),isCustomGeometryElement:(e,t)=>{const n=e.getPluginOptions(cT);return!!((n==null?void 0:n.customGeometryTypes)||[]).includes(t.type)},isShapeElement:e=>fe.isImage(e)||fe.isGeometry(e)||fe.isTable(e)||fe.isSwimlane(e),isBasicShape:e=>Object.keys(pt).includes(e.shape),isFlowchart:e=>Object.keys(gt).includes(e.shape),isUML:e=>Object.keys(ft).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>fe.isSwimlane(e)&&e.shape===mo.swimlaneVertical,isHorizontalSwimlane:e=>fe.isSwimlane(e)&&e.shape===mo.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(ft).includes(e.shape)&&[ft.class,ft.interface].includes(e.shape),isGeometryByTable:e=>fe.isUMLClassOrInterface(e),isElementByTable:e=>fe.isTable(e)||fe.isSwimlane(e)||fe.isGeometryByTable(e)};class yx extends Ec{constructor(){super()}initializeGenerator(){this.activeGenerator=Ep(this.board,{getStrokeWidth:()=>(Qe(this.board).length===1&&!gi(this.board),dr),getStrokeOpacity:()=>Qe(this.board).length===1&&!gi(this.board)?1:.5,getRectangle:t=>M.getRectangleByPoints(t.points),hasResizeHandle:()=>uv(this.board,this.element)}),this.lineAutoCompleteGenerator=new Qu(this.board),this.shapeGenerator=new VT(this.board),L8(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(Qu.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(m3.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(n.element,t.element)):(!(t.selected===n.selected)||t.selected)&&(this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}))}updateText(t,n){Vu(this.element)?this.textGenerator.update(this.element,t.texts,n.texts,this.getElementG()):this.textGenerator.update(this.element,t.text,n.text,this.getElementG())}initializeTextManage(){const t=(n,r,i)=>{r.newText?Vu(n)?$i.setDrawTexts(this.board,n,{id:i.id,text:r.newText,textHeight:r.height}):$i.setText(this.board,n,r.newText,r.width,r.height):$i.setTextSize(this.board,n,r.width,r.height),r.operations&&E8(n,r.operations)};Vu(this.element)?this.textGenerator=new C8(this.board,this.element,this.element.texts,{onChange:t}):this.textGenerator=new pz(this.board,this.element,this.element.text,{onChange:t,getMaxWidth:()=>{var i;let n=Tr(this.element).width;const r=pi(this.element.shape).getTextRectangle;return r&&(n=r(this.element).width),(i=this.element)!=null&&i.autoSize?fT.defaultTextMaxWidth:n}}),this.textGenerator.initialize()}destroy(){var t;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(t=this.textGenerator)==null||t.destroy()}}const PU="debug:plait:line-turning",wx=A0(PU);class SU extends Ec{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new MT(this.board),this.activeGenerator=new KT(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=ji(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const n=ji(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:n})},wx.isDebug()&&wx.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const t={};if(this.element.source.boundId){const n=xs(this.board,this.element.source.boundId);n&&(t.source=n)}if(this.element.target.boundId){const n=xs(this.board,this.element.target.boundId);n&&(t.target=n)}return t}onContextChanged(t,n){const r=this.getBoundedElements(),i=r.source!==this.boundedElements.source||r.target!==this.boundedElements.target;this.boundedElements=r;const o=ji(this.board,this.element);if(t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateText(n.element.texts,t.element.texts),this.updateTextRectangle()):(t.selected!==n.selected||this.activeGenerator.needUpdate()||t.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),i){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateTextRectangle();return}}initializeTextManages(){var t;if((t=this.element.texts)!=null&&t.length){const n=[];this.element.texts.forEach((r,i)=>{const o=this.createTextManage(r,i);n.push(o)}),this.getRef().initializeTextManage(n)}}drawText(){var t;(t=this.element.texts)!=null&&t.length&&this.getRef().getTextManages().forEach((n,r)=>{n.draw(this.element.texts[r].text),this.getElementG().append(n.g)})}createTextManage(t,n){return new Tp(this.board,{getRectangle:()=>S8(this.board,this.element,n),onChange:r=>{const i=I.findPath(this.board,this.element),s=[...Xt.get(this.board,i).texts],u=r.width<P3?P3:r.width;s.splice(n,1,{text:r.newText?r.newText:this.element.texts[n].text,position:this.element.texts[n].position,width:u,height:r.height}),$i.setArrowLineTexts(this.board,this.element,s),r.operations&&E8(this.element,r.operations)},getMaxWidth:()=>fT.defaultTextMaxWidth,textPlugins:[]})}updateText(t,n){if(t===n)return;const r=t.length,i=n.length,o=this.getRef().getTextManages();if(i===r)for(let s=0;s<r;s++)t[s].text!==n[s].text&&o[s].updateText(n[s].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(n=>{n.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class TU extends Ec{constructor(){super()}initializeGenerator(){this.shapeGenerator=new kT(this.board),this.activeGenerator=new KT(this.board),this.getRef().updateActiveSection=()=>{const t=oc(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:t})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=oc(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize()}onContextChanged(t,n){const r=oc(this.board,this.element);t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:r})):(t.selected!==n.selected||this.activeGenerator.needUpdate()||t.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:r})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const DU=e=>{const{keyDown:t,dblClick:n}=e;return e.keyDown=r=>{const i=Qe(e),o=i.length===1,s=i[0];if(!I.isReadonly(e)&&!d8(r)&&!p8(r)&&!g8(r)&&o&&fe.isGeometry(s)){r.preventDefault(),P5(e,s);return}t(r)},e.dblClick=r=>{if(r.preventDefault(),!I.isReadonly(e)){const i=At(e,Ot(e,r.x,r.y)),o=Qa(e,i,void 0,!1);if(o&&fe.isGeometry(o)&&B8(o))if(Vu(o)){const s=JW(o,i)||o.texts.find(u=>u.id.includes(Ko.content))||o.texts[0];P5(e,o,s)}else P5(e,o)}n(r)},e},Cx=e=>{const t=w8();return I.isInPointer(e,t)&&lv(e)},A5=e=>{const t=w8();return I.isInPointer(e,t)&&F0(e)},AU=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null,s=null;return e.pointerMove=u=>{i==null||i.remove(),i=Lt();const c=w8(),d=I.isInPointer(e,c)&&lv(e),g=At(e,Ot(e,u.x,u.y)),v=I.getPointer(e),y=b8(e,v);if(d){const x=Pc(v);if(v===pt.text){const E=Rp(e,ep(e),x.textProperties["font-size"]),T=M.getPoints(M.getRectangleByCenterPoint(g,E.width,E.height));if(o=F8(e,T,ep(e)),s)s.textManage.updateRectangle(),s.g.append(s.textManage.g);else{const D=new Tp(e,{getRectangle:()=>Tr(o)});D.draw(o.text),s={g:Lt(),textManage:D},I.getHost(e).append(s.g),s.g.append(D.g)}}else{const E=ZT(v,g);o=tp(e,E,v),y.processDrawing(o,i),I.getElementTopHost(e).append(i)}}t(u)},e.pointerUp=u=>{Cx(e)&&o||r(u)},e.globalPointerUp=u=>{Cx(e)&&o&&(Zu(e,o),s==null||s.textManage.destroy(),s==null||s.g.remove(),s=null),o=null,i==null||i.remove(),i=null,n(u)},e},BU=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,u=null,c=null,h=!1,d;return e.keyDown=g=>{h=nn.isKeyHotkey("shift",g),i(g)},e.keyUp=g=>{h=!1,o(g)},e.pointerDown=g=>{if(!I.isReadonly(e)&&A5(e)){const v=At(e,Ot(e,g.x,g.y));s=v;const y=I.getPointer(e);if(y===pt.text){const x=Pc(y),E=Rp(e,ep(e),x.textProperties["font-size"]),T=M.getPoints(M.getRectangleByCenterPoint(v,E.width,E.height)),D=F8(e,T,ep(e));Zu(e,D),s=null}}t(g)},e.pointerMove=g=>{u==null||u.remove(),u=Lt();const v=At(e,Ot(e,g.x,g.y)),y=I.getPointer(e),x=b8(e,y);if(d==null||d.remove(),s&&A5(e)){let E=qf([s,v],h);const T=M.getRectangleByPoints(E),[D,S]=Kn(s,v),R=xv(e,[],{resizePoints:E,activeRectangle:T,directionFactors:[C0(D),C0(S)],isAspectRatio:h,isFromCorner:!0,isCreate:!0});d=R.snapG,I.getElementTopHost(e).append(d),E=qf(R.activePoints,h),c=tp(e,E,y),x.processDrawing(c,u),I.getElementTopHost(e).append(u)}n(g)},e.pointerUp=g=>{if(A5(e)&&s){const v=At(e,Ot(e,g.x,g.y)),{width:y,height:x}=M.getRectangleByPoints([s,v]);if(Math.hypot(y,x)<8){const E=I.getPointer(e);if(E!==pt.text){const T=ZT(E,v);c=tp(e,T,E)}}c&&Zu(e,c),d==null||d.remove(),u==null||u.remove(),u=null,s=null,c=null;return}r(g)},e},RU=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=T3(t);if(s.length){const u=s.filter(x=>fe.isGeometry(x)),c=s.filter(x=>fe.isArrowLine(x)),h=s.filter(x=>fe.isVectorLine(x)),d=s.filter(x=>fe.isImage(x)),g=s.filter(x=>fe.isTable(x)),v=s.filter(x=>fe.isSwimlane(x)),y=[...gg(t,u),...gg(t,d),...gg(t,g),...gg(t,v)].filter(x=>!c.includes(x));o.push(...u,...c,...h,...d,...g,...v,...y.filter(x=>!c.includes(x)))}return n(o)},t.buildFragment=(o,s,u,c)=>{const h=T3(t,c);let d=[];if(h.length){if(u===aa.cut){const E=h.filter(D=>fe.isGeometry(D)),T=h.filter(D=>fe.isArrowLine(D));d=gg(t,E).filter(D=>!T.includes(D))}const g=[...h,...d],v=hV(t,g,s?[s.x,s.y]:[0,0]),x={text:YS(g),type:Xu.elements,elements:v};o=iv(o,x)}return r(o,s,u,c)},t.insertFragment=(o,s,u)=>{var h,d,g;const c=Qe(t);if((h=o==null?void 0:o.files)!=null&&h.length){const v=HS.map(x=>"image/"+x),y=!fo(t)&&!(c.length===1&&t.isImageBindingAllowed(c[0]));if(v.includes(o.files[0].type)&&y){const x=o.files[0];ZS(t,x,hW,E=>{$i.insertImage(t,E,s)});return}}if((d=o==null?void 0:o.elements)!=null&&d.length){const v=(g=o.elements)==null?void 0:g.filter(y=>fe.isDrawElement(y));o.elements&&o.elements.length>0&&v.length>0&&dV(t,v,s)}if(o!=null&&o.text&&(!o.elements||o.elements.length===0)&&!(c.length===1&&c[0].children)){$i.insertText(t,s,o.text);return}i(o,s,u)},t},gg=(e,t)=>XW(e).filter(r=>t.find(i=>Yr.isBoundElementOfSource(r,i)||Yr.isBoundElementOfTarget(r,i))),MU=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o,s=null,u=null;return e.pointerDown=c=>{const h=cW(),d=I.isInPointer(e,h);if(!I.isReadonly(e)&&d&&F0(e)){const g=At(e,Ot(e,c.x,c.y));i=g;const v=R8(e,g);v&&(o=v)}t(c)},e.pointerMove=c=>{s==null||s.remove(),s=Lt();let h=At(e,Ot(e,c.x,c.y));if(i){const d=I.getPointer(e);u=T8(e,d,i,h,o,s)}n(c)},e.globalPointerUp=c=>{u&&(Xe.insertNode(e,u,[e.children.length]),B0(e),rh(e,u),vn.updatePointerType(e,Zt.selection)),s==null||s.remove(),s=null,o=null,i=null,u=null,r(c)},e},bU=e=>{let t,n,r,i,o;return ah(e,{key:"draw-line",canResize:()=>!0,hitTest:u=>{const c=N8(e);if(c.length>0){let h=null;return c.forEach(d=>{const g=XT(e,d,u);g&&(h={element:d,handle:g.handle,handleIndex:g.handleIndex})}),h}return null},beforeResize:u=>{if(u.element.shape===Fn.elbow&&u.handle!==Xr.source&&u.handle!==Xr.target){const c=bp(e,u.element);if(_8(u.element,c))return;const h=[...u.element.points],d=u.handleIndex,g=wv(e,u.element);r=g[0],i=g[g.length-1],o=JT(e,u.element,g);const v=AT(e,u.element,[...h],o,d);t=v.index,n=v.deleteCount}},onResize:(u,c)=>{let h=[...u.element.points],d={...u.element.source},g={...u.element.target},v=u.handleIndex;const y=R8(e,c.endPoint);if(u.handle===Xr.source||u.handle===Xr.target){const x=u.handle===Xr.source?d:g;h[v]=c.endPoint,y?(x.connection=E0(e,c.endPoint,y),x.boundId=y.id):(x.connection=void 0,x.boundId=void 0)}else if(u.element.shape===Fn.elbow){if(o&&r&&i){const x=MW(o,r,i,v),E=o[v],T=o[v+1],[D,S]=bW(E,T,c,x);let R=[...h].slice(1,h.length-1);t!==null&&n!==null&&(RT(R)?R=[D,S]:R.splice(t,n,D,S),h=[r,...R,i])}}else u.handle===Xr.addHandle?h.splice(v+1,0,c.endPoint):h[v]=c.endPoint;if(!y){v=u.handle===Xr.addHandle?v+1:v;const x=ji(e,u.element),E=[...h];E[0]=x[0],E[E.length-1]=x[x.length-1],(u.element.shape!==Fn.elbow||u.element.shape===Fn.elbow&&E.length===2)&&E.forEach((T,D)=>{D!==v&&h[v]&&(h[v]=P8(T,h[v]))})}$i.resizeArrowLine(e,{points:h,source:d,target:g},u.path)},afterResize:u=>{if(u.element.shape===Fn.elbow){const c=Xt.get(e,u.path);let h=c&&[...c.points];if(h.length>2&&o&&r&&i){const d=o[0],g=o[o.length-1];h.splice(0,1,d),h.splice(-1,1,g),h=_u(h),mt.isEquals(h[0],d)&&h.splice(0,1),mt.isEquals(h[h.length-1],g)&&h.pop(),h.length===1&&(h=[]),h=[r,...h,i],$i.resizeArrowLine(e,{points:h},u.path)}}t=null,n=null,r=null,i=null,o=null}}),e},kU=e=>{const{pointerMove:t,pointerUp:n}=e;let r=null;return e.pointerMove=i=>{if(r==null||r.remove(),I.isReadonly(e)){t(i);return}const o=Object.keys(Fn),s=I.isInPointer(e,o),u=At(e,Ot(e,i.x,i.y)),c=Aj(e,h=>{const{element:d,handle:g}=h,v=g===Xr.target||g===Xr.source;return fe.isArrowLine(d)&&v});if(s||c){const h=WT(e,u);if(h){const d=M8(e,h,u),g=d.isHitEdge||d.isHitConnector;if(r=gz(e,h,{hasMask:g,hasConnector:!0}),g){const v=ih(I.getRoughSVG(e),d.connectorPoint||d.edgePoint,6,{stroke:yo,strokeWidth:c6,fill:yo,fillStyle:"solid"});r.appendChild(v)}Xa(h)&&Ps(r,M.getCenterPointByPoints(h.points),h.angle),I.getElementTopHost(e).append(r)}}t(i)},e.pointerUp=i=>{r==null||r.remove(),r=null,n(i)},e},mD=e=>ov(e,x3.lineText,EW),OU=e=>{const{dblClick:t}=e;return e.dblClick=n=>{var r,i;if(!I.isReadonly(e)){const o=At(e,Ot(e,n.x,n.y)),s=Qa(e,o);if(s&&fe.isArrowLine(s)){const u=s&&I.findPath(e,s),c=ji(e,s),h=Ln(o,c),d=(r=s.texts)!=null&&r.length?[...s.texts]:[],g=D8(e,s,o);if(FT(e,s,o))xx(e,s,g);else{const y=mD(e),x=((i=fv("arrow-line"))==null?void 0:i.text)||{},E=eu(y,void 0,x),{width:T,height:D}=Sp(e,E,{fontSize:hv,fontFamily:a0}),S=VS(c,h);d.push({text:E,position:S,width:T,height:D}),$i.setArrowLineTexts(e,s,d),setTimeout(()=>{if(u){const R=Xt.get(e,u),L=L0(R);xx(e,R,L.length-1,!0)}})}}}t(n)},e};function xx(e,t,n,r=!1){const o=L0(t)[n];o.edit(()=>{const s=Ke.string(o.getText()),u=mD(e);(!s||r&&s===u)&&$i.removeArrowLineText(e,t,n)})}class IU extends Ec{constructor(){super()}initializeGenerator(){this.imageGenerator=new qu(this.board,{getRectangle:t=>({x:t.points[0][0],y:t.points[0][1],width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]}),getImageItem:t=>({url:t.url,width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]})}),this.lineAutoCompleteGenerator=new Qu(this.board),this.getRef().addGenerator(Qu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}onContextChanged(t,n){t.element!==n.element?(this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})):(!(t.selected===n.selected)||t.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const FU="plait-arrow-line-auto-complete-plugin-key",n0=new WeakMap,LU=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o=null,s,u;return e.pointerDown=c=>{const h=T3(e),d=h.length===1&&h[0],g=Xf(e,c.x,c.y);if(!I.isReadonly(e)&&d&&fe.isShapeElement(d)){const v=O8(e,d,!0),y=qT(hc(e,g,d,!0)||g,v),x=v[y];if(x){w6(e);const E=eI(e,x);i=At(e,Ot(e,E[0],E[1])),s=d,vn.updatePointerType(e,Fn.elbow)}}t(c)},e.pointerMove=c=>{o==null||o.remove(),o=Lt();let h=At(e,Ot(e,c.x,c.y));if(i&&s&&Tt(...hc(e,h,s)||h,...i)>D4*2){const g=M.getRectangleByPoints(s.points),v=Sc(s),y=pi(v);let x=i;y.getNearestCrossingPoint&&(x=y.getNearestCrossingPoint(g,i));const E=Ka(x,s)||x;u=T8(e,Fn.elbow,E,h,s,o),Xe.addSelectionWithTemporaryElements(e,[])}n(c)},e.globalPointerUp=c=>{var h;if(u){Xe.insertNode(e,u,[e.children.length]),B0(e),rh(e,u);const d=(h=e.getPluginOptions(FU))==null?void 0:h.afterComplete;d&&d(u)}else{const d=n0.get(e);d&&(Xe.insertNode(e,d.temporaryArrowLineElement,[e.children.length]),Zu(e,d.temporaryShapeElement),n0.delete(e))}i&&(vn.updatePointerType(e,Zt.selection),i=null),o==null||o.remove(),o=null,s=null,u=null,r(c)},e},Ex=100,_U=e=>{const{pointerMove:t,pointerLeave:n,globalPointerUp:r}=e;let i=null,o=null,s=null,u=null,c=null;e.pointerMove=d=>{i==null||i.remove(),I.getBoardContainer(e).classList.remove(Eg.crosshair);const g=T3(e);u==null||u.remove(),c==null||c.remove();const v=g.length===1&&g[0],y=Xf(e,d.x,d.y);if(!I.isReadonly(e)&&!gi(e)&&v&&fe.isShapeElement(v)){const x=O8(e,v,!0),E=qT(hc(e,y,v,!0)||y,x),T=x[E];if(yn.getElementRef(v).getGenerator(Qu.key).recoverAutoCompleteG(),T){if(i=ih(I.getRoughSVG(e),T,xW,{stroke:"none",fill:Hg(I0,CW),fillStyle:"solid"}),I.getActiveHost(e).append(i),I.getBoardContainer(e).classList.add(Eg.crosshair),Xa(v)){const R=e.getRectangle(v),L=Di(e,R);Ps(i,M.getCenterPoint(L),v.angle)}if(fe.isGeometry(v)&&!fe.isText(v)){const R=M.getRectangleByPoints(v.points);let L=M.getEdgeCenterPoints(R)[E];const k=r$(E);let W=Yn(L,Ex,k);const z=b8(e,v.shape),Y=v.points.map(ne=>Yn(ne,Ex+iT(v.points[0],v.points[1],MF(k)),k));u=Lt(),c=Lt(),u.style.opacity="0.6",c.style.opacity="0.6",s=tp(e,Y,v.shape),s.angle=v.angle,s.fill=v.fill,s.strokeColor=v.strokeColor,s.strokeStyle=v.strokeStyle,s.strokeWidth=v.strokeWidth,s.groupId=v.groupId;const te=Ka(L,v)||L,se=Ka(W,s)||W;o=T8(e,Fn.elbow,te,se,v,u),n0.set(e,{temporaryArrowLineElement:o,temporaryShapeElement:s});const me=E0(e,se,s);o.target.boundId=s.id,o.target.connection=me,z.processDrawing(s,c),I.getElementTopHost(e).append(c)}return}}n0.delete(e),t(d)},e.pointerLeave=d=>{h(),n(d)};const h=()=>{i&&(i==null||i.remove(),I.getBoardContainer(e).classList.remove(Eg.crosshair),u==null||u.remove(),c==null||c.remove()),n0.get(e)&&n0.delete(e)};return e.globalPointerUp=d=>{r(d),h()},e},NU=e=>{let t=0;const n=100;return ah(e,{key:"line-text",canResize:()=>!0,hitTest:i=>{let o=null;const s=Qa(e,i,u=>fe.isArrowLine(u));if(s){const u=D8(e,s,i),h=L0(s)[u];if(u!==-1&&!h.isEditing)return t=u,{element:s,handle:G6.e}}return o},onResize:(i,o)=>{const s=i.element;if(s){const u=o.endPoint,c=ji(e,s);if(tP(u,c)<=n){const d=Ln(u,c,!1),g=VS(c,d),v=[...s.texts];v[t]={...v[t],position:g},$i.setArrowLineTexts(e,s,v)}}}}),e},HU=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r,afterChange:i,drawSelectionRectangle:o}=e;let s=null,u,c=!1;const h=()=>{const d=Qe(e);return d.length>0&&d.every(g=>fe.isDrawElement(g)&&!fe.isArrowLine(g)||fe.isCustomGeometryElement(e,g))};return e.pointerDown=d=>{if(!h()||I.isReadonly(e)||I.hasBeenTextEditing(e)||!Va(d)){t(d);return}const g=Xf(e,d.x,d.y),v=Qe(e),y=on(e,v,!1),x=Di(e,y),E=tV(x),T=po(v),D=T?kr(g,M.getCenterPoint(x),-T):g;E&&M.isHit(M.getRectangleByPoints([D,D]),E)&&(s={elements:[...v],startPoint:g}),t(d)},e.pointerMove=d=>{if(s){d.preventDefault();const g=!!d.shiftKey;Jj(e,s);const v=Xf(e,d.x,d.y),y=on(e,s.elements,!1),x=Di(e,y),E=M.getCenterPoint(x);!po(s.elements)&&s.elements.length>1&&(c=!0),Ua(e,"with-common-rotate",()=>{if(s&&s.startPoint){let T=PF(s.startPoint,v,E);const D=po(s.elements);T=jg(D+T),g&&(T+=Math.PI/12/2,T-=T%(Math.PI/12));let S=T%(Math.PI/2);if(Math.PI/2-S<=B6(5)){const R=Math.PI/2-S;T+=R}if(S<=B6(5)){const R=-S;T+=R}s.angle=jg(T-D)||0,EF(e,s.elements,s.angle),br.set(e,!0),I.getBoardContainer(e).classList.add("element-rotating")}});return}n(d)},e.globalPointerUp=d=>{if(r(d),c){c=!1;const g=Qe(e);Xe.addSelectionWithTemporaryElements(e,g)}I.getBoardContainer(e).classList.remove("element-rotating"),e$(e),s=null,br.set(e,!1)},e.afterChange=()=>{if(i(),u&&(u.remove(),u=null),h()&&!gi(e)){if(c&&s){const d=on(e,s.elements,!1),g=Di(e,d);u=vC(e,g),u.classList.add(v9),s.angle&&Ps(u,M.getCenterPoint(g),s.angle)}else{const d=Qe(e),g=on(e,d,!1),v=Di(e,g);u=vC(e,v),u.classList.add(v9),Ps(u,M.getCenterPoint(v),po(d))}I.getActiveHost(e).append(u)}},e.drawSelectionRectangle=()=>{if(c&&s){const d=on(e,s.elements,!1),g=Di(e,d),v=ua(e,M.inflate(g,dr),{stroke:yo,strokeWidth:dr});return v.classList.add(vp),s.angle&&Ps(v,M.getCenterPoint(g),s.angle),v}return o()},e};class vD extends Ec{constructor(){super()}initializeGenerator(){this.activeGenerator=Ep(this.board,{getStrokeWidth:()=>dr,getStrokeOpacity:()=>1,getRectangle:t=>{const n=t0(t);return n!=null&&n.length?DW(this.board,this.element,n):M.getRectangleByPoints(t.points)},hasResizeHandle:()=>{const t=t0(this.element);return t!=null&&t.length?!1:uv(this.board,this.element)}}),this.tableGenerator=new yv(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new Qu(this.board),this.getRef().addGenerator(Qu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(n=>{if(qg.isVerticalText(n)){const r=ET(this.board,n);if(r){const o=pi(x0.table).getTextRectangle(this.element,{id:n.id,board:this.board});r.g.classList.add("vertical-cell-text"),Ps(r.g,M.getCenterPoint(o),B6(-90))}}})}getDrawShapeTexts(t){return t.filter(n=>TT(n)).map(n=>({id:n.id,text:n.text,textHeight:n.textHeight,board:this.board}))}initializeTextManage(){const t=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new C8(this.board,this.element,t,{onChange:(n,r,i)=>{const o=I.findPath(this.board,n);r.newText&&$i.setTableText(this.board,o,i.id,r.newText,r.height),r.operations&&E8(n,r.operations)},getRenderRectangle:(n,r)=>{const i=uh(this.board,n,r.id);if(qg.isVerticalText(i)){const o=M.getRectangleByPoints(i.points),s=zt(i),u=i.textHeight||0,c=o.height-lt.rectangleAndText*2-s*2;return{width:u,height:c>0?c:0,x:o.x+lt.rectangleAndText+s,y:o.y+(o.height-c)/2}}else return gD(i)}}),this.textGenerator.initialize()}onContextChanged(t,n){if(t.element!==n.element||t.hasThemeChanged){const r=t0(n.element);r!=null&&r.length&&(NC(n.element),xT(t.element,r)),this.tableGenerator.processDrawing(t.element,this.getElementG()),this.activeGenerator.processDrawing(t.element,I.getActiveHost(this.board),{selected:this.selected});const i=this.getDrawShapeTexts(n.element.cells),o=this.getDrawShapeTexts(t.element.cells);this.textGenerator.update(t.element,i,o,this.getElementG()),this.rotateVerticalText()}else{const r=t.selected===n.selected,i=t0(t.element);(!r||i!=null&&i.length||t.selected)&&this.activeGenerator.processDrawing(t.element,I.getActiveHost(this.board),{selected:this.selected}),this.selected||NC(t.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const Px=20;function GU(e){let t;return ah(e,{key:"draw-table",canResize:()=>{const r=Qe(e);return U6(e)&&!Xa(r[0])},hitTest:r=>{const o=Qe(e)[0];if(o&&fe.isElementByTable(o)){let s=e.getRectangle(o),u=q6(e,s,r,o.angle);if(u){const h=Hf(e,o);if(h&&U6(e)||!h&&!Wm(e,u.handle))return{element:o,handle:u.handle,cursorClass:u.cursorClass,rectangle:s}}const c=Dp(e,o);for(let h=0;h<c.length;h++)if(s=M.getRectangleByPoints(c[h].points),u=q6(e,s,r,0),u&&!Wm(e,u.handle))return{element:o,handle:u.handle,cursorClass:u.cursorClass,rectangle:s,options:{cell:c[h]}}}return null},onResize:(r,i)=>{var s,u,c,h;t==null||t.remove();const o=I.findPath(e,r.element);if((s=r.options)!=null&&s.cell&&r.rectangle){const d=y3(r.handle),{originPoint:g,handlePoint:v}=Z6(e,d,r.rectangle),y=[i.startPoint,i.endPoint],{xZoom:x,yZoom:E}=H8(y,g,v,!1,!1),T=(u=r.options)==null?void 0:u.cell.points,D=T.map(W=>ju(W,g,x,E)),S=D[1][0]-T[1][0],R=D[1][1]-T[1][1],L=D[1][0]-D[0][0],k=D[1][1]-D[0][1];if(S!==0&&L>=Px){const{columns:W,points:z}=PT(r.element,(c=r.options)==null?void 0:c.cell.columnId,L,S);Xe.setNode(e,{columns:W,points:z},o)}else if(R!==0&&k>=Px){const{rows:W,points:z}=ST(r.element,(h=r.options)==null?void 0:h.cell.rowId,k,R);Xe.setNode(e,{rows:W,points:z},o)}}else{const d=Wm(e,r.handle),g=i.isShift,v=y3(r.handle),{originPoint:y,handlePoint:x}=Z6(e,v,r.rectangle),E=fD(e,r,i,{originPoint:y,handlePoint:x},g,d),T=xv(e,[r.element],E);t=T.snapG,I.getElementTopHost(e).append(t);const D=T.activePoints,S=r.element.points,R=M.getRectangleByPoints(S),L=M.getRectangleByPoints(D),k=L.width-R.width,W=L.height-R.height;let z=[...r.element.columns],Y=[...r.element.rows];k!==0&&(z=z.map(te=>te.width?{...te,width:te.width+k*(te.width/R.width)}:te)),W!==0&&(Y=Y.map(te=>te.height?{...te,height:te.height+W*(te.height/R.height)}:te)),Xe.setNode(e,{points:qf(D),columns:z,rows:Y},o)}},afterResize:r=>{t==null||t.remove(),t=null}}),e}const jU=e=>{const t=e,{drawElement:n,getRectangle:r,isRectangleHit:i,isHit:o,isMovable:s,dblClick:u,keyDown:c,pointerUp:h}=t;return t.drawElement=d=>fe.isElementByTable(d.element)?vD:n(d),t.isHit=(d,g,v)=>{if(fe.isElementByTable(d)){const y=M.getRectangleByPoints(d.points),x=Yd.getNearestPoint(y,g);return Tt(x[0],x[1],g[0],g[1])<=A4||M.isPointInRectangle(y,g)}return o(d,g,v)},t.getRectangle=d=>fe.isElementByTable(d)?M.getRectangleByPoints(d.points):r(d),t.isMovable=d=>fe.isElementByTable(d)?!0:s(d),t.isRectangleHit=(d,g)=>{if(fe.isElementByTable(d)){const v=M.getRectangleByPoints([g.anchor,g.focus]),y=M.getRectangleByPoints(d.points);return o3(M.getCornerPoints(y),v)}return i(d,g)},t.keyDown=d=>{const g=Qe(e),v=g.length===1,y=g[0];if(!I.isReadonly(e)&&!I.hasBeenTextEditing(t)&&!d8(d)&&!p8(d)&&!g8(d)&&v&&(d.preventDefault(),fe.isElementByTable(y))){const x=t0(y);let E=y.cells.find(T=>T.text&&T.textHeight);if(x!=null&&x.length&&(E=x.find(T=>T.text&&T.textHeight)),E){$C(e,E);return}}c(d)},t.dblClick=d=>{if(d.preventDefault(),!I.isReadonly(e)){const g=At(e,Ot(e,d.x,d.y)),v=Qa(e,g);if(v&&fe.isElementByTable(v)){const y=jC(t,v,g);if(y&&y.text&&y.textHeight){$C(e,y);return}}}u(d)},t.pointerUp=d=>{const g=I.isPointer(t,Zt.selection)||I.isPointer(t,Zt.hand);if(!Va(d)||cc(t)||!g){h(d);return}if(U6(t)){const y=At(t,Ot(t,d.x,d.y)),x=PW(t)[0],E=jC(t,x,y);E&&E.text&&E.textHeight&&xT(x,[E])}h(d)},t.buildTable=d=>d,GU(t)},B5=e=>oD(e)&&lv(e),R5=e=>oD(e)&&F0(e),$U=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null;return e.pointerMove=s=>{i==null||i.remove(),i=Lt();const u=new yv(e),c=I.getPointer(e),h=B5(e),d=At(e,Ot(e,s.x,s.y));if(h){const g=iD(c,d);o=D3(c,g),u.processDrawing(o,i),I.getElementTopHost(e).append(i)}t(s)},e.pointerUp=s=>{B5(e)&&o||r(s)},e.globalPointerUp=s=>{B5(e)&&o&&Zu(e,o),o=null,i==null||i.remove(),i=null,n(s)},e},WU=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,u=null,c=null,h=!1,d;return e.keyDown=g=>{h=nn.isKeyHotkey("shift",g),i(g)},e.keyUp=g=>{h=!1,o(g)},e.pointerDown=g=>{!I.isReadonly(e)&&R5(e)&&(s=At(e,Ot(e,g.x,g.y))),t(g)},e.pointerMove=g=>{u==null||u.remove(),u=Lt();const v=new yv(e),y=At(e,Ot(e,g.x,g.y)),x=I.getPointer(e);if(d==null||d.remove(),s&&R5(e)){let E=qf([s,y],h);const T=M.getRectangleByPoints(E),[D,S]=Kn(s,y),R=xv(e,[],{resizePoints:E,activeRectangle:T,directionFactors:[C0(D),C0(S)],isAspectRatio:h,isFromCorner:!0,isCreate:!0});d=R.snapG,I.getElementTopHost(e).append(d),E=qf(R.activePoints,h),c=D3(x,E),v.processDrawing(c,u),I.getElementTopHost(e).append(u)}n(g)},e.pointerUp=g=>{if(R5(e)&&s){const v=At(e,Ot(e,g.x,g.y)),{width:y,height:x}=M.getRectangleByPoints([s,v]);if(Math.hypot(y,x)<8){const E=I.getPointer(e),T=iD(E,v);c=D3(E,T)}c&&Zu(e,c),d==null||d.remove(),u==null||u.remove(),u=null,s=null,c=null;return}r(g)},e},zU=e=>{const{drawElement:t,buildTable:n,pointerUp:r}=e;return e.drawElement=i=>fe.isSwimlane(i.element)?vD:t(i),e.buildTable=i=>fe.isSwimlane(i)?zz(i):n(i),WU($U(e))},VU=e=>{const{pointerDown:t,pointerMove:n,dblClick:r,globalKeyDown:i}=e;let o=null,s=null,u=[];const c=()=>{s&&Xe.insertNode(e,s,[e.children.length]),I.getBoardContainer(e).classList.remove("vector-line-closed"),o==null||o.remove(),o=null,s=null,u=[]};return e.pointerDown=h=>{const d=fW(),g=I.isInPointer(e,d);if(!I.isReadonly(e)&&g&&F0(e)){let v=At(e,Ot(e,h.x,h.y));if(u.length>1&&Tt(...v,...u[0])<=E3){u.push(u[0]),c();return}u.push(v);return}t(h)},e.pointerMove=h=>{o==null||o.remove(),o=Lt();let d=At(e,Ot(e,h.x,h.y));I.getPointer(e)===A3.vectorLine&&u.length>0&&(Tt(...d,...u[0])<=E3?(d=u[0],I.getBoardContainer(e).classList.add("vector-line-closed")):I.getBoardContainer(e).classList.remove("vector-line-closed"),s=tz(e,np.straight,u,d,o)),n(h)},e.dblClick=h=>{if(!I.isReadonly(e)&&s){c(),vn.updatePointerType(e,Zt.selection);return}r(h)},e.globalKeyDown=h=>{if(!I.isReadonly(e)){const d=nn.isKeyHotkey("esc",h),g=nn.isKeyHotkey("v",h);(d||g)&&s&&(c(),g&&vn.updatePointerType(e,Zt.selection))}i(h)},e},UU=e=>(ah(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:n=>{const r=eD(e);if(r.length>0){let i=null;return r.forEach(o=>{const s=XT(e,o,n);s&&(i={element:o,handle:s.handle,handleIndex:s.handleIndex})}),i}return null},onResize:(n,r)=>{let i=[...n.element.points],o=n.handleIndex;if(n.handle===Xr.source||n.handle===Xr.target)if(i[o]=r.endPoint,Bp(n.element.points))i[i.length-1]=r.endPoint;else{const s=n.handle===Xr.source?i[i.length-1]:i[0];Tt(...r.endPoint,...s)<=E3&&(i[o]=s)}else n.handle===Xr.addHandle?i.splice(o+1,0,r.endPoint):i[o]=r.endPoint;Xe.setNode(e,{points:i},n.path)}}),e),yD=e=>{const{drawElement:t,getRectangle:n,isRectangleHit:r,isHit:i,isInsidePoint:o,isMovable:s,isAlign:u,getRelatedFragment:c,getOneHitElement:h}=e;return e.drawElement=d=>fe.isGeometry(d.element)?(fe.isUML(d.element),yx):fe.isArrowLine(d.element)?SU:fe.isVectorLine(d.element)?TU:fe.isImage(d.element)?IU:t(d),e.getRectangle=d=>{if(fe.isGeometry(d))return M.getRectangleByPoints(d.points);if(fe.isArrowLine(d)){const g=ji(e,d),v=d.texts.map((x,E)=>S8(e,d,E)),y=M.getRectangleByPoints(g);return M.getBoundingRectangle([y,...v])}if(fe.isVectorLine(d)){const g=oc(e,d),v=M.getRectangleByPoints(g);return M.getBoundingRectangle([v])}return fe.isImage(d)?M.getRectangleByPoints(d.points):n(d)},e.isRectangleHit=(d,g)=>{const v=iz(e,d,g);return v!==null?v:r(d,g)},e.isHit=(d,g,v)=>{const y=lz(e,d,g,v);return y!==null?y:i(d,g,v)},e.getOneHitElement=d=>d.every(v=>fe.isDrawElement(v))?GT(e,d):h(d),e.isInsidePoint=(d,g)=>{const v=fz(e,d,g);return v!==null?v:o(d,g)},e.isMovable=d=>{if(fe.isGeometry(d)||fe.isImage(d)||fe.isVectorLine(d))return!0;if(fe.isArrowLine(d)){const g=Qe(e),v=y=>!!g.find(x=>x.id===y);return!!(!d.source.boundId&&!d.target.boundId||d.source.boundId&&v(d.source.boundId)&&g.includes(d)||d.target.boundId&&v(d.target.boundId)&&g.includes(d))}return s(d)},e.isAlign=d=>fe.isGeometry(d)||fe.isImage(d)?!0:u(d),e.getRelatedFragment=(d,g)=>{const v=g!=null&&g.length?g:Qe(e),x=e.children.filter(E=>fe.isArrowLine(E)).filter(E=>{const T=v.find(R=>R.id===E.source.boundId),D=v.find(R=>R.id===E.target.boundId),S=v.includes(E);return T&&D&&!S});return c([...d,...x],g)},zU(jU(rV(VU(_U(kU(UU(bU(NU(OU(HU(MU(LU(AU(BU(RU(DU(e)))))))))))))))))},yt={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var Je;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(Je||(Je={}));var vo;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(vo||(vo={}));function Q6(e){return e.origin.layout?e.origin.layout:yt.isAbstract(e.origin)?j8(Q6(e.parent)):e.parent?Q6(e.parent):null}const Ya=e=>e===Je.rightBottomIndented||e===Je.rightTopIndented||e===Je.leftBottomIndented||e===Je.leftTopIndented,XU=e=>e===Je.right||e===Je.left||e===Je.downward||e===Je.upward,xo=e=>e===Je.standard,ci=e=>e===Je.right||e===Je.left||e===Je.standard||Ya(e),rp=e=>e===Je.right||e===Je.left||e===Je.standard,J6=e=>e===Je.upward||e===Je.downward,rc=e=>e===Je.leftTopIndented||e===Je.rightTopIndented||e===Je.upward,KU=e=>e===Je.leftBottomIndented||e===Je.rightBottomIndented||e===Je.downward,ip=e=>e===Je.left||e===Je.leftTopIndented||e===Je.leftBottomIndented,B3=e=>e===Je.right||e===Je.rightTopIndented||e===Je.rightBottomIndented,M5=e=>Ya(e)?vo.indented:(xo(e)||XU(e),vo.logic),j8=e=>Ya(e)?B3(e)?Je.right:Je.left:e;class op{constructor(t,n,r,i){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const o=n.getHorizontalGap(t,i),s=n.getVerticalGap(t,i);this.origin=t,this.width=n.getWidth(t),this.height=n.getHeight(t),this.x=this.y=0,i&&(this.parent=i);const u=Q6(this);this.layout=u&&u!==Je.standard?u:r.rootLayoutType;const c=n.getVerticalConnectingPosition(t,i);c&&(this.verticalConnectingPosition=c),this.addGap(o,s)}isRoot(){return this.depth===0}addGap(t,n){const r=this;r.hGap+=t,r.vGap+=n,r.width+=2*t,r.height+=2*n}eachNode(t){wD(this,t)}getBoundingBox(){const t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(n=>{t.left=Math.min(t.left,n.x),t.top=Math.min(t.top,n.y),t.right=Math.max(t.right,n.x+n.width),t.bottom=Math.max(t.bottom,n.y+n.height)}),t.width=t.right-t.left,t.height=t.bottom-t.top,t}translate(t=0,n=0){this.eachNode(r=>{r.x+=t,r.y+=n})}right2left(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.x=r.x-(r.x-n.left)*2-r.width,r.left=!0}),t.translate(n.width,0)}down2up(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.y=r.y-(r.y-n.top)*2-r.height,r.up=!0}),t.translate(0,n.height)}}function wD(e,t){var n;(n=e.children)==null||n.forEach(r=>{wD(r,t)}),t(e)}class YU{constructor(t,n,r,i,o,s,u,c,h,d){this.left=t,this.right=n,this.top=r,this.bottom=i,this.width=o,this.height=s,this.rootX=u,this.rootY=c,this.rootWidth=h,this.rootHeight=d}}function qU(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var e4;(function(e){e.middle="middle",e.bottom="bottom"})(e4||(e4={}));class Zf{constructor(t,n,r,i,o){this.width=t,this.height=n,this.y=r,this.children=i,this.childrenCount=i.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=o}}const Tc=e=>{var t;return e.children?(t=e.children)==null?void 0:t.filter(n=>n instanceof op?!yt.isAbstract(n.origin):n instanceof Zf?!yt.isAbstract(n.origin.origin):!yt.isAbstract(n)):[]},CD=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof op)return yt.isAbstract(r.origin)&&r.origin.end===n;if(r instanceof Zf&&e instanceof Zf){if(yt.isAbstract(r.origin.origin)){const{end:i}=sc(r.origin.origin,e.origin);return i===n}return!1}return yt.isAbstract(r)&&r.end===n})},ZU=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof op)return yt.isAbstract(r.origin)&&r.origin.start===n;if(r instanceof Zf&&e instanceof Zf){if(yt.isAbstract(r.origin.origin)){const{start:i}=sc(r.origin.origin,e.origin);return i===n}return!1}return yt.isAbstract(r)&&r.start===n})},sc=(e,t)=>{let n=e.start,r=e.end;if(xo(t.layout)){const i=t.origin.rightNodeCount;n>=i&&(r-=i,n-=i)}return{start:n,end:r}};function R3(e,t,n){e.children[t].modifier+=n}function QU(e){return e.childrenCount===0?null:e.children[0]}function xD(e){let t=Tc(e);return e.childrenCount===0?null:t[t.length-1]}function JU(e,t){if(yt.isAbstract(e.children[t].origin.origin))return;let n=e.children[t-1],r=e.children[t],i=n.modifier+n.preliminary+n.width,o=r.modifier+r.preliminary,s=0,u=e,c=e;for(;n||r;){if(n){let d=s+n.modifier+n.preliminary+n.width;d>i&&(i=d),i=PD(u,n,i,s),u=n,s=n.modifier+s,n=xD(n)}if(r){let d=r.modifier+r.preliminary;d<o&&(o=d),o=nX(c,r,o),c=r,r=QU(r)}}const h=i-o;h>0&&R3(e,t,h)}function eX(e){const t=e.children[0];let n=t.preliminary+t.modifier;const r=Tc(e),i=r[r.length-1];let o=i.modifier+i.preliminary+i.width;t.origin.blackNode&&t.origin.blackNode.rootX>t.origin.blackNode.left&&(n=n+(t.origin.blackNode.rootX-t.origin.blackNode.left)),i.origin.blackNode&&i.origin.blackNode.rootX+i.origin.blackNode.rootWidth<i.origin.blackNode.right&&(o=o-(i.origin.blackNode.right-(i.origin.blackNode.rootX+i.origin.blackNode.rootWidth))),t.origin.verticalConnectingPosition&&i.origin.verticalConnectingPosition&&(n=n+t.width-t.origin.vGap,o=o-i.origin.vGap);let s=e.width/2;e.origin.verticalConnectingPosition&&(s=e.width-e.origin.vGap);const u=(n+o)/2-s;u>0?e.preliminary=u:e.children.forEach((c,h)=>{R3(e,h,Math.abs(u))})}function t4(e){if(e.childrenCount!==0){t4(e.children[0]);for(let t=1;t<e.childrenCount;t++){const n=e.children.find(r=>{let i=null;if(yt.isAbstract(r.origin.origin)){let{end:o}=sc(r.origin.origin,e.origin);i=o}return i===t-1});n&&tX(e,n),t4(e.children[t]),JU(e,t)}eX(e)}}function ED(e,t){t+=e.modifier,e.x=e.preliminary+t;for(let n=0;n<e.childrenCount;n++)ED(e.children[n],t)}function tX(e,t,n){const{start:r,end:i}=sc(t.origin.origin,e.origin),o=e.children.indexOf(t),s=e.children[r];let u=e.children[i];const c=s.modifier;let h=u.modifier+u.preliminary+u.width,d=u.modifier,g=e;for(e.children[o].modifier=s.modifier;u.childrenCount;){g=u;const x=xD(u);u=x||u;let E=d+u.modifier+u.preliminary+u.width;h=PD(g,u,h,d),d+=u.modifier,E>h&&(h=E)}const v=t.origin.blackNode?t.origin.blackNode.rootX*2+t.origin.blackNode.rootWidth:t.width,y=h-c;if(y>v){const x=(y-v)/2;R3(e,o,x)}else{const x=(v-y)/2;for(let E=r;E<i+1;E++)R3(e,E,x)}}function PD(e,t,n,r){const i=CD(e,t);return i?Math.max(i.modifier+i.width+r,n):n}function nX(e,t,n){const r=ZU(e,t);return r?Math.min(r.modifier+r.preliminary,n):n}function rX(e){t4(e),ED(e,0)}function n4(e,t=0){e.x=t,e.children.forEach(n=>{if(yt.isAbstract(n.origin)){let r=0;for(let i=n.origin.start;i<=n.origin.end;i++){const o=e.children[i].getBoundingBox();r=Math.max(o.width,r)}n4(n,e.x+e.width/2+r)}else n4(n,e.x+e.width/2)})}function iX(e,t){let n=e.y+e.height,r=null;i(e);function i(o){o.children.forEach((s,u)=>{const c=o.children.find(d=>yt.isAbstract(d.origin)&&d.origin.end===u-1);if(c){const d=r!=null&&r.origin.isCollapsed?t.getExtendHeight(s.origin):0;n=oX(o,c)+d}if(yt.isAbstract(s.origin))return;let h=n+s.vGap;r&&!rp(r.layout)&&r.origin.children.length>0&&(r.origin.isCollapsed?h=h+t.getExtendHeight(s.origin):h=h+t.getIndentedCrossLevelGap()),s.y=h,r=s,n=s.y+s.height,i(s)})}}function oX(e,t){const n=t.origin,r=e.children.indexOf(t),i=e.children[n.start],o=e.children[n.end];e.children[r].y=i.y;const s=i.y;let u=o.y+o.height,c=o,h=e;for(;c!=null&&c.children.length;){h=c;const y=Tc(h);c=y[y.length-1];const x=CD(h,c);u=x?Math.max(x.y+x.height,c.y+c.height):c.y+c.height}const d=u-s,g=t.blackNode?t.blackNode.height:t.height,v=t.blackNode?t.blackNode.rootY*2+t.blackNode.rootHeight:t.height;if(v>d){const y=(v-d)/2;for(let x=n.start;x<=n.end;x++)e.children[x].eachNode(E=>{E.y+=y})}else{const y=(d-v)/2;e.children[r].y+=y}return Math.max(t.y+g,i.y+d)}function SD(e,t,n){n?t.y=e.x:t.x=e.x,e.children.forEach((r,i)=>{SD(r,t.children[i],n)})}function TD(e,t,n=0){var r,i;if(t){if(yt.isAbstract(e.origin)){const{start:o,end:s}=sc(e.origin,e.parent);for(let u=o;u<=s;u++){const c=(r=e.parent)==null?void 0:r.children[u].getBoundingBox().right;n=Math.max(c,n)}}e.x=n,n+=e.width}else{if(yt.isAbstract(e.origin))for(let o=e.origin.start;o<=e.origin.end;o++){const s=(i=e.parent)==null?void 0:i.children[o].getBoundingBox().bottom;n=Math.max(s,n)}e.y=n,n+=e.height}e.children.forEach(o=>{TD(o,t,n)})}const DD=(e,t)=>{const n=[];return e.children.forEach(r=>{n.push(DD(r,t))}),t?(e.blackNode&&(e.blackNode=qU(e.blackNode)),new Zf(e.height,e.width,e.x,n,e)):new Zf(e.width,e.height,e.y,n,e)};class sX{constructor(){}layout(t,n,r,i,o=!1,s){const u=[],c=[],h=this.buildLayoutNode(t,r,i,u,s);switch(u.filter(g=>g.origin.children.length>0).forEach(g=>{const v=g.layout,y=i.toTop||ci(i.rootLayoutType)&&rc(v),x=i.toLeft||!ci(i.rootLayoutType)&&ip(v),E=ci(v),T=this.layout(g.origin,M5(v),r,{toTop:y,toLeft:x,rootLayoutType:i.rootLayoutType},E,g.parent);!i.toTop&&y&&n!==vo.indented&&T.down2up(),!i.toLeft&&x&&T.right2left();const D=T.getBoundingBox();g.width=D.width,g.height=D.height,g.blackNode=new YU(D.left,D.right,D.top,D.bottom,D.width,D.height,T.x,T.y,T.width,T.height),c.push(T)}),n){case vo.indented:n4(h),iX(h,r);break;case vo.fishBone:break;case vo.logic:default:TD(h,o);const g=DD(h,o);rX(g),SD(g,h,o);break}const d=[];return u.filter(g=>g.origin.children.length>0).forEach((g,v)=>{if(g.parent){const y=c[v];y.parent=g.parent;let x,E;ci(g.parent.layout)?(x=y.x,E=0):(x=0,E=y.y),y.translate(g.x-x,g.y-E);const D=g.parent.children.indexOf(g),S=g.parent.children[D];g.parent.children[D]=Object.assign(S,y);const R=d.find(L=>L.parent===g.parent&&!yt.isAbstract(g.origin));R?(R.offsetX<x&&(R.offsetX=x),R.offsetX<E&&(R.offsetX=E)):yt.isAbstract(g.origin)||d.push({parent:g.parent,offsetX:x,offsetY:E})}}),d.forEach(g=>{g.parent.children.forEach(v=>v.translate(g.offsetX,g.offsetY))}),h}buildLayoutNode(t,n,r,i,o){const s=new op(t,n,r,o);if(!s.origin.isCollapsed){const u=[s];let c;for(;c=u.pop();)if(!c.origin.isCollapsed){const h=c.origin.children,d=h?h.length:0;if(c.children=[],h&&d)for(let g=0;g<d;g++){const v=new op(h[g],n,r,c);c.children.push(v),v.depth=c.depth+1,(c.layout!==v.layout&&(M5(c.layout)!==M5(v.layout)||ci(c.layout)!==ci(v.layout))||yt.isAbstract(v.origin))&&!v.origin.isCollapsed?i.push(v):u.push(v)}}}return s}}class aX{static layout(t,n,r){const i=new sX;if(xo(r)){const g=t.children.length,v=[],y=[],x={...t};for(let S=0;S<g;S++){const R=t.children[S];if(yt.isAbstract(R)&&R.end<t.rightNodeCount){v.push(R);continue}if(yt.isAbstract(R)&&R.start>=t.rightNodeCount){y.push(R);continue}S<t.rightNodeCount?v.push(R):y.push(R)}x.children=v;const E=i.layout(x,vo.logic,n,{toLeft:!1,toTop:!1,rootLayoutType:r},!0);x.children=y;const T=i.layout(x,vo.logic,n,{toLeft:!0,toTop:!1,rootLayoutType:r},!0);T.right2left(),E.translate(T.x-E.x,T.y-E.y);const D=E.children.filter(S=>yt.isAbstract(S.origin));return E.children=E.children.filter(S=>!yt.isAbstract(S.origin)),T.children.forEach(S=>{E.children.push(S),S.parent=E}),E.children=E.children.concat(D),E.x=T.x,E.origin=t,E}const o=Ya(r),s=o?vo.indented:vo.logic,u=o?!0:ci(r),c=rc(r),h=ip(r),d=i.layout(t,s,n,{toTop:c,toLeft:h,rootLayoutType:r},u);return c&&d.down2up(),h&&d.right2left(),d}}const M3=new WeakMap;var tn;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(tn||(tn={}));const b3={[Je.right]:[tn.right],[Je.left]:[tn.left],[Je.upward]:[tn.top],[Je.downward]:[tn.bottom],[Je.rightBottomIndented]:[tn.right,tn.bottom],[Je.rightTopIndented]:[tn.right,tn.top],[Je.leftBottomIndented]:[tn.left,tn.bottom],[Je.leftTopIndented]:[tn.left,tn.top]};var $u;(function(e){e.mind="mind"})($u||($u={}));const uX=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],lX=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],cX=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],fX=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],hX=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],dX=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],AD={...HP,branchColors:uX,rootFill:"#f5f5f5",rootTextColor:qr},gX={...GP,branchColors:lX,rootFill:qr,rootTextColor:"#FFFFFF"},pX={...jP,branchColors:cX,rootFill:"#FFFFFF",rootTextColor:qr},mX={...$P,branchColors:fX,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},vX={...WP,branchColors:hX,rootFill:"#FFFFFF",rootTextColor:qr},yX={...zP,branchColors:dX,rootFill:"#FFFFFF",rootTextColor:qr},BD=[AD,gX,pX,mX,vX,yX],wX={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},Ev="plait-mind-plugin-key",Ur=4,l0="#6698FF",Sx="#AAAAAA",r4=2,Tx=8,RD=10,Af=2,Ha=20,pg=10,CX=Hg("#000000",.2),xX="#6698FF",Dx="white",EX=240;var k3;(function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"})(k3||(k3={}));function i4(e,t){const n=e.getPluginOptions(Ev),r=t.data.emojis.length;return{width:MD(t)*r+r*2*n.emojiPadding+(r-1)*n.spaceBetweenEmojis,height:t.height}}function MD(e){return qt.isMind(e)?20:16}const Qf=(e,t,n)=>t[n],P0={branch:{color:Sx,width:2},shape:{strokeColor:Sx,strokeWidth:2}},Pv={shape:{rectangleRadius:4,strokeWidth:2,fill:"none"}},PX=e=>{const t=e.rightNodeCount,n=e.children;let r=[],i=[];for(let o=0;o<n.length;o++){const s=n[o];if(yt.isAbstract(s)&&s.end<t){r.push(s);continue}if(yt.isAbstract(s)&&s.start>=t){i.push(s);continue}o<t?r.push(s):i.push(s)}return{leftChildren:i,rightChildren:r}},kp=e=>{const t=Me.findParent(e);if(!t)return;const n=t.children.indexOf(e);return t.children.find(r=>yt.isAbstract(r)&&n>=r.start&&n<=r.end)},bD=e=>{const t=Me.findParent(e);if(!t)return[];const n=t.children.indexOf(e);return t.children.filter(r=>yt.isAbstract(r)&&r.start>n)},kD=(e,t)=>{const n=[];return t.filter(r=>!yt.isAbstract(r)&&!qt.isMind(r)).forEach(r=>{const i=kp(r);if(i&&t.indexOf(i)===-1&&n.indexOf(i)===-1){const{start:o,end:s}=i;Me.getParent(r).children.slice(o,s+1).every(h=>t.indexOf(h)>-1)&&n.push(i)}}),n},OD=(e,t)=>{const n=[];return t.filter(r=>!yt.isAbstract(r)&&!qt.isMind(r)).forEach(r=>{const i=kp(r);if(i&&t.indexOf(i)>0){const o=n.findIndex(s=>s.abstract===i);o===-1?n.push({abstract:i,references:[r]}):n[o].references.push(r)}}),n};function ID(e,t){const n=t.indexOf(e.references[0]),r=t.indexOf(e.references[e.references.length-1]);return{start:n,end:r}}const FD=(e,t,n=1,r=!0,i=new Map)=>{const o=Xt.parent(e,t),s=t[t.length-1]!==0;let u;if(!s)u=o.children.filter(g=>yt.isAbstract(g));else{const g=Xt.get(e,wt.previous(t));u=bD(g)}if(u.length&&u.forEach(g=>{let v=i.get(g);v||(v={start:0,end:0},i.set(g,v)),v.start=v.start+n,v.end=v.end+n}),!s)return i;const c=Xt.get(e,wt.previous(t)),h=kp(c),d=!r&&h&&h.end===t[t.length-1]-1;if(h&&!d){let g=i.get(h);g||(g={start:0,end:0},i.set(h,g)),g.end=g.end+n}return i},LD=(e,t,n=new Map)=>(t.forEach(r=>{if(!qt.isMind(r)){const i=bD(r).filter(s=>!t.includes(s));i.length&&i.forEach(s=>{let u=n.get(s);u||(u={start:0,end:0},n.set(s,u)),u.start=u.start-1,u.end=u.end-1});const o=kp(r);if(o&&!t.includes(o)){let s=n.get(o);s||(s={start:0,end:0},n.set(o,s)),s.end=s.end-1}}}),n),_D=(e,t)=>!!Me.getAncestors(e,t).find(r=>yt.isAbstract(r)),$8=(e,t)=>yt.isAbstract(t)||_D(e,t)?HD(e,t):Qf(e,t,"branchColor")||Qf(e,t,"strokeColor")||GD(e,t),W8=(e,t)=>Qf(e,t,"branchShape")||Jf.bight,ND=(e,t)=>Qf(e,t,"branchWidth")||Qf(e,t,"strokeWidth")||r4,SX=(e,t)=>Xo(t.branchWidth)?P0.branch.width:t.branchWidth,HD=(e,t)=>t.branchColor||t.strokeColor?t.branchColor||t.strokeColor:P0.branch.color,GD=(e,t)=>{const n=I.findPath(e,t);return TX(e,n[1])},TX=(e,t)=>{const n=z8(e),r=n.branchColors.length,i=t%r;return n.branchColors[i]},z8=e=>{const n=I.getThemeColors(e).find(r=>r.mode===e.theme.themeColorMode);return n&&wX.isMindThemeColor(n)?n:AD},V8=(e,t)=>{if(qt.isMind(t)){const n=z8(e).rootFill;return t.strokeColor||n}return yt.isAbstract(t)||_D(e,t)?t.strokeColor||P0.shape.strokeColor:Qf(e,t,"strokeColor")||GD(e,t)},Sv=(e,t)=>t.strokeStyle||Ss.solid,Op=(e,t)=>t.strokeWidth||(yt.isAbstract(t)?P0.shape.strokeWidth:Pv.shape.strokeWidth),jD=(e,t)=>{if(t.fill)return t.fill;const n=z8(e).rootFill;return t.isRoot?n:Pv.shape.fill},sp=(e,t)=>Qf(e,t,"shape")||Ju.roundRectangle;function U8(e){const t=oh(e);t==null||t.edit(()=>{},n=>{const r=n;return r.key==="Enter"&&!r.shiftKey})}const b5=(e,t)=>(t!=null&&t.length?t:Qe(e)).filter(r=>Me.isMindElement(e,r)),Ax=e=>{const t=[];return e.forEach(n=>{b3[n].forEach(i=>{!t.includes(i)&&!t.includes(K8(i))&&t.push(i)})}),t},DX=(e,t)=>{const n=b3[e],r=b3[t];if(!r)throw new Error(`unexpected layout: ${t} on correct layout`);return r.find(i=>n.includes(K8(i)))},AX=(e,t)=>{const n=t===tn.left||t===tn.right;let r=Je.standard;switch(e){case Je.left:r=Je.right;break;case Je.right:r=Je.left;break;case Je.downward:r=Je.upward;break;case Je.upward:r=Je.downward;break;case Je.rightBottomIndented:r=n?Je.leftBottomIndented:Je.rightTopIndented;break;case Je.leftBottomIndented:r=n?Je.rightBottomIndented:Je.leftTopIndented;break;case Je.rightTopIndented:r=n?Je.leftTopIndented:Je.rightBottomIndented;break;case Je.leftTopIndented:r=n?Je.rightTopIndented:Je.leftBottomIndented;break}return r},X8=()=>Je.standard,Bx=e=>{const t=[],n=e.map(K8);for(const r in Je){const i=Je[r],o=b3[i];if(o){const s=o.some(c=>e.includes(c)),u=o.some(c=>n.includes(c));s&&!u&&t.push(i)}}return t},K8=e=>{let t=tn.right;switch(e){case tn.top:t=tn.bottom;break;case tn.bottom:t=tn.top;break;case tn.right:t=tn.left;break;case tn.left:t=tn.right;break}return t},gc=e=>e.layout||X8(),BX=e=>{function t(r,i){return r.isRoot?Ur*12:(i&&i.isRoot(),Ur*3)}function n(r,i){return r.isRoot?Ur*12:Ur*8.5}return{getHeight(r){return kn.getNodeHeight(e,r)},getWidth(r){return kn.getNodeWidth(e,r)},getHorizontalGap(r,i){const o=i&&i.layout||gc(r),s=ci(o);return Ya(o)?Ur*6:s?n(r):t(r,i)},getVerticalGap(r,i){const o=i&&i.layout||gc(r);return Ya(o)?Ur*3.5:ci(o)?t(r,i):n(r)},getVerticalConnectingPosition(r,i){if(r.shape===Ju.underline&&i&&rp(i.layout))return e4.bottom},getExtendHeight(r){return 0},getIndentedCrossLevelGap(){return Ur*1}}},Y8=14,$D=18,RX=34,MX={defaultTextMaxWidth:34*14},bX="#6698FF80",Yl=3.5,Rx=10,Tm=8,kX="中心主题",OX="概要",IX=e=>ov(e,k3.mindCentralText,kX),FX=e=>ov(e,k3.abstractNodeText,OX),Tv=(e,t,n,r,i)=>{let o=a0,s=Y8;t?(o=a0,s=$D):n&&(o=a0);const u=s*RX;return Sp(e,r,{fontSize:s,fontFamily:o},i||u)},Mx=(e,t)=>{const n=IX(e),r=Tv(e,!0,!1,eu(n)),i=Dv(n,r.width,r.height,{layout:Je.right});i.isRoot=!0,i.type="mindmap";const o=kn.getNodeWidth(e,i),s=kn.getNodeHeight(e,i);return i.points=[[t[0]-o/2,t[1]-s/2]],i},Dv=(e,t,n,r)=>{const i={id:En(),data:{topic:eu(e)},children:[],width:t,height:n};let o;for(o in r)Xo(r[o])||(i[o]=r[o]);return i},LX=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],WD=e=>e.children.reduce((n,r)=>n+WD(r),0)+e.children.length,zD=(e,t)=>{let n=Me.findParent(t);for(;n;){if(n===e)return!0;n=Me.findParent(n)}return!1},kg=e=>{let t=[];return e.forEach(n=>{e.some(i=>zD(i,n))||t.push(n)}),t},bx=(e,t)=>e.y>t.y,VD=e=>{const t={...e};t.id=En(),t.children=[];for(const n of e.children)t.children.push(VD(n));return t},q8=(e,t,n)=>{const r={};t.isRoot||(LX.forEach(o=>{r[o]=t[o]}),delete r.layout);const i=Dv("",Y8,aT,r);Xe.insertNode(e,i,n),B0(e),rh(e,i),setTimeout(()=>{U8(i)})},_X=e=>{const t=[],n=[];for(let r=0;r<e.length;r++){const i=Me.getParent(e[r]),o=n.indexOf(i);o===-1?(n.push(i),t.push([e[r]])):t[o].push(e[r])}return{parentElements:n,abstractIncludedGroups:t}},NX=(e,t)=>{if(qt.isMind(t))return $D;if(Me.isMindElement(e,t))return Y8;throw new Error("can not find default font-size")},ap={horizontal:{nodeAndText:Ur*2.5,emojiAndText:Ur*1.5},vertical:{nodeAndText:Ur,nodeAndImage:Ur,imageAndText:Ur*1.5}},Z8={horizontal:{nodeAndText:Ur*4,emojiAndText:Ur*2},vertical:{nodeAndText:Ur*2}},k5=(e,t)=>{const r=qt.isMind(t)?Z8.horizontal.nodeAndText:ap.horizontal.nodeAndText,i=Op(e,t);return r+i},O5=(e,t)=>{const n=qt.isMind(t),r=Op(e,t);return(n?Z8.vertical.nodeAndText:ap.vertical.nodeAndText)+r},kx=e=>qt.isMind(e)?Z8.horizontal.emojiAndText:ap.horizontal.emojiAndText,kn={getNodeWidth(e,t){const n=k5(e,t);return Me.hasEmojis(t)?kn.getEmojiLeftSpace(e,t)+i4(e,t).width+kx(t)+kn.getNodeDynamicWidth(e,t)+n:n+kn.getNodeDynamicWidth(e,t)+n},getNodeHeight(e,t){const n=O5(e,t);return Me.hasImage(t)?kn.getTextTopSpace(e,t)+t.height+n:n+t.height+n},getNodeDynamicWidth(e,t){var i;const n=t.manualWidth||t.width,r=Me.hasImage(t)?(i=t.data.image)==null?void 0:i.width:0;return Math.max(n,r)},getNodeNewDynamicWidth(e,t,n){const r=t.manualWidth||t.width;return Math.max(r,n)},getNodeResizableMinWidth(e,t){const n=kn.getNodeTopicMinWidth(e,t);return Me.hasImage(t)&&t.data.image.width>n?t.data.image.width:n},getNodeTopicMinWidth(e,t){const n=NX(e,t),r=cv(t);return ja.getMarks(r)[li.fontSize]||n},getTextLeftSpace(e,t){const n=k5(e,t);return Me.hasEmojis(t)?kn.getEmojiLeftSpace(e,t)+i4(e,t).width+kx(t):n},getTextTopSpace(e,t){const n=O5(e,t);return Me.hasImage(t)?kn.getImageTopSpace(e,t)+t.data.image.height+ap.vertical.imageAndText:n},getImageTopSpace(e,t){return Op(e,t)+ap.vertical.nodeAndImage},getEmojiLeftSpace(e,t){const n=e.getPluginOptions(Ev);return k5(e,t)-n.emojiPadding},getEmojiTopSpace(e,t){return O5(e,t)}},HX=e=>{const t=hv;return typeof e=="string"?t:ja.getMarksByElement(e)[li.fontSize]||t};function tr(e){const t=e.x+e.hGap;let n=e.y+e.vGap;const r=e.width-e.hGap*2,i=e.height-e.vGap*2;return{x:t,y:n,width:r,height:i}}function GX(e,t){const n=kn.getNodeWidth(e,t),r=kn.getNodeHeight(e,t);return{x:t.points[0][0],y:t.points[0][1],width:n,height:r}}function UD(e,t,n){const r=Me.getNode(n);return!!(r&&yp(t[0],t[1],tr(r))===0)}function XD(e,t){let{x:n,y:r}=tr(Me.getNode(t));n=n+kn.getEmojiLeftSpace(e,t);const{width:i}=i4(e,t);return{x:n,y:r,width:i,height:kn.getNodeHeight(e,t)}}function KD(e,t){let n=tr(t);const r=YD(e,n,t.origin);return r.width=r.width,r}function YD(e,t,n){const r=t.x+kn.getTextLeftSpace(e,n),i=t.y+kn.getTextTopSpace(e,n),o=kn.getNodeDynamicWidth(e,n);return{height:Math.ceil(n.height),width:o,x:r,y:i}}function Av(e,t){let{x:n,y:r}=tr(Me.getNode(t));const i=t.manualWidth||t.width;n=i>t.data.image.width?n+kn.getTextLeftSpace(e,t)+(i-t.data.image.width)/2:n+kn.getTextLeftSpace(e,t),r=kn.getImageTopSpace(e,t)+r;const{width:o,height:s}=t.data.image;return{x:n,y:r,width:o,height:s}}const qD=(e,t,n)=>{const r=Av(e,t),i=M.getOutlineRectangle(r,-9/2);return M.isPointInRectangle(i,n)},jX=(e,t,n)=>{const r=Av(e,t);return jS(r,oa).find(s=>M.isHit(M.getRectangleByPoints([n,n]),s.rectangle))},$X=(e,t)=>{const n={...t};return delete n.isRoot,delete n.rightNodeCount,delete n.type,n.layout===Je.standard&&delete n.layout,n},o4=e=>{const t={...e};return delete t.start,delete t.end,t},WX=(e,t)=>{const n={...t};return Ke.string(n.data.topic)||(n.data.topic={children:[{text:"思维导图"}]}),n==null||delete n.strokeColor,n==null||delete n.fill,n==null||delete n.shape,n==null||delete n.strokeWidth,n==null||delete n.isCollapsed,{...n,layout:n.layout??Je.right,isRoot:!0,type:"mindmap"}},zX=(e,t)=>{QS(e,t),yn.getElementRef(t).getGenerator(qu.key).setFocus(t,!0)},Vm=(e,t)=>{$j(e),yn.getElementRef(t).getGenerator(qu.key).setFocus(t,!1)},ZD=(e,t,n)=>{const r=oh(t),{height:i}=r.getSize(void 0,n);if(Math.abs(i-t.height)>2)return i},QD=e=>{yn.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{QD(t)})},JD=e=>{yn.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{JD(t)})},Ox=(e,t)=>{ol(e,t),t?I.getBoardContainer(e).classList.add("mind-node-dragging"):I.getBoardContainer(e).classList.remove("mind-node-dragging")},VX=(e,t,n)=>{let r=Tc(e);if(qt.isMind(e)&&xo(gc(e))){const s=eA(e,t);s&&(r=r.slice(0,e.rightNodeCount)),s||(r=r.slice(e.rightNodeCount,r.length),n=[...n,n[n.length-1]-e.rightNodeCount])}let i=n[n.length-1]!==0,o=n[n.length-1]!==((r==null?void 0:r.length)||0);return e.isCollapsed&&(o=!1,i=!1),{hasPreviousNode:i,hasNextNode:o}},eA=(e,t)=>{const n=t.target;return qt.isMind(e)&&xo(gc(e))&&e.children.indexOf(n)!==-1&&e.children.indexOf(n)<e.rightNodeCount||qt.isMind(n)&&xo(gc(n))&&t.detectResult==="right"},UX=(e,t,n)=>{if(!t.origin.isRoot&&!yt.isAbstract(t.origin)){const r=Eo.getCorrectLayoutByElement(e,t==null?void 0:t.parent.origin);if(xo(r)){const o=t.parent.children.findIndex(s=>s===t)>=(t.parent.origin.rightNodeCount||0);return Fa(n,[o?"right":"left"])}if(ip(r))return Fa(n,["right"]);if(B3(r))return Fa(n,["left"]);if(r===Je.upward)return Fa(n,["bottom"]);if(r===Je.downward)return Fa(n,["top"])}else{const r=Eo.getCorrectLayoutByElement(e,t==null?void 0:t.origin);if(xo(r))return Fa(n,["top","bottom"]);if(r===Je.upward)return Fa(n,["left","right","bottom"]);if(r===Je.downward)return Fa(n,["left","right","top"]);if(ip(r))return Fa(n,["right","top","bottom"]);if(B3(r))return Fa(n,["left","top","bottom"])}return null},Fa=(e,t)=>{const n=e;return t.forEach(r=>{const i=n.findIndex(o=>o===r);i!==-1&&n.splice(i,1)}),n.length?n:null},XX=(e,t,n,r)=>{let i=null;return di(e,o=>{if(!Me.isMindElement(e,o)||i)return;const s=Me.getNode(o),u=KX(s,t);u&&(i=UX(e,s,u)),n=null;const c=r.every(h=>YX(h,s.origin));i&&c&&(n={target:s.origin,detectResult:i[0]})},nh(e)),n},KX=(e,t)=>{const{x:n,y:r,width:i,height:o}=tr(e),s=r+o/2,u=n+i/2,c=e.y,h=e.y+e.height,d=e.x,g=e.x+e.width,v=[];return t[1]>r&&t[1]<r+o?(t[0]>d&&t[0]<u&&v.push("left"),t[0]>u&&t[0]<g&&v.push("right"),(t[0]>n&&t[0]<u||t[0]>u&&t[0]<n+i)&&(t[1]<s?v.push("top"):v.push("bottom")),v.length?v:null):t[0]>n&&t[0]<n+i?(t[1]>c&&t[1]<s&&v.push("top"),t[1]>s&&t[1]<h&&v.push("bottom"),(t[1]>r&&t[1]<r+o||t[1]>s&&t[1]<r+o)&&(t[0]<u?v.push("left"):v.push("right")),v.length?v:null):null},YX=(e,t)=>e!==t&&!zD(e,t),qX=(e,t)=>{let n=I.findPath(e,t==null?void 0:t.target);const r=qt.isMind(t==null?void 0:t.target)?gc(t==null?void 0:t.target):Eo.getCorrectLayoutByElement(e,Me.getParent(t==null?void 0:t.target)),i=Tc(t.target);return J6(r)&&((t.detectResult==="top"||t.detectResult==="bottom")&&n.push(i.length),t.detectResult==="right"&&(n=wt.next(n))),rp(r)&&(t.detectResult==="right"&&(qt.isMind(t==null?void 0:t.target)&&xo(r)?n.push(t==null?void 0:t.target.rightNodeCount):n.push(i.length)),t.detectResult==="left"&&n.push(i.length),t.detectResult==="bottom"&&(n=wt.next(n))),Ya(r)&&(rc(r)&&t.detectResult==="top"&&(n=wt.next(n)),KU(r)&&t.detectResult==="bottom"&&(n=wt.next(n)),ip(r)&&t.detectResult==="left"&&n.push(i.length),B3(r)&&t.detectResult==="right"&&n.push(i.length)),n};function ZX(e,t){const n=tr(t);return Q8(e,n,t.origin)}function Q8(e,t,n){const r=jD(e,n),i=V8(e,n),o=Op(e,n),s=Sv(e,n),u=xc(s,o),c=M.inflate(t,-o);return R0(I.getRoughSVG(e),c.x,c.y,c.x+c.width,c.y+c.height,{stroke:i,strokeWidth:o,fill:r,fillStyle:"solid",strokeLineDash:u},!1,Pv.shape.rectangleRadius)}var Gn;(function(e){e.left="left",e.center="center",e.right="right"})(Gn||(Gn={}));var Tn;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(Tn||(Tn={}));const go=(e,t)=>{let n=e.x,r=e.y;return t[0]===Gn.center&&(n=e.x+e.width/2),t[0]===Gn.right&&(n=e.x+e.width),t[1]===Tn.middle&&(r=e.y+e.height/2),t[1]===Tn.bottom&&(r=e.y+e.height),[n,r]},ic=(e,t)=>t?e.left?tn.left:tn.right:e.up?tn.top:tn.bottom,jo=(e,t)=>{if(t===tn.left&&(e[0]===Gn.right?e[0]=Gn.left:e[0]===Gn.left&&(e[0]=Gn.right)),t===tn.bottom||t===tn.top){let n=Gn.center,r=Tn.middle;e[1]===Tn.top&&(n=Gn.left),e[1]===Tn.bottom&&(n=Gn.right),e[0]===Gn.left&&(r=Tn.top),e[0]===Gn.right&&(r=Tn.bottom),e[0]=n,e[1]=r}t===tn.top&&(e[1]===Tn.bottom?e[1]=Tn.top:e[1]===Tn.top&&(e[1]=Tn.bottom))};function QX(e,t,n,r=!0,i=null,o,s){const u=W8(e,t.origin),c=o||ND(e,n.origin),h=i||$8(e,n.origin),d=Sv(e,n.origin),g=sp(e,n.origin)===Ju.underline;let v,y,x,E,T=t,D=n;const S=tr(T),R=tr(D);v=T.x+T.width/2,y=bx(t,n)?S.y:S.y+S.height,x=t.left?D.x+D.hGap+R.width:D.x+D.hGap,E=g?D.y+D.height-D.vGap:D.y+D.height/2;let L=bx(t,n)?t.left?[-1,-1]:[1,-1]:t.left?[-1,1]:[1,1],k=[[v,y],[v,y],[v,y],[v,E-D.hGap*3*L[1]/5],[v,E-D.hGap*L[1]/5],[v+D.hGap*L[0]/4,E],[v+D.hGap*L[0]*3/5,E],g&&r?[x+(D.width-D.hGap*2)*L[0],E]:[x,E],g&&r?[x+(D.width-D.hGap*2)*L[0],E]:[x,E],g&&r?[x+(D.width-D.hGap*2)*L[0],E]:[x,E]];const W=xc(d,c);if(u===Jf.polyline){const Y=[[v,y],[v,E],[x,E],g&&r?[x+(D.width-D.hGap*2)*L[0],E]:[x,E]];return Ds(Y,{stroke:h,strokeWidth:c,strokeLineDash:W})}const z=Co(k,.001);return VO(z,{stroke:h,strokeWidth:c})}function JX(e,t,n,r,i=null,o,s){const u=W8(e,t.origin),c=i||$8(e,n.origin),h=o||ND(e,n.origin),d=Sv(e,n.origin),g=u===Jf.polyline?!0:!t.origin.isRoot,v=sp(e,t.origin),x=sp(e,n.origin)===Ju.underline,E=v===Ju.underline,T=tr(n),D=tr(t),S=ic(n,r),R=[Gn.right,Tn.middle],L=[Gn.left,Tn.middle];jo(R,S),jo(L,S),r&&E&&!t.origin.isRoot&&(R[1]=Tn.bottom),r&&x&&(L[1]=Tn.bottom);let k=go(D,R),W=go(T,L);const Y=g?Yn(k,8,S):k;let te=g?[k,Y,Y]:[];const se=(t.hGap+n.hGap)/3,me=-(t.hGap+n.hGap)/2.4;let ne=[Y,Yn(Y,se,S),Yn(W,me,S),W];const oe=Yn(W,T.width,S),ve=x&&r?[oe,oe,oe]:[],ge=Co([...te,...ne,...ve]),Be=xc(d,h);let Pe;if(u===Jf.polyline){const ue=Yn(Y,8,S),we=[...te,ue,r?[ue[0],W[1]]:[W[0],ue[1]],W,...ve];Pe=Ds(we,{stroke:c,strokeWidth:h,strokeLineDash:Be})}else Pe=I.getRoughSVG(e).curve(ge,{stroke:c,strokeWidth:h,strokeLineDash:Be});return d===Ss.dotted&&Wt(Pe,"round"),Pe}function tA(e,t,n,r,i,o,s,u){return Me.isIndentedLayout(t.origin)?QX(e,t,n,i,o,s):JX(e,t,n,r,o,s)}const eK="foreign-object-emoji";class tK{constructor(t){this.board=t,this.emojiComponentRef=null}draw(t,n,r){this.destroy();const i={board:this.board,emojiItem:n,element:r,fontSize:MD(r)};this.emojiComponentRef=this.board.renderEmoji(t,i)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const Cy=class Cy{constructor(t){this.board=t,this.emojiGenerators=[]}drawEmojis(t){if(this.destroy(),Me.hasEmojis(t)){this.g=Lt(),this.g.classList.add("emojis");const n=XD(this.board,t),r=L4(n.x,n.y,n.width,n.height);r.classList.add(eK),this.g.append(r);const i=document.createElement("div");return i.classList.add("node-emojis-container"),r.append(i),this.emojiGenerators=t.data.emojis.map(o=>{const s=new tK(this.board);return s.draw(i,o,t),s}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(t=>t.destroy()),this.emojiGenerators=[]}};Cy.key="node-emojis-generator";let up=Cy;const nK=(e,t,n,r)=>{const i=yn.getElementRef(t),o=Me.getNode(t),s=Lt();s.classList.add("dragging","fake-node","plait-board-attached");const u={...o,x:o.x+n,y:o.y+r},c=KD(e,o),h=ZX(e,u),d=oh(t).g.cloneNode(!0);if(Pg(d,c.width,c.height,c.x+n,c.y+r),s==null||s.append(h),s==null||s.append(d),Me.hasEmojis(t)){const v=i.getGenerator(up.key).g.cloneNode(!0),y=XD(e,t);Pg(v,y.width,y.height,y.x+n,y.y+r),s==null||s.append(v)}if(Me.hasImage(t)){const v=i.getGenerator(qu.key).g.cloneNode(!0),y=Av(e,t);Pg(v,y.width,y.height,y.x+n,y.y+r),s==null||s.append(v)}return s},rK=(e,t,n)=>{const r=t.target,i=Lt(),o=Xt.get(e,wt.parent(n)),s=Eo.getLayoutByElement(o),u=ci(s),{hasNextNode:c,hasPreviousNode:h}=VX(o,t,n),d=30,g=12;let v,y,x,E;if(!h&&!c){const Y=Me.getNode(o),te=tr(Y);E=ic(Y,u),x=Y,qt.isMind(r)&&xo(s)&&(t.detectResult==="left"?(E=tn.left,x.left=!0):(E=tn.right,x.left=!1));const se=[Gn.right,Tn.middle];jo(se,E);const me=go(te,se);if(Ya(s)){const ne=[Gn.center,rc(s)?Tn.top:Tn.bottom],oe=go(te,ne);y=Yn(oe,g,E),y[1]=rc(s)?y[1]-g:y[1]+g}else y=Yn(me,d,E)}else if(!h&&c){const Y=Xt.get(e,n);x=Me.getNode(Y);const te=tr(x);E=ic(x,u);const se=[Gn.left,Tn.top];jo(se,E);let me=-12;Me.isIndentedLayout(o)&&(me=rc(s)?me/2+x.height-x.vGap:0),y=go(te,se),y=ym(y,me,E)}else if(h&&!c){const Y=Xt.get(e,wt.previous(n));x=Me.getNode(Y);const te=tr(x);E=ic(x,u);const se=[Gn.left,Tn.bottom];jo(se,E);let me=g;Me.isIndentedLayout(o)&&(me=rc(s)?-me-(x.height-x.vGap):me),y=go(te,se),y=ym(y,me,E)}else{const Y=Xt.get(e,wt.previous(n));x=Me.getNode(Y);const te=tr(x),se=Xt.get(e,n),me=Me.getNode(se),ne=tr(me),oe=[Gn.left,Tn.bottom],ve=[Gn.left,Tn.top];E=ic(x,u),jo(oe,E),jo(ve,E);const ge=go(te,oe),Be=go(ne,ve);y=[(ge[0]+Be[0])/2,(ge[1]+Be[1])/2]}let T=y,D=y;const S=u?g:d,R=u?d:g;T=ym(T,-S/2,E),D=ym(D,S/2,E),D=Yn(D,R,E);const L=Math.min(T[0],D[0]),k=Math.min(T[1],D[1]);v={...x,x:L,y:k,width:d,height:g,hGap:Me.isIndentedLayout(o)?Ur*4+(x.origin.strokeWidth||r4):0,vGap:Me.isIndentedLayout(o)?Ur:0};const W=R0(I.getRoughSVG(e),v.x,v.y,v.x+d,v.y+g,{stroke:l0,strokeWidth:2,fill:l0,fillStyle:"solid"}),z=tA(e,Me.getNode(o),v,u,!1,l0,r4);return i==null||i.appendChild(z),i==null||i.appendChild(W),i};var fi;(function(e){e.start="start",e.end="end"})(fi||(fi={}));var Og;(function(e){e.start="start",e.resizing="resizing",e.end="end"})(Og||(Og={}));function Ix(e,t,n,r,i){const o=Lt(),s=Me.getParent(n),u=Eo.getCorrectLayoutByElement(e,n),c=ci(u),h=s.children.slice(n.start,n.end+1),d=on(e,h,!0),g=Di(e,d);let v=M.getOutlineRectangle(g,-3.5);i&&(v=Cg(v,i,r,c));const y=oK(t,v.x,v.y,v.x+v.width,v.y+v.height,c,{stroke:l0,strokeWidth:1,fillStyle:"solid"}),x=[Gn.center,Tn.top],E=[Gn.center,Tn.bottom],T=ic(Me.getNode(n),c);jo(x,T),jo(E,T);let D=go(v,x),S=go(v,E);const R=Yn(D,-10/2,T),L=Yn(D,Rx/2,T),k=Yn(S,-10/2,T),W=Yn(S,Rx/2,T),z=t.line(R[0],R[1],L[0],L[1],Fx(r===fi.start)),Y=t.line(k[0],k[1],W[0],W[1],Fx(r===fi.end));return iK(e,r,c),Wt(z,"round"),Wt(Y,"round"),o.append(z),o.append(Y),o.append(y),o}function Fx(e){return e?{stroke:l0,strokeWidth:4,fillStyle:"solid"}:{stroke:bX,strokeWidth:3,fillStyle:"solid"}}function iK(e,t,n){t?n?I.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):I.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(I.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),I.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function oK(e,t,n,r,i,o,s){const u=Math.abs(t-r),c=Math.abs(n-i),h=5,v=10+4*2;if(o){const y=(u-v-h*2)/2,x=c-h*2;return e.path(`M${t+h},${n}
            l${y},0
            m${v},0
            l${y},0
            a${h},${h},0,0,1,${h},${h}
            l0,${x}
            a${h},${h},0,0,1,-${h},${h}
            l-${y},0
            m-${v},0
            l-${y},0
            a${h},${h},0,0,1,-${h},-${h}
            l0,-${x}
            a${h},${h},0,0,1,${h},-${h}`,s)}else{const y=(c-v-h*2)/2,x=u-h*2;return e.path(`M${t+h},${n}
            l${x},0
            a${h},${h},0,0,1,${h},${h}
            l0,${y}
            m0,${v}
            l0,${y}
            a${h},${h},0,0,1,-${h},${h}
            l-${x},0
            a${h},${h},0,0,1,-${h},-${h}
            l0,-${y}
            m0,-${v}
            l0,-${y}
            a${h},${h},0,0,1,${h},-${h}`,s)}}const xy=class xy extends Yo{canDraw(t,n){return!!n.selected}draw(t,n){const r=Lt(),i=Me.getNode(t),o=tr(i),s=Di(this.board,o),u=Op(this.board,t),c=dr,h=M.inflate(s,c),d=R0(I.getRoughSVG(this.board),h.x,h.y,h.x+h.width,h.y+h.height,{stroke:l0,strokeWidth:c,fill:""},!0,Pv.shape.rectangleRadius+(c+u)/2);return yt.isAbstract(t)&&(this.abstractOutlineG=Ix(this.board,I.getRoughSVG(this.board),t),r.append(this.abstractOutlineG),d.classList.add("abstract-element")),r.appendChild(d),r.classList.add(vp),r}updateAbstractOutline(t,n,r){const i=Ix(this.board,I.getRoughSVG(this.board),t,n,r);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(i),this.abstractOutlineG=i)}};xy.key="mind-node-active";let pc=xy;const Cg=(e,t,n,r)=>r?n===fi.start?{...e,y:t,height:e.height+e.y-t}:{...e,height:t-e.y}:n===fi.start?{...e,x:t,width:e.width+e.x-t}:{...e,width:t-e.x},sK=(e,t,n,r,i,o)=>{const s=Me.getNode(r),{start:u,end:c}=sc(s.origin,i),h=n[u],d=n[c];if(t===fi.start){const g=n.filter(E=>yt.isAbstract(E)&&E.end<r.start);let v;if(g.length){const E=g.map(T=>{const{end:D}=sc(T,i);return D}).sort((T,D)=>D-T)[0];v=n[E+1]}else v=n[0];const y=on(e,[v],!0),x=on(e,[d],!1);return o?{max:x.y-Yl,min:y.y-Yl}:{max:x.x-Yl,min:y.x-Yl}}else{const g=n.filter(E=>yt.isAbstract(E)&&E.start>r.end);let v;if(g.length){const E=g.map(T=>{const{start:D}=sc(T,i);return D}).sort((T,D)=>T-D)[0];v=n[E-1]}else{const E=n.filter(T=>!yt.isAbstract(T));v=n[E.length-1]}const y=on(e,[v],!0),x=on(e,[h],!1);return o?{max:y.y+y.height+Yl,min:x.y+x.height+Yl}:{max:y.x+y.width+Yl,min:x.x+x.width+Yl}}},nA=(e,t,n)=>{const r=Eo.getCorrectLayoutByElement(e,t),i=ci(r),s=Me.getParent(t).children.slice(t.start,t.end+1);let u=on(e,s,!0);u=M.getOutlineRectangle(u,-3.5);const c=Lx(u,i,fi.start),h=Lx(u,i,fi.end),d=M.getRectangleByPoints([n,n]);if(M.isHit(d,c))return fi.start;if(M.isHit(d,h))return fi.end},Lx=(e,t,n)=>{let r;if(n===fi.start){const i=t?e.y:e.x;r=Cg(e,i+Tm/2,fi.end,t),r=Cg(r,i-Tm/2,n,t)}else{const i=t?e.y+e.height:e.x+e.width;r=Cg(e,i-Tm/2,fi.start,t),r=Cg(r,i+Tm/2,n,t)}return r};function aK(e,t,n,r){const i=t.filter(d=>!yt.isAbstract(d)),o=i.map(d=>on(e,[d],!1)),s=on(e,[i[0]],!0),u={x:s.x-s.width,y:s.y-s.height,width:s.width,height:s.height},c=on(e,[i[i.length-1]],!0),h={x:c.x+c.width,y:c.y+c.height,width:c.width,height:c.height};o.push(h),o.unshift(u);for(let d=0;d<o.length-1;d++){const g=r?o[d].y:o[d].x,v=r?o[d].height:o[d].width;if(n>=g+v/2&&n<=o[d+1][r?"y":"x"]+o[d+1][r?"height":"width"]/2)return d-1}return 0}function uK(e,t,n){let r;const i=Qe(e).filter(o=>yt.isAbstract(o)).find(o=>(r=nA(e,o,n),r));return t===i||(t&&(yn.getElementRef(t).getGenerator(pc.key).updateAbstractOutline(t),t=void 0),i&&(t=i,yn.getElementRef(t).getGenerator(pc.key).updateAbstractOutline(t,r))),t}const rA=e=>{const t=Me.findParent(e);if(t){const n=t.children.findIndex(r=>r.id===e.id);if(t.isRoot&&gc(t)===Je.standard&&t.rightNodeCount&&n<=t.rightNodeCount-1)return!0}return!1},iA=(e,t,n,r=[])=>{let i=r.findIndex(s=>wt.equals(s.path,t));const o=Xt.get(e,t);return i===-1?r.push({path:t,rightNodeCount:o.rightNodeCount+n}):r[i].rightNodeCount+=n,r},oA=(e,t,n=[])=>(t.forEach(r=>{if(rA(r)){const i=Me.getParent(r),o=I.findPath(e,i);let s=n.findIndex(u=>wt.equals(u.path,o));s===-1?n.push({path:o,rightNodeCount:i.rightNodeCount-1}):n[s].rightNodeCount-=1}}),n);function J8(e,t){const n=Tc(t);return I.findPath(e,t).concat(n.length)}function lK(e,t){const n=I.findPath(e,t);return K.next(n)}const ey=(e,t)=>{const n=Me.getAncestors(e,t);n.unshift(t);const r=n[n.length-1];let i=gc(r);if(qt.isMind(t))return i;const o=Me.getNode(t);let s=i;i===Je.standard&&(s=o.left?Je.left:Je.right);let u=null;const c=n.find(h=>h.layout||yt.isAbstract(h));if(c)if(yt.isAbstract(c)){const h=Me.getParent(c),d=ey(e,h);u=j8(d)}else u=c==null?void 0:c.layout;if(u===Je.standard||!u)return s;{const h=DX(s,u);return h?AX(u,h):u}},sA=(e,t)=>{const n=[];t.layout&&n.unshift(ey(e,t));let r=Me.findParent(t);for(;r;)r.layout&&n.unshift(r.layout),r=Me.findParent(r);return n},cK=(e,t)=>{const n=Me.findParent(t);if(n){const r=sA(e,n);if(r[0]===Je.standard){const h=Me.getNode(t);r[0]=h.left?Je.left:Je.right}const i=Ax(r);let o=Bx(i);const s=[r[r.length-1]],u=Ax(s),c=Bx(u);return o=o.filter(h=>c.some(d=>d===h)),o}},s4=e=>{const t=e.layout;if(t)return t;const n=!qt.isMind(e)&&Me.getParent(e);return yt.isAbstract(e)&&n?j8(s4(n)):n?s4(n):X8()},Eo={getAvailableSubLayoutsByElement:cK,getBranchLayouts:sA,getLayoutByElement:s4,getCorrectLayoutByElement:ey},qt={isMind:e=>e.type==="mindmap"},Me={hasLayout(e,t){return Eo.getLayoutByElement(e)===t},isIndentedLayout(e){const t=Eo.getLayoutByElement(e);return Ya(t)},isMindElement(e,t){return!!(t.data&&t.data.topic&&!Xo(t.width)&&!Xo(t.height))},getParent(e){if(qt.isMind(e))throw new Error("mind root node can not get parent");return Nf.get(e)},findParent(e){return qt.isMind(e)?void 0:Nf.get(e)},getRoot(e,t){const n=I.findPath(e,t);return Xt.get(e,n.slice(0,1))},getAncestors(e,t){const n=I.findPath(e,t),r=[];for(const i of wt.ancestors(n,{reverse:!0})){const o=Xt.get(e,i);o&&!I.isBoard(o)&&r.push(o)}return r},getNode(e){const t=M3.get(e);if(!t)throw new Error(`can not get node from ${JSON.stringify(e)}`);return t},findParentNode(e){if(qt.isMind(e))return;const t=Me.getParent(e);return Me.getNode(t)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var Ju;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(Ju||(Ju={}));var Jf;(function(e){e.bight="bight",e.polyline="polyline"})(Jf||(Jf={}));function fK(e,t,n){const i=SX(e,t.origin),o=HD(e,t.origin),s=Sv(e,t.origin),u=t.parent,c=W8(e,t.origin),h=tr(t);let d=u.children.slice(t.origin.start,t.origin.end+1).map(te=>te.origin);const g=on(e,d,!0),v=ic(t,n),y=[Gn.right,Tn.top],x=[Gn.right,Tn.bottom],E=[Gn.left,Tn.middle];jo(y,v),jo(x,v),jo(E,v);let T=go(g,y),D=go(g,x),S=go(h,E),R=iT(S,T,n)-15*2;T=Yn(T,15,v);let L=Yn(T,R,v);D=Yn(D,15,v);let k=Yn(D,R,v),W=Yn(S,-15,v);const z=xc(s,i);if(c===Jf.polyline){const te=Lt(),se=Ds([T,L,W,k,D],{stroke:o,strokeWidth:i}),me=Ds([S,W],{stroke:o,strokeWidth:i,strokeLineDash:z});return te.appendChild(se),te.appendChild(me),te}return I.getRoughSVG(e).path(`M${T[0]},${T[1]} Q${L[0]},${L[1]} ${W[0]},${W[1]} Q${k[0]},${k[1]} ${D[0]},${D[1]} M${S[0]},${S[1]} L${W[0]},${W[1]}`,{stroke:o,strokeWidth:i,strokeLineDash:z})}const aA=(e,t)=>{t.forEach((n,r)=>{const i=r.start+n.start,o=r.end+n.end,s=I.findPath(e,r);i>o?Xe.removeNode(e,s):Xe.setNode(e,{start:i,end:o},s)})},uA=(e,t)=>{const n=t.rightNodeCount,r=t.children.find(i=>yt.isAbstract(i)&&i.end>=n&&i.start<n);if(r){const i=I.findPath(e,r);Xe.setNode(e,{end:n-1},i)}},hK=(e,t)=>{let n=kg(t);const{parentElements:r,abstractIncludedGroups:i}=_X(n);i.forEach((o,s)=>{const u=r[s];dK(e,u,o)})},dK=(e,t,n)=>{const r=n.map(u=>t.children.indexOf(u)).sort((u,c)=>u-c),i=t==null?void 0:t.rightNodeCount,o=r[0],s=r[r.length-1];if(xo(Eo.getLayoutByElement(t))&&i&&o<i&&s>=i){const u=t.children.length,c=[...I.findPath(e,t),u],h=r.filter(g=>g>=i),d=r.filter(g=>g<i);I5(e,c,d[0],d[d.length-1]),I5(e,wt.next(c),h[0],h[h.length-1])}else{const u=[...I.findPath(e,t),t.children.length];I5(e,u,o,s)}},I5=(e,t,n,r)=>{const i=FX(e),{width:o,height:s}=Tv(e,!1,!1,eu(i)),u=Dv(i,o,s,{strokeWidth:P0.branch.width,branchWidth:P0.branch.width});u.start=n,u.end=r,Xe.insertNode(e,u,t),B0(e),rh(e,u)},ty=(e,t,n,r)=>{const i=kn.getNodeTopicMinWidth(e,t),o=n<i?i:n;return{width:Math.ceil(o),height:r}},gK=(e,t,n,r,i)=>{const o={data:{...t.data,topic:n},...ty(e,t,r,i)},s=I.findPath(e,t);Xe.setNode(e,o,s)},pK=(e,t,n,r)=>{const i=I.findPath(e,t),{width:o,height:s}=ty(e,t,n,r),u={manualWidth:o,height:s};Xe.setNode(e,u,i)},mK=(e,t,n,r)=>{const i={...ty(e,t,n,r)};let o=Math.ceil(t.width)===Math.ceil(i.width),s=Math.ceil(t.height)===Math.ceil(i.height);if(t.manualWidth&&(o=!0),!o||!s){const u=I.findPath(e,t);Xe.setNode(e,i,u)}},lA=(e,t,n)=>{const r=e.pathRef(n);t.forEach(i=>{r.current&&Xe.insertNode(e,i,r.current)}),r.unref()},vK=(e,t,n,r)=>{var u;const i=Xt.get(e,K.parent(r)),o=[...K.parent(r),(u=i.children)==null?void 0:u.length],s=t.map(c=>{const{start:h,end:d}=ID(c,n);return{...c.abstract,start:h+r[r.length-1],end:d+r[r.length-1]}});lA(e,s,o)},cA=(e,t)=>{t.forEach(n=>{Xe.setNode(e,{rightNodeCount:n.rightNodeCount},n.path)})},yK=(e,t)=>{if(Me.isMindElement(e,t)){tv(e,t);const n=I.findPath(e,t);if(t.isCollapsed){const r={isCollapsed:!1};vs.withoutSaving(e,()=>{Xe.setNode(e,r,n)})}q8(e,t,J8(e,t))}},wK=(e,t)=>{if(Me.isMindElement(e,t)&&!qt.isMind(t)&&!yt.isAbstract(t)){const n=I.findPath(e,t);if(rA(t)){const i=iA(e,n.slice(0,1),1);cA(e,i)}const r=FD(e,K.next(n));aA(e,r),q8(e,t,lK(e,t))}},CK=(e,t)=>{Xe.insertNode(e,t,[e.children.length]),Xe.addSelectionWithTemporaryElements(e,[t])},xK=(e,t,n)=>{const i=[...t.data.emojis||[]];i.push(n);const o={data:{...t.data,emojis:i}},s=I.findPath(e,t);Xe.setNode(e,o,s)},EK=(e,t,n)=>{const r=t.data.emojis.filter(s=>s!==n),i={data:{topic:t.data.topic}};Me.hasImage(t)&&(i.data.image=t.data.image),r.length>0&&(i.data.emojis=r);const o=I.findPath(e,t);Xe.setNode(e,i,o)},PK=(e,t,n,r)=>{const i={data:{...t.data}},o=t.data.emojis.map(u=>u===n?r:u);i.data.emojis=o;const s=I.findPath(e,t);Xe.setNode(e,i,s)},SK=(e,t)=>{Vm(e,t);const n={data:{...t.data}};delete n.data.image;const r=I.findPath(e,t),i=kn.getNodeNewDynamicWidth(e,t,0),o=ZD(e,t,i);o&&(n.height=o),Xe.setNode(e,n,r)},TK=(e,t,n)=>{const r={data:{...t.data,image:n}},i=kn.getNodeNewDynamicWidth(e,t,n.width),o=ZD(e,t,i);o&&(r.height=o);const s=I.findPath(e,t);Xe.setNode(e,r,s)},fA=(e,t,n)=>{var i;const r=Xt.get(e,n);r&&t&&((i=r.children)==null||i.forEach((o,s)=>{var u;o.layout&&((rp(t)&&J6(o.layout)||J6(t)&&rp(o.layout))&&Xe.setNode(e,{layout:null},[...n,s]),(u=o.children)!=null&&u.length&&fA(e,t,[...n,s]))}))},DK=(e,t)=>{const n=(r,i)=>{if(Me.isMindElement(e,r)){fA(e,t,i);const o=Xt.get(e,i);if(qt.isMind(o)&&xo(t)){let s={rightNodeCount:o.children.length/2};Xe.setNode(e,s,i),uA(e,o)}Xe.setNode(e,{layout:t},i)}};tu.setProperty(e,{},{callback:n})},AK=(e,t)=>{tu.setProperty(e,{shape:t})},BK=(e,t)=>{tu.setProperty(e,{branchShape:t})},RK=(e,t)=>{tu.setProperty(e,{branchWidth:t})},MK=(e,t)=>{tu.setProperty(e,{branchColor:t})},Sr={setLayout:DK,setShape:AK,setBranchShape:BK,setBranchWidth:RK,setBranchColor:MK,setTopic:gK,setTopicSize:mK,setNodeManualWidth:pK,addEmoji:xK,removeEmoji:EK,replaceEmoji:PK,insertAbstract:hK,setAbstractsByRefs:aA,setAbstractByStandardLayout:uA,insertNodes:lA,insertAbstractNodes:vK,setRightNodeCountByRefs:cA,removeImage:SK,setImage:TK,insertChildNode:yK,insertSiblingNode:wK,insertMind:CK};class bK extends Yo{constructor(t){super(t,{prepend:!0})}canDraw(t,n){return sp(this.board,t)===Ju.roundRectangle}draw(t,n){const r=tr(n.node);return Q8(this.board,r,n.node.origin)}}const Ey=class Ey extends Yo{canDraw(t,n){return!!((n!=null&&n.isHovered||n!=null&&n.isHoveredCollapseArea||n!=null&&n.isHoveredAddArea)&&a4(this.board)||n!=null&&n.isSelected&&OK(this.board,t)&&a4(this.board)||t.isCollapsed)}draw(t,n){const r=Lt(),i=$8(this.board,t),o=dA(this.board,t),s=gA(this.board,t,o),u=Yn(s[1],Ha/2,o),c=t.children.length>0,h=!t.isCollapsed&&(Hf(this.board,t)||!!(n!=null&&n.isHovered)||!!(n!=null&&n.isHoveredCollapseArea)||!!(n!=null&&n.isHoveredAddArea)),d=h&&c&&!qt.isMind(t),g=h&&!I.isReadonly(this.board),v=h&&hA(t,u,o)||null;return this.toggleCollapseOrAdd(u,v,i,r,d,g,!!(n!=null&&n.isHoveredAddArea),!!(n!=null&&n.isShowCollapseAnimation),!!(n!=null&&n.isShowAddAnimation)),this.toggleExpandBadge(t,s,u,i,r,!!t.isCollapsed,!!(n!=null&&n.isHoveredExpandArea)),r}toggleCollapseOrAdd(t,n,r,i,o,s,u,c,h){var d;if((d=this.collapseOrAddG)==null||d.remove(),!(!o&&!s)){if(this.collapseOrAddG=Lt(),o){const g=Lt();this.collapseOrAddG.appendChild(g),g.classList.add("collapse-button"),c&&g.classList.add("animated");const v=I.getRoughSVG(this.board).circle(t[0],t[1],Ha,{fill:"#fff",stroke:r,strokeWidth:Af,fillStyle:"solid"}),y=Yn(t,-10/2),x=Yn(t,pg/2),E=I.getRoughSVG(this.board).line(y[0],y[1],x[0],x[1],{fill:"#fff",stroke:r,strokeWidth:Af,fillStyle:"solid"});g.appendChild(v),g.appendChild(E),Wt(E,"round")}if(s&&n){const g=Lt();this.collapseOrAddG.appendChild(g),g.classList.add("add-button"),h&&g.classList.add("animated");const v=I.getRoughSVG(this.board).circle(n[0],n[1],Ha+Af,{fill:u?xX:CX,stroke:H6,fillStyle:"solid"}),y=[n[0]-pg/2,n[1]],x=[n[0]+pg/2,n[1]],E=[n[0],n[1]-pg/2],T=[n[0],n[1]+pg/2],D=I.getRoughSVG(this.board).line(y[0],y[1],x[0],x[1],{stroke:Dx,strokeWidth:Af});Wt(D,"round");const S=I.getRoughSVG(this.board).line(E[0],E[1],T[0],T[1],{stroke:Dx,strokeWidth:Af});Wt(S,"round"),g.appendChild(v),g.appendChild(D),g.appendChild(S)}i.appendChild(this.collapseOrAddG)}}toggleExpandBadge(t,n,r,i,o,s,u){var S;if((S=this.expandG)==null||S.remove(),!s)return;this.expandG=Lt(),this.expandG.classList.add("expanded-button");const c=n[1],h=I.getRoughSVG(this.board).line(n[0][0],n[0][1],c[0],c[1],{fill:i,stroke:i,fillStyle:"solid",strokeWidth:Af}),d=u?Hg(i,.4):Hg(i,.2),g=I.getRoughSVG(this.board).circle(r[0],r[1],Ha+Af,{fill:d,stroke:H6,fillStyle:"solid"}),v=WD(t);let y=`${v}`,x=r[1]+4.5;v>=99&&(y="...",x=r[1]+1);const{width:E,height:T}=Sp(this.board,eu(y),{fontSize:Number(C3.fontSize12),fontFamily:a0}),D=SO(r[0]-E/2,x,i,`${y}`);D.setAttribute("style",`font-size: ${Number(C3.fontSize12)}px;`),this.expandG.appendChild(h),this.expandG.appendChild(g),this.expandG.appendChild(D),o.appendChild(this.expandG)}};Ey.key="mind-node-more";let lp=Ey;const kK=(e,t)=>{const n=dA(e,t),[r,i]=gA(e,t,n),o=Yn(i,Ha/2,n),s=hA(t,o,n);return{collapseCenter:o,addCenter:s}},hA=(e,t,n)=>{var i;let r=t;return((i=e.children)==null?void 0:i.length)>0&&!qt.isMind(e)&&(r=Yn(r,RD+Ha,n)),r},dA=(e,t)=>{const n=Me.getNode(t),r=Eo.getLayoutByElement(t),i=ci(r);let o=ic(n,i);return Ya(r)&&(o=rc(r)?tn.top:tn.bottom),o},gA=(e,t,n)=>{const r=Me.getNode(t),i=sp(e,t)===Ju.underline,o=tr(r);let s=[Gn.right,Tn.middle];jo(s,n);const u=Eo.getLayoutByElement(t);ci(u)&&i&&!t.isRoot&&(s[1]=Tn.bottom);let h=go(o,s);const d=Yn(h,RD,n);return[h,d]},OK=(e,t)=>{const r=Qe(e).filter(i=>Me.isMindElement(e,i)).reverse();return r[r.length-1]===t},a4=e=>!Gu(e)&&!gi(e)&&!cc(e)&&!fc(e);class pA extends Ec{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(t,n)=>n.origin.id}initializeGenerator(){this.nodeShapeGenerator=new bK(this.board),this.nodeEmojisGenerator=new up(this.board),this.activeGenerator=new pc(this.board),this.nodeMoreGenerator=new lp(this.board),this.imageGenerator=new qu(this.board,{getRectangle:r=>Av(this.board,r),getImageItem:r=>r.data.image});const t=(this.board.getPluginOptions(N6)||{}).textPlugins,n=new Tp(this.board,{getRectangle:()=>KD(this.board,this.node),onChange:r=>{const i=r.width,o=r.height;r.newText?Sr.setTopic(this.board,this.element,r.newText,i,o):Sr.setTopicSize(this.board,this.element,i,o)},getMaxWidth:()=>this.element.manualWidth?kn.getNodeDynamicWidth(this.board,this.element):Math.max(kn.getNodeDynamicWidth(this.board,this.element),MX.defaultTextMaxWidth),textPlugins:t||[]});this.getRef().addGenerator(pc.key,this.activeGenerator),this.getRef().addGenerator(up.key,this.nodeEmojisGenerator),this.getRef().addGenerator(qu.key,this.imageGenerator),this.getRef().addGenerator(lp.key,this.nodeMoreGenerator),this.getRef().initializeTextManage(n),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=Me.getNode(this.element),this.index=i0.get(this.element)||0,this.roughSVG=I.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG()),this.drawEmojis(),this.imageGenerator.processDrawing(this.element,this.getElementG()),qt.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(t,n){const r=Me.getNode(t.element),i=M.isEqual(this.node,r);if(this.node=r,!i||t.element!==n.element||t.hasThemeChanged)this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),!Me.hasImage(n.element)&&Me.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),Me.hasImage(n.element)&&Me.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),Me.hasImage(n.element)&&!Me.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const o=t.selected===n.selected,s=t.parent===n.parent;(!o||t.selected)&&(this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected})),s||this.drawLink()}}drawEmojis(){const t=this.nodeEmojisGenerator.drawEmojis(this.element);t&&this.getElementG().append(t)}drawLink(){if(qt.isMind(this.element))return;const t=Me.getParent(this.element),n=Me.getNode(t);this.linkLineG&&this.linkLineG.remove();const r=Eo.getLayoutByElement(t);yt.isAbstract(this.node.origin)?this.linkLineG=fK(this.board,this.node,ci(r)):this.linkLineG=tA(this.board,n,this.node,ci(r)),this.getElementG().append(this.linkLineG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),M3.get(this.element)===this.node&&M3.delete(this.element),this.getRef().destroyTextManage()}}class IK extends pA{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(t){t.element!==this.element&&this.initialized&&this.updateMindLayout(t.element)}updateMindLayout(t=this.element){const n=t.layout||X8();this.root=aX.layout(t,BX(this.board),n),this.updateMindNodeLocation(t)}updateMindNodeLocation(t){const{x:n,y:r,hGap:i,vGap:o}=this.root,s=n+i,u=r+o;di(this.root,c=>{c.x=c.x-s+t.points[0][0],c.y=c.y-u+t.points[0][1],M3.set(c.origin,c)})}}const FK=5,LK=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=[],o=[],s,u,c,h=null,d;return e.pointerDown=g=>{if(I.isReadonly(e)||I.hasBeenTextEditing(e)||!I.isPointer(e,Zt.selection)||!Va(g)){t(g);return}const v=At(e,Ot(e,g.x,g.y)),y=Qe(e),x=Qa(e,v);if(x&&Me.isMindElement(e,x)&&!qt.isMind(x)&&!yt.isAbstract(x)){const E=y.filter(D=>Me.isMindElement(e,D)&&!D.isRoot&&!yt.isAbstract(D));y.length>0&&y.includes(x)?(i=E,s=v):(i=[x],s=v)}i.length&&(o=kD(e,i)),t(g)},e.pointerMove=g=>{if(!e.options.readonly&&i.length&&s){const v=At(e,Ot(e,g.x,g.y));if(Tt(s[0],s[1],v[0],v[1])<FK)return;Ox(e,!0),c==null||c.remove();const x=At(e,Ot(e,g.x,g.y));h=XX(e,x,h,[...i,...o]),h!=null&&h.target&&(d=qX(e,h),c=rK(e,h,d),I.getHost(e).appendChild(c));const E=v[0]-s[0],T=v[1]-s[1];u==null||u.remove(),u=Lt(),[...i,...o].forEach(D=>{QD(D)}),i.forEach(D=>{const S=nK(e,D,E,T);u==null||u.appendChild(S)}),I.getHost(e).appendChild(u);return}n(g)},e.globalPointerUp=g=>{const v=kg(i);if(!e.options.readonly&&v.length){if(v.push(...o),cc(e)&&v.forEach(y=>{JD(y)}),h){const y=e.pathRef(d),x=wt.hasPrevious(d)&&e.pathRef(wt.previous(d)),E=e.pathRef(I.findPath(e,h.target));let T=OD(e,v);const D=v.filter(se=>!T.some(me=>me.abstract===se)).map(se=>yt.isAbstract(se)?o4(se):se);if(d[d.length-1]!==0){const se=Xt.get(e,wt.previous(d)),me=kp(se);if(me&&me.end!==d[d.length-1]-1){const oe=T.map(ve=>o4(ve.abstract));D.push(...oe),T=[]}}const R=LD(e,v);FD(e,d,D.length,!1,R),Sr.setAbstractsByRefs(e,R);let L=oA(e,v);const k=Xt.get(e,wt.parent(d));eA(k,h)&&E.current&&(L=iA(e,E.current.slice(0,1),D.length,L)),Sr.setRightNodeCountByRefs(e,L),_P.removeElements(e,v);let z=y.current;const Y=wt.parent(y.current||d);if(!z){const se=x&&x.unref();if(se)z=wt.next(se);else{const me=Xt.get(e,Y),ne=Tc(me);z=[...Y,ne.length||0]}}Sr.insertNodes(e,D,z),T.length&&Sr.insertAbstractNodes(e,T,D,z),E.current&&y.current&&wt.isAncestor(E.current,y.current)&&h.target.isCollapsed&&Xe.setNode(e,{isCollapsed:!1},E.current),E.unref(),y.unref();let te=[];di(e,se=>{i.some(ne=>ne.id===se.id)&&te.push(se)}),Xe.addSelectionWithTemporaryElements(e,te)}Ox(e,!1),i=[],u==null||u.remove(),u=void 0,c==null||c.remove(),c=void 0,h=null}r(g)},e},_K=e=>{const t=e,{pointerDown:n,pointerMove:r,pointerUp:i}=e;let o,s,u,c;return e.pointerDown=h=>{if(!Va(h)||I.isReadonly(e)){n(h);return}const d=Qe(e).filter(v=>yt.isAbstract(v)),g=At(e,Ot(e,h.x,h.y));if(o=d.find(v=>(s=nA(e,v,g),s)),o){t!=null&&t.onAbstractResize&&t.onAbstractResize(Og.start);return}n(h)},e.pointerMove=h=>{Qe(e);const d=At(e,Ot(e,h.x,h.y));if(u=uK(e,u,d),s&&o){const g=Eo.getCorrectLayoutByElement(e,o),v=ci(g),y=Me.getParent(o);let x=y.children;const E=Eo.getLayoutByElement(y);if(xo(E)){const te=y.rightNodeCount,{leftChildren:se,rightChildren:me}=PX(y);o.end<te&&(x=me),o.start>=te&&(x=se)}t!=null&&t.onAbstractResize&&t.onAbstractResize(Og.resizing);const T=v?d[1]:d[0],D=Me.getNode(y),S=sK(e,s,x,o,D,v),R=Math.min(S.max,Math.max(S.min,T));let L=aK(e,x,R,v);if(s===fi.start&&L+1===o.start||s===fi.end&&L===o.end)c=void 0;else{if(xo(D.layout)){const te=D.origin.rightNodeCount;o.start>=te&&(L+=te)}c=s===fi.start?{start:L+1}:{end:L}}const z=yn.getElementRef(o).getGenerator(pc.key),Y=Gg(e,[R,R]);z.updateAbstractOutline(o,s,v?Y[1]:Y[0])}r(h)},e.pointerUp=h=>{if(s=void 0,o){if(t!=null&&t.onAbstractResize&&t.onAbstractResize(Og.end),c){const d=I.findPath(e,o);Xe.setNode(e,c,d)}else yn.getElementRef(o).getGenerator(pc.key).updateAbstractOutline(o);o=void 0;return}i(h)},e},NK=e=>{const t=e;return e.setPluginOptions(Ev,{spaceBetweenEmojis:4,emojiPadding:0}),t},HK="m",GK=e=>{const t=e,{keyDown:n,pointerDown:r,pointerMove:i,pointerUp:o}=e;let s=null,u=null;t.pointerDown=h=>{const d=I.isPointer(e,$u.mind);if(!I.isReadonly(e)&&F0(e)&&d){const g=At(e,Ot(e,h.x,h.y)),v=Mx(t,g);Sr.insertMind(e,v),vn.updatePointerType(e,Zt.selection);return}r(h)},t.pointerMove=h=>{if(I.isReadonly(e)){i(h);return}const d=I.isPointer(e,$u.mind);lv(e)&&d?Ua(e,"with-mind-create",()=>{let g=I.getMovingPointInBoard(e);if(g){g=At(t,Ot(e,g[0],g[1])),u=Mx(t,g);const v=GX(t,u),y=Q8(e,v,u),x=YD(t,v,u);if(s)s.textManage.updateRectangle(x),s.nodeG.remove(),s.nodeG=y,s.g.append(y),s.g.append(s.textManage.g);else{const E=new Tp(e,{getRectangle:()=>x});E.draw(u.data.topic),s={g:Lt(),nodeG:y,textManage:E},s.g.classList.add("root"),s.g.setAttribute("plait-mind-temporary","true"),I.getHost(e).append(s.g),s.g.append(s.nodeG,E.g)}}}):c(),i(h)},t.pointerUp=h=>{if(u){Sr.insertMind(e,u),vn.updatePointerType(e,Zt.selection),u=null,c();return}o(h)},e.keyDown=h=>{if(I.isReadonly(e)||Qe(e).length>0){n(h);return}if(h.key===HK&&!I.isPointer(e,$u.mind)){vn.updatePointerType(e,$u.mind),na(e,Gi.drawing),h.preventDefault();return}n(h)};function c(){s&&(s.textManage.destroy(),s.g.remove(),s=null)}return t},jK=e=>{const t=e,{keyDown:n,globalKeyDown:r}=t;return t.keyDown=i=>{const o=Qe(t),s=o.length===1,u=o.length===1&&Me.isMindElement(t,o[0]),c=o[0];if(_j(i)&&u&&!qt.isMind(c)&&c.children&&c.children.length>0){Xe.setNode(t,{isCollapsed:!c.isCollapsed},I.findPath(t,c));return}if(!I.isReadonly(t)){if(Nj(i)&&u){i.preventDefault(),Sr.insertChildNode(t,c);return}if(Hj(i)&&u&&!qt.isMind(c)&&!yt.isAbstract(c)){Sr.insertSiblingNode(t,c);return}if(!d8(i)&&!p8(i)&&!g8(i)&&s&&Me.isMindElement(t,c)){i.preventDefault(),U8(c);return}}n(i)},t.globalKeyDown=i=>{if(I.isFocus(t)&&I.hasBeenTextEditing(t)&&nn.isHotkey("mod+z",i)){const{history:o}=t,{undos:s}=o,u=s.length>0?s[s.length-1][0]:void 0;u&&u.type==="insert_node"&&Me.isMindElement(t,u.node)&&oh(u.node).isEditing&&t.undo()}r(i)},t},$K=e=>{const{pointerMove:t,pointerLeave:n,pointerUp:r}=e;let i=null;e.pointerMove=s=>{a4(e)&&Ua(e,"with-mind-node-hover-hit-test",()=>{i&&!yn.hasMounted(i.target)&&(i=null);const u=_x(e,s.x,s.y);i&&u&&i.target===u.target||(i&&o({target:i.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),u?(o(u),i?i.target=u.target:i=u):i=null)}),t(s)},e.pointerUp=s=>{if(i&&(i.isHoveredCollapseArea||i.isHoveredExpandArea)){const c={isCollapsed:!i.target.isCollapsed},h=I.findPath(e,i.target);Xe.setNode(e,c,h),setTimeout(()=>{const d=_x(e,s.x,s.y);d?(o(d),i=d):i=null},0);return}if(i&&i.isHoveredAddArea&&!I.isReadonly(e)){if(i){const u=J8(e,i.target);q8(e,i.target,u)}return}r(s)};const o=s=>{const u=yn.getElementRef(s.target),c=u==null?void 0:u.getGenerator(lp.key);if(c){const h=yn.getElementG(s.target);c.processDrawing(s.target,h,{isHovered:s.isHovered,isHoveredCollapseArea:s.isHoveredCollapseArea,isHoveredExpandArea:s.isHoveredExpandArea,isSelected:Hf(e,s.target),isHoveredAddArea:s.isHoveredAddArea,isShowCollapseAnimation:(s.isHovered||s.isHoveredCollapseArea)&&!Hf(e,s.target),isShowAddAnimation:(s.isHovered||s.isHoveredAddArea)&&!Hf(e,s.target)})}};return e.pointerLeave=s=>{i&&o({target:i.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),i=null,n(s)},e},_x=(e,t,n)=>{let r=null,i=!1,o=!1,s=!1,u=!1;const c=At(e,Ot(e,t,n));return di(e,h=>{if(r||!Me.isMindElement(e,h))return;const d=qt.isMind(h),g=UD(e,c,h);let v=!1,y=!1;const{collapseCenter:x,addCenter:E}=kK(e,h),T=!d&&M.getRectangleByCenterPoint(x,Ha,Ha);v=T&&M.isHit(M.getRectangleByPoints([c,c]),T);const D=M.getRectangleByCenterPoint(E,Ha,Ha);y=M.isHit(M.getRectangleByPoints([c,c]),D),(g||v||y)&&(i=g,h.children.length>0&&(h.isCollapsed?s=v:o=v),u=y,r=h)},nh(e),!0),r?{target:r,isHovered:i,isHoveredCollapseArea:o,isHoveredExpandArea:s,isHoveredAddArea:u}:null},WK=e=>{const{keyDown:t,pointerUp:n,globalPointerUp:r,buildFragment:i,insertFragment:o,deleteFragment:s,afterChange:u}=e;return e.pointerUp=c=>{const h=fo(e);if(h&&Me.isMindElement(e,h)&&!cO(c)&&(I.isReadonly(e)||!Va(c)||!I.isPointer(e,Zt.selection))){Vm(e,h),n(c);return}if(I.isReadonly(e)){n(c);return}const d=At(e,Ot(e,c.x,c.y)),g=Qa(e,d),v=g&&Me.isMindElement(e,g)&&Me.hasImage(g)&&qD(e,g,d);if(v&&h&&g===h){w6(e),n(c);return}h&&Me.isMindElement(e,h)&&Vm(e,h),v&&g&&(w6(e),zX(e,g)),n(c)},e.keyDown=c=>{const h=fo(e);if(!I.isReadonly(e)&&h&&(Ti.isDeleteBackward(c)||Ti.isDeleteForward(c))){rh(e,h),Sr.removeImage(e,h);return}t(c)},e.globalPointerUp=c=>{if(I.isFocus(e)){const h=c.target instanceof Node&&I.getBoardContainer(e).contains(c.target),d=fo(e);d&&Me.isMindElement(e,d)&&!h&&Vm(e,d)}r(c)},e.buildFragment=(c,h,d,g)=>{const v=fo(e);return v&&(c=TI(Xu.medias,[v.data.image],"")),i(c,h,d,g)},e.deleteFragment=c=>{const h=fo(e);h&&Sr.removeImage(e,h),s(c)},e.insertFragment=(c,h,d)=>{var x,E;const g=Qe(e),v=!!fo(e),y=g.length===1&&Me.isMindElement(e,g[0]);if(v||y){if((x=c==null?void 0:c.files)!=null&&x.length){const T=HS.map(S=>"image/"+S),D=g[0]||fo(e);if(T.includes(c.files[0].type)){const S=c.files[0];ZS(e,S,EX,R=>{Sr.setImage(e,D,R)});return}}if((E=c==null?void 0:c.medias)!=null&&E.length){const T=g[0]||fo(e);Sr.setImage(e,T,c.medias[0]);return}}o(c,h,d)},e.afterChange=()=>{u();const c=fo(e);c&&Me.isMindElement(e,c)&&yn.getElementRef(c).getGenerator(qu.key).setFocus(c,!0)},e},zK=e=>{let t=null;return ah(e,{key:"mind-node",canResize:()=>!0,hitTest:r=>{const i=VK(e,r);return i?{element:i,handle:null,cursorClass:ra.ew}:null},beforeResize:r=>{t={minWidth:kn.getNodeResizableMinWidth(e,r.element),currentWidth:kn.getNodeDynamicWidth(e,r.element),path:I.findPath(e,r.element),textManage:oh(r.element)}},onResize:(r,i)=>{let o=t.currentWidth+mt.getOffsetX(i.startPoint,i.endPoint);o<=t.minWidth&&(o=t.minWidth);const s=Xt.get(e,t.path);if(s&&kn.getNodeTopicMinWidth(e,s)!==o){t.textManage.updateRectangleWidth(o);const{height:u}=t.textManage.getSize(void 0,o);Sr.setNodeManualWidth(e,s,o,u)}},afterResize:r=>{t=null}}),e},VK=(e,t)=>{const n=Qe(e).filter(r=>Me.isMindElement(e,r));if(n.length>0){const r=n.find(i=>{const o=UK(e,i);return yp(t[0],t[1],o)<=0});return r||null}return null},UK=(e,t)=>{const n=Me.getNode(t),r=tr(n);return{x:r.x+r.width-Tx,y:r.y,width:Tx*2,height:r.height}},XK=e=>(ah(e,{key:"mind-node-image",canResize:()=>!0,hitTest:n=>{const r=fo(e),i=r&&Me.isMindElement(e,r)?r:void 0;if(i){const o=jX(e,i,n);if(o)return{element:i,handle:o.handle,cursorClass:o.cursorClass}}return null},onResize:(n,r)=>{const i=mt.getOffsetX(r.startPoint,r.endPoint),o=n.element.data.image.width,s=n.element.data.image.height,u=n.path;let c=o+i;c<=100&&(c=100);const h=o/s,d=c/h,g={...n.element.data.image,width:c,height:d};Sr.setImage(e,Xt.get(e,u),g),QS(e,Xt.get(e,u))}}),e),KK=(e,t,n)=>{let r=[];const i=kD(e,t),o=OD(e,[...t,...i]),s=t.filter(c=>!o.find(h=>h.abstract===c));s.push(...o.map(c=>c.abstract));const u=s.map(c=>Me.getNode(c));return s.forEach((c,h)=>{const d=tr(u[h]),g=[[d.x-n[0],d.y-n[1]]],v=o.find(y=>y.abstract===c);if(yt.isAbstract(c)&&v){const{start:y,end:x}=ID(v,s);r.push({...c,points:g,start:y,end:x})}else if(yt.isAbstract(c)){let y={...c,points:g};delete y.start,delete y.end,r.push(y)}else r.push({...c,points:g})}),r},YK=(e,t,n,r)=>{let i,o;const s=Qe(e);let u=[];const c=s.length===1,h=s[0],d=h&&I.findPath(e,h),g=h&&Tc(h).length;t.forEach((v,y)=>{if(i=VD(v),c&&r!==aa.duplicate){if(v.isRoot){i=$X(e,i);const{width:x,height:E}=Nx(e,i,h);i.width=x,i.height=E}yt.isAbstract(i)&&(i.start=i.start+g,i.end=i.end+g),o=[...d,g+y]}else{const x=[n[0]+v.points[0][0],n[1]+v.points[0][1]];if(i.points=[x],yt.isAbstract(v)&&(i=o4(i)),!v.isRoot){i=WX(e,i);const{width:E,height:T}=Nx(e,i);i.width=E,i.height=T}o=[e.children.length]}u.push(i),Xe.insertNode(e,i,o)}),Xe.addSelectionWithTemporaryElements(e,u)},qK=(e,t,n)=>{const{width:r,height:i}=Tv(e,!1,qt.isMind(t),eu(n)),o=Dv(n,Math.max(r,HX(n)),i,{});Xe.insertNode(e,o,J8(e,t)),Xe.addSelectionWithTemporaryElements(e,[o])},Nx=(e,t,n)=>Tv(e,qt.isMind(t),n&&qt.isMind(n)||!1,t.data.topic,t.manualWidth),ZK=e=>{const t=e;let n;const{getDeletedFragment:r,insertFragment:i,buildFragment:o,deleteFragment:s}=t;return t.getDeletedFragment=u=>{const c=b5(t);if(c.length){n=kg(c).reverse();const h=LD(t,n);Sr.setAbstractsByRefs(t,h);const d=oA(t,c);Sr.setRightNodeCountByRefs(t,d);const g=kg(c);u.push(...g)}return r(u)},t.deleteFragment=u=>{if(s(u),n){const c=QK(t,n);c&&rh(t,c),n=null}},t.buildFragment=(u,c,h,d)=>{const g=b5(t,d),v=kg(g);if(v.length){const y=KK(t,v,c?[c.x,c.y]:[0,0]),E={text:YS(g),type:Xu.elements,elements:y};u=iv(u,E)}return o(u,c,h,d)},t.insertFragment=(u,c,h)=>{var d,g;if((d=u==null?void 0:u.elements)!=null&&d.length){const v=(g=u.elements)==null?void 0:g.filter(y=>Me.isMindElement(t,y));v&&v.length>0&&YK(t,v,c,h)}if(u!=null&&u.text){const v=b5(t);if(v.length===1){qK(t,v[0],eu(u.text));return}}i(u,c,h)},t},QK=(e,t)=>{let n;const r=t[0],i=I.findPath(e,r);let o=i;if(wt.hasPrevious(i)&&(o=wt.previous(i)),yt.isAbstract(r)){const h=Me.getParent(r);t.includes(h.children[r.start])||(n=h.children[r.start])}try{n||(n=Xt.get(e,o))}catch{}const s=t[0],u=Me.findParent(s),c=t.every(h=>Me.findParent(h)===u);return u&&c&&!n&&(n=u),n},JK=e=>{const t=e;return t.renderEmoji=(n,r)=>{throw new Error("No implementation for renderEmoji method.")},t},eY=e=>!(!e.data||!e.data.topic),tY=e=>!(Xo(e.width)||Xo(e.height)),nY=e=>{const t={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=t);else{const n={topic:t};e.data=n}},rY=e=>{Xo(e.width)&&(e.width=56),Xo(e.height)&&(e.width=20)},mA=e=>{const t=e,{drawElement:n,dblClick:r,isRectangleHit:i,isHit:o,getRectangle:s,isMovable:u,isRecursion:c,isAlign:h,isImageBindingAllowed:d,canAddToGroup:g,canSetZIndex:v,isExpanded:y,getOneHitElement:x,normalizeElement:E}=t;return t.normalizeElement=T=>{qt.isMind(T.element)&&di(T.element,D=>{eY(D)||nY(D),tY(D)||rY(D)}),E(T)},t.drawElement=T=>qt.isMind(T.element)?IK:Me.isMindElement(t,T.element)?pA:n(T),t.applyTheme=T=>{const D=T,S=!I.isBoard(T)&&((D==null?void 0:D.branchColor)||(D==null?void 0:D.fill)||(D==null?void 0:D.strokeColor));if(qt.isMind(T)&&S){const R=I.findPath(t,T);Xe.setNode(t,{fill:null,strokeColor:null,branchColor:null},R)}},t.getRectangle=T=>Me.isMindElement(t,T)?(yn.hasMounted(T)||console.error("mind element has not been mounted"),tr(Me.getNode(T))):s(T),t.canAddToGroup=T=>Me.isMindElement(t,T)&&!T.isRoot?!1:g(T),t.canSetZIndex=T=>Me.isMindElement(t,T)&&!T.isRoot?!1:v(T),t.isRecursion=T=>Me.isMindElement(t,T)&&T.isCollapsed?!1:c(T),t.isRectangleHit=(T,D)=>{if(Me.isMindElement(t,T)){const S=tr(Me.getNode(T));return M.isHit(M.getRectangleByPoints([D.anchor,D.focus]),S)}return i(T,D)},t.isHit=(T,D,S)=>{if(Me.isMindElement(t,T)){const R=tr(Me.getNode(T));return M.isHit(M.getRectangleByPoints([D,D]),R)}return o(T,D,S)},t.getOneHitElement=T=>T.every(S=>Me.isMindElement(t,S))?T[0]:x(T),t.isMovable=T=>qt.isMind(T)&&T.isRoot?!0:u(T),t.isImageBindingAllowed=T=>Me.isMindElement(t,T)?!0:d(T),t.isAlign=T=>qt.isMind(T)&&T.isRoot?!0:h(T),t.isExpanded=T=>Me.isMindElement(t,T)&&!qt.isMind(T)?!T.isCollapsed:y(T),t.dblClick=T=>{if(I.isReadonly(t)){r(T);return}const D=At(t,Ot(t,T.x,T.y));t.children.filter(S=>qt.isMind(S)).forEach(S=>{di(S,R=>{!I.hasBeenTextEditing(t)&&UD(t,D,R)&&U8(R)},nh(t))}),!I.hasBeenTextEditing(t)&&r(T)},JK(zK(XK(WK($K(ZK(jK(NK(GK(_K(LK(t)))))))))))};var F5={exports:{}},Hx;function iY(){return Hx||(Hx=1,function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(t,n){t(function(){var r={};r.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},r.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var i=Object.prototype.hasOwnProperty,o;r.FALLBACK_PHONE="UnknownPhone",r.FALLBACK_TABLET="UnknownTablet",r.FALLBACK_MOBILE="UnknownMobile",o="isArray"in Array?Array.isArray:function(g){return Object.prototype.toString.call(g)==="[object Array]"};function s(g,v){return g!=null&&v!=null&&g.toLowerCase()===v.toLowerCase()}function u(g,v){var y,x,E=g.length;if(!E||!v)return!1;for(y=v.toLowerCase(),x=0;x<E;++x)if(y===g[x].toLowerCase())return!0;return!1}function c(g){for(var v in g)i.call(g,v)&&(g[v]=new RegExp(g[v],"i"))}function h(g){return(g||"").substr(0,500)}(function(){var v,y,x,E,T,D,S=r.mobileDetectRules;for(v in S.props)if(i.call(S.props,v)){for(y=S.props[v],o(y)||(y=[y]),T=y.length,E=0;E<T;++E)x=y[E],D=x.indexOf("[VER]"),D>=0&&(x=x.substring(0,D)+"([\\w._\\+]+)"+x.substring(D+5)),y[E]=new RegExp(x,"i");S.props[v]=y}c(S.oss),c(S.phones),c(S.tablets),c(S.uas),c(S.utils),S.oss0={WindowsPhoneOS:S.oss.WindowsPhoneOS,WindowsMobileOS:S.oss.WindowsMobileOS}})(),r.findMatch=function(g,v){for(var y in g)if(i.call(g,y)&&g[y].test(v))return y;return null},r.findMatches=function(g,v){var y=[];for(var x in g)i.call(g,x)&&g[x].test(v)&&y.push(x);return y},r.getVersionStr=function(g,v){var y=r.mobileDetectRules.props,x,E,T,D;if(i.call(y,g)){for(x=y[g],T=x.length,E=0;E<T;++E)if(D=x[E].exec(v),D!==null)return D[1]}return null},r.getVersion=function(g,v){var y=r.getVersionStr(g,v);return y?r.prepareVersionNo(y):NaN},r.prepareVersionNo=function(g){var v;return v=g.split(/[a-z._ \/\-]/i),v.length===1&&(g=v[0]),v.length>1&&(g=v[0]+".",v.shift(),g+=v.join("")),Number(g)},r.isMobileFallback=function(g){return r.detectMobileBrowsers.fullPattern.test(g)||r.detectMobileBrowsers.shortPattern.test(g.substr(0,4))},r.isTabletFallback=function(g){return r.detectMobileBrowsers.tabletPattern.test(g)},r.prepareDetectionCache=function(g,v,y){if(g.mobile===n){var x,E,T;if(E=r.findMatch(r.mobileDetectRules.tablets,v),E){g.mobile=g.tablet=E,g.phone=null;return}if(x=r.findMatch(r.mobileDetectRules.phones,v),x){g.mobile=g.phone=x,g.tablet=null;return}r.isMobileFallback(v)?(T=d.isPhoneSized(y),T===n?(g.mobile=r.FALLBACK_MOBILE,g.tablet=g.phone=null):T?(g.mobile=g.phone=r.FALLBACK_PHONE,g.tablet=null):(g.mobile=g.tablet=r.FALLBACK_TABLET,g.phone=null)):r.isTabletFallback(v)?(g.mobile=g.tablet=r.FALLBACK_TABLET,g.phone=null):g.mobile=g.tablet=g.phone=null}},r.mobileGrade=function(g){var v=g.mobile()!==null;return g.os("iOS")&&g.version("iPad")>=4.3||g.os("iOS")&&g.version("iPhone")>=3.1||g.os("iOS")&&g.version("iPod")>=3.1||g.version("Android")>2.1&&g.is("Webkit")||g.version("Windows Phone OS")>=7||g.is("BlackBerry")&&g.version("BlackBerry")>=6||g.match("Playbook.*Tablet")||g.version("webOS")>=1.4&&g.match("Palm|Pre|Pixi")||g.match("hp.*TouchPad")||g.is("Firefox")&&g.version("Firefox")>=12||g.is("Chrome")&&g.is("AndroidOS")&&g.version("Android")>=4||g.is("Skyfire")&&g.version("Skyfire")>=4.1&&g.is("AndroidOS")&&g.version("Android")>=2.3||g.is("Opera")&&g.version("Opera Mobi")>11&&g.is("AndroidOS")||g.is("MeeGoOS")||g.is("Tizen")||g.is("Dolfin")&&g.version("Bada")>=2||(g.is("UC Browser")||g.is("Dolfin"))&&g.version("Android")>=2.3||g.match("Kindle Fire")||g.is("Kindle")&&g.version("Kindle")>=3||g.is("AndroidOS")&&g.is("NookTablet")||g.version("Chrome")>=11&&!v||g.version("Safari")>=5&&!v||g.version("Firefox")>=4&&!v||g.version("MSIE")>=7&&!v||g.version("Opera")>=10&&!v?"A":g.os("iOS")&&g.version("iPad")<4.3||g.os("iOS")&&g.version("iPhone")<3.1||g.os("iOS")&&g.version("iPod")<3.1||g.is("Blackberry")&&g.version("BlackBerry")>=5&&g.version("BlackBerry")<6||g.version("Opera Mini")>=5&&g.version("Opera Mini")<=6.5&&(g.version("Android")>=2.3||g.is("iOS"))||g.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||g.version("Opera Mobi")>=11&&g.is("SymbianOS")?"B":(g.version("BlackBerry")<5||g.match("MSIEMobile|Windows CE.*Mobile")||g.version("Windows Mobile")<=5.2,"C")},r.detectOS=function(g){return r.findMatch(r.mobileDetectRules.oss0,g)||r.findMatch(r.mobileDetectRules.oss,g)},r.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function d(g,v){this.ua=h(g),this._cache={},this.maxPhoneWidth=v||600}return d.prototype={constructor:d,mobile:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===n&&(this._cache.userAgent=r.findMatch(r.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===n&&(this._cache.userAgents=r.findMatches(r.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===n&&(this._cache.os=r.detectOS(this.ua)),this._cache.os},version:function(g){return r.getVersion(g,this.ua)},versionStr:function(g){return r.getVersionStr(g,this.ua)},is:function(g){return u(this.userAgents(),g)||s(g,this.os())||s(g,this.phone())||s(g,this.tablet())||u(r.findMatches(r.mobileDetectRules.utils,this.ua),g)},match:function(g){return g instanceof RegExp||(g=new RegExp(g,"i")),g.test(this.ua)},isPhoneSized:function(g){return d.isPhoneSized(g||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===n&&(this._cache.grade=r.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?d.isPhoneSized=function(g){return g<0?n:r.getDeviceSmallerSide()<=g}:d.isPhoneSized=function(){},d._impl=r,d.version="1.4.5 2021-03-13",d})})(function(t){if(e.exports)return function(n){e.exports=n()};if(typeof window<"u")return function(n){window.MobileDetect=n()};throw new Error("unknown environment")}())}(F5)),F5.exports}var oY=iY();const sY=vc(oY),Gx=e=>b.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),aY=e=>{const t=e;return e.setPluginOptions(Ev,{emojiPadding:0,spaceBetweenEmojis:4}),t.renderEmoji=(n,r)=>{const i=document.createElement("span");n.appendChild(i);const o=z3.createRoot(i);o.render(b.jsx(Gx,{...r}));let s={...r};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:c=>{s={...s,...c},o.render(b.jsx(Gx,{...s}))}}},t},jx=e=>{const t={src:e.imageItem.url,draggable:!1,width:"100%"};return b.jsx("div",{children:b.jsx("img",{...t,className:Dn("image-origin",{"image-origin--focus":e.isFocus})})})};var cp=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(cp||{});const ny={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},ry={json:"application/json",drawnix:"application/vnd.drawnix+json",...ny},uY={drawnix:1},iy=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),lY=iy?Promise.resolve().then(function(){return pY}):Promise.resolve().then(function(){return xY});async function cY(...e){return(await lY).default(...e)}iy?Promise.resolve().then(function(){return vY}):Promise.resolve().then(function(){return PY});const fY=iy?Promise.resolve().then(function(){return wY}):Promise.resolve().then(function(){return TY});async function hY(...e){return(await fY).default(...e)}const dY=async e=>{const t=await e.getFile();return t.handle=e,t};var gY=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((i,o)=>{t[o]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(s=>{t[o].accept[s]=i.extensions||[]}):t[o].accept["*/*"]=i.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(dY));return e[0].multiple?r:r[0]},pY={__proto__:null,default:gY};function Um(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return Um=function(n){this.s=n,this.n=n.next},Um.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Promise.resolve({value:n,done:!0}):t(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Promise.reject(n):t(r.apply(this.s,arguments))}},new Um(e)}const vA=async(e,t,n=e.name,r)=>{const i=[],o=[];var s,u=!1,c=!1;try{for(var h,d=function(g){var v,y,x,E=2;for(typeof Symbol<"u"&&(y=Symbol.asyncIterator,x=Symbol.iterator);E--;){if(y&&(v=g[y])!=null)return v.call(g);if(x&&(v=g[x])!=null)return new Um(v.call(g));y="@@asyncIterator",x="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());u=!(h=await d.next()).done;u=!1){const g=h.value,v=`${n}/${g.name}`;g.kind==="file"?o.push(g.getFile().then(y=>(y.directoryHandle=e,y.handle=g,Object.defineProperty(y,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>v})))):g.kind!=="directory"||!t||r&&r(g)||i.push(vA(g,t,v,r))}}catch(g){c=!0,s=g}finally{try{u&&d.return!=null&&await d.return()}finally{if(c)throw s}}return[...(await Promise.all(i)).flat(),...await Promise.all(o)]};var mY=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:vA(t,e.recursive,void 0,e.skipDirectory)},vY={__proto__:null,default:mY},yY=async(e,t=[{}],n=null,r=!1,i=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const o=[];let s=null;if(e instanceof Blob&&e.type?s=e.type:e.headers&&e.headers.get("content-type")&&(s=e.headers.get("content-type")),t.forEach((h,d)=>{o[d]={description:h.description||"Files",accept:{}},h.mimeTypes?(d===0&&s&&h.mimeTypes.push(s),h.mimeTypes.map(g=>{o[d].accept[g]=h.extensions||[]})):s?o[d].accept[s]=h.extensions||[]:o[d].accept["*/*"]=h.extensions||[]}),n)try{await n.getFile()}catch(h){if(n=null,r)throw h}const u=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:o,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&i&&i(u);const c=await u.createWritable();return"stream"in e?(await e.stream().pipeTo(c),u):"body"in e?(await e.body.pipeTo(c),u):(await c.write(await e),await c.close(),u)},wY={__proto__:null,default:yY},CY=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const r=document.createElement("input");r.type="file";const i=[...e.map(c=>c.mimeTypes||[]),...e.map(c=>c.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=i||"",r.style.display="none",document.body.append(r);const o=c=>{typeof s=="function"&&s(),t(c)},s=e[0].legacySetup&&e[0].legacySetup(o,()=>s(n),r),u=()=>{window.removeEventListener("focus",u),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",u)}),r.addEventListener("change",()=>{window.removeEventListener("focus",u),r.remove(),o(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),xY={__proto__:null,default:CY},EY=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const i=s=>{typeof o=="function"&&o(),t(s)},o=e[0].legacySetup&&e[0].legacySetup(i,()=>o(n),r);r.addEventListener("change",()=>{let s=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(s=s.filter(u=>u.webkitRelativePath.split("/").every(c=>!e[0].skipDirectory({name:c,kind:"directory"})))):s=s.filter(u=>u.webkitRelativePath.split("/").length===2),i(s)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),PY={__proto__:null,default:EY},SY=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let r=e;"body"in e&&(r=await async function(s,u){const c=s.getReader(),h=new ReadableStream({start:v=>async function y(){return c.read().then(({done:x,value:E})=>{if(!x)return v.enqueue(E),y();v.close()})}()}),d=new Response(h),g=await d.blob();return c.releaseLock(),new Blob([g],{type:u})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await r);const i=()=>{typeof o=="function"&&o()},o=t.legacySetup&&t.legacySetup(i,()=>o(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),i()}),n.click(),null},TY={__proto__:null,default:SY};const yA=e=>{var r,i;const t=(r=e.extensions)==null?void 0:r.reduce((o,s)=>(o.push(ry[s]),o),[]),n=(i=e.extensions)==null?void 0:i.reduce((o,s)=>s==="jpg"?o.concat(".jpg",".jpeg"):o.concat(`.${s}`),[]);return cY({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1})},DY=(e,t)=>hY(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`]},t.fileHandle);var oy=(e=>(e.drawnix="drawnix",e))(oy||{});const AY=()=>new Date().getTime().toString(),wA=async(e,t=AY())=>{const n=MY(e),r=new Blob([n],{type:ry.drawnix});return{fileHandle:await DY(r,{name:t,extension:"drawnix",description:"Drawnix file"})}},BY=async e=>{const t=await yA({description:"Drawnix files"});return bY(e,await IY(t))},RY=e=>e&&e.type===oy.drawnix&&Array.isArray(e.elements)&&typeof e.viewport=="object",MY=e=>{const t={type:oy.drawnix,version:uY.drawnix,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(t,null,2)},bY=async(e,t)=>{const n=await FY(t);let r;try{if(r=JSON.parse(n),RY(r))return r;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},kY=(e,t,n)=>new File([e],n||"",{type:t}),OY=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{var o;if(!((o=i.target)!=null&&o.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),IY=async e=>{var t;return e.type||(t=e==null?void 0:e.name)!=null&&t.endsWith(".drawnix")&&(e=kY(await OY(e),ry.drawnix,e.name)),e},FY=async e=>{let t;return"text"in Blob?t=await e.text():t=await new Promise(n=>{const r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),t},LY=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),$x=e=>!!e&&Object.values(ny).includes(e),_Y=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),NY=(e,t,n)=>{const r=e.width>n?n:e.width,i=r/e.width*e.height;return{url:t,width:r,height:i}},u4=async(e,t,n,r)=>{const i=Qe(e)[0]||fo(e),o=i?240:400,s=await LY(t),u=await _Y(s),c=NY(u,s,o),h=n&&Qa(e,n);if(r&&h&&Me.isMindElement(e,h)){Sr.setImage(e,h,c);return}i&&Me.isMindElement(e,i)&&!r?Sr.setImage(e,i,c):$i.insertImage(e,c,n)};class HY{constructor(t={}){this.overlay=null,this.imageContainer=null,this.image=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.animationFrameId=null,this.pendingUpdate=!1,this.state={zoom:1,x:0,y:0,isDragging:!1,dragStartX:0,dragStartY:0,imageStartX:0,imageStartY:0},this.styleElement=null,this.options={zoomStep:t.zoomStep||.2,minZoom:t.minZoom||.1,maxZoom:t.maxZoom||5,enableKeyboard:t.enableKeyboard!==!1},this.addStyles(),this.bindEvents()}open(t,n=""){this.createOverlay(),this.createImage(t,n),this.resetState(),document.body.style.overflow="hidden"}close(){this.overlay&&(this.cleanupDragEvents(),document.removeEventListener("mousemove",this.delegationHandler),document.removeEventListener("mouseup",this.delegationHandler),document.removeEventListener("keydown",this.delegationHandler),document.removeEventListener("wheel",this.delegationHandler),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),document.body.removeChild(this.overlay),this.overlay=null,this.image=null,this.imageContainer=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.pendingUpdate=!1),document.body.style.overflow=""}createOverlay(){this.overlay=document.createElement("div"),this.overlay.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(45, 45, 45, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      cursor: grab;
    `,this.overlay.addEventListener("click",t=>{t.target===this.overlay&&this.close()}),this.createCloseButton(),this.createControls(),document.body.appendChild(this.overlay)}createCloseButton(){this.closeButton=document.createElement("div"),this.closeButton.innerHTML="×",this.closeButton.className="image-viewer-close-btn",this.closeButton.addEventListener("click",()=>this.close()),this.overlay.appendChild(this.closeButton)}createControls(){this.controlsContainer=document.createElement("div"),this.controlsContainer.style.cssText=`
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10001;
    `,this.addStyles();const t=document.createElement("button");t.innerHTML="+",t.className="image-viewer-control-btn",t.addEventListener("click",()=>this.zoomIn());const n=document.createElement("button");n.innerHTML="-",n.className="image-viewer-control-btn",n.addEventListener("click",()=>this.zoomOut());const r=document.createElement("button");r.innerHTML="⌂",r.className="image-viewer-control-btn",r.addEventListener("click",()=>this.resetState()),this.controlsContainer.appendChild(n),this.controlsContainer.appendChild(r),this.controlsContainer.appendChild(t),this.overlay.appendChild(this.controlsContainer)}createImage(t,n){this.imageContainer=document.createElement("div"),this.imageContainer.style.cssText=`
      position: relative;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
    `,this.image=document.createElement("img"),this.image.src=t,this.image.alt=n,this.image.style.cssText=`
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
      width: auto;
      height: auto;
      display: block;
      user-select: none;
      pointer-events: none;
      object-fit: contain;
    `,this.imageContainer.appendChild(this.image),this.overlay.appendChild(this.imageContainer),this.bindDragEvents()}bindDragEvents(){this.imageContainer&&(this.dragHandler=t=>{if(!this.state.isDragging)return;const n=t.clientX-this.state.dragStartX,r=t.clientY-this.state.dragStartY;this.state.x=this.state.imageStartX+n,this.state.y=this.state.imageStartY+r,this.pendingUpdate||(this.pendingUpdate=!0,this.animationFrameId=requestAnimationFrame(()=>{this.updateImageTransform(),this.pendingUpdate=!1}))},this.mouseUpHandler=()=>{this.state.isDragging&&(this.state.isDragging=!1,this.imageContainer&&(this.imageContainer.style.cursor="grab"),this.overlay&&(this.overlay.style.cursor="grab"),this.cleanupDragEvents())},this.imageContainer.addEventListener("mousedown",t=>{t.preventDefault(),this.state.isDragging=!0,this.state.dragStartX=t.clientX,this.state.dragStartY=t.clientY,this.state.imageStartX=this.state.x,this.state.imageStartY=this.state.y,this.imageContainer&&(this.imageContainer.style.cursor="grabbing"),this.overlay&&(this.overlay.style.cursor="grabbing"),this.dragHandler&&this.mouseUpHandler&&(document.addEventListener("mousemove",this.dragHandler,{passive:!0}),document.addEventListener("mouseup",this.mouseUpHandler,{once:!0}))}))}cleanupDragEvents(){this.dragHandler&&document.removeEventListener("mousemove",this.dragHandler),this.mouseUpHandler&&document.removeEventListener("mouseup",this.mouseUpHandler)}bindEvents(){this.delegationHandler=t=>{if(this.overlay){if(t.type==="keydown"&&this.options.enableKeyboard){const n=t;switch(n.key){case"Escape":this.close();break;case"+":case"=":n.preventDefault(),this.zoomIn();break;case"-":n.preventDefault(),this.zoomOut();break;case"0":n.preventDefault(),this.resetState();break}}else if(t.type==="wheel"){const n=t;n.preventDefault(),n.deltaY<0?this.zoomIn():this.zoomOut()}}},document.addEventListener("keydown",this.delegationHandler),document.addEventListener("wheel",this.delegationHandler,{passive:!1})}zoomIn(){this.state.zoom=Math.min(this.state.zoom+this.options.zoomStep,this.options.maxZoom),this.updateImageTransform()}zoomOut(){this.state.zoom=Math.max(this.state.zoom-this.options.zoomStep,this.options.minZoom),this.updateImageTransform()}resetState(){this.state.zoom=1,this.state.x=0,this.state.y=0,this.updateImageTransform()}updateImageTransform(){this.imageContainer&&(this.imageContainer.style.transform=`
      translate(${this.state.x}px, ${this.state.y}px) 
      scale(${this.state.zoom})
    `)}addStyles(){this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.textContent=`
        .image-viewer-control-btn {
          background: rgba(0, 0, 0, 0.8);
          color: white;
          border: none;
          padding: 8px 14px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 18px;
          transition: background 0.2s;
          user-select: none;
        }
        
        .image-viewer-control-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
        
        .image-viewer-close-btn {
          position: absolute;
          top: 20px;
          right: 30px;
          color: white;
          font-size: 18px;
          cursor: pointer;
          z-index: 10001;
          user-select: none;
          width: 36px;
          height: 34px;
          display: flex;
          border-radius: 50%;
          justify-content: center;
          background: rgba(0, 0, 0, 0.8);
          transition: all 0.2s ease;
          line-height: 34px;
          padding-bottom:2px;
        }
        
        .image-viewer-close-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
      `,document.head.appendChild(this.styleElement))}removeStyles(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}destroy(){this.close(),this.removeStyles()}}const GY=e=>{const t=e,{insertFragment:n,drop:r,pointerUp:i}=t,o=new HY({zoomStep:.3,minZoom:.1,maxZoom:5,enableKeyboard:!0});return t.insertFragment=(s,u,c)=>{var h;if((h=s==null?void 0:s.files)!=null&&h.length&&$x(s.files[0].type)){const d=s.files[0];u4(e,d,u,!1);return}n(s,u,c)},t.drop=s=>{var u,c;if((c=(u=s.dataTransfer)==null?void 0:u.files)!=null&&c.length){const h=s.dataTransfer.files[0];if($x(h.type)){const d=At(e,Ot(e,s.x,s.y));return u4(e,h,d,!0),!0}}return r(s)},t.pointerUp=s=>{const u=fo(e);if(u&&!Gu(e)&&!gi(e)&&!cc(e)){const c=At(e,Ot(e,s.x,s.y)),h=Qa(e,c);h&&Me.isMindElement(e,h)&&Me.hasImage(h)&&qD(e,h,c)&&u===h&&o.open(h.data.image.url)}i(s)},t},CA=e=>{const t=e;return t.renderImage=(n,r)=>{const i=z3.createRoot(n);i.render(b.jsx(jx,{...r}));let o={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:u=>{o={...o,...u},i.render(b.jsx(jx,{...o}))}}},GY(t)},Rs=xt.forwardRef(({children:e,padding:t,className:n,style:r,...i},o)=>b.jsx("div",{className:Dn("island",n),style:{"--padding":t,...r},ref:o,...i,children:e})),jY=j.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>b.jsx("div",{className:Dn("stack stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...o},ref:s,children:e})),$Y=j.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>b.jsx("div",{className:Dn("stack stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...o},ref:s,children:e})),Wo={Row:jY,Col:$Y};class WY extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}const zY=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,VY=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(i){if(e==null||e(i),!n||!(i!=null&&i.defaultPrevented))return t==null?void 0:t(i)},UY=e=>{const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let i=r.length;const o=new Uint8Array(i);for(;i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})},XY=(e,t={})=>PI(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...t});function KY(e,t){const n=document.createElement("a"),r=window.URL.createObjectURL(e);n.href=r,n.download=t,document.body.append(n),n.click(),window.URL.revokeObjectURL(r),n.remove()}const xA=(e,t)=>{const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},Wx=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),s3||MO?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),qn=xt.forwardRef((e,t)=>{const{id:n}={id:"drawnix"},r=xt.useRef(null);xt.useImperativeHandle(t,()=>r.current);const i=`tool-icon_size_${e.size||"medium"}`,[o,s]=j.useState(!1),u=j.useRef(!0),c=async d=>{var v;const g="onClick"in e&&((v=e.onClick)==null?void 0:v.call(e,d));if(zY(g))try{s(!0),await g}catch(y){if(y instanceof WY)console.warn(y);else throw y}finally{u.current&&s(!1)}};j.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const h=j.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const d=e.type==="icon"?"button":e.type;return b.jsxs("button",{className:Dn("tool-icon_type_button",i,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:d,onClick:c,onPointerDown:g=>{var v;(v=e.onPointerDown)==null||v.call(e,{pointerType:g.pointerType||null,event:g})},onPointerUp:g=>{var v;(v=e.onPointerUp)==null||v.call(e,{pointerType:g.pointerType||null})},ref:r,disabled:o||!!e.disabled,children:[(e.icon||e.label)&&b.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&b.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&b.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&b.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return b.jsxs("label",{className:Dn("tool-icon",e.className),title:e.title,onPointerDown:d=>{var g;h.current=d.pointerType||null,(g=e.onPointerDown)==null||g.call(e,{pointerType:d.pointerType||null,event:d})},onPointerUp:d=>{var g;(g=e.onPointerUp)==null||g.call(e,{pointerType:d.pointerType||null}),requestAnimationFrame(()=>{h.current=null})},children:[b.jsx("input",{className:`tool-icon_type_radio ${i}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${n}-${e.id}`,onChange:()=>{var d;(d=e.onChange)==null||d.call(e,{pointerType:h.current})},checked:e.checked,ref:r}),b.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&b.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});qn.displayName="ToolButton";const Kt=e=>e,YY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),qY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),ZY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),QY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),JY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),eq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),tq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),nq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:b.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),rq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),iq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),oq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),sq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),aq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),uq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),lq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),cq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),fq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b.jsxs("g",{strokeWidth:"1.5",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),b.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),b.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),b.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),hq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:b.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"})})),dq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),b.jsx("path",{d:"M15 8h.01"}),b.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),b.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),b.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),b.jsx("path",{d:"M19 16v6"}),b.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),gq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:b.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),pq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:b.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),mq=Kt(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:b.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),vq=Kt(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:b.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),yq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:b.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[b.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),b.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),wq=Kt(b.jsx("svg",{viewBox:"0 0 32 32",className:"no-color-icon",children:b.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[b.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),b.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),Cq=Kt(b.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("polyline",{points:"20 6 9 17 4 12"})})),xq=Kt(b.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:b.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[b.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),b.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),Eq=Kt(b.jsx("svg",{viewBox:"0 0 24 24",children:b.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:b.jsxs("g",{id:"Group",children:[b.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),b.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),Pq=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[b.jsx("path",{d:"M-18-19h60v40h-60z"}),b.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),Sq=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:b.jsx("g",{fill:"currentColor",children:b.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),Tq=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:b.jsxs("g",{fill:"currentColor",children:[b.jsx("rect",{rx:"1",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),Dq=({currentColor:e})=>b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:b.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[b.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),b.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),Aq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:b.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),Bq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:b.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),O3=Kt(b.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:b.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),Rq=Kt(b.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{strokeWidth:"1.25",children:[b.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),b.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),EA=Kt(b.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),Mq=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),PA=Kt(b.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{strokeWidth:1.8,fill:"none",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M12 3l-4 7h8z"}),b.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),b.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),bq=Kt(b.jsx("svg",{stroke:"currentColor",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{stroke:"none",fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})})),kq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M14.85,2.5 C15.4851275,2.5 16,3.01487254 16,3.65 L16,12.35 C16,12.9851275 15.4851275,13.5 14.85,13.5 L1.15,13.5 C0.514872538,13.5 0,12.9851275 0,12.35 L0,3.65 C0,3.01487254 0.514872538,2.5 1.15,2.5 L14.85,2.5 Z M14.85,3.7 L1.15,3.7 C1.17735931,3.7 1.2,3.72264069 1.2,3.75 L1.2,12.25 C1.2,12.2773593 1.17735931,12.3 1.15,12.3 L14.85,12.3 C14.8226407,12.3 14.8,12.2773593 14.8,12.25 L14.8,3.75 C14.8,3.72264069 14.8226407,3.7 14.85,3.7 Z M3.5,10.5 L3.5,5.5 L5.25,5.5 L7,7.8 L8.75,5.5 L10.5,5.5 L10.5,10.5 L8.75,10.5 L8.75,7.5 L7,9.8 L5.25,7.5 L5.25,10.5 L3.5,10.5 Z M12.5,10.5 L11,8.5 L12.5,8.5 L12.5,5.5 L11,5.5 L12.5,5.5 L12.5,8.5 L14,8.5 L12.5,10.5 Z"})})})),Oq=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M12.253 4.13h-1.2v-1a2.8 2.8 0 0 0-5.6 0v4a2.8 2.8 0 0 0 2.8 2.8v1.2a4 4 0 0 1-4-4v-4a4 4 0 0 1 8 0v1zm-8 8h1.2v1a2.8 2.8 0 0 0 5.6 0v-4a2.8 2.8 0 0 0-2.8-2.8v-1.2a4 4 0 0 1 4 4v4a4 4 0 0 1-8 0v-1z",transform:"rotate(46 8.253 8.13)"})})})),Iq=[{icon:tq,title:"Rectangle — R",pointer:pt.rectangle},{icon:rq,title:"Ellipse — O",pointer:pt.ellipse},{icon:iq,title:"Triangle",pointer:pt.triangle},{icon:nq,title:"Terminal",pointer:gt.terminal},{icon:oq,title:"Diamond",pointer:pt.diamond},{icon:sq,title:"Parallelogram",pointer:pt.parallelogram},{icon:aq,title:"RoundRectangle",pointer:pt.roundRectangle}],Fq=xA(Iq,5),Lq=({onPointerUp:e})=>{const t=Zr();return b.jsx(Rs,{padding:1,children:b.jsx(Wo.Col,{gap:1,children:Fq.map((n,r)=>b.jsx(Wo.Row,{gap:1,children:n.map((i,o)=>b.jsx(qn,{className:Dn({fillable:!1}),type:"icon",size:"small",visible:!0,icon:i.icon,title:i.title,"aria-label":i.title,onPointerDown:()=>{na(t,Gi.dnd),vn.updatePointerType(t,i.pointer)},onPointerUp:()=>{na(t,Gi.drawing),e(i.pointer)}},o))},r))})})},_q=[{icon:uq,title:"Straight Arrow Line",pointer:Fn.straight},{icon:lq,title:"Elbow Arrow Line",pointer:Fn.elbow},{icon:cq,title:"Curve Arrow Line",pointer:Fn.curve}],Nq=({onPointerUp:e})=>{const t=Zr();return b.jsx(Rs,{padding:1,children:b.jsx(Wo.Row,{gap:1,children:_q.map((n,r)=>b.jsx(qn,{className:Dn({fillable:!1}),type:"icon",size:"small",visible:!0,icon:n.icon,title:n.title,"aria-label":n.title,onPointerDown:()=>{na(t,Gi.drawing),vn.updatePointerType(t,n.pointer)},onPointerUp:()=>{e(n.pointer)}},r))})})};function Bv(){return typeof window<"u"}function Dc(e){return SA(e)?(e.nodeName||"").toLowerCase():"#document"}function zo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function nu(e){var t;return(t=(SA(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function SA(e){return Bv()?e instanceof Node||e instanceof zo(e).Node:!1}function hr(e){return Bv()?e instanceof Element||e instanceof zo(e).Element:!1}function Kr(e){return Bv()?e instanceof HTMLElement||e instanceof zo(e).HTMLElement:!1}function l4(e){return!Bv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof zo(e).ShadowRoot}function Ip(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=As(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Hq(e){return["table","td","th"].includes(Dc(e))}function Rv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function sy(e){const t=Mv(),n=hr(e)?As(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Gq(e){let t=el(e);for(;Kr(t)&&!mc(t);){if(sy(t))return t;if(Rv(t))return null;t=el(t)}return null}function Mv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function mc(e){return["html","body","#document"].includes(Dc(e))}function As(e){return zo(e).getComputedStyle(e)}function bv(e){return hr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function el(e){if(Dc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||l4(e)&&e.host||nu(e);return l4(t)?t.host:t}function TA(e){const t=el(e);return mc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Kr(t)&&Ip(t)?t:TA(t)}function ac(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=TA(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=zo(i);if(o){const u=c4(s);return t.concat(s,s.visualViewport||[],Ip(i)?i:[],u&&n?ac(u):[])}return t.concat(i,ac(i,[],n))}function c4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function kf(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Ho(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&l4(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function DA(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function AA(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function jq(e){return e.mozInputSource===0&&e.isTrusted?!0:f4()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function $q(e){return zq()?!1:!f4()&&e.width===0&&e.height===0||f4()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Wq(){return/apple/i.test(navigator.vendor)}function f4(){const e=/android/i;return e.test(DA())||e.test(AA())}function zq(){return AA().includes("jsdom/")}function zx(e,t){return["mouse","pen"].includes(e)}function Vq(e){return"nativeEvent"in e}function Uq(e){return e.matches("html,body")}function Js(e){return(e==null?void 0:e.ownerDocument)||document}function L5(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function If(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Xq="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function BA(e){return Kr(e)&&e.matches(Xq)}function _5(e){e.preventDefault(),e.stopPropagation()}function Kq(e){return e?e.getAttribute("role")==="combobox"&&BA(e):!1}const I3=Math.min,zf=Math.max,F3=Math.round,Dm=Math.floor,Wa=e=>({x:e,y:e}),Yq={left:"right",right:"left",bottom:"top",top:"bottom"},qq={start:"end",end:"start"};function Vx(e,t,n){return zf(e,I3(t,n))}function kv(e,t){return typeof e=="function"?e(t):e}function eh(e){return e.split("-")[0]}function Ov(e){return e.split("-")[1]}function RA(e){return e==="x"?"y":"x"}function MA(e){return e==="y"?"height":"width"}function S0(e){return["top","bottom"].includes(eh(e))?"y":"x"}function bA(e){return RA(S0(e))}function Zq(e,t,n){n===void 0&&(n=!1);const r=Ov(e),i=bA(e),o=MA(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=L3(s)),[s,L3(s)]}function Qq(e){const t=L3(e);return[h4(e),t,h4(t)]}function h4(e){return e.replace(/start|end/g,t=>qq[t])}function Jq(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function eZ(e,t,n,r){const i=Ov(e);let o=Jq(eh(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(h4)))),o}function L3(e){return e.replace(/left|right|bottom|top/g,t=>Yq[t])}function tZ(e){return{top:0,right:0,bottom:0,left:0,...e}}function nZ(e){return typeof e!="number"?tZ(e):{top:e,right:e,bottom:e,left:e}}function _3(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var rZ=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],N3=rZ.join(","),kA=typeof Element>"u",T0=kA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,H3=!kA&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},G3=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",s=o||n&&t&&e(t.parentNode);return s},iZ=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},oZ=function(t,n,r){if(G3(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(N3));return n&&T0.call(t,N3)&&i.unshift(t),i=i.filter(r),i},sZ=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!G3(s,!1))if(s.tagName==="SLOT"){var u=s.assignedElements(),c=u.length?u:s.children,h=e(c,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:s,candidates:h})}else{var d=T0.call(s,N3);d&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var g=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),v=!G3(g,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(g&&v){var y=e(g===!0?s.children:g.children,!0,r);r.flatten?i.push.apply(i,y):i.push({scopeParent:s,candidates:y})}else o.unshift.apply(o,s.children)}}return i},OA=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},IA=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||iZ(t))&&!OA(t)?0:t.tabIndex},aZ=function(t,n){var r=IA(t);return r<0&&n&&!OA(t)?0:r},uZ=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},FA=function(t){return t.tagName==="INPUT"},lZ=function(t){return FA(t)&&t.type==="hidden"},cZ=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},fZ=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},hZ=function(t){if(!t.name)return!0;var n=t.form||H3(t),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=fZ(i,t.form);return!o||o===t},dZ=function(t){return FA(t)&&t.type==="radio"},gZ=function(t){return dZ(t)&&!hZ(t)},pZ=function(t){var n,r=t&&H3(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var s,u,c;for(o=!!((s=i)!==null&&s!==void 0&&(u=s.ownerDocument)!==null&&u!==void 0&&u.contains(i)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!o&&i;){var h,d,g;r=H3(i),i=(h=r)===null||h===void 0?void 0:h.host,o=!!((d=i)!==null&&d!==void 0&&(g=d.ownerDocument)!==null&&g!==void 0&&g.contains(i))}}return o},Ux=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},mZ=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=T0.call(t,"details>summary:first-of-type"),s=o?t.parentElement:t;if(T0.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var u=t;t;){var c=t.parentElement,h=H3(t);if(c&&!c.shadowRoot&&i(c)===!0)return Ux(t);t.assignedSlot?t=t.assignedSlot:!c&&h!==t.ownerDocument?t=h.host:t=c}t=u}if(pZ(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ux(t);return!1},vZ=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return T0.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},yZ=function(t,n){return!(n.disabled||G3(n)||lZ(n)||mZ(n,t)||cZ(n)||vZ(n))},d4=function(t,n){return!(gZ(n)||IA(n)<0||!yZ(t,n))},wZ=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},CZ=function e(t){var n=[],r=[];return t.forEach(function(i,o){var s=!!i.scopeParent,u=s?i.scopeParent:i,c=aZ(u,s),h=s?e(i.candidates):u;c===0?s?n.push.apply(n,h):n.push(u):r.push({documentOrder:o,tabIndex:c,item:i,isScope:s,content:h})}),r.sort(uZ).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},Iv=function(t,n){n=n||{};var r;return n.getShadowRoot?r=sZ([t],n.includeContainer,{filter:d4.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:wZ}):r=oZ(t,n.includeContainer,d4.bind(null,n)),CZ(r)},xZ=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return T0.call(t,N3)===!1?!1:d4(n,t)};function Xx(e,t,n){let{reference:r,floating:i}=e;const o=S0(t),s=bA(t),u=MA(s),c=eh(t),h=o==="y",d=r.x+r.width/2-i.width/2,g=r.y+r.height/2-i.height/2,v=r[u]/2-i[u]/2;let y;switch(c){case"top":y={x:d,y:r.y-i.height};break;case"bottom":y={x:d,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:g};break;case"left":y={x:r.x-i.width,y:g};break;default:y={x:r.x,y:r.y}}switch(Ov(t)){case"start":y[s]-=v*(n&&h?-1:1);break;case"end":y[s]+=v*(n&&h?-1:1);break}return y}const EZ=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,u=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t));let h=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:g}=Xx(h,r,c),v=r,y={},x=0;for(let E=0;E<u.length;E++){const{name:T,fn:D}=u[E],{x:S,y:R,data:L,reset:k}=await D({x:d,y:g,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:h,platform:s,elements:{reference:e,floating:t}});d=S??d,g=R??g,y={...y,[T]:{...y[T],...L}},k&&x<=50&&(x++,typeof k=="object"&&(k.placement&&(v=k.placement),k.rects&&(h=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:d,y:g}=Xx(h,v,c)),E=-1)}return{x:d,y:g,placement:v,strategy:i,middlewareData:y}};async function LA(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:u,strategy:c}=e,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:g="floating",altBoundary:v=!1,padding:y=0}=kv(t,e),x=nZ(y),T=u[v?g==="floating"?"reference":"floating":g],D=_3(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(T)))==null||n?T:T.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:h,rootBoundary:d,strategy:c})),S=g==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),L=await(o.isElement==null?void 0:o.isElement(R))?await(o.getScale==null?void 0:o.getScale(R))||{x:1,y:1}:{x:1,y:1},k=_3(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:S,offsetParent:R,strategy:c}):S);return{top:(D.top-k.top+x.top)/L.y,bottom:(k.bottom-D.bottom+x.bottom)/L.y,left:(D.left-k.left+x.left)/L.x,right:(k.right-D.right+x.right)/L.x}}const PZ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:u,platform:c,elements:h}=t,{mainAxis:d=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:E=!0,...T}=kv(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const D=eh(i),S=S0(u),R=eh(u)===u,L=await(c.isRTL==null?void 0:c.isRTL(h.floating)),k=v||(R||!E?[L3(u)]:Qq(u)),W=x!=="none";!v&&W&&k.push(...eZ(u,E,x,L));const z=[u,...k],Y=await LA(t,T),te=[];let se=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&te.push(Y[D]),g){const ve=Zq(i,s,L);te.push(Y[ve[0]],Y[ve[1]])}if(se=[...se,{placement:i,overflows:te}],!te.every(ve=>ve<=0)){var me,ne;const ve=(((me=o.flip)==null?void 0:me.index)||0)+1,ge=z[ve];if(ge)return{data:{index:ve,overflows:se},reset:{placement:ge}};let Be=(ne=se.filter(Pe=>Pe.overflows[0]<=0).sort((Pe,he)=>Pe.overflows[1]-he.overflows[1])[0])==null?void 0:ne.placement;if(!Be)switch(y){case"bestFit":{var oe;const Pe=(oe=se.filter(he=>{if(W){const ue=S0(he.placement);return ue===S||ue==="y"}return!0}).map(he=>[he.placement,he.overflows.filter(ue=>ue>0).reduce((ue,we)=>ue+we,0)]).sort((he,ue)=>he[1]-ue[1])[0])==null?void 0:oe[0];Pe&&(Be=Pe);break}case"initialPlacement":Be=u;break}if(i!==Be)return{reset:{placement:Be}}}return{}}}};async function SZ(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=eh(n),u=Ov(n),c=S0(n)==="y",h=["left","top"].includes(s)?-1:1,d=o&&c?-1:1,g=kv(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:x}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof x=="number"&&(y=u==="end"?x*-1:x),c?{x:y*d,y:v*h}:{x:v*h,y:y*d}}const TZ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:u}=t,c=await SZ(t,e);return s===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},DZ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:u={fn:T=>{let{x:D,y:S}=T;return{x:D,y:S}}},...c}=kv(e,t),h={x:n,y:r},d=await LA(t,c),g=S0(eh(i)),v=RA(g);let y=h[v],x=h[g];if(o){const T=v==="y"?"top":"left",D=v==="y"?"bottom":"right",S=y+d[T],R=y-d[D];y=Vx(S,y,R)}if(s){const T=g==="y"?"top":"left",D=g==="y"?"bottom":"right",S=x+d[T],R=x-d[D];x=Vx(S,x,R)}const E=u.fn({...t,[v]:y,[g]:x});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[v]:o,[g]:s}}}}}};function _A(e){const t=As(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Kr(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,u=F3(n)!==o||F3(r)!==s;return u&&(n=o,r=s),{width:n,height:r,$:u}}function ay(e){return hr(e)?e:e.contextElement}function c0(e){const t=ay(e);if(!Kr(t))return Wa(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=_A(t);let s=(o?F3(n.width):n.width)/r,u=(o?F3(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!u||!Number.isFinite(u))&&(u=1),{x:s,y:u}}const AZ=Wa(0);function NA(e){const t=zo(e);return!Mv()||!t.visualViewport?AZ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function BZ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==zo(e)?!1:t}function th(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=ay(e);let s=Wa(1);t&&(r?hr(r)&&(s=c0(r)):s=c0(e));const u=BZ(o,n,r)?NA(o):Wa(0);let c=(i.left+u.x)/s.x,h=(i.top+u.y)/s.y,d=i.width/s.x,g=i.height/s.y;if(o){const v=zo(o),y=r&&hr(r)?zo(r):r;let x=v,E=c4(x);for(;E&&r&&y!==x;){const T=c0(E),D=E.getBoundingClientRect(),S=As(E),R=D.left+(E.clientLeft+parseFloat(S.paddingLeft))*T.x,L=D.top+(E.clientTop+parseFloat(S.paddingTop))*T.y;c*=T.x,h*=T.y,d*=T.x,g*=T.y,c+=R,h+=L,x=zo(E),E=c4(x)}}return _3({width:d,height:g,x:c,y:h})}function uy(e,t){const n=bv(e).scrollLeft;return t?t.left+n:th(nu(e)).left+n}function HA(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:uy(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function RZ(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=nu(r),u=t?Rv(t.floating):!1;if(r===s||u&&o)return n;let c={scrollLeft:0,scrollTop:0},h=Wa(1);const d=Wa(0),g=Kr(r);if((g||!g&&!o)&&((Dc(r)!=="body"||Ip(s))&&(c=bv(r)),Kr(r))){const y=th(r);h=c0(r),d.x=y.x+r.clientLeft,d.y=y.y+r.clientTop}const v=s&&!g&&!o?HA(s,c,!0):Wa(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-c.scrollLeft*h.x+d.x+v.x,y:n.y*h.y-c.scrollTop*h.y+d.y+v.y}}function MZ(e){return Array.from(e.getClientRects())}function bZ(e){const t=nu(e),n=bv(e),r=e.ownerDocument.body,i=zf(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=zf(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+uy(e);const u=-n.scrollTop;return As(r).direction==="rtl"&&(s+=zf(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:u}}function kZ(e,t){const n=zo(e),r=nu(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,u=0,c=0;if(i){o=i.width,s=i.height;const h=Mv();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:u,y:c}}function OZ(e,t){const n=th(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Kr(e)?c0(e):Wa(1),s=e.clientWidth*o.x,u=e.clientHeight*o.y,c=i*o.x,h=r*o.y;return{width:s,height:u,x:c,y:h}}function Kx(e,t,n){let r;if(t==="viewport")r=kZ(e,n);else if(t==="document")r=bZ(nu(e));else if(hr(t))r=OZ(t,n);else{const i=NA(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return _3(r)}function GA(e,t){const n=el(e);return n===t||!hr(n)||mc(n)?!1:As(n).position==="fixed"||GA(n,t)}function IZ(e,t){const n=t.get(e);if(n)return n;let r=ac(e,[],!1).filter(u=>hr(u)&&Dc(u)!=="body"),i=null;const o=As(e).position==="fixed";let s=o?el(e):e;for(;hr(s)&&!mc(s);){const u=As(s),c=sy(s);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ip(s)&&!c&&GA(e,s))?r=r.filter(d=>d!==s):i=u,s=el(s)}return t.set(e,r),r}function FZ(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?Rv(t)?[]:IZ(t,this._c):[].concat(n),r],u=s[0],c=s.reduce((h,d)=>{const g=Kx(t,d,i);return h.top=zf(g.top,h.top),h.right=I3(g.right,h.right),h.bottom=I3(g.bottom,h.bottom),h.left=zf(g.left,h.left),h},Kx(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function LZ(e){const{width:t,height:n}=_A(e);return{width:t,height:n}}function _Z(e,t,n){const r=Kr(t),i=nu(t),o=n==="fixed",s=th(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const c=Wa(0);if(r||!r&&!o)if((Dc(t)!=="body"||Ip(i))&&(u=bv(t)),r){const v=th(t,!0,o,t);c.x=v.x+t.clientLeft,c.y=v.y+t.clientTop}else i&&(c.x=uy(i));const h=i&&!r&&!o?HA(i,u):Wa(0),d=s.left+u.scrollLeft-c.x-h.x,g=s.top+u.scrollTop-c.y-h.y;return{x:d,y:g,width:s.width,height:s.height}}function N5(e){return As(e).position==="static"}function Yx(e,t){if(!Kr(e)||As(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return nu(e)===n&&(n=n.ownerDocument.body),n}function jA(e,t){const n=zo(e);if(Rv(e))return n;if(!Kr(e)){let i=el(e);for(;i&&!mc(i);){if(hr(i)&&!N5(i))return i;i=el(i)}return n}let r=Yx(e,t);for(;r&&Hq(r)&&N5(r);)r=Yx(r,t);return r&&mc(r)&&N5(r)&&!sy(r)?n:r||Gq(e)||n}const NZ=async function(e){const t=this.getOffsetParent||jA,n=this.getDimensions,r=await n(e.floating);return{reference:_Z(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function HZ(e){return As(e).direction==="rtl"}const GZ={convertOffsetParentRelativeRectToViewportRelativeRect:RZ,getDocumentElement:nu,getClippingRect:FZ,getOffsetParent:jA,getElementRects:NZ,getClientRects:MZ,getDimensions:LZ,getScale:c0,isElement:hr,isRTL:HZ};function $A(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function jZ(e,t){let n=null,r;const i=nu(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function s(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const h=e.getBoundingClientRect(),{left:d,top:g,width:v,height:y}=h;if(u||t(),!v||!y)return;const x=Dm(g),E=Dm(i.clientWidth-(d+v)),T=Dm(i.clientHeight-(g+y)),D=Dm(d),R={rootMargin:-x+"px "+-E+"px "+-T+"px "+-D+"px",threshold:zf(0,I3(1,c))||1};let L=!0;function k(W){const z=W[0].intersectionRatio;if(z!==c){if(!L)return s();z?s(!1,z):r=setTimeout(()=>{s(!1,1e-7)},1e3)}z===1&&!$A(h,e.getBoundingClientRect())&&s(),L=!1}try{n=new IntersectionObserver(k,{...R,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,R)}n.observe(e)}return s(!0),o}function $Z(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,h=ay(e),d=i||o?[...h?ac(h):[],...ac(t)]:[];d.forEach(D=>{i&&D.addEventListener("scroll",n,{passive:!0}),o&&D.addEventListener("resize",n)});const g=h&&u?jZ(h,n):null;let v=-1,y=null;s&&(y=new ResizeObserver(D=>{let[S]=D;S&&S.target===h&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=y)==null||R.observe(t)})),n()}),h&&!c&&y.observe(h),y.observe(t));let x,E=c?th(e):null;c&&T();function T(){const D=th(e);E&&!$A(E,D)&&n(),E=D,x=requestAnimationFrame(T)}return n(),()=>{var D;d.forEach(S=>{i&&S.removeEventListener("scroll",n),o&&S.removeEventListener("resize",n)}),g==null||g(),(D=y)==null||D.disconnect(),y=null,c&&cancelAnimationFrame(x)}}const WZ=TZ,zZ=DZ,VZ=PZ,UZ=(e,t,n)=>{const r=new Map,i={platform:GZ,...n},o={...i.platform,_c:r};return EZ(e,t,{...i,platform:o})};var Xm=typeof document<"u"?j.useLayoutEffect:j.useEffect;function j3(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!j3(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!j3(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function WA(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qx(e,t){const n=WA(e);return Math.round(t*n)/n}function H5(e){const t=j.useRef(e);return Xm(()=>{t.current=e}),t}function XZ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:u=!0,whileElementsMounted:c,open:h}=e,[d,g]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=j.useState(r);j3(v,r)||y(r);const[x,E]=j.useState(null),[T,D]=j.useState(null),S=j.useCallback(he=>{he!==W.current&&(W.current=he,E(he))},[]),R=j.useCallback(he=>{he!==z.current&&(z.current=he,D(he))},[]),L=o||x,k=s||T,W=j.useRef(null),z=j.useRef(null),Y=j.useRef(d),te=c!=null,se=H5(c),me=H5(i),ne=H5(h),oe=j.useCallback(()=>{if(!W.current||!z.current)return;const he={placement:t,strategy:n,middleware:v};me.current&&(he.platform=me.current),UZ(W.current,z.current,he).then(ue=>{const we={...ue,isPositioned:ne.current!==!1};ve.current&&!j3(Y.current,we)&&(Y.current=we,l8.flushSync(()=>{g(we)}))})},[v,t,n,me,ne]);Xm(()=>{h===!1&&Y.current.isPositioned&&(Y.current.isPositioned=!1,g(he=>({...he,isPositioned:!1})))},[h]);const ve=j.useRef(!1);Xm(()=>(ve.current=!0,()=>{ve.current=!1}),[]),Xm(()=>{if(L&&(W.current=L),k&&(z.current=k),L&&k){if(se.current)return se.current(L,k,oe);oe()}},[L,k,oe,se,te]);const ge=j.useMemo(()=>({reference:W,floating:z,setReference:S,setFloating:R}),[S,R]),Be=j.useMemo(()=>({reference:L,floating:k}),[L,k]),Pe=j.useMemo(()=>{const he={position:n,left:0,top:0};if(!Be.floating)return he;const ue=qx(Be.floating,d.x),we=qx(Be.floating,d.y);return u?{...he,transform:"translate("+ue+"px, "+we+"px)",...WA(Be.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:we}},[n,u,Be.floating,d.x,d.y]);return j.useMemo(()=>({...d,update:oe,refs:ge,elements:Be,floatingStyles:Pe}),[d,oe,ge,Be,Pe])}const ly=(e,t)=>({...WZ(e),options:[e,t]}),KZ=(e,t)=>({...zZ(e),options:[e,t]}),cy=(e,t)=>({...VZ(e),options:[e,t]});function Fv(e){return j.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const zA={...lb},YZ=zA.useInsertionEffect,qZ=YZ||(e=>e());function ec(e){const t=j.useRef(()=>{});return qZ(()=>{t.current=e}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var $o=typeof document<"u"?j.useLayoutEffect:j.useEffect;function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fp.apply(this,arguments)}let Zx=!1,ZZ=0;const Qx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+ZZ++;function QZ(){const[e,t]=j.useState(()=>Zx?Qx():void 0);return $o(()=>{e==null&&t(Qx())},[]),j.useEffect(()=>{Zx=!0},[]),e}const JZ=zA.useId,Fp=JZ||QZ;function eQ(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const tQ=j.createContext(null),nQ=j.createContext(null),VA=()=>{var e;return((e=j.useContext(tQ))==null?void 0:e.id)||null},fy=()=>j.useContext(nQ);function hp(e){return"data-floating-ui-"+e}function G5(e){const t=j.useRef(e);return $o(()=>{t.current=e}),t}let Jx=0;function Vd(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(Jx);const o=()=>e==null?void 0:e.focus({preventScroll:n});i?o():Jx=requestAnimationFrame(o)}function rQ(e,t){var n;let r=[],i=(n=e.find(o=>o.id===t))==null?void 0:n.parentId;for(;i;){const o=e.find(s=>s.id===i);i=o==null?void 0:o.parentId,o&&(r=r.concat(o))}return r}function Ig(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var u;return i.parentId===s.id&&((u=i.context)==null?void 0:u.open)})}),n=n.concat(r);return n}let Ud=new WeakMap,Am=new WeakSet,Bm={},j5=0;const iQ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,UA=e=>e&&(e.host||UA(e.parentNode)),oQ=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=UA(n);return e.contains(r)?r:null}).filter(n=>n!=null);function sQ(e,t,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,s=oQ(t,e),u=new Set,c=new Set(s),h=[];Bm[i]||(Bm[i]=new WeakMap);const d=Bm[i];s.forEach(g),v(t),u.clear();function g(y){!y||u.has(y)||(u.add(y),y.parentNode&&g(y.parentNode))}function v(y){!y||c.has(y)||[].forEach.call(y.children,x=>{if(Dc(x)!=="script")if(u.has(x))v(x);else{const E=o?x.getAttribute(o):null,T=E!==null&&E!=="false",D=(Ud.get(x)||0)+1,S=(d.get(x)||0)+1;Ud.set(x,D),d.set(x,S),h.push(x),D===1&&T&&Am.add(x),S===1&&x.setAttribute(i,""),!T&&o&&x.setAttribute(o,"true")}})}return j5++,()=>{h.forEach(y=>{const x=(Ud.get(y)||0)-1,E=(d.get(y)||0)-1;Ud.set(y,x),d.set(y,E),x||(!Am.has(y)&&o&&y.removeAttribute(o),Am.delete(y)),E||y.removeAttribute(i)}),j5--,j5||(Ud=new WeakMap,Ud=new WeakMap,Am=new WeakSet,Bm={})}}function eE(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Js(e[0]).body;return sQ(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const dp=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function XA(e,t){const n=Iv(e,dp());t==="prev"&&n.reverse();const r=n.indexOf(kf(Js(e)));return n.slice(r+1)[0]}function KA(){return XA(document.body,"next")}function YA(){return XA(document.body,"prev")}function Fg(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Ho(n,r)}function aQ(e){Iv(e,dp()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function tE(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Lv={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let uQ;function nE(e){e.key==="Tab"&&(e.target,clearTimeout(uQ))}const $3=j.forwardRef(function(t,n){const[r,i]=j.useState();$o(()=>(Wq()&&i("button"),document.addEventListener("keydown",nE),()=>{document.removeEventListener("keydown",nE)}),[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[hp("focus-guard")]:"",style:Lv};return j.createElement("span",fp({},t,o))}),qA=j.createContext(null),rE=hp("portal");function lQ(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Fp(),i=QA(),[o,s]=j.useState(null),u=j.useRef(null);return $o(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{u.current=null})},[o]),$o(()=>{if(!r||u.current)return;const c=t?document.getElementById(t):null;if(!c)return;const h=document.createElement("div");h.id=r,h.setAttribute(rE,""),c.appendChild(h),u.current=h,s(h)},[t,r]),$o(()=>{if(n===null||!r||u.current)return;let c=n||(i==null?void 0:i.portalNode);c&&!hr(c)&&(c=c.current),c=c||document.body;let h=null;t&&(h=document.createElement("div"),h.id=t,c.appendChild(h));const d=document.createElement("div");d.id=r,d.setAttribute(rE,""),c=h||c,c.appendChild(d),u.current=d,s(d)},[t,n,r,i]),o}function ZA(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=lQ({id:n,root:r}),[s,u]=j.useState(null),c=j.useRef(null),h=j.useRef(null),d=j.useRef(null),g=j.useRef(null),v=s==null?void 0:s.modal,y=s==null?void 0:s.open,x=!!s&&!s.modal&&s.open&&i&&!!(r||o);return j.useEffect(()=>{if(!o||!i||v)return;function E(T){o&&Fg(T)&&(T.type==="focusin"?tE:aQ)(o)}return o.addEventListener("focusin",E,!0),o.addEventListener("focusout",E,!0),()=>{o.removeEventListener("focusin",E,!0),o.removeEventListener("focusout",E,!0)}},[o,i,v]),j.useEffect(()=>{o&&(y||tE(o))},[y,o]),j.createElement(qA.Provider,{value:j.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:h,beforeInsideRef:d,afterInsideRef:g,portalNode:o,setFocusManagerState:u}),[i,o])},x&&o&&j.createElement($3,{"data-type":"outside",ref:c,onFocus:E=>{if(Fg(E,o)){var T;(T=d.current)==null||T.focus()}else{const D=YA()||(s==null?void 0:s.refs.domReference.current);D==null||D.focus()}}}),x&&o&&j.createElement("span",{"aria-owns":o.id,style:Lv}),o&&l8.createPortal(t,o),x&&o&&j.createElement($3,{"data-type":"outside",ref:h,onFocus:E=>{if(Fg(E,o)){var T;(T=g.current)==null||T.focus()}else{const D=KA()||(s==null?void 0:s.refs.domReference.current);D==null||D.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,E.nativeEvent,"focus-out"))}}}))}const QA=()=>j.useContext(qA),g4="data-floating-ui-focusable";function cQ(e){return e?e.hasAttribute(g4)?e:e.querySelector("["+g4+"]")||e:null}const fQ=20;let Of=[];function $5(e){Of=Of.filter(n=>n.isConnected);let t=e;if(!(!t||Dc(t)==="body")){if(!xZ(t,dp())){const n=Iv(t,dp())[0];n&&(t=n)}Of.push(t),Of.length>fQ&&(Of=Of.slice(-20))}}function iE(){return Of.slice().reverse().find(e=>e.isConnected)}const hQ=j.forwardRef(function(t,n){return j.createElement("button",fp({},t,{type:"button",ref:n,tabIndex:-1,style:Lv}))});function JA(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:o=!0,initialFocus:s=0,returnFocus:u=!0,restoreFocus:c=!1,modal:h=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:g=!0}=e,{open:v,refs:y,nodeId:x,onOpenChange:E,events:T,dataRef:D,floatingId:S,elements:{domReference:R,floating:L}}=t,k=typeof s=="number"&&s<0,W=Kq(R)&&k,z=iQ()?o:!0,Y=G5(i),te=G5(s),se=G5(u),me=fy(),ne=QA(),oe=j.useRef(null),ve=j.useRef(null),ge=j.useRef(!1),Be=j.useRef(!1),Pe=j.useRef(-1),he=ne!=null,ue=cQ(L),we=ec(function(Le){return Le===void 0&&(Le=ue),Le?Iv(Le,dp()):[]}),U=ec(Le=>{const $e=we(Le);return Y.current.map(Fe=>R&&Fe==="reference"?R:ue&&Fe==="floating"?ue:$e).filter(Boolean).flat()});j.useEffect(()=>{if(r||!h)return;function Le(Fe){if(Fe.key==="Tab"){Ho(ue,kf(Js(ue)))&&we().length===0&&!W&&_5(Fe);const Ze=U(),et=If(Fe);Y.current[0]==="reference"&&et===R&&(_5(Fe),Fe.shiftKey?Vd(Ze[Ze.length-1]):Vd(Ze[1])),Y.current[1]==="floating"&&et===ue&&Fe.shiftKey&&(_5(Fe),Vd(Ze[0]))}}const $e=Js(ue);return $e.addEventListener("keydown",Le),()=>{$e.removeEventListener("keydown",Le)}},[r,R,ue,h,Y,W,we,U]),j.useEffect(()=>{if(r||!L)return;function Le($e){const Fe=If($e),et=we().indexOf(Fe);et!==-1&&(Pe.current=et)}return L.addEventListener("focusin",Le),()=>{L.removeEventListener("focusin",Le)}},[r,L,we]),j.useEffect(()=>{if(r||!g)return;function Le(){Be.current=!0,setTimeout(()=>{Be.current=!1})}function $e(Fe){const Ze=Fe.relatedTarget;queueMicrotask(()=>{const et=!(Ho(R,Ze)||Ho(L,Ze)||Ho(Ze,L)||Ho(ne==null?void 0:ne.portalNode,Ze)||Ze!=null&&Ze.hasAttribute(hp("focus-guard"))||me&&(Ig(me.nodesRef.current,x).find(Q=>{var Se,Te;return Ho((Se=Q.context)==null?void 0:Se.elements.floating,Ze)||Ho((Te=Q.context)==null?void 0:Te.elements.domReference,Ze)})||rQ(me.nodesRef.current,x).find(Q=>{var Se,Te;return((Se=Q.context)==null?void 0:Se.elements.floating)===Ze||((Te=Q.context)==null?void 0:Te.elements.domReference)===Ze})));if(c&&et&&kf(Js(ue))===Js(ue).body){Kr(ue)&&ue.focus();const Q=Pe.current,Se=we(),Te=Se[Q]||Se[Se.length-1]||ue;Kr(Te)&&Te.focus()}(W||!h)&&Ze&&et&&!Be.current&&Ze!==iE()&&(ge.current=!0,E(!1,Fe,"focus-out"))})}if(L&&Kr(R))return R.addEventListener("focusout",$e),R.addEventListener("pointerdown",Le),L.addEventListener("focusout",$e),()=>{R.removeEventListener("focusout",$e),R.removeEventListener("pointerdown",Le),L.removeEventListener("focusout",$e)}},[r,R,L,ue,h,x,me,ne,E,g,c,we,W]),j.useEffect(()=>{var Le;if(r)return;const $e=Array.from((ne==null||(Le=ne.portalNode)==null?void 0:Le.querySelectorAll("["+hp("portal")+"]"))||[]);if(L){const Fe=[L,...$e,oe.current,ve.current,Y.current.includes("reference")||W?R:null].filter(et=>et!=null),Ze=h||W?eE(Fe,z,!z):eE(Fe);return()=>{Ze()}}},[r,R,L,h,Y,ne,W,z]),$o(()=>{if(r||!Kr(ue))return;const Le=Js(ue),$e=kf(Le);queueMicrotask(()=>{const Fe=U(ue),Ze=te.current,et=(typeof Ze=="number"?Fe[Ze]:Ze.current)||ue,Q=Ho(ue,$e);!k&&!Q&&v&&Vd(et,{preventScroll:et===ue})})},[r,v,ue,k,U,te]),$o(()=>{if(r||!ue)return;let Le=!1;const $e=Js(ue),Fe=kf($e);let et=D.current.openEvent;$5(Fe);function Q(ke){let{open:vt,reason:Ye,event:Dt,nested:cn}=ke;vt&&(et=Dt),Ye==="escape-key"&&y.domReference.current&&$5(y.domReference.current),Ye==="hover"&&Dt.type==="mouseleave"&&(ge.current=!0),Ye==="outside-press"&&(cn?(ge.current=!1,Le=!0):ge.current=!(jq(Dt)||$q(Dt)))}T.on("openchange",Q);const Se=$e.createElement("span");Se.setAttribute("tabindex","-1"),Se.setAttribute("aria-hidden","true"),Object.assign(Se.style,Lv),he&&R&&R.insertAdjacentElement("afterend",Se);function Te(){return typeof se.current=="boolean"?iE()||Se:se.current.current||Se}return()=>{T.off("openchange",Q);const ke=kf($e),vt=Ho(L,ke)||me&&Ig(me.nodesRef.current,x).some(cn=>{var Bt;return Ho((Bt=cn.context)==null?void 0:Bt.elements.floating,ke)});(vt||et&&["click","mousedown"].includes(et.type))&&y.domReference.current&&$5(y.domReference.current);const Dt=Te();queueMicrotask(()=>{se.current&&!ge.current&&Kr(Dt)&&(!(Dt!==ke&&ke!==$e.body)||vt)&&Dt.focus({preventScroll:Le}),Se.remove()})}},[r,L,ue,se,D,y,T,me,x,he,R]),j.useEffect(()=>{queueMicrotask(()=>{ge.current=!1})},[r]),$o(()=>{if(!r&&ne)return ne.setFocusManagerState({modal:h,closeOnFocusOut:g,open:v,onOpenChange:E,refs:y}),()=>{ne.setFocusManagerState(null)}},[r,ne,h,v,E,y,g]),$o(()=>{if(r||!ue||typeof MutationObserver!="function"||k)return;const Le=()=>{const Fe=ue.getAttribute("tabindex"),Ze=we(),et=kf(Js(L)),Q=Ze.indexOf(et);Q!==-1&&(Pe.current=Q),Y.current.includes("floating")||et!==y.domReference.current&&Ze.length===0?Fe!=="0"&&ue.setAttribute("tabindex","0"):Fe!=="-1"&&ue.setAttribute("tabindex","-1")};Le();const $e=new MutationObserver(Le);return $e.observe(ue,{childList:!0,subtree:!0,attributes:!0}),()=>{$e.disconnect()}},[r,L,ue,y,Y,we,k]);function xe(Le){return r||!d||!h?null:j.createElement(hQ,{ref:Le==="start"?oe:ve,onClick:$e=>E(!1,$e.nativeEvent)},typeof d=="string"?d:"Dismiss")}const Ie=!r&&z&&(h?!W:!0)&&(he||h);return j.createElement(j.Fragment,null,Ie&&j.createElement($3,{"data-type":"inside",ref:ne==null?void 0:ne.beforeInsideRef,onFocus:Le=>{if(h){const Fe=U();Vd(i[0]==="reference"?Fe[0]:Fe[Fe.length-1])}else if(ne!=null&&ne.preserveTabOrder&&ne.portalNode)if(ge.current=!1,Fg(Le,ne.portalNode)){const Fe=KA()||R;Fe==null||Fe.focus()}else{var $e;($e=ne.beforeOutsideRef.current)==null||$e.focus()}}}),!W&&xe("start"),n,xe("end"),Ie&&j.createElement($3,{"data-type":"inside",ref:ne==null?void 0:ne.afterInsideRef,onFocus:Le=>{if(h)Vd(U()[0]);else if(ne!=null&&ne.preserveTabOrder&&ne.portalNode)if(g&&(ge.current=!0),Fg(Le,ne.portalNode)){const Fe=YA()||R;Fe==null||Fe.focus()}else{var $e;($e=ne.afterOutsideRef.current)==null||$e.focus()}}}))}let Rm=0;function dQ(){const e=/iP(hone|ad|od)|iOS/.test(DA()),t=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,o=t.left?parseFloat(t.left):window.scrollX,s=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",i&&(t[r]=i+"px"),e){var u,c;const h=((u=window.visualViewport)==null?void 0:u.offsetLeft)||0,d=((c=window.visualViewport)==null?void 0:c.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(s-Math.floor(d))+"px",left:-(o-Math.floor(h))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[r]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(o,s))}}let oE=()=>{};const gQ=j.forwardRef(function(t,n){const{lockScroll:r=!1,...i}=t;return $o(()=>{if(r)return Rm++,Rm===1&&(oE=dQ()),()=>{Rm--,Rm===0&&oE()}},[r]),j.createElement("div",fp({ref:n},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function sE(e){return Kr(e.target)&&e.target.tagName==="BUTTON"}function aE(e){return BA(e)}function eB(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:u="click",toggle:c=!0,ignoreMouse:h=!1,keyboardHandlers:d=!0,stickIfOpen:g=!0}=t,v=j.useRef(),y=j.useRef(!1),x=j.useMemo(()=>({onPointerDown(E){v.current=E.pointerType},onMouseDown(E){const T=v.current;E.button===0&&u!=="click"&&(zx(T)&&h||(n&&c&&(!(i.current.openEvent&&g)||i.current.openEvent.type==="mousedown")?r(!1,E.nativeEvent,"click"):(E.preventDefault(),r(!0,E.nativeEvent,"click"))))},onClick(E){const T=v.current;if(u==="mousedown"&&v.current){v.current=void 0;return}zx(T)&&h||(n&&c&&(!(i.current.openEvent&&g)||i.current.openEvent.type==="click")?r(!1,E.nativeEvent,"click"):r(!0,E.nativeEvent,"click"))},onKeyDown(E){v.current=void 0,!(E.defaultPrevented||!d||sE(E))&&(E.key===" "&&!aE(o)&&(E.preventDefault(),y.current=!0),E.key==="Enter"&&r(!(n&&c),E.nativeEvent,"click"))},onKeyUp(E){E.defaultPrevented||!d||sE(E)||aE(o)||E.key===" "&&y.current&&(y.current=!1,r(!(n&&c),E.nativeEvent,"click"))}}),[i,o,u,h,d,r,n,g,c]);return j.useMemo(()=>s?{reference:x}:{},[s,x])}const pQ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},mQ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},uE=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function tB(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:u=!0,outsidePress:c=!0,outsidePressEvent:h="pointerdown",referencePress:d=!1,referencePressEvent:g="pointerdown",ancestorScroll:v=!1,bubbles:y,capture:x}=t,E=fy(),T=ec(typeof c=="function"?c:()=>!1),D=typeof c=="function"?T:c,S=j.useRef(!1),R=j.useRef(!1),{escapeKey:L,outsidePress:k}=uE(y),{escapeKey:W,outsidePress:z}=uE(x),Y=j.useRef(!1),te=ec(ge=>{var Be;if(!n||!s||!u||ge.key!=="Escape"||Y.current)return;const Pe=(Be=o.current.floatingContext)==null?void 0:Be.nodeId,he=E?Ig(E.nodesRef.current,Pe):[];if(!L&&(ge.stopPropagation(),he.length>0)){let ue=!0;if(he.forEach(we=>{var U;if((U=we.context)!=null&&U.open&&!we.context.dataRef.current.__escapeKeyBubbles){ue=!1;return}}),!ue)return}r(!1,Vq(ge)?ge.nativeEvent:ge,"escape-key")}),se=ec(ge=>{var Be;const Pe=()=>{var he;te(ge),(he=If(ge))==null||he.removeEventListener("keydown",Pe)};(Be=If(ge))==null||Be.addEventListener("keydown",Pe)}),me=ec(ge=>{var Be;const Pe=S.current;S.current=!1;const he=R.current;if(R.current=!1,h==="click"&&he||Pe||typeof D=="function"&&!D(ge))return;const ue=If(ge),we="["+hp("inert")+"]",U=Js(i.floating).querySelectorAll(we);let xe=hr(ue)?ue:null;for(;xe&&!mc(xe);){const Fe=el(xe);if(mc(Fe)||!hr(Fe))break;xe=Fe}if(U.length&&hr(ue)&&!Uq(ue)&&!Ho(ue,i.floating)&&Array.from(U).every(Fe=>!Ho(xe,Fe)))return;if(Kr(ue)&&ve){const Fe=ue.clientWidth>0&&ue.scrollWidth>ue.clientWidth,Ze=ue.clientHeight>0&&ue.scrollHeight>ue.clientHeight;let et=Ze&&ge.offsetX>ue.clientWidth;if(Ze&&As(ue).direction==="rtl"&&(et=ge.offsetX<=ue.offsetWidth-ue.clientWidth),et||Fe&&ge.offsetY>ue.clientHeight)return}const Ie=(Be=o.current.floatingContext)==null?void 0:Be.nodeId,Le=E&&Ig(E.nodesRef.current,Ie).some(Fe=>{var Ze;return L5(ge,(Ze=Fe.context)==null?void 0:Ze.elements.floating)});if(L5(ge,i.floating)||L5(ge,i.domReference)||Le)return;const $e=E?Ig(E.nodesRef.current,Ie):[];if($e.length>0){let Fe=!0;if($e.forEach(Ze=>{var et;if((et=Ze.context)!=null&&et.open&&!Ze.context.dataRef.current.__outsidePressBubbles){Fe=!1;return}}),!Fe)return}r(!1,ge,"outside-press")}),ne=ec(ge=>{var Be;const Pe=()=>{var he;me(ge),(he=If(ge))==null||he.removeEventListener(h,Pe)};(Be=If(ge))==null||Be.addEventListener(h,Pe)});j.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=L,o.current.__outsidePressBubbles=k;let ge=-1;function Be(U){r(!1,U,"ancestor-scroll")}function Pe(){window.clearTimeout(ge),Y.current=!0}function he(){ge=window.setTimeout(()=>{Y.current=!1},Mv()?5:0)}const ue=Js(i.floating);u&&(ue.addEventListener("keydown",W?se:te,W),ue.addEventListener("compositionstart",Pe),ue.addEventListener("compositionend",he)),D&&ue.addEventListener(h,z?ne:me,z);let we=[];return v&&(hr(i.domReference)&&(we=ac(i.domReference)),hr(i.floating)&&(we=we.concat(ac(i.floating))),!hr(i.reference)&&i.reference&&i.reference.contextElement&&(we=we.concat(ac(i.reference.contextElement)))),we=we.filter(U=>{var xe;return U!==((xe=ue.defaultView)==null?void 0:xe.visualViewport)}),we.forEach(U=>{U.addEventListener("scroll",Be,{passive:!0})}),()=>{u&&(ue.removeEventListener("keydown",W?se:te,W),ue.removeEventListener("compositionstart",Pe),ue.removeEventListener("compositionend",he)),D&&ue.removeEventListener(h,z?ne:me,z),we.forEach(U=>{U.removeEventListener("scroll",Be)}),window.clearTimeout(ge)}},[o,i,u,D,h,n,r,v,s,L,k,te,W,se,me,z,ne]),j.useEffect(()=>{S.current=!1},[D,h]);const oe=j.useMemo(()=>({onKeyDown:te,[pQ[g]]:ge=>{d&&r(!1,ge.nativeEvent,"reference-press")}}),[te,r,d,g]),ve=j.useMemo(()=>({onKeyDown:te,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[mQ[h]]:()=>{S.current=!0}}),[te,h]);return j.useMemo(()=>s?{reference:oe,floating:ve}:{},[s,oe,ve])}function vQ(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Fp(),o=j.useRef({}),[s]=j.useState(()=>eQ()),u=VA()!=null,[c,h]=j.useState(r.reference),d=ec((y,x,E)=>{o.current.openEvent=y?x:void 0,s.emit("openchange",{open:y,event:x,reason:E,nested:u}),n==null||n(y,x,E)}),g=j.useMemo(()=>({setPositionReference:h}),[]),v=j.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return j.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:v,events:s,floatingId:i,refs:g}),[t,d,v,s,i,g])}function _v(e){e===void 0&&(e={});const{nodeId:t}=e,n=vQ({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=j.useState(null),[u,c]=j.useState(null),d=(i==null?void 0:i.domReference)||o,g=j.useRef(null),v=fy();$o(()=>{d&&(g.current=d)},[d]);const y=XZ({...e,elements:{...i,...u&&{reference:u}}}),x=j.useCallback(R=>{const L=hr(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),contextElement:R}:R;c(L),y.refs.setReference(L)},[y.refs]),E=j.useCallback(R=>{(hr(R)||R===null)&&(g.current=R,s(R)),(hr(y.refs.reference.current)||y.refs.reference.current===null||R!==null&&!hr(R))&&y.refs.setReference(R)},[y.refs]),T=j.useMemo(()=>({...y.refs,setReference:E,setPositionReference:x,domReference:g}),[y.refs,E,x]),D=j.useMemo(()=>({...y.elements,domReference:d}),[y.elements,d]),S=j.useMemo(()=>({...y,...r,refs:T,elements:D,nodeId:t}),[y,T,D,t,r]);return $o(()=>{r.dataRef.current.floatingContext=S;const R=v==null?void 0:v.nodesRef.current.find(L=>L.id===t);R&&(R.context=S)}),j.useMemo(()=>({...y,context:S,refs:T,elements:D}),[y,T,D,S])}const lE="active",cE="selected";function W5(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[lE]:s,[cE]:u,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[g4]:""},...o,...t.map(s=>{const u=s?s[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((s,u)=>(u&&Object.entries(u).forEach(c=>{let[h,d]=c;if(!(i&&[lE,cE].includes(h)))if(h.indexOf("on")===0){if(r.has(h)||r.set(h,[]),typeof d=="function"){var g;(g=r.get(h))==null||g.push(d),s[h]=function(){for(var v,y=arguments.length,x=new Array(y),E=0;E<y;E++)x[E]=arguments[E];return(v=r.get(h))==null?void 0:v.map(T=>T(...x)).find(T=>T!==void 0)}}}else s[h]=d}),s),{})}}function nB(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=j.useCallback(u=>W5(u,e,"reference"),t),o=j.useCallback(u=>W5(u,e,"floating"),n),s=j.useCallback(u=>W5(u,e,"item"),r);return j.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const yQ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function rB(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,u=(n=yQ.get(s))!=null?n:s,c=Fp(),d=VA()!=null,g=j.useMemo(()=>u==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":u==="alertdialog"?"dialog":u,"aria-controls":r?i:void 0,...u==="listbox"&&{role:"combobox"},...u==="menu"&&{id:c},...u==="menu"&&d&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[u,i,d,r,c,s]),v=j.useMemo(()=>{const x={id:i,...u&&{role:u}};return u==="tooltip"||s==="label"?x:{...x,...u==="menu"&&{"aria-labelledby":c}}},[u,i,c,s]),y=j.useCallback(x=>{let{active:E,selected:T}=x;const D={role:"option",...E&&{id:i+"-option"}};switch(s){case"select":return{...D,"aria-selected":E&&T};case"combobox":return{...D,...E&&{"aria-selected":!0}}}return{}},[i,s]);return j.useMemo(()=>o?{reference:g,floating:v,item:y}:{},[o,g,v,y])}function wQ({initialOpen:e=!1,placement:t="bottom",modal:n,sideOffset:r,open:i,onOpenChange:o}={}){const[s,u]=j.useState(e),[c,h]=j.useState(),[d,g]=j.useState(),v=i??s,y=o??u,x=_v({placement:t,open:v,onOpenChange:y,whileElementsMounted:$Z,middleware:[ly(r||4),cy({crossAxis:t.includes("-"),fallbackAxisSideDirection:"end",padding:5}),KZ({padding:5})]}),E=x.context,T=eB(E,{enabled:i==null}),D=tB(E),S=rB(E),R=nB([T,D,S]);return j.useMemo(()=>({open:v,setOpen:y,...R,...x,modal:n,labelId:c,descriptionId:d,setLabelId:h,setDescriptionId:g}),[v,y,R,x,n,c,d])}const iB=j.createContext(null),oB=()=>{const e=j.useContext(iB);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function tl({children:e,modal:t=!1,...n}){const r=wQ({modal:t,...n});return b.jsx(iB.Provider,{value:r,children:e})}const nl=j.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=oB(),s=t.ref,u=Fv([o.refs.setReference,i,s]);return n&&j.isValidElement(t)?j.cloneElement(t,o.getReferenceProps({ref:u,...r,...t.props,"data-state":o.open?"open":"closed"})):b.jsx("button",{ref:u,type:"button","data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})}),rl=j.forwardRef(function({container:t,style:n,...r},i){const{context:o,...s}=oB(),u=Fv([s.refs.setFloating,i]);return o.open?b.jsx(ZA,{root:t,children:b.jsx(JA,{context:o,modal:s.modal,children:b.jsx("div",{ref:u,style:{...s.floatingStyles,...n},"aria-labelledby":s.labelId,"aria-describedby":s.descriptionId,...s.getFloatingProps(r),children:r.children})})}):null}),sB={[fr.default]:{strokeColor:qr,fill:"#FFFFFF"},[fr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[fr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[fr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[fr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[fr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var gp=(e=>(e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(gp||{});const aB="freehand",ea={isFreehand:e=>e.type===aB};var _f=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(_f||{});const uB=j.createContext(null),Ms=()=>{const e=j.useContext(uB);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},CQ=()=>{const{appState:e,setAppState:t}=Ms();return n=>{t({...e,pointer:n})}},hy=xt.createContext({}),p4=(e="",t=!1)=>`menu-item menu-item-base ${e} ${t?"menu-item--active":""}`.trim(),lB=(e,t)=>{const n=j.useContext(hy);return VY(e,r=>{var o;const i=new CustomEvent(cp.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||(o=n.onSelect)==null||o.call(n,i)})},Lp=({children:e,className:t="",onSelect:n,style:r})=>{const i=Dn(`menu ${t}`).trim();return b.jsx(hy.Provider,{value:{onSelect:n},children:b.jsx("div",{className:i,style:r,"data-testid":"menu",children:b.jsx(Rs,{className:"menu-container",padding:2,children:e})})})};Lp.displayName="Menu";const cB=({icon:e,shortcut:t,children:n})=>b.jsxs(b.Fragment,{children:[e&&b.jsx("div",{className:"menu-item__icon",children:e}),b.jsx("div",{className:"menu-item__text",children:n}),t&&b.jsx("div",{className:"menu-item__shortcut",children:t})]}),Ts=({icon:e,onSelect:t,children:n,shortcut:r,className:i,selected:o,submenu:s,...u})=>{const[c,h]=j.useState(!1),d=j.useRef(),g=lB(u.onClick,t),v=b.jsx(cB,{icon:e,shortcut:r,children:n}),y=()=>{d.current&&window.clearTimeout(d.current),h(!0)},x=()=>{d.current=window.setTimeout(()=>{h(!1)},100)};return s?b.jsxs(tl,{open:c,onOpenChange:h,placement:"right-start",children:[b.jsx(nl,{asChild:!0,children:b.jsx("button",{...u,type:"button",className:p4(i,o||c),title:u.title??u["aria-label"],onClick:g,onMouseEnter:y,onMouseLeave:x,children:v})}),b.jsx(rl,{onMouseEnter:y,onMouseLeave:x,children:s})]}):b.jsx("button",{...u,onClick:g,type:"button",className:p4(i,o),title:u.title??u["aria-label"],children:v})};Ts.displayName="MenuItem";const fB=({children:e})=>b.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});fB.displayName="MenuItemBadge";Ts.Badge=fB;const dy=()=>{const{appState:e,setAppState:t}=Ms();return b.jsx(Ts,{"data-testid":"marmaid-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:_f.mermaidToDrawnix})},icon:bq,"aria-label":"Mermaid 到 Drawnix",children:"Mermaid 到 Drawnix"})};dy.displayName="MermaidToDrawnix";const xQ=()=>{const{appState:e,setAppState:t}=Ms();return b.jsx(Ts,{"data-testid":"markdown-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:_f.markdownToDrawnix})},icon:kq,"aria-label":"Markdown 到 Drawnix",children:"Markdown 到 Drawnix"})};dy.displayName="MarkdownToDrawnix";const EQ=()=>{const e=Zr(),t=I.getBoardContainer(e),[n,r]=j.useState(!1);return b.jsxs(tl,{sideOffset:12,open:n,onOpenChange:i=>{r(i)},placement:"bottom-start",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{type:"icon",visible:!0,selected:n,icon:PA,title:"Extra Tools","aria-label":"Extra Tools",onPointerDown:()=>{r(!n)}})}),b.jsx(rl,{container:t,children:b.jsxs(Lp,{onSelect:()=>{r(!1)},children:[b.jsx(dy,{}),b.jsx(xQ,{})]})})]},0)},Km=(e,t)=>{const n=Qe(e);XY(e,{elements:n.length>0?n:void 0,fillStyle:t?"transparent":"white"}).then(r=>{if(r){const i=t?"png":"jpg",o=UY(r),s=`drawnix-${new Date().getTime()}.${i}`;KY(o,s)}})},hB=async e=>{const t=await yA({description:"Image",extensions:Object.keys(ny)});u4(e,t)},z5=e=>e===Zt.hand||e===Zt.selection,PQ=[{icon:YY,pointer:Zt.hand,title:"Hand — H"},{icon:qY,pointer:Zt.selection,title:"Selection — V"},{icon:ZY,pointer:$u.mind,title:"Mind — M"},{icon:JY,pointer:pt.text,title:"Text — T"},{icon:EA,pointer:gp.feltTipPen,title:"Pen — P"},{icon:eq,title:"Arrow — A",key:"arrow",pointer:Fn.straight},{icon:QY,title:"Shape",key:"shape",pointer:pt.rectangle},{icon:Mq,title:"Image — Cmd+U",key:"image"},{icon:PA,title:"More Tools",key:"extra-tools"}],SQ=e=>Object.keys(Fn).includes(e.pointer),TQ=e=>Object.keys(pt).includes(e.pointer)||Object.keys(gt).includes(e.pointer),DQ=()=>{const e=Zr(),{appState:t}=Ms(),n=CQ(),r=I.getBoardContainer(e),[i,o]=j.useState(!1),[s,u]=j.useState(!1),c=g=>{na(e,Gi.dnd),vn.updatePointerType(e,g),n(g)},h=()=>{na(e,Gi.drawing)},d=g=>I.isPointer(e,g.pointer)&&!i&&!s;return b.jsx(Rs,{padding:1,className:Dn("draw-toolbar",il),children:b.jsx(Wo.Row,{gap:1,children:PQ.map((g,v)=>t.isMobile&&g.pointer===Zt.hand?b.jsx(b.Fragment,{}):g.key==="shape"?b.jsxs(tl,{open:s,sideOffset:12,onOpenChange:y=>{u(y)},children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{type:"icon",visible:!0,selected:s||TQ(e)&&!I.isPointer(e,pt.text),icon:g.icon,title:"Shape","aria-label":"Shape",onPointerDown:()=>{u(!s)}})}),b.jsx(rl,{container:r,children:b.jsx(Lq,{onPointerUp:y=>{u(!1),n(y)}})})]},v):g.key==="arrow"?b.jsxs(tl,{open:i,sideOffset:12,onOpenChange:y=>{o(y)},children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{type:"icon",visible:!0,selected:i||SQ(e),icon:g.icon,title:g.title,"aria-label":g.title,onPointerDown:()=>{o(!s)}})}),b.jsx(rl,{container:r,children:b.jsx(Nq,{onPointerUp:y=>{o(!1),n(y)}})})]},v):g.key==="extra-tools"?b.jsx(EQ,{},v):b.jsx(qn,{type:"radio",icon:g.icon,checked:d(g),title:`${g.title}`,"aria-label":`${g.title}`,onPointerDown:()=>{g.pointer&&!z5(g.pointer)&&c(g.pointer)},onPointerUp:()=>{g.pointer&&!z5(g.pointer)?h():g.pointer&&z5(g.pointer)&&(vn.updatePointerType(e,g.pointer),n(g.pointer)),g.key==="image"&&hB(e)}},v))})})},AQ=()=>{var i;const e=Zr(),t=I.getBoardContainer(e),[n,r]=j.useState(!1);return b.jsx(Rs,{padding:1,className:Dn("zoom-toolbar",il),children:b.jsxs(Wo.Row,{gap:1,children:[b.jsx(qn,{type:"button",icon:gq,visible:!0,title:"缩小 — Cmd+-","aria-label":"缩小 — Cmd+-",onPointerUp:()=>{vn.updateZoom(e,e.viewport.zoom-.1)},className:"zoom-out-button"},0),b.jsxs(tl,{sideOffset:12,open:n,onOpenChange:o=>{r(o)},placement:"bottom-end",children:[b.jsx(nl,{asChild:!0,children:b.jsxs("div",{title:"自适应","aria-label":"自适应",className:Dn("zoom-menu-trigger",{active:n}),onPointerUp:()=>{r(!n)},children:[Number(((((i=e==null?void 0:e.viewport)==null?void 0:i.zoom)||1)*100).toFixed(0)),"%"]},1)}),b.jsx(rl,{container:t,children:b.jsxs(Lp,{onSelect:()=>{r(!1)},children:[b.jsx(Ts,{"data-testid":"open-button",onSelect:()=>{vn.fitViewport(e)},"aria-label":"自适应缩放",shortcut:"Cmd+Shift+=",children:"自适应缩放"}),b.jsx(Ts,{"data-testid":"open-button",onSelect:()=>{vn.updateZoom(e,1)},"aria-label":"缩放至 100%",shortcut:"Cmd+0",children:"缩放至 100%"})]})})]}),b.jsx(qn,{type:"button",icon:pq,visible:!0,title:"放大 — Cmd++","aria-label":"放大 — Cmd++",onPointerUp:()=>{vn.updateZoom(e,e.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})},BQ="TRANSPARENT",gy="NO_COLOR",py="#FFFFFF",dB=[{name:"Topic Color",value:gy},{name:"Basic Black",value:qr},{name:"White",value:py},{name:"Gray",value:"#808080"},{name:"Deep Blue",value:"#1E90FF"},{name:"Red",value:"#FF4500"},{name:"Green",value:"#2ECC71"},{name:"Yellow",value:"#FFD700"},{name:"Purple",value:"#8A2BE2"},{name:"Orange",value:"#FFA500"},{name:"Pastel Pink",value:"#FFB3BA"},{name:"Cyan",value:"#00CED1"},{name:"Brown",value:"#8B4513"},{name:"Forest Green",value:"#228B22"},{name:"Light Gray",value:"#D3D3D3"}];function RQ(e){return Math.round((100-e)/100*255)}function MQ(e){return Math.round((1-e/255)*100)}function G0(e,t){const r=RQ(100-t).toString(16).padStart(2,"0");return`${e}${r}`}function j0(e){e=e.replace(/^#/,"");let t;if(e.length===8)t=parseInt(e.slice(6,8),16);else if(e.length===4)t=parseInt(e.slice(3,4).repeat(2),16);else return 100;return 100-MQ(t)}function bQ(e){return e!=="none"}function lh(e){const t=e.replace(/^#/,"").toUpperCase();return t.length===8?"#"+t.slice(0,6):t.length===4?"#"+t.slice(0,3):t.length===6||t.length===3?"#"+t:e}function gB(e){return e===py}function pB(e){return e===0}function _p(e){return e===100}function f0(e){return e===gy}function kQ(e){return!e||e===qr}var xg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var OQ=xg.exports,fE;function IQ(){return fE||(fE=1,function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",g=1,v=2,y=4,x=1,E=2,T=1,D=2,S=4,R=8,L=16,k=32,W=64,z=128,Y=256,te=512,se=30,me="...",ne=800,oe=16,ve=1,ge=2,Be=3,Pe=1/0,he=9007199254740991,ue=17976931348623157e292,we=NaN,U=4294967295,xe=U-1,Ie=U>>>1,Le=[["ary",z],["bind",T],["bindKey",D],["curry",R],["curryRight",L],["flip",te],["partial",k],["partialRight",W],["rearg",Y]],$e="[object Arguments]",Fe="[object Array]",Ze="[object AsyncFunction]",et="[object Boolean]",Q="[object Date]",Se="[object DOMException]",Te="[object Error]",ke="[object Function]",vt="[object GeneratorFunction]",Ye="[object Map]",Dt="[object Number]",cn="[object Null]",Bt="[object Object]",Mn="[object Promise]",wn="[object Proxy]",fn="[object RegExp]",_t="[object Set]",sn="[object String]",gr="[object Symbol]",zi="[object Undefined]",jn="[object WeakMap]",Vi="[object WeakSet]",pr="[object ArrayBuffer]",mn="[object DataView]",bn="[object Float32Array]",Ir="[object Float64Array]",Bi="[object Int8Array]",bs="[object Int16Array]",qo="[object Int32Array]",Po="[object Uint8Array]",ru="[object Uint8ClampedArray]",So="[object Uint16Array]",Ui="[object Uint32Array]",sl=/\b__p \+= '';/g,Ac=/\b(__p \+=) '' \+/g,Xi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ks=/&(?:amp|lt|gt|quot|#39);/g,Os=/[&<>"']/g,Bc=RegExp(ks.source),ch=RegExp(Os.source),fh=/<%-([\s\S]+?)%>/g,hh=/<%([\s\S]+?)%>/g,Rc=/<%=([\s\S]+?)%>/g,Mc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dh=/^\w*$/,iu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ou=/[\\^$.*+?()[\]{}|]/g,su=RegExp(ou.source),bc=/^\s+/,la=/\s/,al=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ul=/\{\n\/\* \[wrapped with (.+)\] \*/,kc=/,? & /,$0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,W0=/[()=,{}\[\]\/\s]/,z0=/\\(\\)?/g,Is=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oc=/\w*$/,gh=/^[-+]0x[0-9a-f]+$/i,V0=/^0b[01]+$/i,ph=/^\[object .+?Constructor\]$/,mh=/^0o[0-7]+$/i,vh=/^(?:0|[1-9]\d*)$/,yh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ll=/($^)/,wh=/['\n\r\u2028\u2029\\]/g,Cn="\\ud800-\\udfff",Ch="\\u0300-\\u036f",Zo="\\ufe20-\\ufe2f",xh="\\u20d0-\\u20ff",Qo=Ch+Zo+xh,cl="\\u2700-\\u27bf",Ic="a-z\\xdf-\\xf6\\xf8-\\xff",fl="\\xac\\xb1\\xd7\\xf7",mi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",U0="\\u2000-\\u206f",Ri=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",H="A-Z\\xc0-\\xd6\\xd8-\\xde",q="\\ufe0e\\ufe0f",$=fl+mi+U0+Ri,ie="['’]",le="["+Cn+"]",ee="["+$+"]",De="["+Qo+"]",He="\\d+",Ve="["+cl+"]",We="["+Ic+"]",qe="[^"+Cn+$+He+cl+Ic+H+"]",st="\\ud83c[\\udffb-\\udfff]",Nt="(?:"+De+"|"+st+")",an="[^"+Cn+"]",Jt="(?:\\ud83c[\\udde6-\\uddff]){2}",Et="[\\ud800-\\udbff][\\udc00-\\udfff]",Pn="["+H+"]",Fr="\\u200d",Jo="(?:"+We+"|"+qe+")",hl="(?:"+Pn+"|"+qe+")",Fc="(?:"+ie+"(?:d|ll|m|re|s|t|ve))?",au="(?:"+ie+"(?:D|LL|M|RE|S|T|VE))?",Lc=Nt+"?",uu="["+q+"]?",es="(?:"+Fr+"(?:"+[an,Jt,Et].join("|")+")"+uu+Lc+")*",To="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ca="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",dl=uu+Lc+es,_c="(?:"+[Ve,Jt,Et].join("|")+")"+dl,fa="(?:"+[an+De+"?",De,Jt,Et,le].join("|")+")",Nv=RegExp(ie,"g"),Hp=RegExp(De,"g"),lu=RegExp(st+"(?="+st+")|"+fa+dl,"g"),Hv=RegExp([Pn+"?"+We+"+"+Fc+"(?="+[ee,Pn,"$"].join("|")+")",hl+"+"+au+"(?="+[ee,Pn+Jo,"$"].join("|")+")",Pn+"?"+Jo+"+"+Fc,Pn+"+"+au,ca,To,He,_c].join("|"),"g"),Gp=RegExp("["+Fr+Cn+Qo+q+"]"),Eh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,jp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gv=-1,Sn={};Sn[bn]=Sn[Ir]=Sn[Bi]=Sn[bs]=Sn[qo]=Sn[Po]=Sn[ru]=Sn[So]=Sn[Ui]=!0,Sn[$e]=Sn[Fe]=Sn[pr]=Sn[et]=Sn[mn]=Sn[Q]=Sn[Te]=Sn[ke]=Sn[Ye]=Sn[Dt]=Sn[Bt]=Sn[fn]=Sn[_t]=Sn[sn]=Sn[jn]=!1;var xn={};xn[$e]=xn[Fe]=xn[pr]=xn[mn]=xn[et]=xn[Q]=xn[bn]=xn[Ir]=xn[Bi]=xn[bs]=xn[qo]=xn[Ye]=xn[Dt]=xn[Bt]=xn[fn]=xn[_t]=xn[sn]=xn[gr]=xn[Po]=xn[ru]=xn[So]=xn[Ui]=!0,xn[Te]=xn[ke]=xn[jn]=!1;var gl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ph={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$v={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},X0=parseFloat,Sh=parseInt,Th=typeof Cs=="object"&&Cs&&Cs.Object===Object&&Cs,$p=typeof self=="object"&&self&&self.Object===Object&&self,$n=Th||$p||Function("return this")(),Nc=t&&!t.nodeType&&t,ts=Nc&&!0&&e&&!e.nodeType&&e,K0=ts&&ts.exports===Nc,pl=K0&&Th.process,Jr=function(){try{var ae=ts&&ts.require&&ts.require("util").types;return ae||pl&&pl.binding&&pl.binding("util")}catch{}}(),Y0=Jr&&Jr.isArrayBuffer,vi=Jr&&Jr.isDate,cu=Jr&&Jr.isMap,Dh=Jr&&Jr.isRegExp,ml=Jr&&Jr.isSet,Wp=Jr&&Jr.isTypedArray;function ei(ae,Ae,ye){switch(ye.length){case 0:return ae.call(Ae);case 1:return ae.call(Ae,ye[0]);case 2:return ae.call(Ae,ye[0],ye[1]);case 3:return ae.call(Ae,ye[0],ye[1],ye[2])}return ae.apply(Ae,ye)}function q0(ae,Ae,ye,nt){for(var Ft=-1,hn=ae==null?0:ae.length;++Ft<hn;){var ar=ae[Ft];Ae(nt,ar,ye(ar),ae)}return nt}function Lr(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length;++ye<nt&&Ae(ae[ye],ye,ae)!==!1;);return ae}function Ah(ae,Ae){for(var ye=ae==null?0:ae.length;ye--&&Ae(ae[ye],ye,ae)!==!1;);return ae}function Z0(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length;++ye<nt;)if(!Ae(ae[ye],ye,ae))return!1;return!0}function ha(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length,Ft=0,hn=[];++ye<nt;){var ar=ae[ye];Ae(ar,ye,ae)&&(hn[Ft++]=ar)}return hn}function Bh(ae,Ae){var ye=ae==null?0:ae.length;return!!ye&&vl(ae,Ae,0)>-1}function Q0(ae,Ae,ye){for(var nt=-1,Ft=ae==null?0:ae.length;++nt<Ft;)if(ye(Ae,ae[nt]))return!0;return!1}function On(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length,Ft=Array(nt);++ye<nt;)Ft[ye]=Ae(ae[ye],ye,ae);return Ft}function da(ae,Ae){for(var ye=-1,nt=Ae.length,Ft=ae.length;++ye<nt;)ae[Ft+ye]=Ae[ye];return ae}function J0(ae,Ae,ye,nt){var Ft=-1,hn=ae==null?0:ae.length;for(nt&&hn&&(ye=ae[++Ft]);++Ft<hn;)ye=Ae(ye,ae[Ft],Ft,ae);return ye}function Wv(ae,Ae,ye,nt){var Ft=ae==null?0:ae.length;for(nt&&Ft&&(ye=ae[--Ft]);Ft--;)ye=Ae(ye,ae[Ft],Ft,ae);return ye}function e1(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length;++ye<nt;)if(Ae(ae[ye],ye,ae))return!0;return!1}var zv=n1("length");function zp(ae){return ae.split("")}function Vv(ae){return ae.match($0)||[]}function Vp(ae,Ae,ye){var nt;return ye(ae,function(Ft,hn,ar){if(Ae(Ft,hn,ar))return nt=hn,!1}),nt}function Rh(ae,Ae,ye,nt){for(var Ft=ae.length,hn=ye+(nt?1:-1);nt?hn--:++hn<Ft;)if(Ae(ae[hn],hn,ae))return hn;return-1}function vl(ae,Ae,ye){return Ae===Ae?kh(ae,Ae,ye):Rh(ae,Up,ye)}function t1(ae,Ae,ye,nt){for(var Ft=ye-1,hn=ae.length;++Ft<hn;)if(nt(ae[Ft],Ae))return Ft;return-1}function Up(ae){return ae!==ae}function Xp(ae,Ae){var ye=ae==null?0:ae.length;return ye?r1(ae,Ae)/ye:we}function n1(ae){return function(Ae){return Ae==null?n:Ae[ae]}}function Mh(ae){return function(Ae){return ae==null?n:ae[Ae]}}function Kp(ae,Ae,ye,nt,Ft){return Ft(ae,function(hn,ar,An){ye=nt?(nt=!1,hn):Ae(ye,hn,ar,An)}),ye}function Uv(ae,Ae){var ye=ae.length;for(ae.sort(Ae);ye--;)ae[ye]=ae[ye].value;return ae}function r1(ae,Ae){for(var ye,nt=-1,Ft=ae.length;++nt<Ft;){var hn=Ae(ae[nt]);hn!==n&&(ye=ye===n?hn:ye+hn)}return ye}function i1(ae,Ae){for(var ye=-1,nt=Array(ae);++ye<ae;)nt[ye]=Ae(ye);return nt}function Xv(ae,Ae){return On(Ae,function(ye){return[ye,ae[ye]]})}function Yp(ae){return ae&&ae.slice(0,Oh(ae)+1).replace(bc,"")}function Mi(ae){return function(Ae){return ae(Ae)}}function Hc(ae,Ae){return On(Ae,function(ye){return ae[ye]})}function Fs(ae,Ae){return ae.has(Ae)}function qp(ae,Ae){for(var ye=-1,nt=ae.length;++ye<nt&&vl(Ae,ae[ye],0)>-1;);return ye}function o1(ae,Ae){for(var ye=ae.length;ye--&&vl(Ae,ae[ye],0)>-1;);return ye}function Zp(ae,Ae){for(var ye=ae.length,nt=0;ye--;)ae[ye]===Ae&&++nt;return nt}var Qp=Mh(gl),Jp=Mh(Ph);function e2(ae){return"\\"+$v[ae]}function yl(ae,Ae){return ae==null?n:ae[Ae]}function wl(ae){return Gp.test(ae)}function Kv(ae){return Eh.test(ae)}function Yv(ae){for(var Ae,ye=[];!(Ae=ae.next()).done;)ye.push(Ae.value);return ye}function bh(ae){var Ae=-1,ye=Array(ae.size);return ae.forEach(function(nt,Ft){ye[++Ae]=[Ft,nt]}),ye}function s1(ae,Ae){return function(ye){return ae(Ae(ye))}}function Ki(ae,Ae){for(var ye=-1,nt=ae.length,Ft=0,hn=[];++ye<nt;){var ar=ae[ye];(ar===Ae||ar===d)&&(ae[ye]=d,hn[Ft++]=ye)}return hn}function ga(ae){var Ae=-1,ye=Array(ae.size);return ae.forEach(function(nt){ye[++Ae]=nt}),ye}function qv(ae){var Ae=-1,ye=Array(ae.size);return ae.forEach(function(nt){ye[++Ae]=[nt,nt]}),ye}function kh(ae,Ae,ye){for(var nt=ye-1,Ft=ae.length;++nt<Ft;)if(ae[nt]===Ae)return nt;return-1}function Zv(ae,Ae,ye){for(var nt=ye+1;nt--;)if(ae[nt]===Ae)return nt;return nt}function fu(ae){return wl(ae)?n2(ae):zv(ae)}function bi(ae){return wl(ae)?r2(ae):zp(ae)}function Oh(ae){for(var Ae=ae.length;Ae--&&la.test(ae.charAt(Ae)););return Ae}var t2=Mh(jv);function n2(ae){for(var Ae=lu.lastIndex=0;lu.test(ae);)++Ae;return Ae}function r2(ae){return ae.match(lu)||[]}function Qv(ae){return ae.match(Hv)||[]}var Jv=function ae(Ae){Ae=Ae==null?$n:Cl.defaults($n.Object(),Ae,Cl.pick($n,jp));var ye=Ae.Array,nt=Ae.Date,Ft=Ae.Error,hn=Ae.Function,ar=Ae.Math,An=Ae.Object,Gc=Ae.RegExp,e7=Ae.String,Yi=Ae.TypeError,Ls=ye.prototype,a1=hn.prototype,ns=An.prototype,xl=Ae["__core-js_shared__"],jc=a1.toString,dn=ns.hasOwnProperty,El=0,Ih=function(){var f=/[^.]+$/.exec(xl&&xl.keys&&xl.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),$c=ns.toString,Fh=jc.call(An),i2=$n._,o2=Gc("^"+jc.call(dn).replace(ou,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wc=K0?Ae.Buffer:n,_s=Ae.Symbol,zc=Ae.Uint8Array,u1=Wc?Wc.allocUnsafe:n,Do=s1(An.getPrototypeOf,An),Lh=An.create,_h=ns.propertyIsEnumerable,Nh=Ls.splice,s2=_s?_s.isConcatSpreadable:n,Ns=_s?_s.iterator:n,hu=_s?_s.toStringTag:n,Vc=function(){try{var f=Ta(An,"defineProperty");return f({},"",{}),f}catch{}}(),a2=Ae.clearTimeout!==$n.clearTimeout&&Ae.clearTimeout,_n=nt&&nt.now!==$n.Date.now&&nt.now,l1=Ae.setTimeout!==$n.setTimeout&&Ae.setTimeout,du=ar.ceil,pa=ar.floor,Hh=An.getOwnPropertySymbols,c1=Wc?Wc.isBuffer:n,Pl=Ae.isFinite,Gh=Ls.join,Sl=s1(An.keys,An),ur=ar.max,_r=ar.min,t7=nt.now,u2=Ae.parseInt,Uc=ar.random,jh=Ls.reverse,Xc=Ta(Ae,"DataView"),gu=Ta(Ae,"Map"),Kc=Ta(Ae,"Promise"),ma=Ta(Ae,"Set"),Yc=Ta(Ae,"WeakMap"),Tl=Ta(An,"create"),$h=Yc&&new Yc,Dl={},f1=Da(Xc),va=Da(gu),l2=Da(Kc),Al=Da(ma),rs=Da(Yc),ya=_s?_s.prototype:n,ki=ya?ya.valueOf:n,Wh=ya?ya.toString:n;function N(f){if(cr(f)&&!$t(f)&&!(f instanceof jt)){if(f instanceof Nr)return f;if(dn.call(f,"__wrapped__"))return _2(f)}return new Nr(f)}var Bl=function(){function f(){}return function(p){if(!or(p))return{};if(Lh)return Lh(p);f.prototype=p;var C=new f;return f.prototype=n,C}}();function is(){}function Nr(f,p){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=n}N.templateSettings={escape:fh,evaluate:hh,interpolate:Rc,variable:"",imports:{_:N}},N.prototype=is.prototype,N.prototype.constructor=N,Nr.prototype=Bl(is.prototype),Nr.prototype.constructor=Nr;function jt(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function zh(){var f=new jt(this.__wrapped__);return f.__actions__=ni(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=ni(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=ni(this.__views__),f}function h1(){if(this.__filtered__){var f=new jt(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Rl(){var f=this.__wrapped__.value(),p=this.__dir__,C=$t(f),B=p<0,O=C?f.length:0,G=G1(0,O,this.__views__),X=G.start,J=G.end,ce=J-X,be=B?J:X-1,Oe=this.__iteratees__,Ge=Oe.length,tt=0,dt=_r(ce,this.__takeCount__);if(!C||!B&&O==ce&&dt==ce)return _l(f,this.__actions__);var Mt=[];e:for(;ce--&&tt<dt;){be+=p;for(var Yt=-1,bt=f[be];++Yt<Ge;){var en=Oe[Yt],ln=en.iteratee,Lo=en.type,_i=ln(bt);if(Lo==ge)bt=_i;else if(!_i){if(Lo==ve)continue e;break e}}Mt[tt++]=bt}return Mt}jt.prototype=Bl(is.prototype),jt.prototype.constructor=jt;function yi(f){var p=-1,C=f==null?0:f.length;for(this.clear();++p<C;){var B=f[p];this.set(B[0],B[1])}}function Nn(){this.__data__=Tl?Tl(null):{},this.size=0}function In(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}function wa(f){var p=this.__data__;if(Tl){var C=p[f];return C===c?n:C}return dn.call(p,f)?p[f]:n}function Hr(f){var p=this.__data__;return Tl?p[f]!==n:dn.call(p,f)}function wi(f,p){var C=this.__data__;return this.size+=this.has(f)?0:1,C[f]=Tl&&p===n?c:p,this}yi.prototype.clear=Nn,yi.prototype.delete=In,yi.prototype.get=wa,yi.prototype.has=Hr,yi.prototype.set=wi;function ti(f){var p=-1,C=f==null?0:f.length;for(this.clear();++p<C;){var B=f[p];this.set(B[0],B[1])}}function Ml(){this.__data__=[],this.size=0}function Ci(f){var p=this.__data__,C=jr(p,f);if(C<0)return!1;var B=p.length-1;return C==B?p.pop():Nh.call(p,C,1),--this.size,!0}function Vh(f){var p=this.__data__,C=jr(p,f);return C<0?n:p[C][1]}function c2(f){return jr(this.__data__,f)>-1}function f2(f,p){var C=this.__data__,B=jr(C,f);return B<0?(++this.size,C.push([f,p])):C[B][1]=p,this}ti.prototype.clear=Ml,ti.prototype.delete=Ci,ti.prototype.get=Vh,ti.prototype.has=c2,ti.prototype.set=f2;function qi(f){var p=-1,C=f==null?0:f.length;for(this.clear();++p<C;){var B=f[p];this.set(B[0],B[1])}}function h2(){this.size=0,this.__data__={hash:new yi,map:new(gu||ti),string:new yi}}function Hs(f){var p=hf(this,f).delete(f);return this.size-=p?1:0,p}function Uh(f){return hf(this,f).get(f)}function d1(f){return hf(this,f).has(f)}function d2(f,p){var C=hf(this,f),B=C.size;return C.set(f,p),this.size+=C.size==B?0:1,this}qi.prototype.clear=h2,qi.prototype.delete=Hs,qi.prototype.get=Uh,qi.prototype.has=d1,qi.prototype.set=d2;function pu(f){var p=-1,C=f==null?0:f.length;for(this.__data__=new qi;++p<C;)this.add(f[p])}function Ca(f){return this.__data__.set(f,c),this}function bl(f){return this.__data__.has(f)}pu.prototype.add=pu.prototype.push=Ca,pu.prototype.has=bl;function Gr(f){var p=this.__data__=new ti(f);this.size=p.size}function Xh(){this.__data__=new ti,this.size=0}function Kh(f){var p=this.__data__,C=p.delete(f);return this.size=p.size,C}function Zi(f){return this.__data__.get(f)}function Qi(f){return this.__data__.has(f)}function mu(f,p){var C=this.__data__;if(C instanceof ti){var B=C.__data__;if(!gu||B.length<i-1)return B.push([f,p]),this.size=++C.size,this;C=this.__data__=new qi(B)}return C.set(f,p),this.size=C.size,this}Gr.prototype.clear=Xh,Gr.prototype.delete=Kh,Gr.prototype.get=Zi,Gr.prototype.has=Qi,Gr.prototype.set=mu;function os(f,p){var C=$t(f),B=!C&&Sf(f),O=!C&&!B&&Xl(f),G=!C&&!B&&!O&&_d(f),X=C||B||O||G,J=X?i1(f.length,e7):[],ce=J.length;for(var be in f)(p||dn.call(f,be))&&!(X&&(be=="length"||O&&(be=="offset"||be=="parent")||G&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||zn(be,ce)))&&J.push(be);return J}function ss(f){var p=f.length;return p?f[Fl(0,p-1)]:n}function vu(f,p){return Cd(ni(f),Gs(p,0,f.length))}function g2(f){return Cd(ni(f))}function qc(f,p,C){(C!==n&&!qs(f[p],C)||C===n&&!(p in f))&&as(f,p,C)}function yu(f,p,C){var B=f[p];(!(dn.call(f,p)&&qs(B,C))||C===n&&!(p in f))&&as(f,p,C)}function jr(f,p){for(var C=f.length;C--;)if(qs(f[C][0],p))return C;return-1}function Oi(f,p,C,B){return ls(f,function(O,G,X){p(B,O,C(O),X)}),B}function Hn(f,p){return f&&Bo(p,zr(p),f)}function Ao(f,p){return f&&Bo(p,ao(p),f)}function as(f,p,C){p=="__proto__"&&Vc?Vc(f,p,{configurable:!0,enumerable:!0,value:C,writable:!0}):f[p]=C}function Yh(f,p){for(var C=-1,B=p.length,O=ye(B),G=f==null;++C<B;)O[C]=G?n:T7(f,p[C]);return O}function Gs(f,p,C){return f===f&&(C!==n&&(f=f<=C?f:C),p!==n&&(f=f>=p?f:p)),f}function xi(f,p,C,B,O,G){var X,J=p&g,ce=p&v,be=p&y;if(C&&(X=O?C(f,B,O,G):C(f)),X!==n)return X;if(!or(f))return f;var Oe=$t(f);if(Oe){if(X=gf(f),!J)return ni(f,X)}else{var Ge=Br(f),tt=Ge==ke||Ge==vt;if(Xl(f))return B1(f,J);if(Ge==Bt||Ge==$e||tt&&!O){if(X=ce||tt?{}:Rr(f),!J)return ce?r7(f,Ao(X,f)):ud(f,Hn(X,f))}else{if(!xn[Ge])return O?f:{};X=i7(f,Ge,J)}}G||(G=new Gr);var dt=G.get(f);if(dt)return dt;G.set(f,X),Dy(f)?f.forEach(function(bt){X.add(xi(bt,p,C,bt,f,G))}):Sy(f)&&f.forEach(function(bt,en){X.set(en,xi(bt,p,C,en,f,G))});var Mt=be?ce?ff:cf:ce?ao:zr,Yt=Oe?n:Mt(f);return Lr(Yt||f,function(bt,en){Yt&&(en=bt,bt=f[en]),yu(X,en,xi(bt,p,C,en,f,G))}),X}function p2(f){var p=zr(f);return function(C){return Zc(C,f,p)}}function Zc(f,p,C){var B=C.length;if(f==null)return!B;for(f=An(f);B--;){var O=C[B],G=p[O],X=f[O];if(X===n&&!(O in f)||!G(X))return!1}return!0}function g1(f,p,C){if(typeof f!="function")throw new Yi(s);return zl(function(){f.apply(n,C)},p)}function us(f,p,C,B){var O=-1,G=Bh,X=!0,J=f.length,ce=[],be=p.length;if(!J)return ce;C&&(p=On(p,Mi(C))),B?(G=Q0,X=!1):p.length>=i&&(G=Fs,X=!1,p=new pu(p));e:for(;++O<J;){var Oe=f[O],Ge=C==null?Oe:C(Oe);if(Oe=B||Oe!==0?Oe:0,X&&Ge===Ge){for(var tt=be;tt--;)if(p[tt]===Ge)continue e;ce.push(Oe)}else G(p,Ge,B)||ce.push(Oe)}return ce}var ls=ro(Ii),m2=ro(xa,!0);function Qc(f,p){var C=!0;return ls(f,function(B,O,G){return C=!!p(B,O,G),C}),C}function wu(f,p,C){for(var B=-1,O=f.length;++B<O;){var G=f[B],X=p(G);if(X!=null&&(J===n?X===X&&!Fo(X):C(X,J)))var J=X,ce=G}return ce}function v2(f,p,C,B){var O=f.length;for(C=Ut(C),C<0&&(C=-C>O?0:O+C),B=B===n||B>O?O:Ut(B),B<0&&(B+=O),B=C>B?0:By(B);C<B;)f[C++]=p;return f}function p1(f,p){var C=[];return ls(f,function(B,O,G){p(B,O,G)&&C.push(B)}),C}function Zn(f,p,C,B,O){var G=-1,X=f.length;for(C||(C=vd),O||(O=[]);++G<X;){var J=f[G];p>0&&C(J)?p>1?Zn(J,p-1,C,B,O):da(O,J):B||(O[O.length]=J)}return O}var qh=cd(),Jc=cd(!0);function Ii(f,p){return f&&qh(f,p,zr)}function xa(f,p){return f&&Jc(f,p,zr)}function kl(f,p){return ha(p,function(C){return ku(f[C])})}function js(f,p){p=hs(p,f);for(var C=0,B=p.length;f!=null&&C<B;)f=f[ko(p[C++])];return C&&C==B?f:n}function Zh(f,p,C){var B=p(f);return $t(f)?B:da(B,C(f))}function Dr(f){return f==null?f===n?zi:cn:hu&&hu in An(f)?md(f):$1(f)}function Ea(f,p){return f>p}function Ji(f,p){return f!=null&&dn.call(f,p)}function Cu(f,p){return f!=null&&p in An(f)}function m1(f,p,C){return f>=_r(p,C)&&f<ur(p,C)}function Qh(f,p,C){for(var B=C?Q0:Bh,O=f[0].length,G=f.length,X=G,J=ye(G),ce=1/0,be=[];X--;){var Oe=f[X];X&&p&&(Oe=On(Oe,Mi(p))),ce=_r(Oe.length,ce),J[X]=!C&&(p||O>=120&&Oe.length>=120)?new pu(X&&Oe):n}Oe=f[0];var Ge=-1,tt=J[0];e:for(;++Ge<O&&be.length<ce;){var dt=Oe[Ge],Mt=p?p(dt):dt;if(dt=C||dt!==0?dt:0,!(tt?Fs(tt,Mt):B(be,Mt,C))){for(X=G;--X;){var Yt=J[X];if(!(Yt?Fs(Yt,Mt):B(f[X],Mt,C)))continue e}tt&&tt.push(Mt),be.push(dt)}}return be}function $s(f,p,C,B){return Ii(f,function(O,G,X){p(B,C(O),G,X)}),B}function eo(f,p,C){p=hs(p,f),f=Cr(f,p);var B=f==null?f:f[ko(oi(p))];return B==null?n:ei(B,f,C)}function Jh(f){return cr(f)&&Dr(f)==$e}function y2(f){return cr(f)&&Dr(f)==pr}function Ws(f){return cr(f)&&Dr(f)==Q}function to(f,p,C,B,O){return f===p?!0:f==null||p==null||!cr(f)&&!cr(p)?f!==f&&p!==p:ed(f,p,C,B,to,O)}function ed(f,p,C,B,O,G){var X=$t(f),J=$t(p),ce=X?Fe:Br(f),be=J?Fe:Br(p);ce=ce==$e?Bt:ce,be=be==$e?Bt:be;var Oe=ce==Bt,Ge=be==Bt,tt=ce==be;if(tt&&Xl(f)){if(!Xl(p))return!1;X=!0,Oe=!1}if(tt&&!Oe)return G||(G=new Gr),X||_d(f)?N1(f,p,C,B,O,G):H1(f,p,ce,C,B,O,G);if(!(C&x)){var dt=Oe&&dn.call(f,"__wrapped__"),Mt=Ge&&dn.call(p,"__wrapped__");if(dt||Mt){var Yt=dt?f.value():f,bt=Mt?p.value():p;return G||(G=new Gr),O(Yt,bt,C,B,G)}}return tt?(G||(G=new Gr),R2(f,p,C,B,O,G)):!1}function w2(f){return cr(f)&&Br(f)==Ye}function Ol(f,p,C,B){var O=C.length,G=O,X=!B;if(f==null)return!G;for(f=An(f);O--;){var J=C[O];if(X&&J[2]?J[1]!==f[J[0]]:!(J[0]in f))return!1}for(;++O<G;){J=C[O];var ce=J[0],be=f[ce],Oe=J[1];if(X&&J[2]){if(be===n&&!(ce in f))return!1}else{var Ge=new Gr;if(B)var tt=B(be,Oe,ce,f,p,Ge);if(!(tt===n?to(Oe,be,x|E,B,Ge):tt))return!1}}return!0}function v1(f){if(!or(f)||k2(f))return!1;var p=ku(f)?o2:ph;return p.test(Da(f))}function ef(f){return cr(f)&&Dr(f)==fn}function cs(f){return cr(f)&&Br(f)==_t}function tf(f){return cr(f)&&Z2(f.length)&&!!Sn[Dr(f)]}function Il(f){return typeof f=="function"?f:f==null?uo:typeof f=="object"?$t(f)?Wn(f[0],f[1]):td(f):Hy(f)}function zs(f){if(!Ks(f))return Sl(f);var p=[];for(var C in An(f))dn.call(f,C)&&C!="constructor"&&p.push(C);return p}function y1(f){if(!or(f))return F2(f);var p=Ks(f),C=[];for(var B in f)B=="constructor"&&(p||!dn.call(f,B))||C.push(B);return C}function Pa(f,p){return f<p}function w1(f,p){var C=-1,B=so(f)?ye(f.length):[];return ls(f,function(O,G,X){B[++C]=p(O,G,X)}),B}function td(f){var p=df(f);return p.length==1&&p[0][2]?yd(p[0][0],p[0][1]):function(C){return C===f||Ol(C,f,p)}}function Wn(f,p){return it(f)&&mf(p)?yd(ko(f),p):function(C){var B=T7(C,f);return B===n&&B===p?D7(C,f):to(p,B,x|E)}}function xu(f,p,C,B,O){f!==p&&qh(p,function(G,X){if(O||(O=new Gr),or(G))C1(f,p,X,C,xu,B,O);else{var J=B?B(ps(f,X),G,X+"",f,p,O):n;J===n&&(J=G),qc(f,X,J)}},ao)}function C1(f,p,C,B,O,G,X){var J=ps(f,C),ce=ps(p,C),be=X.get(ce);if(be){qc(f,C,be);return}var Oe=G?G(J,ce,C+"",f,p,X):n,Ge=Oe===n;if(Ge){var tt=$t(ce),dt=!tt&&Xl(ce),Mt=!tt&&!dt&&_d(ce);Oe=ce,tt||dt||Mt?$t(J)?Oe=J:yr(J)?Oe=ni(J):dt?(Ge=!1,Oe=B1(ce,!0)):Mt?(Ge=!1,Oe=S2(ce,!0)):Oe=[]:sg(ce)||Sf(ce)?(Oe=J,Sf(J)?Oe=Ry(J):(!or(J)||ku(J))&&(Oe=Rr(ce))):Ge=!1}Ge&&(X.set(ce,Oe),O(Oe,ce,B,G,X),X.delete(ce)),qc(f,C,Oe)}function nd(f,p){var C=f.length;if(C)return p+=p<0?C:0,zn(p,C)?f[p]:n}function nf(f,p,C){p.length?p=On(p,function(G){return $t(G)?function(X){return js(X,G.length===1?G[0]:G)}:G}):p=[uo];var B=-1;p=On(p,Mi(St()));var O=w1(f,function(G,X,J){var ce=On(p,function(be){return be(G)});return{criteria:ce,index:++B,value:G}});return Uv(O,function(G,X){return n7(G,X,C)})}function x1(f,p){return Sa(f,p,function(C,B){return D7(f,B)})}function Sa(f,p,C){for(var B=-1,O=p.length,G={};++B<O;){var X=p[B],J=js(f,X);C(J,X)&&Pu(G,hs(X,f),J)}return G}function Vn(f){return function(p){return js(p,f)}}function rr(f,p,C,B){var O=B?t1:vl,G=-1,X=p.length,J=f;for(f===p&&(p=ni(p)),C&&(J=On(f,Mi(C)));++G<X;)for(var ce=0,be=p[G],Oe=C?C(be):be;(ce=O(J,Oe,ce,B))>-1;)J!==f&&Nh.call(J,ce,1),Nh.call(f,ce,1);return f}function mr(f,p){for(var C=f?p.length:0,B=C-1;C--;){var O=p[C];if(C==B||O!==G){var G=O;zn(O)?Nh.call(f,O,1):od(f,O)}}return f}function Fl(f,p){return f+pa(Uc()*(p-f+1))}function rf(f,p,C,B){for(var O=-1,G=ur(du((p-f)/(C||1)),0),X=ye(G);G--;)X[B?G:++O]=f,f+=C;return X}function Eu(f,p){var C="";if(!f||p<1||p>he)return C;do p%2&&(C+=f),p=pa(p/2),p&&(f+=f);while(p);return C}function Vt(f,p){return Fi(wd(f,p,uo),f+"")}function $r(f){return ss(Nd(f))}function E1(f,p){var C=Nd(f);return Cd(C,Gs(p,0,C.length))}function Pu(f,p,C,B){if(!or(f))return f;p=hs(p,f);for(var O=-1,G=p.length,X=G-1,J=f;J!=null&&++O<G;){var ce=ko(p[O]),be=C;if(ce==="__proto__"||ce==="constructor"||ce==="prototype")return f;if(O!=X){var Oe=J[ce];be=B?B(Oe,ce,J):n,be===n&&(be=or(Oe)?Oe:zn(p[O+1])?[]:{})}yu(J,ce,be),J=J[ce]}return f}var rd=$h?function(f,p){return $h.set(f,p),f}:uo,fs=Vc?function(f,p){return Vc(f,"toString",{configurable:!0,enumerable:!1,value:B7(p),writable:!0})}:uo;function no(f){return Cd(Nd(f))}function Wr(f,p,C){var B=-1,O=f.length;p<0&&(p=-p>O?0:O+p),C=C>O?O:C,C<0&&(C+=O),O=p>C?0:C-p>>>0,p>>>=0;for(var G=ye(O);++B<O;)G[B]=f[B+p];return G}function P1(f,p){var C;return ls(f,function(B,O,G){return C=p(B,O,G),!C}),!!C}function Ll(f,p,C){var B=0,O=f==null?B:f.length;if(typeof p=="number"&&p===p&&O<=Ie){for(;B<O;){var G=B+O>>>1,X=f[G];X!==null&&!Fo(X)&&(C?X<=p:X<p)?B=G+1:O=G}return O}return id(f,p,uo,C)}function id(f,p,C,B){var O=0,G=f==null?0:f.length;if(G===0)return 0;p=C(p);for(var X=p!==p,J=p===null,ce=Fo(p),be=p===n;O<G;){var Oe=pa((O+G)/2),Ge=C(f[Oe]),tt=Ge!==n,dt=Ge===null,Mt=Ge===Ge,Yt=Fo(Ge);if(X)var bt=B||Mt;else be?bt=Mt&&(B||tt):J?bt=Mt&&tt&&(B||!dt):ce?bt=Mt&&tt&&!dt&&(B||!Yt):dt||Yt?bt=!1:bt=B?Ge<=p:Ge<p;bt?O=Oe+1:G=Oe}return _r(G,xe)}function S1(f,p){for(var C=-1,B=f.length,O=0,G=[];++C<B;){var X=f[C],J=p?p(X):X;if(!C||!qs(J,ce)){var ce=J;G[O++]=X===0?0:X}}return G}function T1(f){return typeof f=="number"?f:Fo(f)?we:+f}function Ei(f){if(typeof f=="string")return f;if($t(f))return On(f,Ei)+"";if(Fo(f))return Wh?Wh.call(f):"";var p=f+"";return p=="0"&&1/f==-1/0?"-0":p}function Vs(f,p,C){var B=-1,O=Bh,G=f.length,X=!0,J=[],ce=J;if(C)X=!1,O=Q0;else if(G>=i){var be=p?null:B2(f);if(be)return ga(be);X=!1,O=Fs,ce=new pu}else ce=p?[]:J;e:for(;++B<G;){var Oe=f[B],Ge=p?p(Oe):Oe;if(Oe=C||Oe!==0?Oe:0,X&&Ge===Ge){for(var tt=ce.length;tt--;)if(ce[tt]===Ge)continue e;p&&ce.push(Ge),J.push(Oe)}else O(ce,Ge,C)||(ce!==J&&ce.push(Ge),J.push(Oe))}return J}function od(f,p){return p=hs(p,f),f=Cr(f,p),f==null||delete f[ko(oi(p))]}function D1(f,p,C,B){return Pu(f,p,C(js(f,p)),B)}function of(f,p,C,B){for(var O=f.length,G=B?O:-1;(B?G--:++G<O)&&p(f[G],G,f););return C?Wr(f,B?0:G,B?G+1:O):Wr(f,B?G+1:0,B?O:G)}function _l(f,p){var C=f;return C instanceof jt&&(C=C.value()),J0(p,function(B,O){return O.func.apply(O.thisArg,da([B],O.args))},C)}function sd(f,p,C){var B=f.length;if(B<2)return B?Vs(f[0]):[];for(var O=-1,G=ye(B);++O<B;)for(var X=f[O],J=-1;++J<B;)J!=O&&(G[O]=us(G[O]||X,f[J],p,C));return Vs(Zn(G,1),p,C)}function sf(f,p,C){for(var B=-1,O=f.length,G=p.length,X={};++B<O;){var J=B<G?p[B]:n;C(X,f[B],J)}return X}function Nl(f){return yr(f)?f:[]}function ad(f){return typeof f=="function"?f:uo}function hs(f,p){return $t(f)?f:it(f,p)?[f]:V1(Bn(f))}var C2=Vt;function Us(f,p,C){var B=f.length;return C=C===n?B:C,!p&&C>=B?f:Wr(f,p,C)}var A1=a2||function(f){return $n.clearTimeout(f)};function B1(f,p){if(p)return f.slice();var C=f.length,B=u1?u1(C):new f.constructor(C);return f.copy(B),B}function af(f){var p=new f.constructor(f.byteLength);return new zc(p).set(new zc(f)),p}function x2(f,p){var C=p?af(f.buffer):f.buffer;return new f.constructor(C,f.byteOffset,f.byteLength)}function E2(f){var p=new f.constructor(f.source,Oc.exec(f));return p.lastIndex=f.lastIndex,p}function P2(f){return ki?An(ki.call(f)):{}}function S2(f,p){var C=p?af(f.buffer):f.buffer;return new f.constructor(C,f.byteOffset,f.length)}function R1(f,p){if(f!==p){var C=f!==n,B=f===null,O=f===f,G=Fo(f),X=p!==n,J=p===null,ce=p===p,be=Fo(p);if(!J&&!be&&!G&&f>p||G&&X&&ce&&!J&&!be||B&&X&&ce||!C&&ce||!O)return 1;if(!B&&!G&&!be&&f<p||be&&C&&O&&!B&&!G||J&&C&&O||!X&&O||!ce)return-1}return 0}function n7(f,p,C){for(var B=-1,O=f.criteria,G=p.criteria,X=O.length,J=C.length;++B<X;){var ce=R1(O[B],G[B]);if(ce){if(B>=J)return ce;var be=C[B];return ce*(be=="desc"?-1:1)}}return f.index-p.index}function T2(f,p,C,B){for(var O=-1,G=f.length,X=C.length,J=-1,ce=p.length,be=ur(G-X,0),Oe=ye(ce+be),Ge=!B;++J<ce;)Oe[J]=p[J];for(;++O<X;)(Ge||O<G)&&(Oe[C[O]]=f[O]);for(;be--;)Oe[J++]=f[O++];return Oe}function M1(f,p,C,B){for(var O=-1,G=f.length,X=-1,J=C.length,ce=-1,be=p.length,Oe=ur(G-J,0),Ge=ye(Oe+be),tt=!B;++O<Oe;)Ge[O]=f[O];for(var dt=O;++ce<be;)Ge[dt+ce]=p[ce];for(;++X<J;)(tt||O<G)&&(Ge[dt+C[X]]=f[O++]);return Ge}function ni(f,p){var C=-1,B=f.length;for(p||(p=ye(B));++C<B;)p[C]=f[C];return p}function Bo(f,p,C,B){var O=!C;C||(C={});for(var G=-1,X=p.length;++G<X;){var J=p[G],ce=B?B(C[J],f[J],J,C,f):n;ce===n&&(ce=f[J]),O?as(C,J,ce):yu(C,J,ce)}return C}function ud(f,p){return Bo(f,Ro(f),p)}function r7(f,p){return Bo(f,M2(f),p)}function ld(f,p){return function(C,B){var O=$t(C)?q0:Oi,G=p?p():{};return O(C,f,St(B,2),G)}}function Hl(f){return Vt(function(p,C){var B=-1,O=C.length,G=O>1?C[O-1]:n,X=O>2?C[2]:n;for(G=f.length>3&&typeof G=="function"?(O--,G):n,X&&ii(C[0],C[1],X)&&(G=O<3?n:G,O=1),p=An(p);++B<O;){var J=C[B];J&&f(p,J,B,G)}return p})}function ro(f,p){return function(C,B){if(C==null)return C;if(!so(C))return f(C,B);for(var O=C.length,G=p?O:-1,X=An(C);(p?G--:++G<O)&&B(X[G],G,X)!==!1;);return C}}function cd(f){return function(p,C,B){for(var O=-1,G=An(p),X=B(p),J=X.length;J--;){var ce=X[f?J:++O];if(C(G[ce],ce,G)===!1)break}return p}}function fd(f,p,C){var B=p&T,O=Gl(f);function G(){var X=this&&this!==$n&&this instanceof G?O:f;return X.apply(B?C:this,arguments)}return G}function b1(f){return function(p){p=Bn(p);var C=wl(p)?bi(p):n,B=C?C[0]:p.charAt(0),O=C?Us(C,1).join(""):p.slice(1);return B[f]()+O}}function Su(f){return function(p){return J0(_y(Ly(p).replace(Nv,"")),f,"")}}function Gl(f){return function(){var p=arguments;switch(p.length){case 0:return new f;case 1:return new f(p[0]);case 2:return new f(p[0],p[1]);case 3:return new f(p[0],p[1],p[2]);case 4:return new f(p[0],p[1],p[2],p[3]);case 5:return new f(p[0],p[1],p[2],p[3],p[4]);case 6:return new f(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new f(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var C=Bl(f.prototype),B=f.apply(C,p);return or(B)?B:C}}function k1(f,p,C){var B=Gl(f);function O(){for(var G=arguments.length,X=ye(G),J=G,ce=Xs(O);J--;)X[J]=arguments[J];var be=G<3&&X[0]!==ce&&X[G-1]!==ce?[]:Ki(X,ce);if(G-=be.length,G<C)return ri(f,p,jl,O.placeholder,n,X,be,n,n,C-G);var Oe=this&&this!==$n&&this instanceof O?B:f;return ei(Oe,this,X)}return O}function Tu(f){return function(p,C,B){var O=An(p);if(!so(p)){var G=St(C,3);p=zr(p),C=function(J){return G(O[J],J,O)}}var X=f(p,C,B);return X>-1?O[G?p[X]:X]:n}}function hd(f){return gs(function(p){var C=p.length,B=C,O=Nr.prototype.thru;for(f&&p.reverse();B--;){var G=p[B];if(typeof G!="function")throw new Yi(s);if(O&&!X&&$l(G)=="wrapper")var X=new Nr([],!0)}for(B=X?B:C;++B<C;){G=p[B];var J=$l(G),ce=J=="wrapper"?pd(G):n;ce&&pf(ce[0])&&ce[1]==(z|R|k|Y)&&!ce[4].length&&ce[9]==1?X=X[$l(ce[0])].apply(X,ce[3]):X=G.length==1&&pf(G)?X[J]():X.thru(G)}return function(){var be=arguments,Oe=be[0];if(X&&be.length==1&&$t(Oe))return X.plant(Oe).value();for(var Ge=0,tt=C?p[Ge].apply(this,be):Oe;++Ge<C;)tt=p[Ge].call(this,tt);return tt}})}function jl(f,p,C,B,O,G,X,J,ce,be){var Oe=p&z,Ge=p&T,tt=p&D,dt=p&(R|L),Mt=p&te,Yt=tt?n:Gl(f);function bt(){for(var en=arguments.length,ln=ye(en),Lo=en;Lo--;)ln[Lo]=arguments[Lo];if(dt)var _i=Xs(bt),_o=Zp(ln,_i);if(B&&(ln=T2(ln,B,O,dt)),G&&(ln=M1(ln,G,X,dt)),en-=_o,dt&&en<be){var wr=Ki(ln,_i);return ri(f,p,jl,bt.placeholder,C,ln,wr,J,ce,be-en)}var Zs=Ge?C:this,Iu=tt?Zs[f]:f;return en=ln.length,J?ln=Mo(ln,J):Mt&&en>1&&ln.reverse(),Oe&&ce<en&&(ln.length=ce),this&&this!==$n&&this instanceof bt&&(Iu=Yt||Gl(Iu)),Iu.apply(Zs,ln)}return bt}function D2(f,p){return function(C,B){return $s(C,f,p(B),{})}}function uf(f,p){return function(C,B){var O;if(C===n&&B===n)return p;if(C!==n&&(O=C),B!==n){if(O===n)return B;typeof C=="string"||typeof B=="string"?(C=Ei(C),B=Ei(B)):(C=T1(C),B=T1(B)),O=f(C,B)}return O}}function dd(f){return gs(function(p){return p=On(p,Mi(St())),Vt(function(C){var B=this;return f(p,function(O){return ei(O,B,C)})})})}function lf(f,p){p=p===n?" ":Ei(p);var C=p.length;if(C<2)return C?Eu(p,f):p;var B=Eu(p,du(f/fu(p)));return wl(p)?Us(bi(B),0,f).join(""):B.slice(0,f)}function A2(f,p,C,B){var O=p&T,G=Gl(f);function X(){for(var J=-1,ce=arguments.length,be=-1,Oe=B.length,Ge=ye(Oe+ce),tt=this&&this!==$n&&this instanceof X?G:f;++be<Oe;)Ge[be]=B[be];for(;ce--;)Ge[be++]=arguments[++J];return ei(tt,O?C:this,Ge)}return X}function O1(f){return function(p,C,B){return B&&typeof B!="number"&&ii(p,C,B)&&(C=B=n),p=Ou(p),C===n?(C=p,p=0):C=Ou(C),B=B===n?p<C?1:-1:Ou(B),rf(p,C,B,f)}}function gd(f){return function(p,C){return typeof p=="string"&&typeof C=="string"||(p=ms(p),C=ms(C)),f(p,C)}}function ri(f,p,C,B,O,G,X,J,ce,be){var Oe=p&R,Ge=Oe?X:n,tt=Oe?n:X,dt=Oe?G:n,Mt=Oe?n:G;p|=Oe?k:W,p&=~(Oe?W:k),p&S||(p&=-4);var Yt=[f,p,O,dt,Ge,Mt,tt,J,ce,be],bt=C.apply(n,Yt);return pf(f)&&W1(bt,Yt),bt.placeholder=B,z1(bt,f,p)}function Ar(f){var p=ar[f];return function(C,B){if(C=ms(C),B=B==null?0:_r(Ut(B),292),B&&Pl(C)){var O=(Bn(C)+"e").split("e"),G=p(O[0]+"e"+(+O[1]+B));return O=(Bn(G)+"e").split("e"),+(O[0]+"e"+(+O[1]-B))}return p(C)}}var B2=ma&&1/ga(new ma([,-0]))[1]==Pe?function(f){return new ma(f)}:b7;function I1(f){return function(p){var C=Br(p);return C==Ye?bh(p):C==_t?qv(p):Xv(p,f(p))}}function ds(f,p,C,B,O,G,X,J){var ce=p&D;if(!ce&&typeof f!="function")throw new Yi(s);var be=B?B.length:0;if(be||(p&=-97,B=O=n),X=X===n?X:ur(Ut(X),0),J=J===n?J:Ut(J),be-=O?O.length:0,p&W){var Oe=B,Ge=O;B=O=n}var tt=ce?n:pd(f),dt=[f,p,C,B,O,Oe,Ge,G,X,J];if(tt&&I2(dt,tt),f=dt[0],p=dt[1],C=dt[2],B=dt[3],O=dt[4],J=dt[9]=dt[9]===n?ce?0:f.length:ur(dt[9]-be,0),!J&&p&(R|L)&&(p&=-25),!p||p==T)var Mt=fd(f,p,C);else p==R||p==L?Mt=k1(f,p,J):(p==k||p==(T|k))&&!O.length?Mt=A2(f,p,C,B):Mt=jl.apply(n,dt);var Yt=tt?rd:W1;return z1(Yt(Mt,dt),f,p)}function F1(f,p,C,B){return f===n||qs(f,ns[C])&&!dn.call(B,C)?p:f}function L1(f,p,C,B,O,G){return or(f)&&or(p)&&(G.set(p,f),xu(f,p,n,L1,G),G.delete(p)),f}function _1(f){return sg(f)?n:f}function N1(f,p,C,B,O,G){var X=C&x,J=f.length,ce=p.length;if(J!=ce&&!(X&&ce>J))return!1;var be=G.get(f),Oe=G.get(p);if(be&&Oe)return be==p&&Oe==f;var Ge=-1,tt=!0,dt=C&E?new pu:n;for(G.set(f,p),G.set(p,f);++Ge<J;){var Mt=f[Ge],Yt=p[Ge];if(B)var bt=X?B(Yt,Mt,Ge,p,f,G):B(Mt,Yt,Ge,f,p,G);if(bt!==n){if(bt)continue;tt=!1;break}if(dt){if(!e1(p,function(en,ln){if(!Fs(dt,ln)&&(Mt===en||O(Mt,en,C,B,G)))return dt.push(ln)})){tt=!1;break}}else if(!(Mt===Yt||O(Mt,Yt,C,B,G))){tt=!1;break}}return G.delete(f),G.delete(p),tt}function H1(f,p,C,B,O,G,X){switch(C){case mn:if(f.byteLength!=p.byteLength||f.byteOffset!=p.byteOffset)return!1;f=f.buffer,p=p.buffer;case pr:return!(f.byteLength!=p.byteLength||!G(new zc(f),new zc(p)));case et:case Q:case Dt:return qs(+f,+p);case Te:return f.name==p.name&&f.message==p.message;case fn:case sn:return f==p+"";case Ye:var J=bh;case _t:var ce=B&x;if(J||(J=ga),f.size!=p.size&&!ce)return!1;var be=X.get(f);if(be)return be==p;B|=E,X.set(f,p);var Oe=N1(J(f),J(p),B,O,G,X);return X.delete(f),Oe;case gr:if(ki)return ki.call(f)==ki.call(p)}return!1}function R2(f,p,C,B,O,G){var X=C&x,J=cf(f),ce=J.length,be=cf(p),Oe=be.length;if(ce!=Oe&&!X)return!1;for(var Ge=ce;Ge--;){var tt=J[Ge];if(!(X?tt in p:dn.call(p,tt)))return!1}var dt=G.get(f),Mt=G.get(p);if(dt&&Mt)return dt==p&&Mt==f;var Yt=!0;G.set(f,p),G.set(p,f);for(var bt=X;++Ge<ce;){tt=J[Ge];var en=f[tt],ln=p[tt];if(B)var Lo=X?B(ln,en,tt,p,f,G):B(en,ln,tt,f,p,G);if(!(Lo===n?en===ln||O(en,ln,C,B,G):Lo)){Yt=!1;break}bt||(bt=tt=="constructor")}if(Yt&&!bt){var _i=f.constructor,_o=p.constructor;_i!=_o&&"constructor"in f&&"constructor"in p&&!(typeof _i=="function"&&_i instanceof _i&&typeof _o=="function"&&_o instanceof _o)&&(Yt=!1)}return G.delete(f),G.delete(p),Yt}function gs(f){return Fi(wd(f,n,Ed),f+"")}function cf(f){return Zh(f,zr,Ro)}function ff(f){return Zh(f,ao,M2)}var pd=$h?function(f){return $h.get(f)}:b7;function $l(f){for(var p=f.name+"",C=Dl[p],B=dn.call(Dl,p)?C.length:0;B--;){var O=C[B],G=O.func;if(G==null||G==f)return O.name}return p}function Xs(f){var p=dn.call(N,"placeholder")?N:f;return p.placeholder}function St(){var f=N.iteratee||R7;return f=f===R7?Il:f,arguments.length?f(arguments[0],arguments[1]):f}function hf(f,p){var C=f.__data__;return Wl(p)?C[typeof p=="string"?"string":"hash"]:C.map}function df(f){for(var p=zr(f),C=p.length;C--;){var B=p[C],O=f[B];p[C]=[B,O,mf(O)]}return p}function Ta(f,p){var C=yl(f,p);return v1(C)?C:n}function md(f){var p=dn.call(f,hu),C=f[hu];try{f[hu]=n;var B=!0}catch{}var O=$c.call(f);return B&&(p?f[hu]=C:delete f[hu]),O}var Ro=Hh?function(f){return f==null?[]:(f=An(f),ha(Hh(f),function(p){return _h.call(f,p)}))}:k7,M2=Hh?function(f){for(var p=[];f;)da(p,Ro(f)),f=Do(f);return p}:k7,Br=Dr;(Xc&&Br(new Xc(new ArrayBuffer(1)))!=mn||gu&&Br(new gu)!=Ye||Kc&&Br(Kc.resolve())!=Mn||ma&&Br(new ma)!=_t||Yc&&Br(new Yc)!=jn)&&(Br=function(f){var p=Dr(f),C=p==Bt?f.constructor:n,B=C?Da(C):"";if(B)switch(B){case f1:return mn;case va:return Ye;case l2:return Mn;case Al:return _t;case rs:return jn}return p});function G1(f,p,C){for(var B=-1,O=C.length;++B<O;){var G=C[B],X=G.size;switch(G.type){case"drop":f+=X;break;case"dropRight":p-=X;break;case"take":p=_r(p,f+X);break;case"takeRight":f=ur(f,p-X);break}}return{start:f,end:p}}function b2(f){var p=f.match(ul);return p?p[1].split(kc):[]}function j1(f,p,C){p=hs(p,f);for(var B=-1,O=p.length,G=!1;++B<O;){var X=ko(p[B]);if(!(G=f!=null&&C(f,X)))break;f=f[X]}return G||++B!=O?G:(O=f==null?0:f.length,!!O&&Z2(O)&&zn(X,O)&&($t(f)||Sf(f)))}function gf(f){var p=f.length,C=new f.constructor(p);return p&&typeof f[0]=="string"&&dn.call(f,"index")&&(C.index=f.index,C.input=f.input),C}function Rr(f){return typeof f.constructor=="function"&&!Ks(f)?Bl(Do(f)):{}}function i7(f,p,C){var B=f.constructor;switch(p){case pr:return af(f);case et:case Q:return new B(+f);case mn:return x2(f,C);case bn:case Ir:case Bi:case bs:case qo:case Po:case ru:case So:case Ui:return S2(f,C);case Ye:return new B;case Dt:case sn:return new B(f);case fn:return E2(f);case _t:return new B;case gr:return P2(f)}}function o7(f,p){var C=p.length;if(!C)return f;var B=C-1;return p[B]=(C>1?"& ":"")+p[B],p=p.join(C>2?", ":" "),f.replace(al,`{
/* [wrapped with `+p+`] */
`)}function vd(f){return $t(f)||Sf(f)||!!(s2&&f&&f[s2])}function zn(f,p){var C=typeof f;return p=p??he,!!p&&(C=="number"||C!="symbol"&&vh.test(f))&&f>-1&&f%1==0&&f<p}function ii(f,p,C){if(!or(C))return!1;var B=typeof p;return(B=="number"?so(C)&&zn(p,C.length):B=="string"&&p in C)?qs(C[p],f):!1}function it(f,p){if($t(f))return!1;var C=typeof f;return C=="number"||C=="symbol"||C=="boolean"||f==null||Fo(f)?!0:dh.test(f)||!Mc.test(f)||p!=null&&f in An(p)}function Wl(f){var p=typeof f;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?f!=="__proto__":f===null}function pf(f){var p=$l(f),C=N[p];if(typeof C!="function"||!(p in jt.prototype))return!1;if(f===C)return!0;var B=pd(C);return!!B&&f===B[0]}function k2(f){return!!Ih&&Ih in f}var s7=xl?ku:O7;function Ks(f){var p=f&&f.constructor,C=typeof p=="function"&&p.prototype||ns;return f===C}function mf(f){return f===f&&!or(f)}function yd(f,p){return function(C){return C==null?!1:C[f]===p&&(p!==n||f in An(C))}}function O2(f){var p=pe(f,function(B){return C.size===h&&C.clear(),B}),C=p.cache;return p}function I2(f,p){var C=f[1],B=p[1],O=C|B,G=O<(T|D|z),X=B==z&&C==R||B==z&&C==Y&&f[7].length<=p[8]||B==(z|Y)&&p[7].length<=p[8]&&C==R;if(!(G||X))return f;B&T&&(f[2]=p[2],O|=C&T?0:S);var J=p[3];if(J){var ce=f[3];f[3]=ce?T2(ce,J,p[4]):J,f[4]=ce?Ki(f[3],d):p[4]}return J=p[5],J&&(ce=f[5],f[5]=ce?M1(ce,J,p[6]):J,f[6]=ce?Ki(f[5],d):p[6]),J=p[7],J&&(f[7]=J),B&z&&(f[8]=f[8]==null?p[8]:_r(f[8],p[8])),f[9]==null&&(f[9]=p[9]),f[0]=p[0],f[1]=O,f}function F2(f){var p=[];if(f!=null)for(var C in An(f))p.push(C);return p}function $1(f){return $c.call(f)}function wd(f,p,C){return p=ur(p===n?f.length-1:p,0),function(){for(var B=arguments,O=-1,G=ur(B.length-p,0),X=ye(G);++O<G;)X[O]=B[p+O];O=-1;for(var J=ye(p+1);++O<p;)J[O]=B[O];return J[p]=C(X),ei(f,this,J)}}function Cr(f,p){return p.length<2?f:js(f,Wr(p,0,-1))}function Mo(f,p){for(var C=f.length,B=_r(p.length,C),O=ni(f);B--;){var G=p[B];f[B]=zn(G,C)?O[G]:n}return f}function ps(f,p){if(!(p==="constructor"&&typeof f[p]=="function")&&p!="__proto__")return f[p]}var W1=bo(rd),zl=l1||function(f,p){return $n.setTimeout(f,p)},Fi=bo(fs);function z1(f,p,C){var B=p+"";return Fi(f,o7(B,L2(b2(B),C)))}function bo(f){var p=0,C=0;return function(){var B=t7(),O=oe-(B-C);if(C=B,O>0){if(++p>=ne)return arguments[0]}else p=0;return f.apply(n,arguments)}}function Cd(f,p){var C=-1,B=f.length,O=B-1;for(p=p===n?B:p;++C<p;){var G=Fl(C,O),X=f[G];f[G]=f[C],f[C]=X}return f.length=p,f}var V1=O2(function(f){var p=[];return f.charCodeAt(0)===46&&p.push(""),f.replace(iu,function(C,B,O,G){p.push(O?G.replace(z0,"$1"):B||C)}),p});function ko(f){if(typeof f=="string"||Fo(f))return f;var p=f+"";return p=="0"&&1/f==-1/0?"-0":p}function Da(f){if(f!=null){try{return jc.call(f)}catch{}try{return f+""}catch{}}return""}function L2(f,p){return Lr(Le,function(C){var B="_."+C[0];p&C[1]&&!Bh(f,B)&&f.push(B)}),f.sort()}function _2(f){if(f instanceof jt)return f.clone();var p=new Nr(f.__wrapped__,f.__chain__);return p.__actions__=ni(f.__actions__),p.__index__=f.__index__,p.__values__=f.__values__,p}function xd(f,p,C){(C?ii(f,p,C):p===n)?p=1:p=ur(Ut(p),0);var B=f==null?0:f.length;if(!B||p<1)return[];for(var O=0,G=0,X=ye(du(B/p));O<B;)X[G++]=Wr(f,O,O+=p);return X}function U1(f){for(var p=-1,C=f==null?0:f.length,B=0,O=[];++p<C;){var G=f[p];G&&(O[B++]=G)}return O}function io(){var f=arguments.length;if(!f)return[];for(var p=ye(f-1),C=arguments[0],B=f;B--;)p[B-1]=arguments[B];return da($t(C)?ni(C):[C],Zn(p,1))}var un=Vt(function(f,p){return yr(f)?us(f,Zn(p,1,yr,!0)):[]}),xr=Vt(function(f,p){var C=oi(p);return yr(C)&&(C=n),yr(f)?us(f,Zn(p,1,yr,!0),St(C,2)):[]}),lr=Vt(function(f,p){var C=oi(p);return yr(C)&&(C=n),yr(f)?us(f,Zn(p,1,yr,!0),n,C):[]});function Mr(f,p,C){var B=f==null?0:f.length;return B?(p=C||p===n?1:Ut(p),Wr(f,p<0?0:p,B)):[]}function Li(f,p,C){var B=f==null?0:f.length;return B?(p=C||p===n?1:Ut(p),p=B-p,Wr(f,0,p<0?0:p)):[]}function Vl(f,p){return f&&f.length?of(f,St(p,3),!0,!0):[]}function vr(f,p){return f&&f.length?of(f,St(p,3),!0):[]}function vf(f,p,C,B){var O=f==null?0:f.length;return O?(C&&typeof C!="number"&&ii(f,p,C)&&(C=0,B=O),v2(f,p,C,B)):[]}function Aa(f,p,C){var B=f==null?0:f.length;if(!B)return-1;var O=C==null?0:Ut(C);return O<0&&(O=ur(B+O,0)),Rh(f,St(p,3),O)}function yf(f,p,C){var B=f==null?0:f.length;if(!B)return-1;var O=B-1;return C!==n&&(O=Ut(C),O=C<0?ur(B+O,0):_r(O,B-1)),Rh(f,St(p,3),O,!0)}function Ed(f){var p=f==null?0:f.length;return p?Zn(f,1):[]}function wf(f){var p=f==null?0:f.length;return p?Zn(f,Pe):[]}function Pi(f,p){var C=f==null?0:f.length;return C?(p=p===n?1:Ut(p),Zn(f,p)):[]}function X1(f){for(var p=-1,C=f==null?0:f.length,B={};++p<C;){var O=f[p];B[O[0]]=O[1]}return B}function Du(f){return f&&f.length?f[0]:n}function Ys(f,p,C){var B=f==null?0:f.length;if(!B)return-1;var O=C==null?0:Ut(C);return O<0&&(O=ur(B+O,0)),vl(f,p,O)}function Pd(f){var p=f==null?0:f.length;return p?Wr(f,0,-1):[]}var K1=Vt(function(f){var p=On(f,Nl);return p.length&&p[0]===f[0]?Qh(p):[]}),Ba=Vt(function(f){var p=oi(f),C=On(f,Nl);return p===oi(C)?p=n:C.pop(),C.length&&C[0]===f[0]?Qh(C,St(p,2)):[]}),Sd=Vt(function(f){var p=oi(f),C=On(f,Nl);return p=typeof p=="function"?p:n,p&&C.pop(),C.length&&C[0]===f[0]?Qh(C,n,p):[]});function Ra(f,p){return f==null?"":Gh.call(f,p)}function oi(f){var p=f==null?0:f.length;return p?f[p-1]:n}function Cf(f,p,C){var B=f==null?0:f.length;if(!B)return-1;var O=B;return C!==n&&(O=Ut(C),O=O<0?ur(B+O,0):_r(O,B-1)),p===p?Zv(f,p,O):Rh(f,Up,O,!0)}function Y1(f,p){return f&&f.length?nd(f,Ut(p)):n}var Td=Vt(xf);function xf(f,p){return f&&f.length&&p&&p.length?rr(f,p):f}function si(f,p,C){return f&&f.length&&p&&p.length?rr(f,p,St(C,2)):f}function Ma(f,p,C){return f&&f.length&&p&&p.length?rr(f,p,n,C):f}var Oo=gs(function(f,p){var C=f==null?0:f.length,B=Yh(f,p);return mr(f,On(p,function(O){return zn(O,C)?+O:O}).sort(R1)),B});function Si(f,p){var C=[];if(!(f&&f.length))return C;var B=-1,O=[],G=f.length;for(p=St(p,3);++B<G;){var X=f[B];p(X,B,f)&&(C.push(X),O.push(B))}return mr(f,O),C}function Dd(f){return f==null?f:jh.call(f)}function q1(f,p,C){var B=f==null?0:f.length;return B?(C&&typeof C!="number"&&ii(f,p,C)?(p=0,C=B):(p=p==null?0:Ut(p),C=C===n?B:Ut(C)),Wr(f,p,C)):[]}function Z1(f,p){return Ll(f,p)}function a7(f,p,C){return id(f,p,St(C,2))}function ba(f,p){var C=f==null?0:f.length;if(C){var B=Ll(f,p);if(B<C&&qs(f[B],p))return B}return-1}function N2(f,p){return Ll(f,p,!0)}function Q1(f,p,C){return id(f,p,St(C,2),!0)}function Au(f,p){var C=f==null?0:f.length;if(C){var B=Ll(f,p,!0)-1;if(qs(f[B],p))return B}return-1}function J1(f){return f&&f.length?S1(f):[]}function Bu(f,p){return f&&f.length?S1(f,St(p,2)):[]}function H2(f){var p=f==null?0:f.length;return p?Wr(f,1,p):[]}function G2(f,p,C){return f&&f.length?(p=C||p===n?1:Ut(p),Wr(f,0,p<0?0:p)):[]}function eg(f,p,C){var B=f==null?0:f.length;return B?(p=C||p===n?1:Ut(p),p=B-p,Wr(f,p<0?0:p,B)):[]}function Ad(f,p){return f&&f.length?of(f,St(p,3),!1,!0):[]}function u7(f,p){return f&&f.length?of(f,St(p,3)):[]}var l7=Vt(function(f){return Vs(Zn(f,1,yr,!0))}),j2=Vt(function(f){var p=oi(f);return yr(p)&&(p=n),Vs(Zn(f,1,yr,!0),St(p,2))}),$2=Vt(function(f){var p=oi(f);return p=typeof p=="function"?p:n,Vs(Zn(f,1,yr,!0),n,p)});function Ru(f){return f&&f.length?Vs(f):[]}function c7(f,p){return f&&f.length?Vs(f,St(p,2)):[]}function Ul(f,p){return p=typeof p=="function"?p:n,f&&f.length?Vs(f,n,p):[]}function Bd(f){if(!(f&&f.length))return[];var p=0;return f=ha(f,function(C){if(yr(C))return p=ur(C.length,p),!0}),i1(p,function(C){return On(f,n1(C))})}function Un(f,p){if(!(f&&f.length))return[];var C=Bd(f);return p==null?C:On(C,function(B){return ei(p,n,B)})}var f7=Vt(function(f,p){return yr(f)?us(f,p):[]}),W2=Vt(function(f){return sd(ha(f,yr))}),h7=Vt(function(f){var p=oi(f);return yr(p)&&(p=n),sd(ha(f,yr),St(p,2))}),d7=Vt(function(f){var p=oi(f);return p=typeof p=="function"?p:n,sd(ha(f,yr),n,p)}),z2=Vt(Bd);function V2(f,p){return sf(f||[],p||[],yu)}function g7(f,p){return sf(f||[],p||[],Pu)}var oo=Vt(function(f){var p=f.length,C=p>1?f[p-1]:n;return C=typeof C=="function"?(f.pop(),C):n,Un(f,C)});function Rd(f){var p=N(f);return p.__chain__=!0,p}function p7(f,p){return p(f),f}function Io(f,p){return p(f)}var Md=gs(function(f){var p=f.length,C=p?f[0]:0,B=this.__wrapped__,O=function(G){return Yh(G,f)};return p>1||this.__actions__.length||!(B instanceof jt)||!zn(C)?this.thru(O):(B=B.slice(C,+C+(p?1:0)),B.__actions__.push({func:Io,args:[O],thisArg:n}),new Nr(B,this.__chain__).thru(function(G){return p&&!G.length&&G.push(n),G}))});function Mu(){return Rd(this)}function bd(){return new Nr(this.value(),this.__chain__)}function tg(){this.__values__===n&&(this.__values__=Ay(this.value()));var f=this.__index__>=this.__values__.length,p=f?n:this.__values__[this.__index__++];return{done:f,value:p}}function ng(){return this}function m7(f){for(var p,C=this;C instanceof is;){var B=_2(C);B.__index__=0,B.__values__=n,p?O.__wrapped__=B:p=B;var O=B;C=C.__wrapped__}return O.__wrapped__=f,p}function rg(){var f=this.__wrapped__;if(f instanceof jt){var p=f;return this.__actions__.length&&(p=new jt(this)),p=p.reverse(),p.__actions__.push({func:Io,args:[Dd],thisArg:n}),new Nr(p,this.__chain__)}return this.thru(Dd)}function v7(){return _l(this.__wrapped__,this.__actions__)}var U2=ld(function(f,p,C){dn.call(f,C)?++f[C]:as(f,C,1)});function X2(f,p,C){var B=$t(f)?Z0:Qc;return C&&ii(f,p,C)&&(p=n),B(f,St(p,3))}function kd(f,p){var C=$t(f)?ha:p1;return C(f,St(p,3))}var Od=Tu(Aa),K2=Tu(yf);function ig(f,p){return Zn(bu(f,p),1)}function y7(f,p){return Zn(bu(f,p),Pe)}function Y2(f,p,C){return C=C===n?1:Ut(C),Zn(bu(f,p),C)}function Id(f,p){var C=$t(f)?Lr:ls;return C(f,St(p,3))}function Ef(f,p){var C=$t(f)?Ah:m2;return C(f,St(p,3))}var og=ld(function(f,p,C){dn.call(f,C)?f[C].push(p):as(f,C,[p])});function Fd(f,p,C,B){f=so(f)?f:Nd(f),C=C&&!B?Ut(C):0;var O=f.length;return C<0&&(C=ur(O+C,0)),Q2(f)?C<=O&&f.indexOf(p,C)>-1:!!O&&vl(f,p,C)>-1}var q2=Vt(function(f,p,C){var B=-1,O=typeof p=="function",G=so(f)?ye(f.length):[];return ls(f,function(X){G[++B]=O?ei(p,X,C):eo(X,p,C)}),G}),w7=ld(function(f,p,C){as(f,C,p)});function bu(f,p){var C=$t(f)?On:w1;return C(f,St(p,3))}function C7(f,p,C,B){return f==null?[]:($t(p)||(p=p==null?[]:[p]),C=B?n:C,$t(C)||(C=C==null?[]:[C]),nf(f,p,C))}var Pf=ld(function(f,p,C){f[C?0:1].push(p)},function(){return[[],[]]});function x7(f,p,C){var B=$t(f)?J0:Kp,O=arguments.length<3;return B(f,St(p,4),C,O,ls)}function Ld(f,p,C){var B=$t(f)?Wv:Kp,O=arguments.length<3;return B(f,St(p,4),C,O,m2)}function a(f,p){var C=$t(f)?ha:p1;return C(f,Ue(St(p,3)))}function l(f){var p=$t(f)?ss:$r;return p(f)}function m(f,p,C){(C?ii(f,p,C):p===n)?p=1:p=Ut(p);var B=$t(f)?vu:E1;return B(f,p)}function w(f){var p=$t(f)?g2:no;return p(f)}function P(f){if(f==null)return 0;if(so(f))return Q2(f)?fu(f):f.length;var p=Br(f);return p==Ye||p==_t?f.size:zs(f).length}function A(f,p,C){var B=$t(f)?e1:P1;return C&&ii(f,p,C)&&(p=n),B(f,St(p,3))}var _=Vt(function(f,p){if(f==null)return[];var C=p.length;return C>1&&ii(f,p[0],p[1])?p=[]:C>2&&ii(p[0],p[1],p[2])&&(p=[p[0]]),nf(f,Zn(p,1),[])}),V=_n||function(){return $n.Date.now()};function Z(f,p){if(typeof p!="function")throw new Yi(s);return f=Ut(f),function(){if(--f<1)return p.apply(this,arguments)}}function Ce(f,p,C){return p=C?n:p,p=f&&p==null?f.length:p,ds(f,z,n,n,n,n,p)}function Ne(f,p){var C;if(typeof p!="function")throw new Yi(s);return f=Ut(f),function(){return--f>0&&(C=p.apply(this,arguments)),f<=1&&(p=n),C}}var je=Vt(function(f,p,C){var B=T;if(C.length){var O=Ki(C,Xs(je));B|=k}return ds(f,B,p,C,O)}),_e=Vt(function(f,p,C){var B=T|D;if(C.length){var O=Ki(C,Xs(_e));B|=k}return ds(p,B,f,C,O)});function rt(f,p,C){p=C?n:p;var B=ds(f,R,n,n,n,n,n,p);return B.placeholder=rt.placeholder,B}function at(f,p,C){p=C?n:p;var B=ds(f,L,n,n,n,n,n,p);return B.placeholder=at.placeholder,B}function ct(f,p,C){var B,O,G,X,J,ce,be=0,Oe=!1,Ge=!1,tt=!0;if(typeof f!="function")throw new Yi(s);p=ms(p)||0,or(C)&&(Oe=!!C.leading,Ge="maxWait"in C,G=Ge?ur(ms(C.maxWait)||0,p):G,tt="trailing"in C?!!C.trailing:tt);function dt(wr){var Zs=B,Iu=O;return B=O=n,be=wr,X=f.apply(Iu,Zs),X}function Mt(wr){return be=wr,J=zl(en,p),Oe?dt(wr):X}function Yt(wr){var Zs=wr-ce,Iu=wr-be,Gy=p-Zs;return Ge?_r(Gy,G-Iu):Gy}function bt(wr){var Zs=wr-ce,Iu=wr-be;return ce===n||Zs>=p||Zs<0||Ge&&Iu>=G}function en(){var wr=V();if(bt(wr))return ln(wr);J=zl(en,Yt(wr))}function ln(wr){return J=n,tt&&B?dt(wr):(B=O=n,X)}function Lo(){J!==n&&A1(J),be=0,B=ce=O=J=n}function _i(){return J===n?X:ln(V())}function _o(){var wr=V(),Zs=bt(wr);if(B=arguments,O=this,ce=wr,Zs){if(J===n)return Mt(ce);if(Ge)return A1(J),J=zl(en,p),dt(ce)}return J===n&&(J=zl(en,p)),X}return _o.cancel=Lo,_o.flush=_i,_o}var ir=Vt(function(f,p){return g1(f,1,p)}),de=Vt(function(f,p,C){return g1(f,ms(p)||0,C)});function re(f){return ds(f,te)}function pe(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new Yi(s);var C=function(){var B=arguments,O=p?p.apply(this,B):B[0],G=C.cache;if(G.has(O))return G.get(O);var X=f.apply(this,B);return C.cache=G.set(O,X)||G,X};return C.cache=new(pe.Cache||qi),C}pe.Cache=qi;function Ue(f){if(typeof f!="function")throw new Yi(s);return function(){var p=arguments;switch(p.length){case 0:return!f.call(this);case 1:return!f.call(this,p[0]);case 2:return!f.call(this,p[0],p[1]);case 3:return!f.call(this,p[0],p[1],p[2])}return!f.apply(this,p)}}function ht(f){return Ne(2,f)}var Pt=C2(function(f,p){p=p.length==1&&$t(p[0])?On(p[0],Mi(St())):On(Zn(p,1),Mi(St()));var C=p.length;return Vt(function(B){for(var O=-1,G=_r(B.length,C);++O<G;)B[O]=p[O].call(this,B[O]);return ei(f,this,B)})}),Ct=Vt(function(f,p){var C=Ki(p,Xs(Ct));return ds(f,k,n,p,C)}),Rt=Vt(function(f,p){var C=Ki(p,Xs(Rt));return ds(f,W,n,p,C)}),Er=gs(function(f,p){return ds(f,Y,n,n,n,p)});function gn(f,p){if(typeof f!="function")throw new Yi(s);return p=p===n?p:Ut(p),Vt(f,p)}function ka(f,p){if(typeof f!="function")throw new Yi(s);return p=p==null?0:ur(Ut(p),0),Vt(function(C){var B=C[p],O=Us(C,0,p);return B&&da(O,B),ei(f,this,O)})}function E7(f,p,C){var B=!0,O=!0;if(typeof f!="function")throw new Yi(s);return or(C)&&(B="leading"in C?!!C.leading:B,O="trailing"in C?!!C.trailing:O),ct(f,p,{leading:B,maxWait:p,trailing:O})}function LB(f){return Ce(f,1)}function _B(f,p){return Ct(ad(p),f)}function NB(){if(!arguments.length)return[];var f=arguments[0];return $t(f)?f:[f]}function HB(f){return xi(f,y)}function GB(f,p){return p=typeof p=="function"?p:n,xi(f,y,p)}function jB(f){return xi(f,g|y)}function $B(f,p){return p=typeof p=="function"?p:n,xi(f,g|y,p)}function WB(f,p){return p==null||Zc(f,p,zr(p))}function qs(f,p){return f===p||f!==f&&p!==p}var zB=gd(Ea),VB=gd(function(f,p){return f>=p}),Sf=Jh(function(){return arguments}())?Jh:function(f){return cr(f)&&dn.call(f,"callee")&&!_h.call(f,"callee")},$t=ye.isArray,UB=Y0?Mi(Y0):y2;function so(f){return f!=null&&Z2(f.length)&&!ku(f)}function yr(f){return cr(f)&&so(f)}function XB(f){return f===!0||f===!1||cr(f)&&Dr(f)==et}var Xl=c1||O7,KB=vi?Mi(vi):Ws;function YB(f){return cr(f)&&f.nodeType===1&&!sg(f)}function qB(f){if(f==null)return!0;if(so(f)&&($t(f)||typeof f=="string"||typeof f.splice=="function"||Xl(f)||_d(f)||Sf(f)))return!f.length;var p=Br(f);if(p==Ye||p==_t)return!f.size;if(Ks(f))return!zs(f).length;for(var C in f)if(dn.call(f,C))return!1;return!0}function ZB(f,p){return to(f,p)}function QB(f,p,C){C=typeof C=="function"?C:n;var B=C?C(f,p):n;return B===n?to(f,p,n,C):!!B}function P7(f){if(!cr(f))return!1;var p=Dr(f);return p==Te||p==Se||typeof f.message=="string"&&typeof f.name=="string"&&!sg(f)}function JB(f){return typeof f=="number"&&Pl(f)}function ku(f){if(!or(f))return!1;var p=Dr(f);return p==ke||p==vt||p==Ze||p==wn}function Py(f){return typeof f=="number"&&f==Ut(f)}function Z2(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=he}function or(f){var p=typeof f;return f!=null&&(p=="object"||p=="function")}function cr(f){return f!=null&&typeof f=="object"}var Sy=cu?Mi(cu):w2;function eR(f,p){return f===p||Ol(f,p,df(p))}function tR(f,p,C){return C=typeof C=="function"?C:n,Ol(f,p,df(p),C)}function nR(f){return Ty(f)&&f!=+f}function rR(f){if(s7(f))throw new Ft(o);return v1(f)}function iR(f){return f===null}function oR(f){return f==null}function Ty(f){return typeof f=="number"||cr(f)&&Dr(f)==Dt}function sg(f){if(!cr(f)||Dr(f)!=Bt)return!1;var p=Do(f);if(p===null)return!0;var C=dn.call(p,"constructor")&&p.constructor;return typeof C=="function"&&C instanceof C&&jc.call(C)==Fh}var S7=Dh?Mi(Dh):ef;function sR(f){return Py(f)&&f>=-9007199254740991&&f<=he}var Dy=ml?Mi(ml):cs;function Q2(f){return typeof f=="string"||!$t(f)&&cr(f)&&Dr(f)==sn}function Fo(f){return typeof f=="symbol"||cr(f)&&Dr(f)==gr}var _d=Wp?Mi(Wp):tf;function aR(f){return f===n}function uR(f){return cr(f)&&Br(f)==jn}function lR(f){return cr(f)&&Dr(f)==Vi}var cR=gd(Pa),fR=gd(function(f,p){return f<=p});function Ay(f){if(!f)return[];if(so(f))return Q2(f)?bi(f):ni(f);if(Ns&&f[Ns])return Yv(f[Ns]());var p=Br(f),C=p==Ye?bh:p==_t?ga:Nd;return C(f)}function Ou(f){if(!f)return f===0?f:0;if(f=ms(f),f===Pe||f===-1/0){var p=f<0?-1:1;return p*ue}return f===f?f:0}function Ut(f){var p=Ou(f),C=p%1;return p===p?C?p-C:p:0}function By(f){return f?Gs(Ut(f),0,U):0}function ms(f){if(typeof f=="number")return f;if(Fo(f))return we;if(or(f)){var p=typeof f.valueOf=="function"?f.valueOf():f;f=or(p)?p+"":p}if(typeof f!="string")return f===0?f:+f;f=Yp(f);var C=V0.test(f);return C||mh.test(f)?Sh(f.slice(2),C?2:8):gh.test(f)?we:+f}function Ry(f){return Bo(f,ao(f))}function hR(f){return f?Gs(Ut(f),-9007199254740991,he):f===0?f:0}function Bn(f){return f==null?"":Ei(f)}var dR=Hl(function(f,p){if(Ks(p)||so(p)){Bo(p,zr(p),f);return}for(var C in p)dn.call(p,C)&&yu(f,C,p[C])}),My=Hl(function(f,p){Bo(p,ao(p),f)}),J2=Hl(function(f,p,C,B){Bo(p,ao(p),f,B)}),gR=Hl(function(f,p,C,B){Bo(p,zr(p),f,B)}),pR=gs(Yh);function mR(f,p){var C=Bl(f);return p==null?C:Hn(C,p)}var vR=Vt(function(f,p){f=An(f);var C=-1,B=p.length,O=B>2?p[2]:n;for(O&&ii(p[0],p[1],O)&&(B=1);++C<B;)for(var G=p[C],X=ao(G),J=-1,ce=X.length;++J<ce;){var be=X[J],Oe=f[be];(Oe===n||qs(Oe,ns[be])&&!dn.call(f,be))&&(f[be]=G[be])}return f}),yR=Vt(function(f){return f.push(n,L1),ei(by,n,f)});function wR(f,p){return Vp(f,St(p,3),Ii)}function CR(f,p){return Vp(f,St(p,3),xa)}function xR(f,p){return f==null?f:qh(f,St(p,3),ao)}function ER(f,p){return f==null?f:Jc(f,St(p,3),ao)}function PR(f,p){return f&&Ii(f,St(p,3))}function SR(f,p){return f&&xa(f,St(p,3))}function TR(f){return f==null?[]:kl(f,zr(f))}function DR(f){return f==null?[]:kl(f,ao(f))}function T7(f,p,C){var B=f==null?n:js(f,p);return B===n?C:B}function AR(f,p){return f!=null&&j1(f,p,Ji)}function D7(f,p){return f!=null&&j1(f,p,Cu)}var BR=D2(function(f,p,C){p!=null&&typeof p.toString!="function"&&(p=$c.call(p)),f[p]=C},B7(uo)),RR=D2(function(f,p,C){p!=null&&typeof p.toString!="function"&&(p=$c.call(p)),dn.call(f,p)?f[p].push(C):f[p]=[C]},St),MR=Vt(eo);function zr(f){return so(f)?os(f):zs(f)}function ao(f){return so(f)?os(f,!0):y1(f)}function bR(f,p){var C={};return p=St(p,3),Ii(f,function(B,O,G){as(C,p(B,O,G),B)}),C}function kR(f,p){var C={};return p=St(p,3),Ii(f,function(B,O,G){as(C,O,p(B,O,G))}),C}var OR=Hl(function(f,p,C){xu(f,p,C)}),by=Hl(function(f,p,C,B){xu(f,p,C,B)}),IR=gs(function(f,p){var C={};if(f==null)return C;var B=!1;p=On(p,function(G){return G=hs(G,f),B||(B=G.length>1),G}),Bo(f,ff(f),C),B&&(C=xi(C,g|v|y,_1));for(var O=p.length;O--;)od(C,p[O]);return C});function FR(f,p){return ky(f,Ue(St(p)))}var LR=gs(function(f,p){return f==null?{}:x1(f,p)});function ky(f,p){if(f==null)return{};var C=On(ff(f),function(B){return[B]});return p=St(p),Sa(f,C,function(B,O){return p(B,O[0])})}function _R(f,p,C){p=hs(p,f);var B=-1,O=p.length;for(O||(O=1,f=n);++B<O;){var G=f==null?n:f[ko(p[B])];G===n&&(B=O,G=C),f=ku(G)?G.call(f):G}return f}function NR(f,p,C){return f==null?f:Pu(f,p,C)}function HR(f,p,C,B){return B=typeof B=="function"?B:n,f==null?f:Pu(f,p,C,B)}var Oy=I1(zr),Iy=I1(ao);function GR(f,p,C){var B=$t(f),O=B||Xl(f)||_d(f);if(p=St(p,4),C==null){var G=f&&f.constructor;O?C=B?new G:[]:or(f)?C=ku(G)?Bl(Do(f)):{}:C={}}return(O?Lr:Ii)(f,function(X,J,ce){return p(C,X,J,ce)}),C}function jR(f,p){return f==null?!0:od(f,p)}function $R(f,p,C){return f==null?f:D1(f,p,ad(C))}function WR(f,p,C,B){return B=typeof B=="function"?B:n,f==null?f:D1(f,p,ad(C),B)}function Nd(f){return f==null?[]:Hc(f,zr(f))}function zR(f){return f==null?[]:Hc(f,ao(f))}function VR(f,p,C){return C===n&&(C=p,p=n),C!==n&&(C=ms(C),C=C===C?C:0),p!==n&&(p=ms(p),p=p===p?p:0),Gs(ms(f),p,C)}function UR(f,p,C){return p=Ou(p),C===n?(C=p,p=0):C=Ou(C),f=ms(f),m1(f,p,C)}function XR(f,p,C){if(C&&typeof C!="boolean"&&ii(f,p,C)&&(p=C=n),C===n&&(typeof p=="boolean"?(C=p,p=n):typeof f=="boolean"&&(C=f,f=n)),f===n&&p===n?(f=0,p=1):(f=Ou(f),p===n?(p=f,f=0):p=Ou(p)),f>p){var B=f;f=p,p=B}if(C||f%1||p%1){var O=Uc();return _r(f+O*(p-f+X0("1e-"+((O+"").length-1))),p)}return Fl(f,p)}var KR=Su(function(f,p,C){return p=p.toLowerCase(),f+(C?Fy(p):p)});function Fy(f){return A7(Bn(f).toLowerCase())}function Ly(f){return f=Bn(f),f&&f.replace(yh,Qp).replace(Hp,"")}function YR(f,p,C){f=Bn(f),p=Ei(p);var B=f.length;C=C===n?B:Gs(Ut(C),0,B);var O=C;return C-=p.length,C>=0&&f.slice(C,O)==p}function qR(f){return f=Bn(f),f&&ch.test(f)?f.replace(Os,Jp):f}function ZR(f){return f=Bn(f),f&&su.test(f)?f.replace(ou,"\\$&"):f}var QR=Su(function(f,p,C){return f+(C?"-":"")+p.toLowerCase()}),JR=Su(function(f,p,C){return f+(C?" ":"")+p.toLowerCase()}),eM=b1("toLowerCase");function tM(f,p,C){f=Bn(f),p=Ut(p);var B=p?fu(f):0;if(!p||B>=p)return f;var O=(p-B)/2;return lf(pa(O),C)+f+lf(du(O),C)}function nM(f,p,C){f=Bn(f),p=Ut(p);var B=p?fu(f):0;return p&&B<p?f+lf(p-B,C):f}function rM(f,p,C){f=Bn(f),p=Ut(p);var B=p?fu(f):0;return p&&B<p?lf(p-B,C)+f:f}function iM(f,p,C){return C||p==null?p=0:p&&(p=+p),u2(Bn(f).replace(bc,""),p||0)}function oM(f,p,C){return(C?ii(f,p,C):p===n)?p=1:p=Ut(p),Eu(Bn(f),p)}function sM(){var f=arguments,p=Bn(f[0]);return f.length<3?p:p.replace(f[1],f[2])}var aM=Su(function(f,p,C){return f+(C?"_":"")+p.toLowerCase()});function uM(f,p,C){return C&&typeof C!="number"&&ii(f,p,C)&&(p=C=n),C=C===n?U:C>>>0,C?(f=Bn(f),f&&(typeof p=="string"||p!=null&&!S7(p))&&(p=Ei(p),!p&&wl(f))?Us(bi(f),0,C):f.split(p,C)):[]}var lM=Su(function(f,p,C){return f+(C?" ":"")+A7(p)});function cM(f,p,C){return f=Bn(f),C=C==null?0:Gs(Ut(C),0,f.length),p=Ei(p),f.slice(C,C+p.length)==p}function fM(f,p,C){var B=N.templateSettings;C&&ii(f,p,C)&&(p=n),f=Bn(f),p=J2({},p,B,F1);var O=J2({},p.imports,B.imports,F1),G=zr(O),X=Hc(O,G),J,ce,be=0,Oe=p.interpolate||ll,Ge="__p += '",tt=Gc((p.escape||ll).source+"|"+Oe.source+"|"+(Oe===Rc?Is:ll).source+"|"+(p.evaluate||ll).source+"|$","g"),dt="//# sourceURL="+(dn.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gv+"]")+`
`;f.replace(tt,function(bt,en,ln,Lo,_i,_o){return ln||(ln=Lo),Ge+=f.slice(be,_o).replace(wh,e2),en&&(J=!0,Ge+=`' +
__e(`+en+`) +
'`),_i&&(ce=!0,Ge+=`';
`+_i+`;
__p += '`),ln&&(Ge+=`' +
((__t = (`+ln+`)) == null ? '' : __t) +
'`),be=_o+bt.length,bt}),Ge+=`';
`;var Mt=dn.call(p,"variable")&&p.variable;if(!Mt)Ge=`with (obj) {
`+Ge+`
}
`;else if(W0.test(Mt))throw new Ft(u);Ge=(ce?Ge.replace(sl,""):Ge).replace(Ac,"$1").replace(Xi,"$1;"),Ge="function("+(Mt||"obj")+`) {
`+(Mt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ge+`return __p
}`;var Yt=Ny(function(){return hn(G,dt+"return "+Ge).apply(n,X)});if(Yt.source=Ge,P7(Yt))throw Yt;return Yt}function hM(f){return Bn(f).toLowerCase()}function dM(f){return Bn(f).toUpperCase()}function gM(f,p,C){if(f=Bn(f),f&&(C||p===n))return Yp(f);if(!f||!(p=Ei(p)))return f;var B=bi(f),O=bi(p),G=qp(B,O),X=o1(B,O)+1;return Us(B,G,X).join("")}function pM(f,p,C){if(f=Bn(f),f&&(C||p===n))return f.slice(0,Oh(f)+1);if(!f||!(p=Ei(p)))return f;var B=bi(f),O=o1(B,bi(p))+1;return Us(B,0,O).join("")}function mM(f,p,C){if(f=Bn(f),f&&(C||p===n))return f.replace(bc,"");if(!f||!(p=Ei(p)))return f;var B=bi(f),O=qp(B,bi(p));return Us(B,O).join("")}function vM(f,p){var C=se,B=me;if(or(p)){var O="separator"in p?p.separator:O;C="length"in p?Ut(p.length):C,B="omission"in p?Ei(p.omission):B}f=Bn(f);var G=f.length;if(wl(f)){var X=bi(f);G=X.length}if(C>=G)return f;var J=C-fu(B);if(J<1)return B;var ce=X?Us(X,0,J).join(""):f.slice(0,J);if(O===n)return ce+B;if(X&&(J+=ce.length-J),S7(O)){if(f.slice(J).search(O)){var be,Oe=ce;for(O.global||(O=Gc(O.source,Bn(Oc.exec(O))+"g")),O.lastIndex=0;be=O.exec(Oe);)var Ge=be.index;ce=ce.slice(0,Ge===n?J:Ge)}}else if(f.indexOf(Ei(O),J)!=J){var tt=ce.lastIndexOf(O);tt>-1&&(ce=ce.slice(0,tt))}return ce+B}function yM(f){return f=Bn(f),f&&Bc.test(f)?f.replace(ks,t2):f}var wM=Su(function(f,p,C){return f+(C?" ":"")+p.toUpperCase()}),A7=b1("toUpperCase");function _y(f,p,C){return f=Bn(f),p=C?n:p,p===n?Kv(f)?Qv(f):Vv(f):f.match(p)||[]}var Ny=Vt(function(f,p){try{return ei(f,n,p)}catch(C){return P7(C)?C:new Ft(C)}}),CM=gs(function(f,p){return Lr(p,function(C){C=ko(C),as(f,C,je(f[C],f))}),f});function xM(f){var p=f==null?0:f.length,C=St();return f=p?On(f,function(B){if(typeof B[1]!="function")throw new Yi(s);return[C(B[0]),B[1]]}):[],Vt(function(B){for(var O=-1;++O<p;){var G=f[O];if(ei(G[0],this,B))return ei(G[1],this,B)}})}function EM(f){return p2(xi(f,g))}function B7(f){return function(){return f}}function PM(f,p){return f==null||f!==f?p:f}var SM=hd(),TM=hd(!0);function uo(f){return f}function R7(f){return Il(typeof f=="function"?f:xi(f,g))}function DM(f){return td(xi(f,g))}function AM(f,p){return Wn(f,xi(p,g))}var BM=Vt(function(f,p){return function(C){return eo(C,f,p)}}),RM=Vt(function(f,p){return function(C){return eo(f,C,p)}});function M7(f,p,C){var B=zr(p),O=kl(p,B);C==null&&!(or(p)&&(O.length||!B.length))&&(C=p,p=f,f=this,O=kl(p,zr(p)));var G=!(or(C)&&"chain"in C)||!!C.chain,X=ku(f);return Lr(O,function(J){var ce=p[J];f[J]=ce,X&&(f.prototype[J]=function(){var be=this.__chain__;if(G||be){var Oe=f(this.__wrapped__),Ge=Oe.__actions__=ni(this.__actions__);return Ge.push({func:ce,args:arguments,thisArg:f}),Oe.__chain__=be,Oe}return ce.apply(f,da([this.value()],arguments))})}),f}function MM(){return $n._===this&&($n._=i2),this}function b7(){}function bM(f){return f=Ut(f),Vt(function(p){return nd(p,f)})}var kM=dd(On),OM=dd(Z0),IM=dd(e1);function Hy(f){return it(f)?n1(ko(f)):Vn(f)}function FM(f){return function(p){return f==null?n:js(f,p)}}var LM=O1(),_M=O1(!0);function k7(){return[]}function O7(){return!1}function NM(){return{}}function HM(){return""}function GM(){return!0}function jM(f,p){if(f=Ut(f),f<1||f>he)return[];var C=U,B=_r(f,U);p=St(p),f-=U;for(var O=i1(B,p);++C<f;)p(C);return O}function $M(f){return $t(f)?On(f,ko):Fo(f)?[f]:ni(V1(Bn(f)))}function WM(f){var p=++El;return Bn(f)+p}var zM=uf(function(f,p){return f+p},0),VM=Ar("ceil"),UM=uf(function(f,p){return f/p},1),XM=Ar("floor");function KM(f){return f&&f.length?wu(f,uo,Ea):n}function YM(f,p){return f&&f.length?wu(f,St(p,2),Ea):n}function qM(f){return Xp(f,uo)}function ZM(f,p){return Xp(f,St(p,2))}function QM(f){return f&&f.length?wu(f,uo,Pa):n}function JM(f,p){return f&&f.length?wu(f,St(p,2),Pa):n}var eb=uf(function(f,p){return f*p},1),tb=Ar("round"),nb=uf(function(f,p){return f-p},0);function rb(f){return f&&f.length?r1(f,uo):0}function ib(f,p){return f&&f.length?r1(f,St(p,2)):0}return N.after=Z,N.ary=Ce,N.assign=dR,N.assignIn=My,N.assignInWith=J2,N.assignWith=gR,N.at=pR,N.before=Ne,N.bind=je,N.bindAll=CM,N.bindKey=_e,N.castArray=NB,N.chain=Rd,N.chunk=xd,N.compact=U1,N.concat=io,N.cond=xM,N.conforms=EM,N.constant=B7,N.countBy=U2,N.create=mR,N.curry=rt,N.curryRight=at,N.debounce=ct,N.defaults=vR,N.defaultsDeep=yR,N.defer=ir,N.delay=de,N.difference=un,N.differenceBy=xr,N.differenceWith=lr,N.drop=Mr,N.dropRight=Li,N.dropRightWhile=Vl,N.dropWhile=vr,N.fill=vf,N.filter=kd,N.flatMap=ig,N.flatMapDeep=y7,N.flatMapDepth=Y2,N.flatten=Ed,N.flattenDeep=wf,N.flattenDepth=Pi,N.flip=re,N.flow=SM,N.flowRight=TM,N.fromPairs=X1,N.functions=TR,N.functionsIn=DR,N.groupBy=og,N.initial=Pd,N.intersection=K1,N.intersectionBy=Ba,N.intersectionWith=Sd,N.invert=BR,N.invertBy=RR,N.invokeMap=q2,N.iteratee=R7,N.keyBy=w7,N.keys=zr,N.keysIn=ao,N.map=bu,N.mapKeys=bR,N.mapValues=kR,N.matches=DM,N.matchesProperty=AM,N.memoize=pe,N.merge=OR,N.mergeWith=by,N.method=BM,N.methodOf=RM,N.mixin=M7,N.negate=Ue,N.nthArg=bM,N.omit=IR,N.omitBy=FR,N.once=ht,N.orderBy=C7,N.over=kM,N.overArgs=Pt,N.overEvery=OM,N.overSome=IM,N.partial=Ct,N.partialRight=Rt,N.partition=Pf,N.pick=LR,N.pickBy=ky,N.property=Hy,N.propertyOf=FM,N.pull=Td,N.pullAll=xf,N.pullAllBy=si,N.pullAllWith=Ma,N.pullAt=Oo,N.range=LM,N.rangeRight=_M,N.rearg=Er,N.reject=a,N.remove=Si,N.rest=gn,N.reverse=Dd,N.sampleSize=m,N.set=NR,N.setWith=HR,N.shuffle=w,N.slice=q1,N.sortBy=_,N.sortedUniq=J1,N.sortedUniqBy=Bu,N.split=uM,N.spread=ka,N.tail=H2,N.take=G2,N.takeRight=eg,N.takeRightWhile=Ad,N.takeWhile=u7,N.tap=p7,N.throttle=E7,N.thru=Io,N.toArray=Ay,N.toPairs=Oy,N.toPairsIn=Iy,N.toPath=$M,N.toPlainObject=Ry,N.transform=GR,N.unary=LB,N.union=l7,N.unionBy=j2,N.unionWith=$2,N.uniq=Ru,N.uniqBy=c7,N.uniqWith=Ul,N.unset=jR,N.unzip=Bd,N.unzipWith=Un,N.update=$R,N.updateWith=WR,N.values=Nd,N.valuesIn=zR,N.without=f7,N.words=_y,N.wrap=_B,N.xor=W2,N.xorBy=h7,N.xorWith=d7,N.zip=z2,N.zipObject=V2,N.zipObjectDeep=g7,N.zipWith=oo,N.entries=Oy,N.entriesIn=Iy,N.extend=My,N.extendWith=J2,M7(N,N),N.add=zM,N.attempt=Ny,N.camelCase=KR,N.capitalize=Fy,N.ceil=VM,N.clamp=VR,N.clone=HB,N.cloneDeep=jB,N.cloneDeepWith=$B,N.cloneWith=GB,N.conformsTo=WB,N.deburr=Ly,N.defaultTo=PM,N.divide=UM,N.endsWith=YR,N.eq=qs,N.escape=qR,N.escapeRegExp=ZR,N.every=X2,N.find=Od,N.findIndex=Aa,N.findKey=wR,N.findLast=K2,N.findLastIndex=yf,N.findLastKey=CR,N.floor=XM,N.forEach=Id,N.forEachRight=Ef,N.forIn=xR,N.forInRight=ER,N.forOwn=PR,N.forOwnRight=SR,N.get=T7,N.gt=zB,N.gte=VB,N.has=AR,N.hasIn=D7,N.head=Du,N.identity=uo,N.includes=Fd,N.indexOf=Ys,N.inRange=UR,N.invoke=MR,N.isArguments=Sf,N.isArray=$t,N.isArrayBuffer=UB,N.isArrayLike=so,N.isArrayLikeObject=yr,N.isBoolean=XB,N.isBuffer=Xl,N.isDate=KB,N.isElement=YB,N.isEmpty=qB,N.isEqual=ZB,N.isEqualWith=QB,N.isError=P7,N.isFinite=JB,N.isFunction=ku,N.isInteger=Py,N.isLength=Z2,N.isMap=Sy,N.isMatch=eR,N.isMatchWith=tR,N.isNaN=nR,N.isNative=rR,N.isNil=oR,N.isNull=iR,N.isNumber=Ty,N.isObject=or,N.isObjectLike=cr,N.isPlainObject=sg,N.isRegExp=S7,N.isSafeInteger=sR,N.isSet=Dy,N.isString=Q2,N.isSymbol=Fo,N.isTypedArray=_d,N.isUndefined=aR,N.isWeakMap=uR,N.isWeakSet=lR,N.join=Ra,N.kebabCase=QR,N.last=oi,N.lastIndexOf=Cf,N.lowerCase=JR,N.lowerFirst=eM,N.lt=cR,N.lte=fR,N.max=KM,N.maxBy=YM,N.mean=qM,N.meanBy=ZM,N.min=QM,N.minBy=JM,N.stubArray=k7,N.stubFalse=O7,N.stubObject=NM,N.stubString=HM,N.stubTrue=GM,N.multiply=eb,N.nth=Y1,N.noConflict=MM,N.noop=b7,N.now=V,N.pad=tM,N.padEnd=nM,N.padStart=rM,N.parseInt=iM,N.random=XR,N.reduce=x7,N.reduceRight=Ld,N.repeat=oM,N.replace=sM,N.result=_R,N.round=tb,N.runInContext=ae,N.sample=l,N.size=P,N.snakeCase=aM,N.some=A,N.sortedIndex=Z1,N.sortedIndexBy=a7,N.sortedIndexOf=ba,N.sortedLastIndex=N2,N.sortedLastIndexBy=Q1,N.sortedLastIndexOf=Au,N.startCase=lM,N.startsWith=cM,N.subtract=nb,N.sum=rb,N.sumBy=ib,N.template=fM,N.times=jM,N.toFinite=Ou,N.toInteger=Ut,N.toLength=By,N.toLower=hM,N.toNumber=ms,N.toSafeInteger=hR,N.toString=Bn,N.toUpper=dM,N.trim=gM,N.trimEnd=pM,N.trimStart=mM,N.truncate=vM,N.unescape=yM,N.uniqueId=WM,N.upperCase=wM,N.upperFirst=A7,N.each=Id,N.eachRight=Ef,N.first=Du,M7(N,function(){var f={};return Ii(N,function(p,C){dn.call(N.prototype,C)||(f[C]=p)}),f}(),{chain:!1}),N.VERSION=r,Lr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){N[f].placeholder=N}),Lr(["drop","take"],function(f,p){jt.prototype[f]=function(C){C=C===n?1:ur(Ut(C),0);var B=this.__filtered__&&!p?new jt(this):this.clone();return B.__filtered__?B.__takeCount__=_r(C,B.__takeCount__):B.__views__.push({size:_r(C,U),type:f+(B.__dir__<0?"Right":"")}),B},jt.prototype[f+"Right"]=function(C){return this.reverse()[f](C).reverse()}}),Lr(["filter","map","takeWhile"],function(f,p){var C=p+1,B=C==ve||C==Be;jt.prototype[f]=function(O){var G=this.clone();return G.__iteratees__.push({iteratee:St(O,3),type:C}),G.__filtered__=G.__filtered__||B,G}}),Lr(["head","last"],function(f,p){var C="take"+(p?"Right":"");jt.prototype[f]=function(){return this[C](1).value()[0]}}),Lr(["initial","tail"],function(f,p){var C="drop"+(p?"":"Right");jt.prototype[f]=function(){return this.__filtered__?new jt(this):this[C](1)}}),jt.prototype.compact=function(){return this.filter(uo)},jt.prototype.find=function(f){return this.filter(f).head()},jt.prototype.findLast=function(f){return this.reverse().find(f)},jt.prototype.invokeMap=Vt(function(f,p){return typeof f=="function"?new jt(this):this.map(function(C){return eo(C,f,p)})}),jt.prototype.reject=function(f){return this.filter(Ue(St(f)))},jt.prototype.slice=function(f,p){f=Ut(f);var C=this;return C.__filtered__&&(f>0||p<0)?new jt(C):(f<0?C=C.takeRight(-f):f&&(C=C.drop(f)),p!==n&&(p=Ut(p),C=p<0?C.dropRight(-p):C.take(p-f)),C)},jt.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},jt.prototype.toArray=function(){return this.take(U)},Ii(jt.prototype,function(f,p){var C=/^(?:filter|find|map|reject)|While$/.test(p),B=/^(?:head|last)$/.test(p),O=N[B?"take"+(p=="last"?"Right":""):p],G=B||/^find/.test(p);O&&(N.prototype[p]=function(){var X=this.__wrapped__,J=B?[1]:arguments,ce=X instanceof jt,be=J[0],Oe=ce||$t(X),Ge=function(en){var ln=O.apply(N,da([en],J));return B&&tt?ln[0]:ln};Oe&&C&&typeof be=="function"&&be.length!=1&&(ce=Oe=!1);var tt=this.__chain__,dt=!!this.__actions__.length,Mt=G&&!tt,Yt=ce&&!dt;if(!G&&Oe){X=Yt?X:new jt(this);var bt=f.apply(X,J);return bt.__actions__.push({func:Io,args:[Ge],thisArg:n}),new Nr(bt,tt)}return Mt&&Yt?f.apply(this,J):(bt=this.thru(Ge),Mt?B?bt.value()[0]:bt.value():bt)})}),Lr(["pop","push","shift","sort","splice","unshift"],function(f){var p=Ls[f],C=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",B=/^(?:pop|shift)$/.test(f);N.prototype[f]=function(){var O=arguments;if(B&&!this.__chain__){var G=this.value();return p.apply($t(G)?G:[],O)}return this[C](function(X){return p.apply($t(X)?X:[],O)})}}),Ii(jt.prototype,function(f,p){var C=N[p];if(C){var B=C.name+"";dn.call(Dl,B)||(Dl[B]=[]),Dl[B].push({name:p,func:C})}}),Dl[jl(n,D).name]=[{name:"wrapper",func:n}],jt.prototype.clone=zh,jt.prototype.reverse=h1,jt.prototype.value=Rl,N.prototype.at=Md,N.prototype.chain=Mu,N.prototype.commit=bd,N.prototype.next=tg,N.prototype.plant=m7,N.prototype.reverse=rg,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=v7,N.prototype.first=N.prototype.head,Ns&&(N.prototype[Ns]=ng),N},Cl=Jv();ts?((ts.exports=Cl)._=Cl,Nc._=Cl):$n._=Cl}).call(OQ)}(xg,xg.exports)),xg.exports}var FQ=IQ();const LQ=({min:e=0,max:t=100,step:n=1,defaultValue:r=100,disabled:i=!1,onChange:o,beforeStart:s,afterEnd:u})=>{const[c,h]=j.useState(!1),[d,g]=j.useState(r),v=j.useRef(0),y=j.useRef(null),x=j.useRef(null);j.useEffect(()=>{if(y.current&&x.current){const S=y.current.getBoundingClientRect(),R=x.current.getBoundingClientRect();v.current=wO(R.width/2/S.width*100)}},[x,y]),j.useEffect(()=>{g(r)},[r]);const E=j.useCallback(FQ.throttle(S=>{if(y.current&&x.current){const R=y.current.getBoundingClientRect(),L=S.clientX-R.left;let k=Math.min(Math.max(L/R.width,0),1);k>=(100-v.current)/100?k=1:k<=v.current/100&&(k=0);const W=Math.round(k*(t-e)/n)*n+e;g(W),o&&o(W)}},50,{leading:!0,trailing:!0}),[e,t,n,o]),T=j.useCallback(()=>{const S=L=>{h(!0),E(L)},R=()=>{document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",R),u&&u(),setTimeout(()=>{h(!1)},0)};document.addEventListener("pointermove",S),document.addEventListener("pointerup",R)},[E]);let D=(d-e)/(t-e)*100;return D>=100-v.current&&(D=100-v.current),D<=v.current&&(D=v.current),b.jsx("div",{className:Dn("slider-container",{disabled:i}),children:b.jsxs("div",{ref:y,className:"slider-track",onClick:S=>{i||c||E(S)},onPointerDown:S=>{S.preventDefault(),!i&&(s&&s(),T())},children:[b.jsx("div",{className:"slider-range",style:{width:`${D}%`}}),b.jsx("div",{ref:x,className:"slider-thumb",style:{left:`${D}%`}})]})})},hE=xA(dB,4),my=xt.forwardRef((e,t)=>{const n=Zr(),{currentColor:r,onColorChange:i,onOpacityChange:o}=e,[s,u]=j.useState(r&&lh(r)||hE[0][0].value),[c,h]=j.useState(()=>{const d=r&&j0(r);return Xo(d)?100:d});return b.jsxs(Wo.Col,{gap:3,children:[b.jsx(LQ,{step:5,defaultValue:c,onChange:d=>{h(d),o(d)},beforeStart:()=>{br.set(n,!0),vs.setSplittingOnce(n,!0)},afterEnd:()=>{br.set(n,!1)},disabled:s===dB[0].value}),b.jsx(Wo.Col,{gap:2,children:hE.map((d,g)=>b.jsx(Wo.Row,{gap:2,children:d.map(v=>b.jsxs("button",{className:`color-select-item ${s===v.value?"active":""} ${f0(v.value)?"no-color":""}`,style:{backgroundColor:f0(v.value)?BQ:v.value,color:kQ(v.value)?py:qr},onClick:()=>{u(v.value),v.value===gy&&h(100),i(v.value)},title:v.name,children:[f0(v.value)&&wq,s===v.value&&Cq]},v.value))},g))})]})}),mB=(e,t)=>Me.isMindElement(e,t)||fe.isDrawElement(t)&&Ap(t)||pv(e,t),vB=(e,t)=>{let n=t.fill;return n||(Me.isMindElement(e,t)&&(n=jD(e,t)),(fe.isDrawElement(t)||fe.isCustomGeometryElement(e,t))&&(n=mv(e,t))),n},yB=(e,t)=>{let n=t.strokeColor;return n||(Me.isMindElement(e,t)&&(n=V8(e,t)),(fe.isDrawElement(t)||fe.isCustomGeometryElement(e,t))&&(n=H0(e,t))),n},_Q=(e,t)=>{tu.setFillColor(e,null,{getMemorizeKey:_0,callback:(n,r)=>{if(!mB(e,n))return;const i=vB(e,n);if(!bQ(i))return;const o=lh(i),s=_p(t)?o:G0(o,t);Xe.setNode(e,{fill:s},r)}})},NQ=(e,t)=>{tu.setFillColor(e,null,{getMemorizeKey:_0,callback:(n,r)=>{if(!mB(e,n))return;const i=vB(e,n),o=j0(i);f0(t)?Xe.setNode(e,{fill:null},r):Xo(o)||_p(o)?Xe.setNode(e,{fill:t},r):Xe.setNode(e,{fill:G0(t,o)},r)}})},HQ=(e,t)=>{tu.setStrokeColor(e,null,{getMemorizeKey:_0,callback:(n,r)=>{const i=yB(e,n),o=lh(i),s=_p(t)?o:G0(o,t);Xe.setNode(e,{strokeColor:s},r)}})},GQ=(e,t)=>{tu.setStrokeColor(e,null,{getMemorizeKey:_0,callback:(n,r)=>{const i=yB(e,n),o=j0(i);f0(t)?Xe.setNode(e,{strokeColor:null},r):Xo(o)||_p(o)?Xe.setNode(e,{strokeColor:t},r):Xe.setNode(e,{strokeColor:G0(t,o)},r)}})},jQ=(e,t,n)=>{const r=j0(t);f0(n)?W6.setTextColor(e,null):W6.setTextColor(e,G0(n,r))},$Q=(e,t,n)=>{const r=lh(t),i=_p(n)?r:G0(r,n);W6.setTextColor(e,i)},WQ=({board:e,currentColor:t,fontColorIcon:n,title:r})=>{const[i,o]=j.useState(!1),s=I.getBoardContainer(e);return b.jsxs(tl,{sideOffset:12,open:i,onOpenChange:u=>{o(u)},placement:"top",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{className:Dn("property-button"),selected:i,visible:!0,icon:n,type:"button",title:r,"aria-label":r,onPointerUp:()=>{o(!i)}})}),b.jsx(rl,{container:s,children:b.jsx(Rs,{padding:4,className:Dn(`${il}`),children:b.jsx(my,{onColorChange:u=>{jQ(e,t||u,u)},onOpacityChange:u=>{t&&$Q(e,t,u)},currentColor:t})})})]})},zQ=({board:e,currentColor:t,title:n,hasStrokeStyle:r,children:i})=>{const[o,s]=j.useState(!1),u=t&&lh(t),c=t?j0(t):100,h=I.getBoardContainer(e),d=pB(c)?xq:gB(u)?Eq:void 0,g=v=>{tu.setStrokeStyle(e,v,{getMemorizeKey:_0})};return b.jsxs(tl,{sideOffset:12,open:o,onOpenChange:v=>{s(v)},placement:"top",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{className:Dn("property-button"),visible:!0,icon:d,type:"button",title:n,"aria-label":n,onPointerUp:()=>{s(!o)},children:!d&&i})}),b.jsx(rl,{container:h,children:b.jsx(Rs,{padding:4,className:Dn(`${il}`,"stroke-setting",{"has-stroke-style":r}),children:b.jsxs(Wo.Col,{children:[r&&b.jsxs(Wo.Row,{className:Dn("stroke-style-picker"),children:[b.jsx(qn,{visible:!0,icon:Pq,type:"button",title:n,"aria-label":n,onPointerUp:()=>{g(Ss.solid)}}),b.jsx(qn,{visible:!0,icon:Sq,type:"button",title:n,"aria-label":n,onPointerUp:()=>{g(Ss.dashed)}}),b.jsx(qn,{visible:!0,icon:Tq,type:"button",title:n,"aria-label":n,onPointerUp:()=>{g(Ss.dotted)}})]}),b.jsx(my,{onColorChange:v=>{GQ(e,v)},onOpacityChange:v=>{HQ(e,v)},currentColor:t})]})})})]})},VQ=({board:e,currentColor:t,title:n,children:r})=>{const[i,o]=j.useState(!1),s=t&&lh(t),u=t?j0(t):100,c=I.getBoardContainer(e),h=!s||pB(u)?yq:void 0;return b.jsxs(tl,{sideOffset:12,open:i,onOpenChange:d=>{o(d)},placement:"top",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{className:Dn("property-button"),visible:!0,icon:h,type:"button",title:n,"aria-label":n,onPointerUp:()=>{o(!i)},children:!h&&r})}),b.jsx(rl,{container:c,children:b.jsx(Rs,{padding:4,className:Dn(`${il}`),children:b.jsx(my,{onColorChange:d=>{NQ(e,d)},onOpacityChange:d=>{_Q(e,d)},currentColor:t})})})]})},UQ=({board:e,title:t})=>{const{appState:n,setAppState:r}=Ms();return b.jsx(qn,{className:Dn("property-button"),visible:!0,icon:Oq,type:"button",title:t,"aria-label":t,onPointerUp:()=>{const i=Qe(e)[0],o=cv(i);$a.getLinkElement(o)||$a.wrapLink(o,"链接",""),setTimeout(()=>{const c=$a.getLinkElement(o)[0],h=ze.toDOMNode(o,c);r({...n,linkState:{editor:o,targetDom:h,targetElement:c,isEditing:!0,isHovering:!1,isHoveringOrigin:!1}})},0)}})},XQ=()=>{var v,y;const e=Zr(),t=Qe(e),[n,r]=j.useState(!1),i=j.useRef(n),o=t.length>0&&!gi(e)&&!t.some(fe.isImage),{viewport:s,selection:u,children:c}=e,{refs:h,floatingStyles:d}=_v({placement:"right-start",middleware:[ly(32),cy()]});let g={fill:"red"};if(o&&!n){const x=t.some(S=>ZQ(e,S))&&!I.hasBeenTextEditing(e),E=t.some(S=>JQ(e,S)),T=t.some(S=>wB(e,S))&&!I.hasBeenTextEditing(e),D=t.some(S=>QQ(e,S))&&!I.hasBeenTextEditing(e);g={...qQ(e),hasFill:x,hasFontColor:E,hasStroke:T,hasStrokeStyle:D,hasText:E}}return j.useEffect(()=>{if(o){const x=t.length>0;if(!n&&x){const E=Qe(e),T=on(e,E,!1),[D,S]=M.getPoints(T),R=C6(e,a3(e,D)),L=C6(e,a3(e,S)),k=L[0]-R[0],W=L[1]-R[1];h.setPositionReference({getBoundingClientRect(){return{width:k,height:W,x:R[0],y:R[1],top:R[1],left:R[0],right:R[0]+k,bottom:R[1]+W}}})}}},[s,u,c,n]),j.useEffect(()=>{i.current=n},[n]),j.useEffect(()=>{const{pointerUp:x,pointerMove:E}=e;return e.pointerMove=T=>{(fc(e)||cc(e))&&!i.current&&r(!0),E(T)},e.pointerUp=T=>{i.current&&(fc(e)||cc(e))&&r(!1),x(T)},()=>{e.pointerUp=x,e.pointerMove=E}},[e]),b.jsx(b.Fragment,{children:o&&!n&&b.jsx(Rs,{padding:1,className:Dn("popup-toolbar",il),ref:h.setFloating,style:d,children:b.jsxs(Wo.Row,{gap:1,children:[g.hasFontColor&&b.jsx(WQ,{board:e,currentColor:(v=g.marks)==null?void 0:v.color,title:"Font Color",fontColorIcon:b.jsx(Dq,{currentColor:(y=g.marks)==null?void 0:y.color})},0),g.hasStroke&&b.jsx(zQ,{board:e,currentColor:g.strokeColor,title:"Stroke",hasStrokeStyle:g.hasStrokeStyle||!1,children:b.jsx("label",{className:Dn("stroke-label","color-label"),style:{borderColor:g.strokeColor}})},1),g.hasFill&&b.jsx(VQ,{board:e,currentColor:g.fill,title:"Fill Color",children:b.jsx("label",{className:Dn("fill-label","color-label",{"color-white":g.fill&&gB(lh(g.fill))}),style:{backgroundColor:g.fill}})},2),g.hasText&&b.jsx(UQ,{board:e,title:"Link"},3)]})})})},KQ=(e,t)=>{const n=uT(t);return{fill:t.fill,strokeColor:V8(e,t),marks:n}},YQ=(e,t)=>{const n=uT(t);return{fill:t.fill,strokeColor:H0(e,t),marks:n}},qQ=e=>{const t=Qe(e)[0];return Me.isMindElement(e,t)?KQ(e,t):YQ(e,t)},ZQ=(e,t)=>Me.isMindElement(e,t)||pv(e,t)?!0:fe.isDrawElement(t)?fe.isShapeElement(t)&&!fe.isImage(t)&&!fe.isText(t)&&Ap(t):!1,wB=(e,t)=>Me.isMindElement(e,t)||ea.isFreehand(t)?!0:fe.isDrawElement(t)?fe.isShapeElement(t)&&!fe.isImage(t)&&!fe.isText(t)||fe.isArrowLine(t)||fe.isVectorLine(t)||fe.isTable(t):!1,QQ=(e,t)=>wB(e,t),JQ=(e,t)=>Me.isMindElement(e,t)?!0:fe.isDrawElement(t)?hz([t]):!1,CB=({icon:e,shortcut:t,href:n,children:r,onSelect:i,className:o="",selected:s,...u})=>{const c=lB(u.onClick,i);return b.jsx("a",{...u,href:n,target:"_blank",rel:"noreferrer",className:p4(o,s),title:u.title??u["aria-label"],onClick:c,children:b.jsx(cB,{icon:e,shortcut:t,children:r})})};CB.displayName="MenuItemLink";const xB=()=>{const e=Zr();return b.jsx(Ts,{"data-testid":"save-button",onSelect:()=>{wA(e)},icon:mq,"aria-label":"保存文件",shortcut:"Cmd+S",children:"保存文件"})};xB.displayName="SaveToFile";const EB=()=>{const e=Zr(),t=eS(),n=(r,i,o)=>{e.children=r,e.viewport=i||{zoom:1},e.theme={themeColorMode:fr.default},t.update(e.children,{board:e,parent:e,parentG:I.getElementHost(e)}),vn.fitViewport(e)};return b.jsx(Ts,{"data-testid":"open-button",onSelect:()=>{BY(e).then(r=>{n(r.elements,r.viewport)})},icon:vq,"aria-label":"打开",children:"打开"})};EB.displayName="OpenFile";const PB=()=>{const e=Zr(),t=j.useContext(hy);return b.jsx(Ts,{icon:dq,"data-testid":"image-export-button",onSelect:()=>{Km(e,!0)},submenu:b.jsxs(Lp,{onSelect:()=>{var r;const n=new CustomEvent(cp.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(r=t.onSelect)==null||r.call(t,n)},children:[b.jsx(Ts,{onSelect:()=>{Km(e,!0)},"aria-label":"透明背景",children:"PNG"}),b.jsx(Ts,{onSelect:()=>{Km(e,!1)},"aria-label":"白色背景",children:"JPG"})]}),shortcut:"Cmd+Shift+E","aria-label":"",children:"导出图片"})};PB.displayName="SaveAsImage";const SB=()=>{const{appState:e,setAppState:t}=Ms();return b.jsx(Ts,{icon:O3,"data-testid":"reset-button",onSelect:()=>{t({...e,openCleanConfirm:!0})},shortcut:"Cmd+Backspace","aria-label":"清除画布",children:"清除画布"})};SB.displayName="CleanBoard";const TB=()=>b.jsx(CB,{icon:hq,href:"https://github.com/plait-board/drawnix","aria-label":"GitHub",children:"GitHub"});TB.displayName="Socials";const DB=()=>b.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});DB.displayName="MenuSeparator";const eJ=()=>{const e=Zr(),t=I.getBoardContainer(e),n=Qe(e),[r,i]=j.useState(!1),o=e.history.undos.length<=0,s=e.history.redos.length<=0;return b.jsx(Rs,{padding:1,className:Dn("app-toolbar",il),children:b.jsxs(Wo.Row,{gap:1,children:[b.jsxs(tl,{sideOffset:12,open:r,onOpenChange:u=>{i(u)},placement:"bottom-start",children:[b.jsx(nl,{asChild:!0,children:b.jsx(qn,{type:"icon",visible:!0,selected:r,icon:fq,title:"App Menu","aria-label":"App Menu",onPointerDown:()=>{i(!r)}})}),b.jsx(rl,{container:t,children:b.jsxs(Lp,{onSelect:()=>{i(!1)},children:[b.jsx(EB,{}),b.jsx(xB,{}),b.jsx(PB,{}),b.jsx(SB,{}),b.jsx(DB,{}),b.jsx(TB,{})]})})]},0),b.jsx(qn,{type:"icon",icon:Aq,visible:!0,title:"Undo","aria-label":"Undo",onPointerUp:()=>{e.undo()},disabled:o},1),b.jsx(qn,{type:"icon",icon:Bq,visible:!0,title:"Redo","aria-label":"Redo",onPointerUp:()=>{e.redo()},disabled:s},2),n.length>0&&b.jsx(qn,{className:"duplicate",type:"icon",icon:Rq,visible:!0,title:"Duplicate","aria-label":"Duplicate",onPointerUp:()=>{Y4(e)}},3),n.length>0&&b.jsx(qn,{className:"trash",type:"icon",icon:O3,visible:!0,title:"Trash","aria-label":"Trash",onPointerUp:()=>{K4(e)}},4)]})})},tJ=e=>n=>{const{globalKeyDown:r}=n;return n.globalKeyDown=i=>{if(!(i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement)&&(I.getMovingPointInBoard(n)||I.isMovingPointInBoard(n))&&!I.hasBeenTextEditing(n)){if(nn.isHotkey(["mod+shift+e"],{byKey:!0})(i)){Km(n,!0),i.preventDefault();return}if(nn.isHotkey(["mod+s"],{byKey:!0})(i)){wA(n),i.preventDefault();return}if(nn.isHotkey(["mod+backspace"])(i)||nn.isHotkey(["mod+delete"])(i)){e({openCleanConfirm:!0}),i.preventDefault();return}if(i.key==="h"&&(vn.updatePointerType(n,Zt.hand),e({pointer:Zt.hand})),i.key==="v"&&(vn.updatePointerType(n,Zt.selection),e({pointer:Zt.selection})),i.key==="m"&&(na(n,Gi.dnd),vn.updatePointerType(n,$u.mind),e({pointer:$u.mind})),i.key==="p"&&(na(n,Gi.drawing),vn.updatePointerType(n,gp.feltTipPen),e({pointer:gp.feltTipPen})),i.key==="a"&&!nn.isHotkey(["mod+a"])(i)&&Qe(n).length===0&&(na(n,Gi.drawing),vn.updatePointerType(n,Fn.straight),e({pointer:Fn.straight})),i.key==="r"||i.key==="o"||i.key==="t"){const s={r:pt.rectangle,o:pt.ellipse,t:pt.text};s[i.key]===pt.text?na(n,Gi.dnd):na(n,Gi.drawing),vn.updatePointerType(n,s[i.key]),e({pointer:s[i.key]})}nn.isHotkey(["mod+u"])(i)&&hB(n)}r(i)},n};function nJ(){return[gp.feltTipPen]}const dE=(e,t)=>({id:En(),type:"freehand",shape:e,points:t}),rJ=(e,t,n)=>{const r=hc(e,n,t)||n,i=t.points;return Bp(t.points)&&lc(r,i)||Jg(i,r)},iJ=(e,t,n)=>{const r=M.getRectangleByPoints([n.anchor,n.focus]);return S3(r,t.points,t.angle)},gE=e=>Qe(e).filter(t=>ea.isFreehand(t)),oJ=e=>sB[e].strokeColor,sJ=e=>sB[e].fill,aJ=(e,t)=>{const n=oJ(e.theme.themeColorMode);return t.strokeColor||n},uJ=(e,t)=>{const n=ea.isFreehand(t)&&pv(e,t)?sJ(e.theme.themeColorMode):dv.fill;return t.fill||n};function lJ(e,t){return Math.exp(-(e*e)/(2*t*t))}function cJ(e,t,n){if(e.length<2)return e;const r=Math.floor(n/2),i=[];function o(u){if(u<0){const c=-u-1;if(c<e.length)return[2*e[0][0]-e[c][0],2*e[0][1]-e[c][1]]}else if(u>=e.length){const c=2*e.length-u-1;if(c>=0)return[2*e[e.length-1][0]-e[c][0],2*e[e.length-1][1]-e[c][1]]}return e[u]}function s(u){const c=Math.min(u,e.length-1-u);return Math.min(r,c+Math.floor(r/2))}for(let u=0;u<e.length;u++){let c=0,h=0,d=0;const g=s(u);for(let v=-g;v<=g;v++){const y=u+v,x=o(y);let E=lJ(v,t);if(u<r||u>=e.length-r){const T=1+.5*(1-Math.abs(v)/g);E*=v===0?T:1}c+=x[0]*E,h+=x[1]*E,d+=E}u===0||u===e.length-1?i.push([e[u][0],e[u][1]]):i.push([c/d,h/d])}return i}class AB extends Yo{draw(t){const n=zt(t),r=aJ(this.board,t),i=uJ(this.board,t),o={strokeWidth:n,stroke:r,fill:i,fillStyle:"solid"},s=I.getRoughSVG(this.board).curve(cJ(t.points,1,3),o);return Wt(s,"round"),s}canDraw(t){return!0}}class fJ extends Ec{constructor(){super()}initializeGenerator(){this.activeGenerator=Ep(this.board,{getRectangle:t=>M.getRectangleByPoints(t.points),getStrokeWidth:()=>dr,getStrokeOpacity:()=>1,hasResizeHandle:()=>uv(this.board,this.element)}),this.generator=new AB(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})):(t.selected!==n.selected||t.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}destroy(){var t;super.destroy(),(t=this.activeGenerator)==null||t.destroy()}}class hJ{constructor(t={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...t}}process(t,n={}){const r=n.timestamp??Date.now();if(this.points.length===0){const c={point:t,timestamp:r,...n};return this.points.push(c),this.lastProcessedTime=r,t}if(r-this.lastProcessedTime<this.options.samplingRate&&r-this.lastProcessedTime<2)return null;const i={point:t,timestamp:r,...n};if(!this.checkDistance(t)&&this.points.length>1&&r-this.lastProcessedTime<32)return null;this.updatePoints(i);const s=this.calculateDynamicParameters(i),u=this.smooth(t,s);return this.lastProcessedTime=r,u}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(t){this.points.push(t),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(t){if(this.points.length===0)return!0;const n=this.points[this.points.length-1].point,r=this.getDistance(n,t);let i=this.options.minDistance;if(this.movingAverageVelocity.length>0){const o=this.getAverageVelocity();i*=Math.max(.5,Math.min(1.5,o/200))}return r>=i}calculateDynamicParameters(t){const n=this.calculateVelocity(t);this.updateMovingAverage(n);const r=this.getAverageVelocity(),i={...this.options};if(t.pressure!==void 0){const s=Math.pow(t.pressure,1.2);i.smoothing*=1-s*i.pressureSensitivity*.8}const o=Math.min(r/i.velocityThreshold,1);if(i.velocityWeight=.2+o*.3,i.smoothing*=1+o*.2,t.tiltX!==void 0&&t.tiltY!==void 0){const s=Math.sqrt(t.tiltX**2+t.tiltY**2)/90;i.smoothing*=1+s*i.tiltSensitivity*.7}return i}smooth(t,n){if(this.points.length<2)return t;const r=this.calculateWeights(n),i=r.reduce((s,u)=>s+u,0);if(i===0)return t;const o=[0,0];for(let s=0;s<this.points.length;s++){const u=r[s]/i;o[0]+=this.points[s].point[0]*u,o[1]+=this.points[s].point[1]*u}return o}calculateWeights(t){const n=[],r=this.points.length-1;for(let i=0;i<this.points.length;i++){let o=Math.pow(t.smoothing,(r-i)*.8);if(i<r){const s=this.getPointVelocity(i);o*=1+s*t.velocityWeight*.8}if(i>0&&i<r){const s=this.getPointCurvature(i);o*=1+s*t.curvatureWeight*.7}n.push(o)}return n}getDistance(t,n){return Tt(t[0],t[1],n[0],n[1])}calculateVelocity(t){if(this.points.length<2)return 0;const n=this.points[this.points.length-1],r=this.getDistance(n.point,t.point),i=t.timestamp-n.timestamp;return i>0?r/i:0}updateMovingAverage(t){this.movingAverageVelocity.push(t),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return this.movingAverageVelocity.length===0?0:this.movingAverageVelocity.reduce((t,n)=>t+n)/this.movingAverageVelocity.length}getPointVelocity(t){if(t>=this.points.length-1)return 0;const n=this.points[t],r=this.points[t+1],i=this.getDistance(n.point,r.point),o=r.timestamp-n.timestamp;return o>0?i/o:0}getPointCurvature(t){if(t<=0||t>=this.points.length-1)return 0;const n=this.points[t-1].point,r=this.points[t].point,i=this.points[t+1].point,o=this.getDistance(n,r),s=this.getDistance(r,i),u=this.getDistance(n,i),c=(o+s+u)/2;return 4*Math.sqrt(Math.max(0,c*(c-o)*(c-s)*(c-u)))/(o*s*u+1e-4)}}const dJ=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e;let o=!1,s=!1,u=[],c=null;const h=new AB(e),d=new hJ({smoothing:.7,pressureSensitivity:.6});let g=null;const v=y=>{if(o){const x=I.getPointer(e);s&&u.push(u[0]),g=dE(x,u)}g&&!y&&Xe.insertNode(e,g,[e.children.length]),h==null||h.destroy(),g=null,o=!1,u=[],d.reset()};return e.pointerDown=y=>{const x=nJ();if(I.isInPointer(e,x)&&F0(e)){o=!0,c=[y.x,y.y];const T=d.process(c),D=At(e,Ot(e,T[0],T[1]));u.push(D)}t(y)},e.pointerMove=y=>{if(o){const x=[y.x,y.y];c&&Tt(c[0],c[1],x[0],x[1])<8?s=!0:s=!1;const E=d.process(x);if(E){h==null||h.destroy();const T=At(e,Ot(e,E[0],E[1]));u.push(T);const D=I.getPointer(e);g=dE(D,u),h.processDrawing(g,I.getElementTopHost(e))}return}n(y)},e.pointerUp=y=>{v(),r(y)},e.globalPointerUp=y=>{v(!0),i(y)},e},gJ=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=gE(t);return s.length&&o.push(...s),n(o)},t.buildFragment=(o,s,u,c)=>{const h=gE(t);if(h.length){const d=nT(t,h,s?[s.x,s.y]:[0,0]);o=iv(o,{text:"",type:Xu.elements,elements:d})}return r(o,s,u,c)},t.insertFragment=(o,s,u)=>{var h;const c=(h=o==null?void 0:o.elements)==null?void 0:h.filter(d=>ea.isFreehand(d));c&&c.length>0&&rT(t,c,s),i(o,s,u)},t},pJ=e=>{const{getRectangle:t,drawElement:n,isHit:r,isRectangleHit:i,getOneHitElement:o,isMovable:s,isAlign:u}=e;return e.drawElement=c=>ea.isFreehand(c.element)?fJ:n(c),e.getRectangle=c=>ea.isFreehand(c)?M.getRectangleByPoints(c.points):t(c),e.isRectangleHit=(c,h)=>ea.isFreehand(c)?iJ(e,c,h):i(c,h),e.isHit=(c,h,d)=>ea.isFreehand(c)?rJ(e,c,h):r(c,h,d),e.getOneHitElement=c=>c.every(d=>ea.isFreehand(d))?GT(e,c):o(c),e.isMovable=c=>ea.isFreehand(c)?!0:s(c),e.isAlign=c=>ea.isFreehand(c)?!0:u(c),e.setPluginOptions(cT,{customGeometryTypes:[aB]}),gJ(dJ(e))},mJ=()=>{const e=Zr(),t=e.theme;return b.jsx(Rs,{padding:1,className:Dn("theme-toolbar",il),children:b.jsxs("select",{onChange:n=>{const r=n.target.value;vn.updateThemeColor(e,r)},value:t.themeColorMode,children:[b.jsx("option",{value:"default",children:"默认"}),b.jsx("option",{value:"colorful",children:"缤纷"}),b.jsx("option",{value:"soft",children:"柔和"}),b.jsx("option",{value:"retro",children:"复古"}),b.jsx("option",{value:"dark",children:"暗夜"}),b.jsx("option",{value:"starry",children:"星空"})]})})},BB=new WeakMap,pE=e=>!!BB.get(e),RB=(e,t)=>{BB.set(e,t)},vJ=e=>n=>{const{pointerDown:r}=n;return n.pointerDown=i=>{D6(i)&&!pE(n)&&(RB(n,!0),e({isPencilMode:!0})),!(pE(n)&&!D6(i))&&r(i)},n},yJ=()=>{const e=Zr(),{appState:t,setAppState:n}=Ms();return b.jsx(b.Fragment,{children:t.isPencilMode&&b.jsx("div",{className:"pencil-mode-toolbar",children:b.jsx(qn,{type:"button",visible:!0,title:"X Pencil","aria-label":"Arrow",label:"Pencil X",onPointerDown:()=>{n({...t,isPencilMode:!1}),RB(e,!1)}})})})};function wJ({initialOpen:e=!1,open:t,onOpenChange:n}={}){const[r,i]=j.useState(e),[o,s]=j.useState(),[u,c]=j.useState(),h=t??r,d=n??i,g=_v({open:h,onOpenChange:d}),v=g.context,y=eB(v,{enabled:t==null}),x=tB(v,{outsidePressEvent:"mousedown"}),E=rB(v),T=nB([y,x,E]);return j.useMemo(()=>({open:h,setOpen:d,...T,...g,labelId:o,descriptionId:u,setLabelId:s,setDescriptionId:c}),[h,d,T,g,o,u])}const MB=j.createContext(null),Np=()=>{const e=j.useContext(MB);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function m4({children:e,...t}){const n=wJ(t);return b.jsx(MB.Provider,{value:n,children:e})}j.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=Np(),s=t.ref,u=Fv([o.refs.setReference,i,s]);return n&&j.isValidElement(t)?j.cloneElement(t,o.getReferenceProps({ref:u,...r,...t.props,"data-state":o.open?"open":"closed"})):b.jsx("button",{ref:u,"data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})});const v4=j.forwardRef(function(t,n){const{context:r,...i}=Np(),o=Fv([i.refs.setFloating,n]);return r.open?b.jsx(ZA,{root:t.container,children:b.jsx(gQ,{className:"Dialog-overlay",lockScroll:!0,children:b.jsx(JA,{context:r,children:b.jsx("div",{ref:o,"aria-labelledby":i.labelId,"aria-describedby":i.descriptionId,...i.getFloatingProps(t),children:t.children})})})}):null});j.forwardRef(function({children:t,...n},r){const{setLabelId:i}=Np(),o=Fp();return j.useLayoutEffect(()=>(i(o),()=>i(void 0)),[o,i]),b.jsx("h2",{...n,ref:r,id:o,children:t})});j.forwardRef(function({children:t,...n},r){const{setDescriptionId:i}=Np(),o=Fp();return j.useLayoutEffect(()=>(i(o),()=>i(void 0)),[o,i]),b.jsx("p",{...n,ref:r,id:o,children:t})});j.forwardRef(function(t,n){const{setOpen:r}=Np();return b.jsx("button",{type:"button",...t,ref:n,onClick:()=>r(!1)})});const CJ="modulepreload",xJ=function(e,t){return new URL(e,t).href},mE={},bB=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=xJ(h,r),h in mE)return;mE[h]=!0;const d=h.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(!!r)for(let x=s.length-1;x>=0;x--){const E=s[x];if(E.href===h&&(!d||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${g}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":CJ,d||(y.as="script"),y.crossOrigin="",y.href=h,c&&y.setAttribute("nonce",c),document.head.appendChild(y),d)return new Promise((x,E)=>{y.addEventListener("load",x),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(s){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=s,window.dispatchEvent(u),!u.defaultPrevented)throw s}return i.then(s=>{for(const u of s||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},kB=({children:e})=>b.jsx("div",{className:"ttd-dialog-panels",children:e}),W3=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgress:i,renderTopRight:o,renderSubmitShortcut:s,renderBottomRight:u})=>b.jsxs("div",{className:"ttd-dialog-panel",children:[b.jsxs("div",{className:"ttd-dialog-panel__header",children:[b.jsx("label",{children:e}),o==null?void 0:o()]}),t,b.jsxs("div",{className:Dn("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[b.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:n&&n.action,disabled:r||i,children:b.jsxs("div",{className:Dn({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&b.jsx("span",{children:n.icon})]})}),!r&&!i&&(s==null?void 0:s()),u==null?void 0:u()]})]}),vE={CTRL_OR_CMD:bO||s3?"metaKey":"ctrlKey",ENTER:"Enter"},OB=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{const i=j.useRef(null),o=j.useRef(r);return o.current=r,j.useEffect(()=>{if(!o.current)return;const s=i.current;if(s){const u=c=>{var h;c[vE.CTRL_OR_CMD]&&c.key===vE.ENTER&&(c.preventDefault(),(h=o.current)==null||h.call(o))};return s.addEventListener(cp.KEYDOWN,u),()=>{s.removeEventListener(cp.KEYDOWN,u)}}},[]),b.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},EJ=({error:e})=>b.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",b.jsx("p",{children:e})]}),IB=({error:e,value:t,loaded:n})=>{const r=[yD,mA,oT,CA],i={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:BD};return b.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&b.jsx(EJ,{error:e.message}),b.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:b.jsx(lT,{value:t,options:i,plugins:r,children:b.jsx(tS,{})})})]})},FB=()=>b.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[b.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Wx("CtrlOrCmd")}),b.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Wx("Enter")})]}),PJ=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,SJ=()=>{const{appState:e,setAppState:t}=Ms(),[n,r]=j.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});j.useEffect(()=>{(async()=>{try{const x=await bB(()=>import("./index-pYP7LD6E.js").then(E=>E.b6),[],import.meta.url);r({loaded:!0,api:Promise.resolve(x)})}catch(x){console.error("Failed to load mermaid library:",x),d(new Error("加载 Mermaid 库失败"))}})()},[]);const[i,o]=j.useState(()=>PJ),[s,u]=j.useState(()=>[]),c=j.useDeferredValue(i.trim()),[h,d]=j.useState(null),g=Zr();j.useEffect(()=>{(async()=>{try{const x=await n.api;let E;try{E=await x.parseMermaidToDrawnix(c)}catch{E=await x.parseMermaidToDrawnix(c.replace(/"/g,"'"))}const{elements:T}=E;u(T),d(null)}catch(x){d(x)}})()},[c,n]);const v=()=>{if(!s.length)return;const y=I.getBoardContainer(g).getBoundingClientRect(),x=[y.width/2,y.height/2],E=g.viewport.zoom,T=b0(g),D=T[0]+x[0]/E,S=T[1]+x[1]/E,R=s,L=M.getBoundingRectangle(R.filter(W=>!wo.isGroup(W)).map(W=>M.getRectangleByPoints(W.points))),k=[D-L.width/2,S-L.height/2];g.insertFragment({elements:JSON.parse(JSON.stringify(R))},k,aa.paste),t({...e,openDialogType:null})};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"ttd-dialog-desc",children:["目前仅支持",b.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:"流程图"}),"、",b.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:"序列图"}),"和",b.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:"类图"}),"。其他类型在 Drawnix 中将以图片呈现。"]}),b.jsxs(kB,{children:[b.jsx(W3,{label:"Mermaid 语法",children:b.jsx(OB,{input:i,placeholder:"在此处编写 Mermaid 图表定义...",onChange:y=>o(y.target.value),onKeyboardSubmit:()=>{v()}})}),b.jsx(W3,{label:"预览",panelAction:{action:()=>{v()},label:"插入"},renderSubmitShortcut:()=>b.jsx(FB,{}),children:b.jsx(IB,{value:s,loaded:n.loaded,error:h})})]})]})},TJ=`# 我开始了

- 让我看看是谁搞出了这个 bug 🕵️ ♂️ 🔍
  - 😯 💣
    - 原来是我 👈 🎯 💘

- 竟然不可以运行，为什么呢 🚫 ⚙️ ❓
  - 竟然可以运行了，为什么呢？🎢 ✨
    - 🤯 ⚡ ➡️ 🎉

- 能运行起来的 🐞 🚀
  - 就不要去动它 🛑 ✋
    - 👾 💥 🏹 🎯
    
## 男孩还是女孩 👶 ❓ 🤷 ♂️ ♀️

### Hello world 👋 🌍 ✨ 💻

#### 哇 是个程序员 🤯 ⌨️ 💡 👩 💻`,DJ=()=>{const{appState:e,setAppState:t}=Ms(),[n,r]=j.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(y,x)=>null})});j.useEffect(()=>{(async()=>{try{const x=await bB(()=>import("./index-B8sNCr4q.js"),__vite__mapDeps([0,1]),import.meta.url);r({loaded:!0,api:Promise.resolve(x)})}catch(x){console.error("Failed to load mermaid library:",x),d(new Error("加载 Mermaid 库失败"))}})()},[]);const[i,o]=j.useState(()=>TJ),[s,u]=j.useState(()=>[]),c=j.useDeferredValue(i.trim()),[h,d]=j.useState(null),g=Zr();j.useEffect(()=>{(async()=>{try{const x=await n.api;let E;try{E=await x.parseMarkdownToDrawnix(c)}catch{E=await x.parseMarkdownToDrawnix(c.replace(/"/g,"'"))}const T=E;T.points=[[0,0]],T&&(u([T]),d(null))}catch(x){d(x)}})()},[c,n]);const v=()=>{if(!s.length)return;const y=I.getBoardContainer(g).getBoundingClientRect(),x=[y.width/4,y.height/2-20],E=g.viewport.zoom,T=b0(g),D=T[0]+x[0]/E,S=T[1]+x[1]/E,R=s;g.insertFragment({elements:JSON.parse(JSON.stringify(R))},[D,S],aa.paste),t({...e,openDialogType:null})};return b.jsxs(kB,{children:[b.jsx(W3,{label:"Markdown 语法",children:b.jsx(OB,{input:i,placeholder:"在此处编写 Markdown 文本定义...",onChange:y=>o(y.target.value),onKeyboardSubmit:()=>{}})}),b.jsx(W3,{label:"预览",panelAction:{action:()=>{v()},label:"插入"},renderSubmitShortcut:()=>b.jsx(FB,{}),children:b.jsx(IB,{value:s,loaded:n.loaded,error:h})})]})},AJ=({container:e})=>{const{appState:t,setAppState:n}=Ms();return b.jsxs(b.Fragment,{children:[b.jsx(m4,{open:t.openDialogType===_f.mermaidToDrawnix,onOpenChange:r=>{n({...t,openDialogType:r?_f.mermaidToDrawnix:null})},children:b.jsx(v4,{className:"Dialog ttd-dialog",container:e,children:b.jsx(SJ,{})})}),b.jsx(m4,{open:t.openDialogType===_f.markdownToDrawnix,onOpenChange:r=>{n({...t,openDialogType:r?_f.markdownToDrawnix:null})},children:b.jsx(v4,{className:"Dialog ttd-dialog",container:e,children:b.jsx(DJ,{})})})]})},BJ=({container:e})=>{const{appState:t,setAppState:n}=Ms(),r=Zr();return b.jsx(m4,{open:t.openCleanConfirm,onOpenChange:i=>{n({...t,openCleanConfirm:i})},children:b.jsxs(v4,{className:"clean-confirm",container:e,children:[b.jsx("h2",{className:"clean-confirm__title",children:"清除画布"}),b.jsx("p",{className:"clean-confirm__description",children:"这将会清除整个画布。你是否要继续?"}),b.jsxs("div",{className:"clean-confirm__actions",children:[b.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{n({...t,openCleanConfirm:!1})},children:"取消"}),b.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{r.deleteFragment(r.children),n({...t,openCleanConfirm:!1})},children:"确认"})]})]})})},yE=e=>{const{appState:t}=e;return t&&t.linkState&&t.linkState.isHovering},wE=e=>{const{appState:t}=e;return t&&t.linkState&&t.linkState.isEditing},RJ=e=>n=>{const{pointerMove:r}=n;let i=null,o=null;return n.pointerMove=s=>{(I.isPointer(n,Zt.selection)||I.isPointer(n,Zt.hand))&&!fc(n)&&!Gu(n)&&!yE(n)&&!wE(n)&&Ua(n,"with-text-link",()=>{const u=s.target.closest(".plait-board-link");if(u&&u!==i){const c=u.closest(".plait-text-container"),h=ze.toSlateNode(void 0,c),d=ze.toSlateNode(void 0,u);i=u,e({linkState:{targetDom:u,targetElement:d,editor:h,isEditing:!1,isHovering:!1,isHoveringOrigin:!0}}),clearTimeout(o)}else!u&&i&&(o=setTimeout(()=>{!yE(n)&&!wE(n)&&e({linkState:null})},300),i=null)}),r(s)},n},MJ=()=>{var E,T,D,S;const[e,t]=j.useState(""),{appState:n,setAppState:r}=Ms(),i=Zr(),{refs:o,floatingStyles:s}=_v({placement:"top",middleware:[ly(20),cy()]}),u=n.linkState,c=((E=n.linkState)==null?void 0:E.targetDom)||null,h=((T=n.linkState)==null?void 0:T.isEditing)||!1,d=((D=n.linkState)==null?void 0:D.isHoveringOrigin)||!1,g=((S=n.linkState)==null?void 0:S.isHovering)||!1,v=h||d||g,y=j.useRef(n.linkState);j.useEffect(()=>{y.current=n.linkState,n.linkState?t(n.linkState.targetElement.url):t("")},[n.linkState]),j.useEffect(()=>{if(c){const R=c.getBoundingClientRect();o.setPositionReference({getBoundingClientRect(){return{x:R.x,y:R.y,width:R.width,height:R.height,top:R.y,left:R.x,right:R.x+R.width,bottom:R.y+R.height}}})}},[i.viewport,c]),j.useEffect(()=>{const R=L=>{if(o.floating.current&&!o.floating.current.contains(L.target)){if(y.current){const k=$a.getLinkElement(y.current.editor);k&&!k[0].url.trim()&&$a.unwrapLink(y.current.editor)}r({...n,linkState:null})}};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]);const x=()=>{if(e!==u.targetElement.url){const L=u.editor,k=u.targetElement,W=ze.findPath(L,k);Re.setNodes(L,{url:e},{at:W})}const R=$a.getLinkElement(u.editor);r({...n,linkState:{...n.linkState,targetElement:R[0],isEditing:!1,isHoveringOrigin:!0}})};return v&&b.jsx(Rs,{ref:o.setFloating,style:s,padding:1,className:Dn("link-popup"),onPointerEnter:()=>{g||r({...n,linkState:{...n.linkState,isHovering:!0}})},onPointerLeave:()=>{h||r({...n,linkState:{...n.linkState,isHovering:!1}})},children:b.jsx(Wo.Row,{gap:1,align:"center",children:h?b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"text",value:e,onChange:R=>{t(R.target.value)},onKeyDown:R=>{R.key==="Enter"&&x()},className:"link-popup__input",autoFocus:!0}),b.jsx(qn,{type:"icon",visible:!0,icon:O3,title:"Delete link","aria-label":"Delete link",onPointerDown:()=>{const R=u.editor,L=u.targetElement,k=ze.findPath(R,L);Re.unwrapNodes(R,{at:k}),r({...n,linkState:null})}})]}):b.jsxs(b.Fragment,{children:[b.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"link-popup__link",children:e}),b.jsx(qn,{className:"link-popup__edit",type:"icon",visible:!0,icon:EA,title:"Edit link","aria-label":"Edit link",onPointerDown:({event:R})=>{R.preventDefault(),r({...n,linkState:{...n.linkState,isEditing:!0}})}}),b.jsx(qn,{type:"icon",visible:!0,icon:O3,title:"Delete link","aria-label":"Delete link",onPointerDown:()=>{const R=u.editor,L=u.targetElement,k=ze.findPath(R,L);Re.unwrapNodes(R,{at:k}),r({...n,linkState:null})}})]})})})},bJ=({value:e,viewport:t,theme:n,onChange:r,onSelectionChange:i,onViewportChange:o,onThemeChange:s,onValueChange:u,afterInit:c})=>{const h={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:BD},[d,g]=j.useState(()=>{const D=new sY(window.navigator.userAgent);return{pointer:Zt.hand,isMobile:D.mobile()!==null,isPencilMode:!1,openDialogType:null,openCleanConfirm:!1}}),[v,y]=j.useState(null);v&&(v.appState=d);const x=D=>{g({...d,...D})},E=[yD,oT,mA,aY,CA,tJ(x),pJ,vJ(x),RJ(x)],T=j.useRef(null);return b.jsx(uB.Provider,{value:{appState:d,setAppState:g},children:b.jsx("div",{className:Dn("drawnix",{"drawnix--mobile":d.isMobile}),ref:T,children:b.jsxs(lT,{value:e,viewport:t,theme:n,options:h,plugins:E,onChange:D=>{r&&r(D)},onSelectionChange:i,onViewportChange:o,onThemeChange:s,onValueChange:u,children:[b.jsx(tS,{afterInit:D=>{y(D),c&&c(D)}}),b.jsx(eJ,{}),b.jsx(DQ,{}),b.jsx(AQ,{}),b.jsx(mJ,{}),b.jsx(XQ,{}),b.jsx(MJ,{}),b.jsx(yJ,{}),b.jsx(AJ,{container:T.current}),b.jsx(BJ,{container:T.current})]})})})};function Mm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var V5={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var CE;function kJ(){return CE||(CE=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(h,d){if(!i[h]){if(!r[h]){var g=typeof Mm=="function"&&Mm;if(!d&&g)return g(h,!0);if(u)return u(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var y=i[h]={exports:{}};r[h][0].call(y.exports,function(x){var E=r[h][1][x];return s(E||x)},y,y.exports,n,r,i,o)}return i[h].exports}for(var u=typeof Mm=="function"&&Mm,c=0;c<o.length;c++)s(o[c]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,u;if(s){var c=0,h=new s(x),d=o.document.createTextNode("");h.observe(d,{characterData:!0}),u=function(){d.data=c=++c%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var g=new o.MessageChannel;g.port1.onmessage=x,u=function(){g.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?u=function(){var T=o.document.createElement("script");T.onreadystatechange=function(){x(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},o.document.documentElement.appendChild(T)}:u=function(){setTimeout(x,0)};var v,y=[];function x(){v=!0;for(var T,D,S=y.length;S;){for(D=y,y=[],T=-1;++T<S;)D[T]();S=y.length}v=!1}r.exports=E;function E(T){y.push(T)===1&&!v&&u()}}).call(this,typeof Cs<"u"?Cs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var u={},c=["REJECTED"],h=["FULFILLED"],d=["PENDING"];r.exports=g;function g(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,k!==s&&E(this,k)}g.prototype.catch=function(k){return this.then(null,k)},g.prototype.then=function(k,W){if(typeof k!="function"&&this.state===h||typeof W!="function"&&this.state===c)return this;var z=new this.constructor(s);if(this.state!==d){var Y=this.state===h?k:W;y(z,Y,this.outcome)}else this.queue.push(new v(z,k,W));return z};function v(k,W,z){this.promise=k,typeof W=="function"&&(this.onFulfilled=W,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(k){u.resolve(this.promise,k)},v.prototype.otherCallFulfilled=function(k){y(this.promise,this.onFulfilled,k)},v.prototype.callRejected=function(k){u.reject(this.promise,k)},v.prototype.otherCallRejected=function(k){y(this.promise,this.onRejected,k)};function y(k,W,z){o(function(){var Y;try{Y=W(z)}catch(te){return u.reject(k,te)}Y===k?u.reject(k,new TypeError("Cannot resolve promise with itself")):u.resolve(k,Y)})}u.resolve=function(k,W){var z=T(x,W);if(z.status==="error")return u.reject(k,z.value);var Y=z.value;if(Y)E(k,Y);else{k.state=h,k.outcome=W;for(var te=-1,se=k.queue.length;++te<se;)k.queue[te].callFulfilled(W)}return k},u.reject=function(k,W){k.state=c,k.outcome=W;for(var z=-1,Y=k.queue.length;++z<Y;)k.queue[z].callRejected(W);return k};function x(k){var W=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof W=="function")return function(){W.apply(k,arguments)}}function E(k,W){var z=!1;function Y(ne){z||(z=!0,u.reject(k,ne))}function te(ne){z||(z=!0,u.resolve(k,ne))}function se(){W(te,Y)}var me=T(se);me.status==="error"&&Y(me.value)}function T(k,W){var z={};try{z.value=k(W),z.status="success"}catch(Y){z.status="error",z.value=Y}return z}g.resolve=D;function D(k){return k instanceof this?k:u.resolve(new this(s),k)}g.reject=S;function S(k){var W=new this(s);return u.reject(W,k)}g.all=R;function R(k){var W=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=k.length,Y=!1;if(!z)return this.resolve([]);for(var te=new Array(z),se=0,me=-1,ne=new this(s);++me<z;)oe(k[me],me);return ne;function oe(ve,ge){W.resolve(ve).then(Be,function(Pe){Y||(Y=!0,u.reject(ne,Pe))});function Be(Pe){te[ge]=Pe,++se===z&&!Y&&(Y=!0,u.resolve(ne,te))}}}g.race=L;function L(k){var W=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=k.length,Y=!1;if(!z)return this.resolve([]);for(var te=-1,se=new this(s);++te<z;)me(k[te]);return se;function me(ne){W.resolve(ne).then(function(oe){Y||(Y=!0,u.resolve(se,oe))},function(oe){Y||(Y=!0,u.reject(se,oe))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof Cs<"u"?Cs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H};function s(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=u();function h(){try{if(!c||!c.open)return!1;var H=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),q=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!H||q)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(H,q){H=H||[],q=q||{};try{return new Blob(H,q)}catch(ee){if(ee.name!=="TypeError")throw ee;for(var $=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ie=new $,le=0;le<H.length;le+=1)ie.append(H[le]);return ie.getBlob(q.type)}}typeof Promise>"u"&&n(3);var g=Promise;function v(H,q){q&&H.then(function($){q(null,$)},function($){q($)})}function y(H,q,$){typeof q=="function"&&H.then(q),typeof $=="function"&&H.catch($)}function x(H){return typeof H!="string"&&(console.warn(H+" used as a key, but it is not a string."),H=String(H)),H}function E(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",D=void 0,S={},R=Object.prototype.toString,L="readonly",k="readwrite";function W(H){for(var q=H.length,$=new ArrayBuffer(q),ie=new Uint8Array($),le=0;le<q;le++)ie[le]=H.charCodeAt(le);return $}function z(H){return new g(function(q){var $=H.transaction(T,k),ie=d([""]);$.objectStore(T).put(ie,"key"),$.onabort=function(le){le.preventDefault(),le.stopPropagation(),q(!1)},$.oncomplete=function(){var le=navigator.userAgent.match(/Chrome\/(\d+)/),ee=navigator.userAgent.match(/Edge\//);q(ee||!le||parseInt(le[1],10)>=43)}}).catch(function(){return!1})}function Y(H){return typeof D=="boolean"?g.resolve(D):z(H).then(function(q){return D=q,D})}function te(H){var q=S[H.name],$={};$.promise=new g(function(ie,le){$.resolve=ie,$.reject=le}),q.deferredOperations.push($),q.dbReady?q.dbReady=q.dbReady.then(function(){return $.promise}):q.dbReady=$.promise}function se(H){var q=S[H.name],$=q.deferredOperations.pop();if($)return $.resolve(),$.promise}function me(H,q){var $=S[H.name],ie=$.deferredOperations.pop();if(ie)return ie.reject(q),ie.promise}function ne(H,q){return new g(function($,ie){if(S[H.name]=S[H.name]||xe(),H.db)if(q)te(H),H.db.close();else return $(H.db);var le=[H.name];q&&le.push(H.version);var ee=c.open.apply(c,le);q&&(ee.onupgradeneeded=function(De){var He=ee.result;try{He.createObjectStore(H.storeName),De.oldVersion<=1&&He.createObjectStore(T)}catch(Ve){if(Ve.name==="ConstraintError")console.warn('The database "'+H.name+'" has been upgraded from version '+De.oldVersion+" to version "+De.newVersion+', but the storage "'+H.storeName+'" already exists.');else throw Ve}}),ee.onerror=function(De){De.preventDefault(),ie(ee.error)},ee.onsuccess=function(){var De=ee.result;De.onversionchange=function(He){He.target.close()},$(De),se(H)}})}function oe(H){return ne(H,!1)}function ve(H){return ne(H,!0)}function ge(H,q){if(!H.db)return!0;var $=!H.db.objectStoreNames.contains(H.storeName),ie=H.version<H.db.version,le=H.version>H.db.version;if(ie&&(H.version!==q&&console.warn('The database "'+H.name+`" can't be downgraded from version `+H.db.version+" to version "+H.version+"."),H.version=H.db.version),le||$){if($){var ee=H.db.version+1;ee>H.version&&(H.version=ee)}return!0}return!1}function Be(H){return new g(function(q,$){var ie=new FileReader;ie.onerror=$,ie.onloadend=function(le){var ee=btoa(le.target.result||"");q({__local_forage_encoded_blob:!0,data:ee,type:H.type})},ie.readAsBinaryString(H)})}function Pe(H){var q=W(atob(H.data));return d([q],{type:H.type})}function he(H){return H&&H.__local_forage_encoded_blob}function ue(H){var q=this,$=q._initReady().then(function(){var ie=S[q._dbInfo.name];if(ie&&ie.dbReady)return ie.dbReady});return y($,H,H),$}function we(H){te(H);for(var q=S[H.name],$=q.forages,ie=0;ie<$.length;ie++){var le=$[ie];le._dbInfo.db&&(le._dbInfo.db.close(),le._dbInfo.db=null)}return H.db=null,oe(H).then(function(ee){return H.db=ee,ge(H)?ve(H):ee}).then(function(ee){H.db=q.db=ee;for(var De=0;De<$.length;De++)$[De]._dbInfo.db=ee}).catch(function(ee){throw me(H,ee),ee})}function U(H,q,$,ie){ie===void 0&&(ie=1);try{var le=H.db.transaction(H.storeName,q);$(null,le)}catch(ee){if(ie>0&&(!H.db||ee.name==="InvalidStateError"||ee.name==="NotFoundError"))return g.resolve().then(function(){if(!H.db||ee.name==="NotFoundError"&&!H.db.objectStoreNames.contains(H.storeName)&&H.version<=H.db.version)return H.db&&(H.version=H.db.version+1),ve(H)}).then(function(){return we(H).then(function(){U(H,q,$,ie-1)})}).catch($);$(ee)}}function xe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ie(H){var q=this,$={db:null};if(H)for(var ie in H)$[ie]=H[ie];var le=S[$.name];le||(le=xe(),S[$.name]=le),le.forages.push(q),q._initReady||(q._initReady=q.ready,q.ready=ue);var ee=[];function De(){return g.resolve()}for(var He=0;He<le.forages.length;He++){var Ve=le.forages[He];Ve!==q&&ee.push(Ve._initReady().catch(De))}var We=le.forages.slice(0);return g.all(ee).then(function(){return $.db=le.db,oe($)}).then(function(qe){return $.db=qe,ge($,q._defaultConfig.version)?ve($):qe}).then(function(qe){$.db=le.db=qe,q._dbInfo=$;for(var st=0;st<We.length;st++){var Nt=We[st];Nt!==q&&(Nt._dbInfo.db=$.db,Nt._dbInfo.version=$.version)}})}function Le(H,q){var $=this;H=x(H);var ie=new g(function(le,ee){$.ready().then(function(){U($._dbInfo,L,function(De,He){if(De)return ee(De);try{var Ve=He.objectStore($._dbInfo.storeName),We=Ve.get(H);We.onsuccess=function(){var qe=We.result;qe===void 0&&(qe=null),he(qe)&&(qe=Pe(qe)),le(qe)},We.onerror=function(){ee(We.error)}}catch(qe){ee(qe)}})}).catch(ee)});return v(ie,q),ie}function $e(H,q){var $=this,ie=new g(function(le,ee){$.ready().then(function(){U($._dbInfo,L,function(De,He){if(De)return ee(De);try{var Ve=He.objectStore($._dbInfo.storeName),We=Ve.openCursor(),qe=1;We.onsuccess=function(){var st=We.result;if(st){var Nt=st.value;he(Nt)&&(Nt=Pe(Nt));var an=H(Nt,st.key,qe++);an!==void 0?le(an):st.continue()}else le()},We.onerror=function(){ee(We.error)}}catch(st){ee(st)}})}).catch(ee)});return v(ie,q),ie}function Fe(H,q,$){var ie=this;H=x(H);var le=new g(function(ee,De){var He;ie.ready().then(function(){return He=ie._dbInfo,R.call(q)==="[object Blob]"?Y(He.db).then(function(Ve){return Ve?q:Be(q)}):q}).then(function(Ve){U(ie._dbInfo,k,function(We,qe){if(We)return De(We);try{var st=qe.objectStore(ie._dbInfo.storeName);Ve===null&&(Ve=void 0);var Nt=st.put(Ve,H);qe.oncomplete=function(){Ve===void 0&&(Ve=null),ee(Ve)},qe.onabort=qe.onerror=function(){var an=Nt.error?Nt.error:Nt.transaction.error;De(an)}}catch(an){De(an)}})}).catch(De)});return v(le,$),le}function Ze(H,q){var $=this;H=x(H);var ie=new g(function(le,ee){$.ready().then(function(){U($._dbInfo,k,function(De,He){if(De)return ee(De);try{var Ve=He.objectStore($._dbInfo.storeName),We=Ve.delete(H);He.oncomplete=function(){le()},He.onerror=function(){ee(We.error)},He.onabort=function(){var qe=We.error?We.error:We.transaction.error;ee(qe)}}catch(qe){ee(qe)}})}).catch(ee)});return v(ie,q),ie}function et(H){var q=this,$=new g(function(ie,le){q.ready().then(function(){U(q._dbInfo,k,function(ee,De){if(ee)return le(ee);try{var He=De.objectStore(q._dbInfo.storeName),Ve=He.clear();De.oncomplete=function(){ie()},De.onabort=De.onerror=function(){var We=Ve.error?Ve.error:Ve.transaction.error;le(We)}}catch(We){le(We)}})}).catch(le)});return v($,H),$}function Q(H){var q=this,$=new g(function(ie,le){q.ready().then(function(){U(q._dbInfo,L,function(ee,De){if(ee)return le(ee);try{var He=De.objectStore(q._dbInfo.storeName),Ve=He.count();Ve.onsuccess=function(){ie(Ve.result)},Ve.onerror=function(){le(Ve.error)}}catch(We){le(We)}})}).catch(le)});return v($,H),$}function Se(H,q){var $=this,ie=new g(function(le,ee){if(H<0){le(null);return}$.ready().then(function(){U($._dbInfo,L,function(De,He){if(De)return ee(De);try{var Ve=He.objectStore($._dbInfo.storeName),We=!1,qe=Ve.openKeyCursor();qe.onsuccess=function(){var st=qe.result;if(!st){le(null);return}H===0||We?le(st.key):(We=!0,st.advance(H))},qe.onerror=function(){ee(qe.error)}}catch(st){ee(st)}})}).catch(ee)});return v(ie,q),ie}function Te(H){var q=this,$=new g(function(ie,le){q.ready().then(function(){U(q._dbInfo,L,function(ee,De){if(ee)return le(ee);try{var He=De.objectStore(q._dbInfo.storeName),Ve=He.openKeyCursor(),We=[];Ve.onsuccess=function(){var qe=Ve.result;if(!qe){ie(We);return}We.push(qe.key),qe.continue()},Ve.onerror=function(){le(Ve.error)}}catch(qe){le(qe)}})}).catch(le)});return v($,H),$}function ke(H,q){q=E.apply(this,arguments);var $=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||$.name,H.storeName=H.storeName||$.storeName);var ie=this,le;if(!H.name)le=g.reject("Invalid arguments");else{var ee=H.name===$.name&&ie._dbInfo.db,De=ee?g.resolve(ie._dbInfo.db):oe(H).then(function(He){var Ve=S[H.name],We=Ve.forages;Ve.db=He;for(var qe=0;qe<We.length;qe++)We[qe]._dbInfo.db=He;return He});H.storeName?le=De.then(function(He){if(He.objectStoreNames.contains(H.storeName)){var Ve=He.version+1;te(H);var We=S[H.name],qe=We.forages;He.close();for(var st=0;st<qe.length;st++){var Nt=qe[st];Nt._dbInfo.db=null,Nt._dbInfo.version=Ve}var an=new g(function(Jt,Et){var Pn=c.open(H.name,Ve);Pn.onerror=function(Fr){var Jo=Pn.result;Jo.close(),Et(Fr)},Pn.onupgradeneeded=function(){var Fr=Pn.result;Fr.deleteObjectStore(H.storeName)},Pn.onsuccess=function(){var Fr=Pn.result;Fr.close(),Jt(Fr)}});return an.then(function(Jt){We.db=Jt;for(var Et=0;Et<qe.length;Et++){var Pn=qe[Et];Pn._dbInfo.db=Jt,se(Pn._dbInfo)}}).catch(function(Jt){throw(me(H,Jt)||g.resolve()).catch(function(){}),Jt})}}):le=De.then(function(He){te(H);var Ve=S[H.name],We=Ve.forages;He.close();for(var qe=0;qe<We.length;qe++){var st=We[qe];st._dbInfo.db=null}var Nt=new g(function(an,Jt){var Et=c.deleteDatabase(H.name);Et.onerror=function(){var Pn=Et.result;Pn&&Pn.close(),Jt(Et.error)},Et.onblocked=function(){console.warn('dropInstance blocked for database "'+H.name+'" until all open connections are closed')},Et.onsuccess=function(){var Pn=Et.result;Pn&&Pn.close(),an(Pn)}});return Nt.then(function(an){Ve.db=an;for(var Jt=0;Jt<We.length;Jt++){var Et=We[Jt];se(Et._dbInfo)}}).catch(function(an){throw(me(H,an)||g.resolve()).catch(function(){}),an})})}return v(le,q),le}var vt={_driver:"asyncStorage",_initStorage:Ie,_support:h(),iterate:$e,getItem:Le,setItem:Fe,removeItem:Ze,clear:et,length:Q,key:Se,keys:Te,dropInstance:ke};function Ye(){return typeof openDatabase=="function"}var Dt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cn="~~local_forage_type~",Bt=/^~~local_forage_type~([^~]+)~/,Mn="__lfsc__:",wn=Mn.length,fn="arbf",_t="blob",sn="si08",gr="ui08",zi="uic8",jn="si16",Vi="si32",pr="ur16",mn="ui32",bn="fl32",Ir="fl64",Bi=wn+fn.length,bs=Object.prototype.toString;function qo(H){var q=H.length*.75,$=H.length,ie,le=0,ee,De,He,Ve;H[H.length-1]==="="&&(q--,H[H.length-2]==="="&&q--);var We=new ArrayBuffer(q),qe=new Uint8Array(We);for(ie=0;ie<$;ie+=4)ee=Dt.indexOf(H[ie]),De=Dt.indexOf(H[ie+1]),He=Dt.indexOf(H[ie+2]),Ve=Dt.indexOf(H[ie+3]),qe[le++]=ee<<2|De>>4,qe[le++]=(De&15)<<4|He>>2,qe[le++]=(He&3)<<6|Ve&63;return We}function Po(H){var q=new Uint8Array(H),$="",ie;for(ie=0;ie<q.length;ie+=3)$+=Dt[q[ie]>>2],$+=Dt[(q[ie]&3)<<4|q[ie+1]>>4],$+=Dt[(q[ie+1]&15)<<2|q[ie+2]>>6],$+=Dt[q[ie+2]&63];return q.length%3===2?$=$.substring(0,$.length-1)+"=":q.length%3===1&&($=$.substring(0,$.length-2)+"=="),$}function ru(H,q){var $="";if(H&&($=bs.call(H)),H&&($==="[object ArrayBuffer]"||H.buffer&&bs.call(H.buffer)==="[object ArrayBuffer]")){var ie,le=Mn;H instanceof ArrayBuffer?(ie=H,le+=fn):(ie=H.buffer,$==="[object Int8Array]"?le+=sn:$==="[object Uint8Array]"?le+=gr:$==="[object Uint8ClampedArray]"?le+=zi:$==="[object Int16Array]"?le+=jn:$==="[object Uint16Array]"?le+=pr:$==="[object Int32Array]"?le+=Vi:$==="[object Uint32Array]"?le+=mn:$==="[object Float32Array]"?le+=bn:$==="[object Float64Array]"?le+=Ir:q(new Error("Failed to get type for BinaryArray"))),q(le+Po(ie))}else if($==="[object Blob]"){var ee=new FileReader;ee.onload=function(){var De=cn+H.type+"~"+Po(this.result);q(Mn+_t+De)},ee.readAsArrayBuffer(H)}else try{q(JSON.stringify(H))}catch(De){console.error("Couldn't convert value into a JSON string: ",H),q(null,De)}}function So(H){if(H.substring(0,wn)!==Mn)return JSON.parse(H);var q=H.substring(Bi),$=H.substring(wn,Bi),ie;if($===_t&&Bt.test(q)){var le=q.match(Bt);ie=le[1],q=q.substring(le[0].length)}var ee=qo(q);switch($){case fn:return ee;case _t:return d([ee],{type:ie});case sn:return new Int8Array(ee);case gr:return new Uint8Array(ee);case zi:return new Uint8ClampedArray(ee);case jn:return new Int16Array(ee);case pr:return new Uint16Array(ee);case Vi:return new Int32Array(ee);case mn:return new Uint32Array(ee);case bn:return new Float32Array(ee);case Ir:return new Float64Array(ee);default:throw new Error("Unkown type: "+$)}}var Ui={serialize:ru,deserialize:So,stringToBuffer:qo,bufferToString:Po};function sl(H,q,$,ie){H.executeSql("CREATE TABLE IF NOT EXISTS "+q.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],$,ie)}function Ac(H){var q=this,$={db:null};if(H)for(var ie in H)$[ie]=typeof H[ie]!="string"?H[ie].toString():H[ie];var le=new g(function(ee,De){try{$.db=openDatabase($.name,String($.version),$.description,$.size)}catch(He){return De(He)}$.db.transaction(function(He){sl(He,$,function(){q._dbInfo=$,ee()},function(Ve,We){De(We)})},De)});return $.serializer=Ui,le}function Xi(H,q,$,ie,le,ee){H.executeSql($,ie,le,function(De,He){He.code===He.SYNTAX_ERR?De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[q.storeName],function(Ve,We){We.rows.length?ee(Ve,He):sl(Ve,q,function(){Ve.executeSql($,ie,le,ee)},ee)},ee):ee(De,He)},ee)}function ks(H,q){var $=this;H=x(H);var ie=new g(function(le,ee){$.ready().then(function(){var De=$._dbInfo;De.db.transaction(function(He){Xi(He,De,"SELECT * FROM "+De.storeName+" WHERE key = ? LIMIT 1",[H],function(Ve,We){var qe=We.rows.length?We.rows.item(0).value:null;qe&&(qe=De.serializer.deserialize(qe)),le(qe)},function(Ve,We){ee(We)})})}).catch(ee)});return v(ie,q),ie}function Os(H,q){var $=this,ie=new g(function(le,ee){$.ready().then(function(){var De=$._dbInfo;De.db.transaction(function(He){Xi(He,De,"SELECT * FROM "+De.storeName,[],function(Ve,We){for(var qe=We.rows,st=qe.length,Nt=0;Nt<st;Nt++){var an=qe.item(Nt),Jt=an.value;if(Jt&&(Jt=De.serializer.deserialize(Jt)),Jt=H(Jt,an.key,Nt+1),Jt!==void 0){le(Jt);return}}le()},function(Ve,We){ee(We)})})}).catch(ee)});return v(ie,q),ie}function Bc(H,q,$,ie){var le=this;H=x(H);var ee=new g(function(De,He){le.ready().then(function(){q===void 0&&(q=null);var Ve=q,We=le._dbInfo;We.serializer.serialize(q,function(qe,st){st?He(st):We.db.transaction(function(Nt){Xi(Nt,We,"INSERT OR REPLACE INTO "+We.storeName+" (key, value) VALUES (?, ?)",[H,qe],function(){De(Ve)},function(an,Jt){He(Jt)})},function(Nt){if(Nt.code===Nt.QUOTA_ERR){if(ie>0){De(Bc.apply(le,[H,Ve,$,ie-1]));return}He(Nt)}})})}).catch(He)});return v(ee,$),ee}function ch(H,q,$){return Bc.apply(this,[H,q,$,1])}function fh(H,q){var $=this;H=x(H);var ie=new g(function(le,ee){$.ready().then(function(){var De=$._dbInfo;De.db.transaction(function(He){Xi(He,De,"DELETE FROM "+De.storeName+" WHERE key = ?",[H],function(){le()},function(Ve,We){ee(We)})})}).catch(ee)});return v(ie,q),ie}function hh(H){var q=this,$=new g(function(ie,le){q.ready().then(function(){var ee=q._dbInfo;ee.db.transaction(function(De){Xi(De,ee,"DELETE FROM "+ee.storeName,[],function(){ie()},function(He,Ve){le(Ve)})})}).catch(le)});return v($,H),$}function Rc(H){var q=this,$=new g(function(ie,le){q.ready().then(function(){var ee=q._dbInfo;ee.db.transaction(function(De){Xi(De,ee,"SELECT COUNT(key) as c FROM "+ee.storeName,[],function(He,Ve){var We=Ve.rows.item(0).c;ie(We)},function(He,Ve){le(Ve)})})}).catch(le)});return v($,H),$}function Mc(H,q){var $=this,ie=new g(function(le,ee){$.ready().then(function(){var De=$._dbInfo;De.db.transaction(function(He){Xi(He,De,"SELECT key FROM "+De.storeName+" WHERE id = ? LIMIT 1",[H+1],function(Ve,We){var qe=We.rows.length?We.rows.item(0).key:null;le(qe)},function(Ve,We){ee(We)})})}).catch(ee)});return v(ie,q),ie}function dh(H){var q=this,$=new g(function(ie,le){q.ready().then(function(){var ee=q._dbInfo;ee.db.transaction(function(De){Xi(De,ee,"SELECT key FROM "+ee.storeName,[],function(He,Ve){for(var We=[],qe=0;qe<Ve.rows.length;qe++)We.push(Ve.rows.item(qe).key);ie(We)},function(He,Ve){le(Ve)})})}).catch(le)});return v($,H),$}function iu(H){return new g(function(q,$){H.transaction(function(ie){ie.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(le,ee){for(var De=[],He=0;He<ee.rows.length;He++)De.push(ee.rows.item(He).name);q({db:H,storeNames:De})},function(le,ee){$(ee)})},function(ie){$(ie)})})}function ou(H,q){q=E.apply(this,arguments);var $=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||$.name,H.storeName=H.storeName||$.storeName);var ie=this,le;return H.name?le=new g(function(ee){var De;H.name===$.name?De=ie._dbInfo.db:De=openDatabase(H.name,"","",0),H.storeName?ee({db:De,storeNames:[H.storeName]}):ee(iu(De))}).then(function(ee){return new g(function(De,He){ee.db.transaction(function(Ve){function We(an){return new g(function(Jt,Et){Ve.executeSql("DROP TABLE IF EXISTS "+an,[],function(){Jt()},function(Pn,Fr){Et(Fr)})})}for(var qe=[],st=0,Nt=ee.storeNames.length;st<Nt;st++)qe.push(We(ee.storeNames[st]));g.all(qe).then(function(){De()}).catch(function(an){He(an)})},function(Ve){He(Ve)})})}):le=g.reject("Invalid arguments"),v(le,q),le}var su={_driver:"webSQLStorage",_initStorage:Ac,_support:Ye(),iterate:Os,getItem:ks,setItem:ch,removeItem:fh,clear:hh,length:Rc,key:Mc,keys:dh,dropInstance:ou};function bc(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function la(H,q){var $=H.name+"/";return H.storeName!==q.storeName&&($+=H.storeName+"/"),$}function al(){var H="_localforage_support_test";try{return localStorage.setItem(H,!0),localStorage.removeItem(H),!1}catch{return!0}}function ul(){return!al()||localStorage.length>0}function kc(H){var q=this,$={};if(H)for(var ie in H)$[ie]=H[ie];return $.keyPrefix=la(H,q._defaultConfig),ul()?(q._dbInfo=$,$.serializer=Ui,g.resolve()):g.reject()}function $0(H){var q=this,$=q.ready().then(function(){for(var ie=q._dbInfo.keyPrefix,le=localStorage.length-1;le>=0;le--){var ee=localStorage.key(le);ee.indexOf(ie)===0&&localStorage.removeItem(ee)}});return v($,H),$}function W0(H,q){var $=this;H=x(H);var ie=$.ready().then(function(){var le=$._dbInfo,ee=localStorage.getItem(le.keyPrefix+H);return ee&&(ee=le.serializer.deserialize(ee)),ee});return v(ie,q),ie}function z0(H,q){var $=this,ie=$.ready().then(function(){for(var le=$._dbInfo,ee=le.keyPrefix,De=ee.length,He=localStorage.length,Ve=1,We=0;We<He;We++){var qe=localStorage.key(We);if(qe.indexOf(ee)===0){var st=localStorage.getItem(qe);if(st&&(st=le.serializer.deserialize(st)),st=H(st,qe.substring(De),Ve++),st!==void 0)return st}}});return v(ie,q),ie}function Is(H,q){var $=this,ie=$.ready().then(function(){var le=$._dbInfo,ee;try{ee=localStorage.key(H)}catch{ee=null}return ee&&(ee=ee.substring(le.keyPrefix.length)),ee});return v(ie,q),ie}function Oc(H){var q=this,$=q.ready().then(function(){for(var ie=q._dbInfo,le=localStorage.length,ee=[],De=0;De<le;De++){var He=localStorage.key(De);He.indexOf(ie.keyPrefix)===0&&ee.push(He.substring(ie.keyPrefix.length))}return ee});return v($,H),$}function gh(H){var q=this,$=q.keys().then(function(ie){return ie.length});return v($,H),$}function V0(H,q){var $=this;H=x(H);var ie=$.ready().then(function(){var le=$._dbInfo;localStorage.removeItem(le.keyPrefix+H)});return v(ie,q),ie}function ph(H,q,$){var ie=this;H=x(H);var le=ie.ready().then(function(){q===void 0&&(q=null);var ee=q;return new g(function(De,He){var Ve=ie._dbInfo;Ve.serializer.serialize(q,function(We,qe){if(qe)He(qe);else try{localStorage.setItem(Ve.keyPrefix+H,We),De(ee)}catch(st){(st.name==="QuotaExceededError"||st.name==="NS_ERROR_DOM_QUOTA_REACHED")&&He(st),He(st)}})})});return v(le,$),le}function mh(H,q){if(q=E.apply(this,arguments),H=typeof H!="function"&&H||{},!H.name){var $=this.config();H.name=H.name||$.name,H.storeName=H.storeName||$.storeName}var ie=this,le;return H.name?le=new g(function(ee){H.storeName?ee(la(H,ie._defaultConfig)):ee(H.name+"/")}).then(function(ee){for(var De=localStorage.length-1;De>=0;De--){var He=localStorage.key(De);He.indexOf(ee)===0&&localStorage.removeItem(He)}}):le=g.reject("Invalid arguments"),v(le,q),le}var vh={_driver:"localStorageWrapper",_initStorage:kc,_support:bc(),iterate:z0,getItem:W0,setItem:ph,removeItem:V0,clear:$0,length:gh,key:Is,keys:Oc,dropInstance:mh},yh=function(q,$){return q===$||typeof q=="number"&&typeof $=="number"&&isNaN(q)&&isNaN($)},ll=function(q,$){for(var ie=q.length,le=0;le<ie;){if(yh(q[le],$))return!0;le++}return!1},wh=Array.isArray||function(H){return Object.prototype.toString.call(H)==="[object Array]"},Cn={},Ch={},Zo={INDEXEDDB:vt,WEBSQL:su,LOCALSTORAGE:vh},xh=[Zo.INDEXEDDB._driver,Zo.WEBSQL._driver,Zo.LOCALSTORAGE._driver],Qo=["dropInstance"],cl=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Qo),Ic={description:"",driver:xh.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function fl(H,q){H[q]=function(){var $=arguments;return H.ready().then(function(){return H[q].apply(H,$)})}}function mi(){for(var H=1;H<arguments.length;H++){var q=arguments[H];if(q)for(var $ in q)q.hasOwnProperty($)&&(wh(q[$])?arguments[0][$]=q[$].slice():arguments[0][$]=q[$])}return arguments[0]}var U0=function(){function H(q){s(this,H);for(var $ in Zo)if(Zo.hasOwnProperty($)){var ie=Zo[$],le=ie._driver;this[$]=le,Cn[le]||this.defineDriver(ie)}this._defaultConfig=mi({},Ic),this._config=mi({},this._defaultConfig,q),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return H.prototype.config=function($){if((typeof $>"u"?"undefined":o($))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ie in $){if(ie==="storeName"&&($[ie]=$[ie].replace(/\W/g,"_")),ie==="version"&&typeof $[ie]!="number")return new Error("Database version must be a number.");this._config[ie]=$[ie]}return"driver"in $&&$.driver?this.setDriver(this._config.driver):!0}else return typeof $=="string"?this._config[$]:this._config},H.prototype.defineDriver=function($,ie,le){var ee=new g(function(De,He){try{var Ve=$._driver,We=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!$._driver){He(We);return}for(var qe=cl.concat("_initStorage"),st=0,Nt=qe.length;st<Nt;st++){var an=qe[st],Jt=!ll(Qo,an);if((Jt||$[an])&&typeof $[an]!="function"){He(We);return}}var Et=function(){for(var Jo=function(uu){return function(){var es=new Error("Method "+uu+" is not implemented by the current driver"),To=g.reject(es);return v(To,arguments[arguments.length-1]),To}},hl=0,Fc=Qo.length;hl<Fc;hl++){var au=Qo[hl];$[au]||($[au]=Jo(au))}};Et();var Pn=function(Jo){Cn[Ve]&&console.info("Redefining LocalForage driver: "+Ve),Cn[Ve]=$,Ch[Ve]=Jo,De()};"_support"in $?$._support&&typeof $._support=="function"?$._support().then(Pn,He):Pn(!!$._support):Pn(!0)}catch(Fr){He(Fr)}});return y(ee,ie,le),ee},H.prototype.driver=function(){return this._driver||null},H.prototype.getDriver=function($,ie,le){var ee=Cn[$]?g.resolve(Cn[$]):g.reject(new Error("Driver not found."));return y(ee,ie,le),ee},H.prototype.getSerializer=function($){var ie=g.resolve(Ui);return y(ie,$),ie},H.prototype.ready=function($){var ie=this,le=ie._driverSet.then(function(){return ie._ready===null&&(ie._ready=ie._initDriver()),ie._ready});return y(le,$,$),le},H.prototype.setDriver=function($,ie,le){var ee=this;wh($)||($=[$]);var De=this._getSupportedDrivers($);function He(){ee._config.driver=ee.driver()}function Ve(st){return ee._extend(st),He(),ee._ready=ee._initStorage(ee._config),ee._ready}function We(st){return function(){var Nt=0;function an(){for(;Nt<st.length;){var Jt=st[Nt];return Nt++,ee._dbInfo=null,ee._ready=null,ee.getDriver(Jt).then(Ve).catch(an)}He();var Et=new Error("No available storage method found.");return ee._driverSet=g.reject(Et),ee._driverSet}return an()}}var qe=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=qe.then(function(){var st=De[0];return ee._dbInfo=null,ee._ready=null,ee.getDriver(st).then(function(Nt){ee._driver=Nt._driver,He(),ee._wrapLibraryMethodsWithReady(),ee._initDriver=We(De)})}).catch(function(){He();var st=new Error("No available storage method found.");return ee._driverSet=g.reject(st),ee._driverSet}),y(this._driverSet,ie,le),this._driverSet},H.prototype.supports=function($){return!!Ch[$]},H.prototype._extend=function($){mi(this,$)},H.prototype._getSupportedDrivers=function($){for(var ie=[],le=0,ee=$.length;le<ee;le++){var De=$[le];this.supports(De)&&ie.push(De)}return ie},H.prototype._wrapLibraryMethodsWithReady=function(){for(var $=0,ie=cl.length;$<ie;$++)fl(this,cl[$])},H.prototype.createInstance=function($){return new H($)},H}(),Ri=new U0;r.exports=Ri},{3:3}]},{},[4])(4)})}(V5)),V5.exports}var OJ=kJ();const h0=vc(OJ),xE="drawnix-local-data",U5="main_board_content";h0.config({name:"Drawnix",storeName:"drawnix_store",driver:[h0.INDEXEDDB,h0.LOCALSTORAGE]});function IJ(){const[e,t]=j.useState({children:[]});return j.useEffect(()=>{(async()=>{const r=await h0.getItem(U5);if(r){t(r);return}const i=localStorage.getItem(xE);if(i){const o=JSON.parse(i);t(o),await h0.setItem(U5,o),localStorage.removeItem(xE);return}t({children:gb})})()},[]),b.jsx(bJ,{value:e.children,viewport:e.viewport,theme:e.theme,onChange:n=>{h0.setItem(U5,n)},afterInit:n=>{console.log("board initialized"),console.log("add __drawnix__web__debug_log to window, so you can call add log anywhere, like: window.__drawnix__web__console('some thing')"),window.__drawnix__web__console=r=>{FJ(n,r)}}})}const FJ=(e,t)=>{const n=I.getBoardContainer(e).closest(".drawnix");let r=n.querySelector(".drawnix-console");r||(r=document.createElement("div"),r.classList.add("drawnix-console"),n.append(r));const i=document.createElement("div");i.innerHTML=t,r.append(i)},LJ=z3.createRoot(document.getElementById("root"));LJ.render(b.jsx(j.StrictMode,{children:b.jsx(IJ,{})}));export{Vr as A,pt as B,hv as D,gt as F,Je as M,Ke as N,wo as P,M as R,Ss as S,bB as _,Rp as a,eu as b,qI as c,k8 as d,a0 as e,WW as f,vc as g,CT as h,Fn as i,lt as j,En as k,Tv as l,Sp as m,Dv as n,Cs as o,Mm as p};
